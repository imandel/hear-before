parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Kb8R":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof t&&t.amd?t(i):(e=e||self).mapboxgl=i()}(this,function(){"use strict";var t,e,i;function r(r,n){if(t)if(e){var s="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",o={};t(o),i=n(o),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}else e=n;else t=n}return r(0,function(t){var e=i;function i(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=i,this.p2y=r}i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var i,r,n,s,o;for(void 0===e&&(e=1e-6),n=t,o=0;o<8;o++){if(s=this.sampleCurveX(n)-t,Math.abs(s)<e)return n;var a=this.sampleCurveDerivativeX(n);if(Math.abs(a)<1e-6)break;n-=s/a}if((n=t)<(i=0))return i;if(n>(r=1))return r;for(;i<r;){if(s=this.sampleCurveX(n),Math.abs(s-t)<e)return n;t>s?i=n:r=n,n=.5*(r-i)+i}return n},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var r=n;function n(t,e){this.x=t,this.y=e}n.prototype={clone:function(){return new n(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=r,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),n=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-r*(this.y-e.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(t){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):t};var s="undefined"!=typeof self?self:{};function o(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!o(t[i],e[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!o(t[i],e[i]))return!1;return!0}return t===e}const a=Math.pow(2,53)-1,l=Math.PI/180,c=180/Math.PI;function h(t){return t*l}function u(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}function d(t,i,r,n){const s=new e(t,i,r,n);return function(t){return s.solve(t)}}const p=d(.25,.1,.25,1);function m(t,e,i){return Math.min(i,Math.max(e,t))}function f(t,e,i){const r=i-e,n=((t-e)%r+r)%r+e;return n===e?i:n}function _(t,e,i){if(!t.length)return i(null,[]);let r=t.length;const n=new Array(t.length);let s=null;t.forEach((t,o)=>{e(t,(t,e)=>{t&&(s=t),n[o]=e,0==--r&&i(s,n)})})}function g(t){const e=[];for(const i in t)e.push(t[i]);return e}function y(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}let x=1;function v(){return x++}function b(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function w(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function T(t,e){t.forEach(t=>{e[t]&&(e[t]=e[t].bind(e))})}function E(t,e){return-1!==t.indexOf(e,t.length-e.length)}function S(t,e,i){const r={};for(const n in t)r[n]=e.call(i||this,t[n],n,t);return r}function I(t,e,i){const r={};for(const n in t)e.call(i||this,t[n],n,t)&&(r[n]=t[n]);return r}function A(t){return Array.isArray(t)?t.map(A):"object"==typeof t&&t?S(t,A):t}const C={};function M(t){C[t]||("undefined"!=typeof console&&console.warn(t),C[t]=!0)}function z(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function P(t){let e=0;for(let i,r,n=0,s=t.length,o=s-1;n<s;o=n++)i=t[n],e+=((r=t[o]).x-i.x)*(i.y+r.y);return e}function k(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function D(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(t,i,r,n)=>{const s=r||n;return e[i]=!s||s.toLowerCase(),""}),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let L,R,B=null;function F(t){if(null==B){const e=t.navigator?t.navigator.userAgent:null;B=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return B}function O(t){try{const e=s[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}let U,V=!1;const N={now:()=>void 0!==U?U:s.performance.now(),setErrorState(){V=!0},setNow(t){U=t},restoreNow(){U=void 0},frame(t){if(V)return{cancel:()=>{}};const e=s.requestAnimationFrame(t);return{cancel:()=>s.cancelAnimationFrame(e)}},getImageData(t,e=0){const i=s.document.createElement("canvas"),r=i.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:t=>(L||(L=s.document.createElement("a")),L.href=t,L.href),get devicePixelRatio(){return s.devicePixelRatio},get prefersReducedMotion(){return!!s.matchMedia&&(null==R&&(R=s.matchMedia("(prefers-reduced-motion: reduce)")),R.matches)}};let $;const q={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==$){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{$=t}catch(e){$=t}}return $},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Z={supported:!1,testSupport:function(t){!X&&j&&(W?H(t):G=t)}};let G,j,X=!1,W=!1;function H(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,j),t.isContextLost())return;Z.supported=!0}catch(t){}t.deleteTexture(e),X=!0}s.document&&((j=s.document.createElement("img")).onload=function(){G&&H(G),G=null,W=!0},j.onerror=function(){X=!0,G=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const K="01";function Y(t){return 0===t.indexOf("mapbox:")}function J(t){return q.API_URL_REGEX.test(t)}const Q=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function tt(t){const e=t.match(Q);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function et(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}function it(t){if(!t)return null;const e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(s.atob(e[1]).split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(t){return null}}class rt{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const e=it(q.ACCESS_TOKEN);let i="";return i=e&&e.u?s.btoa(encodeURIComponent(e.u).replace(/%([0-9A-F]{2})/g,(t,e)=>String.fromCharCode(Number("0x"+e)))):q.ACCESS_TOKEN||"",t?`mapbox.eventData.${t}:${i}`:`mapbox.eventData:${i}`}fetchEventData(){const t=O("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{const r=s.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));const n=s.localStorage.getItem(i);n&&(this.anonId=n)}catch(t){M("Unable to read from LocalStorage")}}saveEventData(){const t=O("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{s.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&s.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){M("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,e,i,r){if(!q.EVENTS_URL)return;const n=tt(q.EVENTS_URL);n.params.push(`access_token=${r||q.ACCESS_TOKEN||""}`);const s={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.1.1",skuId:K,userId:this.anonId},o=e?y(s,e):s,a={url:et(n),headers:{"Content-Type":"text/plain"},body:JSON.stringify([o])};this.pendingRequest=Et(a,t=>{this.pendingRequest=null,i(t),this.saveEventData(),this.processRequests(r)})}queueRequest(t,e){this.queue.push(t),this.processRequests(e)}}const nt=new class extends rt{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){q.EVENTS_URL&&q.ACCESS_TOKEN&&Array.isArray(t)&&t.some(t=>Y(t)||J(t))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=it(q.ACCESS_TOKEN),i=e?e.u:q.ACCESS_TOKEN;let r=i!==this.eventData.tokenU;w(this.anonId)||(this.anonId=b(),r=!0);const n=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(n),i=(n-this.eventData.lastSuccess)/864e5;r=r||i>=1||i<-1||t.getDate()!==e.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(n,{"enabled.telemetry":!1},t=>{t||(this.eventData.lastSuccess=n,this.eventData.tokenU=i)},t)}},st=nt.postTurnstileEvent.bind(nt),ot=new class extends rt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,i,r){this.skuToken=e,this.errorCb=r,q.EVENTS_URL&&(i||q.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},i):this.errorCb(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:i}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),w(this.anonId)||(this.anonId=b()),this.postEvent(i,{skuToken:this.skuToken},t=>{t?this.errorCb(t):e&&(this.success[e]=!0)},t))}},at=ot.postMapLoadEvent.bind(ot),lt=new class extends rt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,i,r){if(!q.API_URL||!q.SESSION_PATH)return;const n=tt(q.API_URL+q.SESSION_PATH);n.params.push(`sku=${e||""}`),n.params.push(`access_token=${r||q.ACCESS_TOKEN||""}`);const s={url:et(n),headers:{"Content-Type":"text/plain"}};this.pendingRequest=St(s,t=>{this.pendingRequest=null,i(t),this.saveEventData(),this.processRequests(r)})}getSessionAPI(t,e,i,r){this.skuToken=e,this.errorCb=r,q.SESSION_PATH&&q.API_URL&&(i||q.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},i):this.errorCb(new Error("NO_ACCESS_TOKEN")))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:i}=this.queue.shift();e&&this.success[e]||this.getSession(i,this.skuToken,t=>{t?this.errorCb(t):e&&(this.success[e]=!0)},t)}},ct=lt.getSessionAPI.bind(lt);let ht,ut,dt=500,pt=50;function mt(){s.caches&&!ht&&(ht=s.caches.open("mapbox-tiles"))}function ft(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}let _t,gt=1/0;function yt(){return null==_t&&(_t=s.OffscreenCanvas&&new s.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof s.createImageBitmap),_t}const xt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(xt);class vt extends Error{constructor(t,e,i){401===e&&J(i)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=i}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const bt=k()?()=>self.worker&&self.worker.referrer:()=>("blob:"===s.location.protocol?s.parent:s).location.href,wt=function(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(bt())&&!/^\w+:/.test(i))){if(s.fetch&&s.Request&&s.AbortController&&s.Request.prototype.hasOwnProperty("signal"))return function(t,e){const i=new s.AbortController,r=new s.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:bt(),signal:i.signal});let n=!1,o=!1;const a=(l=r.url).indexOf("sku=")>0&&J(l);var l;"json"===t.type&&r.headers.set("Accept","application/json");const c=(i,n,l)=>{if(o)return;if(i&&"SecurityError"!==i.message&&M(i),n&&l)return h(n);const c=Date.now();s.fetch(r).then(i=>{if(i.ok){const t=a?i.clone():null;return h(i,t,c)}return e(new vt(i.statusText,i.status,t.url))}).catch(t=>{20!==t.code&&e(new Error(t.message))})},h=(i,a,l)=>{("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then(t=>{o||(a&&l&&function(t,e,i){if(mt(),!ht)return;const r={status:e.status,statusText:e.statusText,headers:new s.Headers};e.headers.forEach((t,e)=>r.headers.set(e,t));const n=D(e.headers.get("Cache-Control")||"");n["no-store"]||(n["max-age"]&&r.headers.set("Expires",new Date(i+1e3*n["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-i<42e4||function(t,e){if(void 0===ut)try{new Response(new ReadableStream),ut=!0}catch(t){ut=!1}ut?e(t.body):t.blob().then(e)}(e,e=>{const i=new s.Response(e,r);mt(),ht&&ht.then(e=>e.put(ft(t.url),i)).catch(t=>M(t.message))}))}(r,a,l),n=!0,e(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))}).catch(t=>{o||e(new Error(t.message))})};return a?function(t,e){if(mt(),!ht)return e(null);const i=ft(t.url);ht.then(t=>{t.match(i).then(r=>{const n=function(t){if(!t)return!1;const e=new Date(t.headers.get("Expires")||0),i=D(t.headers.get("Cache-Control")||"");return e>Date.now()&&!i["no-cache"]}(r);t.delete(i),n&&t.put(i,r.clone()),e(null,r,n)}).catch(e)}).catch(e)}(r,c):c(null,null),{cancel:()=>{o=!0,n||i.abort()}}}(t,e);if(k()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(t,e){const i=new s.XMLHttpRequest;i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer");for(const r in t.headers)i.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=(()=>{e(new Error(i.statusText))}),i.onload=(()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let r=i.response;if("json"===t.type)try{r=JSON.parse(i.response)}catch(t){return e(t)}e(null,r,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else e(new vt(i.statusText,i.status,t.url))}),i.send(t.body),{cancel:()=>i.abort()}}(t,e)},Tt=function(t,e){return wt(y(t,{type:"arrayBuffer"}),e)},Et=function(t,e){return wt(y(t,{method:"POST"}),e)},St=function(t,e){return wt(y(t,{method:"GET"}),e)};function It(t){const e=s.document.createElement("a");return e.href=t,e.protocol===s.document.location.protocol&&e.host===s.document.location.host}const At="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ct,Mt;Ct=[],Mt=0;const zt=function(t,e){if(Z.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Mt>=q.MAX_PARALLEL_IMAGE_REQUESTS){const i={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Ct.push(i),i}Mt++;let i=!1;const r=()=>{if(!i)for(i=!0,Mt--;Ct.length&&Mt<q.MAX_PARALLEL_IMAGE_REQUESTS;){const t=Ct.shift(),{requestParameters:e,callback:i,cancelled:r}=t;r||(t.cancel=zt(e,i).cancel)}},n=Tt(t,(t,i,n,o)=>{r(),t?e(t):i&&(yt()?function(t,e){const i=new s.Blob([new Uint8Array(t)],{type:"image/png"});s.createImageBitmap(i).then(t=>{e(null,t)}).catch(t=>{e(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(i,e):function(t,e,i,r){const n=new s.Image,o=s.URL;n.onload=(()=>{e(null,n),o.revokeObjectURL(n.src),n.onload=null,s.requestAnimationFrame(()=>{n.src=At})}),n.onerror=(()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")));const a=new s.Blob([new Uint8Array(t)],{type:"image/png"});n.cacheControl=i,n.expires=r,n.src=t.byteLength?o.createObjectURL(a):At}(i,e,n,o))});return{cancel:()=>{n.cancel(),r()}}};function Pt(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function kt(t,e,i){if(i&&i[t]){const r=i[t].indexOf(e);-1!==r&&i[t].splice(r,1)}}class Dt{constructor(t,e={}){y(this,e),this.type=t}}class Lt extends Dt{constructor(t,e={}){super("error",y({error:t},e))}}class Rt{on(t,e){return this._listeners=this._listeners||{},Pt(t,e,this._listeners),this}off(t,e){return kt(t,e,this._listeners),kt(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},Pt(t,e,this._oneTimeListeners),this):new Promise(e=>this.once(t,e))}fire(t,e){"string"==typeof t&&(t=new Dt(t,e||{}));const i=t.type;if(this.listens(i)){t.target=this;const e=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];for(const i of e)i.call(this,t);const r=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];for(const s of r)kt(i,s,this._oneTimeListeners),s.call(this,t);const n=this._eventedParent;n&&(y(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),n.fire(t))}else t instanceof Lt&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var Bt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Ft{constructor(t,e,i,r){this.message=(t?`${t}: `:"")+i,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)}}function Ot(t){const e=t.value;return e?[new Ft(t.key,e,"constants have been deprecated as of v8")]:[]}function Ut(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}function Vt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Nt(t){if(Array.isArray(t))return t.map(Nt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const i in t)e[i]=Nt(t[i]);return e}return Vt(t)}class $t extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class qt{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[i,r]of e)this.bindings[i]=r}concat(t){return new qt(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Zt={kind:"null"},Gt={kind:"number"},jt={kind:"string"},Xt={kind:"boolean"},Wt={kind:"color"},Ht={kind:"object"},Kt={kind:"value"},Yt={kind:"collator"},Jt={kind:"formatted"},Qt={kind:"resolvedImage"};function te(t,e){return{kind:"array",itemType:t,N:e}}function ee(t){if("array"===t.kind){const e=ee(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const ie=[Zt,Gt,jt,Xt,Wt,Jt,Ht,te(Kt),Qt];function re(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!re(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of ie)if(!re(t,e))return null}return`Expected ${ee(t)} but found ${ee(e)} instead.`}function ne(t,e){return e.some(e=>e.kind===t.kind)}function se(t,e){return e.some(e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t)}function oe(t,e){return t(e={exports:{}},e.exports),e.exports}var ae=oe(function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function n(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function s(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function o(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,a=t.replace(/ /g,"").toLowerCase();if(a in i)return i[a].slice();if("#"===a[0])return 4===a.length?(e=parseInt(a.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===a.length&&(e=parseInt(a.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=a.indexOf("("),c=a.indexOf(")");if(-1!==l&&c+1===a.length){var h=a.substr(0,l),u=a.substr(l+1,c-(l+1)).split(","),d=1;switch(h){case"rgba":if(4!==u.length)return null;d=s(u.pop());case"rgb":return 3!==u.length?null:[n(u[0]),n(u[1]),n(u[2]),d];case"hsla":if(4!==u.length)return null;d=s(u.pop());case"hsl":if(3!==u.length)return null;var p=(parseFloat(u[0])%360+360)%360/360,m=s(u[1]),f=s(u[2]),_=f<=.5?f*(m+1):f+m-f*m,g=2*f-_;return[r(255*o(g,_,p+1/3)),r(255*o(g,_,p)),r(255*o(g,_,p-1/3)),d];default:return null}}return null}}catch(t){}}).parseCSSColor;class le{constructor(t,e,i,r=1){this.r=t,this.g=e,this.b=i,this.a=r}static parse(t){if(!t)return;if(t instanceof le)return t;if("string"!=typeof t)return;const e=ae(t);return e?new le(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,i,r]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(i)},${r})`}toArray(){const{r:t,g:e,b:i,a:r}=this;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*i/r,r]}}le.black=new le(0,0,0,1),le.white=new le(1,1,1,1),le.transparent=new le(0,0,0,0),le.red=new le(1,0,0,1),le.blue=new le(0,0,1,1);class ce{constructor(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class he{constructor(t,e,i,r,n){this.text=t,this.image=e,this.scale=i,this.fontStack=r,this.textColor=n}}class ue{constructor(t){this.sections=t}static fromString(t){return new ue([new he(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof ue?t:ue.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const i={};e.fontStack&&(i["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(i["font-scale"]=e.scale),e.textColor&&(i["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(i)}return t}}class de{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new de({name:t,available:!1}):null}serialize(){return["image",this.name]}}function pe(t,e,i,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[t,e,i,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[t,e,i,r]:[t,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function me(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof le)return!0;if(t instanceof ce)return!0;if(t instanceof ue)return!0;if(t instanceof de)return!0;if(Array.isArray(t)){for(const e of t)if(!me(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!me(t[e]))return!1;return!0}return!1}function fe(t){if(null===t)return Zt;if("string"==typeof t)return jt;if("boolean"==typeof t)return Xt;if("number"==typeof t)return Gt;if(t instanceof le)return Wt;if(t instanceof ce)return Yt;if(t instanceof ue)return Jt;if(t instanceof de)return Qt;if(Array.isArray(t)){const e=t.length;let i;for(const r of t){const t=fe(r);if(i){if(i===t)continue;i=Kt;break}i=t}return te(i||Kt,e)}return Ht}function _e(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof le||t instanceof ue||t instanceof de?t.toString():JSON.stringify(t)}class ge{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!me(t[1]))return e.error("invalid value");const i=t[1];let r=fe(i);const n=e.expectedType;return"array"!==r.kind||0!==r.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(r=n),new ge(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof le?["rgba"].concat(this.value.toArray()):this.value instanceof ue?this.value.serialize():this.value}}class ye{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const xe={string:jt,number:Gt,boolean:Xt,object:Ht};class ve{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i,r=1;const n=t[0];if("array"===n){let n,s;if(t.length>2){const i=t[1];if("string"!=typeof i||!(i in xe)||"object"===i)return e.error('The item type argument of "array" must be one of string, number, boolean',1);n=xe[i],r++}else n=Kt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);s=t[2],r++}i=te(n,s)}else i=xe[n];const s=[];for(;r<t.length;r++){const i=e.parse(t[r],r,Kt);if(!i)return null;s.push(i)}return new ve(i,s)}evaluate(t){for(let e=0;e<this.args.length;e++){const i=this.args[e].evaluate(t);if(!re(this.type,fe(i)))return i;if(e===this.args.length-1)throw new ye(`Expected value to be of type ${ee(this.type)}, but found ${ee(fe(i))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);const r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map(t=>t.serialize()))}}class be{constructor(t){this.type=Jt,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");const r=[];let n=!1;for(let s=1;s<=t.length-1;++s){const i=t[s];if(n&&"object"==typeof i&&!Array.isArray(i)){n=!1;let t=null;if(i["font-scale"]&&!(t=e.parse(i["font-scale"],1,Gt)))return null;let s=null;if(i["text-font"]&&!(s=e.parse(i["text-font"],1,te(jt))))return null;let o=null;if(i["text-color"]&&!(o=e.parse(i["text-color"],1,Wt)))return null;const a=r[r.length-1];a.scale=t,a.font=s,a.textColor=o}else{const i=e.parse(t[s],1,Kt);if(!i)return null;const o=i.type.kind;if("string"!==o&&"value"!==o&&"null"!==o&&"resolvedImage"!==o)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,r.push({content:i,scale:null,font:null,textColor:null})}}return new be(r)}evaluate(t){return new ue(this.sections.map(e=>{const i=e.content.evaluate(t);return fe(i)===Qt?new he("",i,null,null,null):new he(_e(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const i={};e.scale&&(i["font-scale"]=e.scale.serialize()),e.font&&(i["text-font"]=e.font.serialize()),e.textColor&&(i["text-color"]=e.textColor.serialize()),t.push(i)}return t}}class we{constructor(t){this.type=Qt,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,jt);return i?new we(i):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),i=de.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Te={"to-boolean":Xt,"to-color":Wt,"to-number":Gt,"to-string":jt};class Ee{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");const r=Te[i],n=[];for(let s=1;s<t.length;s++){const i=e.parse(t[s],s,Kt);if(!i)return null;n.push(i)}return new Ee(r,n)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,i;for(const r of this.args){if(e=r.evaluate(t),i=null,e instanceof le)return e;if("string"==typeof e){const i=t.parseColor(e);if(i)return i}else if(Array.isArray(e)&&!(i=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:pe(e[0],e[1],e[2],e[3])))return new le(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ye(i||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const i of this.args){if(null===(e=i.evaluate(t)))return 0;const r=Number(e);if(!isNaN(r))return r}throw new ye(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?ue.fromString(_e(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?de.fromString(_e(this.args[0].evaluate(t))):_e(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if("formatted"===this.type.kind)return new be([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new we(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(e=>{t.push(e.serialize())}),t}}const Se=["Unknown","Point","LineString","Polygon"];class Ie{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Se[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=le.parse(t)),e}}class Ae{constructor(t,e,i,r){this.name=t,this.type=e,this._evaluate=i,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,e){const i=t[0],r=Ae.definitions[i];if(!r)return e.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const n=Array.isArray(r)?r[0]:r.type,s=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,o=s.filter(([e])=>!Array.isArray(e)||e.length===t.length-1);let a=null;for(const[l,c]of o){a=new He(e.registry,e.path,null,e.scope);const r=[];let s=!1;for(let e=1;e<t.length;e++){const i=t[e],n=Array.isArray(l)?l[e-1]:l.type,o=a.parse(i,1+r.length,n);if(!o){s=!0;break}r.push(o)}if(!s)if(Array.isArray(l)&&l.length!==r.length)a.error(`Expected ${l.length} arguments, but found ${r.length} instead.`);else{for(let t=0;t<r.length;t++){const e=Array.isArray(l)?l[t]:l.type,i=r[t];a.concat(t+1).checkSubtype(e,i.type)}if(0===a.errors.length)return new Ae(i,n,c,r)}}if(1===o.length)e.errors.push(...a.errors);else{const i=(o.length?o:s).map(([t])=>{return e=t,Array.isArray(e)?`(${e.map(ee).join(", ")})`:`(${ee(e.type)}...)`;var e}).join(" | "),r=[];for(let n=1;n<t.length;n++){const i=e.parse(t[n],1+r.length);if(!i)return null;r.push(ee(i.type))}e.error(`Expected arguments of type ${i}, but found (${r.join(", ")}) instead.`)}return null}static register(t,e){Ae.definitions=e;for(const i in e)t[i]=Ae}}class Ce{constructor(t,e,i){this.type=Yt,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");const r=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Xt);if(!r)return null;const n=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Xt);if(!n)return null;let s=null;return i.locale&&!(s=e.parse(i.locale,1,jt))?null:new Ce(r,n,s)}evaluate(t){return new ce(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}function Me(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function ze(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Pe(t,e){const i=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,n=Math.pow(2,e.z);return[Math.round(i*n*8192),Math.round(r*n*8192)]}function ke(t,e,i){const r=t[0]-e[0],n=t[1]-e[1],s=t[0]-i[0],o=t[1]-i[1];return r*o-s*n==0&&r*s<=0&&n*o<=0}function De(t,e){let i=!1;for(let o=0,a=e.length;o<a;o++){const a=e[o];for(let e=0,o=a.length;e<o-1;e++){if(ke(t,a[e],a[e+1]))return!1;(n=a[e])[1]>(r=t)[1]!=(s=a[e+1])[1]>r[1]&&r[0]<(s[0]-n[0])*(r[1]-n[1])/(s[1]-n[1])+n[0]&&(i=!i)}}var r,n,s;return i}function Le(t,e){for(let i=0;i<e.length;i++)if(De(t,e[i]))return!0;return!1}function Re(t,e,i,r){const n=r[0]-i[0],s=r[1]-i[1],o=(t[0]-i[0])*s-n*(t[1]-i[1]),a=(e[0]-i[0])*s-n*(e[1]-i[1]);return o>0&&a<0||o<0&&a>0}function Be(t,e,i){for(const c of i)for(let i=0;i<c.length-1;++i)if(0!=(a=[(o=c[i+1])[0]-(s=c[i])[0],o[1]-s[1]])[0]*(l=[(n=e)[0]-(r=t)[0],n[1]-r[1]])[1]-a[1]*l[0]&&Re(r,n,s,o)&&Re(s,o,r,n))return!0;var r,n,s,o,a,l;return!1}function Fe(t,e){for(let i=0;i<t.length;++i)if(!De(t[i],e))return!1;for(let i=0;i<t.length-1;++i)if(Be(t[i],t[i+1],e))return!1;return!0}function Oe(t,e){for(let i=0;i<e.length;i++)if(Fe(t,e[i]))return!0;return!1}function Ue(t,e,i){const r=[];for(let n=0;n<t.length;n++){const s=[];for(let r=0;r<t[n].length;r++){const o=Pe(t[n][r],i);Me(e,o),s.push(o)}r.push(s)}return r}function Ve(t,e,i){const r=[];for(let n=0;n<t.length;n++){const s=Ue(t[n],e,i);r.push(s)}return r}function Ne(t,e,i,r){if(t[0]<i[0]||t[0]>i[2]){const e=.5*r;let n=t[0]-i[0]>e?-r:i[0]-t[0]>e?r:0;0===n&&(n=t[0]-i[2]>e?-r:i[2]-t[0]>e?r:0),t[0]+=n}Me(e,t)}function $e(t,e,i,r){const n=8192*Math.pow(2,r.z),s=[8192*r.x,8192*r.y],o=[];for(const a of t)for(const t of a){const r=[t.x+s[0],t.y+s[1]];Ne(r,e,i,n),o.push(r)}return o}function qe(t,e,i,r){const n=8192*Math.pow(2,r.z),s=[8192*r.x,8192*r.y],o=[];for(const l of t){const t=[];for(const i of l){const r=[i.x+s[0],i.y+s[1]];Me(e,r),t.push(r)}o.push(t)}if(e[2]-e[0]<=n/2){(a=e)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const t of o)for(const r of t)Ne(r,e,i,n)}var a;return o}class Ze{constructor(t,e){this.type=Xt,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(me(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const i=e.features[t].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Ze(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new Ze(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new Ze(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){const s=Ue(e.coordinates,r,n),o=$e(t.geometry(),i,r,n);if(!ze(i,r))return!1;for(const t of o)if(!De(t,s))return!1}if("MultiPolygon"===e.type){const s=Ve(e.coordinates,r,n),o=$e(t.geometry(),i,r,n);if(!ze(i,r))return!1;for(const t of o)if(!Le(t,s))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=t.canonicalID();if("Polygon"===e.type){const s=Ue(e.coordinates,r,n),o=qe(t.geometry(),i,r,n);if(!ze(i,r))return!1;for(const t of o)if(!Fe(t,s))return!1}if("MultiPolygon"===e.type){const s=Ve(e.coordinates,r,n),o=qe(t.geometry(),i,r,n);if(!ze(i,r))return!1;for(const t of o)if(!Oe(t,s))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Ge(t){if(t instanceof Ae){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Ze)return!1;let e=!0;return t.eachChild(t=>{e&&!Ge(t)&&(e=!1)}),e}function je(t){if(t instanceof Ae&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild(t=>{e&&!je(t)&&(e=!1)}),e}function Xe(t,e){if(t instanceof Ae&&e.indexOf(t.name)>=0)return!1;let i=!0;return t.eachChild(t=>{i&&!Xe(t,e)&&(i=!1)}),i}class We{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const i=t[1];return e.scope.has(i)?new We(i,e.scope.get(i)):e.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class He{constructor(t,e=[],i,r=new qt,n=[]){this.registry=t,this.path=e,this.key=e.map(t=>`[${t}]`).join(""),this.scope=r,this.errors=n,this.expectedType=i}parse(t,e,i,r,n={}){return e?this.concat(e,i,r)._parse(t,n):this._parse(t,n)}_parse(t,e){function i(t,e,i){return"assert"===i?new ve(e,[t]):"coerce"===i?new Ee(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const n=this.registry[r];if(n){let r=n.parse(t,this);if(!r)return null;if(this.expectedType){const t=this.expectedType,n=r.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==n.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==n.kind&&"string"!==n.kind){if(this.checkSubtype(t,n))return null}else r=i(r,t,e.typeAnnotation||"coerce");else r=i(r,t,e.typeAnnotation||"assert")}if(!(r instanceof ge)&&"resolvedImage"!==r.type.kind&&function t(e){if(e instanceof We)return t(e.boundExpression);if(e instanceof Ae&&"error"===e.name)return!1;if(e instanceof Ce)return!1;if(e instanceof Ze)return!1;const i=e instanceof Ee||e instanceof ve;let r=!0;return e.eachChild(e=>{r=i?r&&t(e):r&&e instanceof ge}),!!r&&Ge(e)&&Xe(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}(r)){const e=new Ie;try{r=new ge(r.type,r.evaluate(e))}catch(t){return this.error(t.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,i){const r="number"==typeof t?this.path.concat(t):this.path,n=i?this.scope.concat(i):this.scope;return new He(this.registry,r,e||null,n,this.errors)}error(t,...e){const i=`${this.key}${e.map(t=>`[${t}]`).join("")}`;this.errors.push(new $t(i,t))}checkSubtype(t,e){const i=re(t,e);return i&&this.error(i),i}}function Ke(t,e){const i=t.length-1;let r,n,s=0,o=i,a=0;for(;s<=o;)if(r=t[a=Math.floor((s+o)/2)],n=t[a+1],r<=e){if(a===i||e<n)return a;s=a+1}else{if(!(r>e))throw new ye("Input is not a number.");o=a-1}return 0}class Ye{constructor(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[r,n]of i)this.labels.push(r),this.outputs.push(n)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const i=e.parse(t[1],1,Gt);if(!i)return null;const r=[];let n=null;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(let s=1;s<t.length;s+=2){const i=1===s?-1/0:t[s],o=t[s+1],a=s,l=s+1;if("number"!=typeof i)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=i)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const c=e.parse(o,l,n);if(!c)return null;n=n||c.type,r.push([i,c])}return new Ye(n,i,r)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);const n=e.length;return r>=e[n-1]?i[n-1].evaluate(t):i[Ke(e,r)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}function Je(t,e,i){return t*(1-i)+e*i}var Qe=Object.freeze({__proto__:null,number:Je,color:function(t,e,i){return new le(Je(t.r,e.r,i),Je(t.g,e.g,i),Je(t.b,e.b,i),Je(t.a,e.a,i))},array:function(t,e,i){return t.map((t,r)=>Je(t,e[r],i))}});const ti=6/29*3*(6/29),ei=Math.PI/180,ii=180/Math.PI;function ri(t){return t>.008856451679035631?Math.pow(t,1/3):t/ti+4/29}function ni(t){return t>6/29?t*t*t:ti*(t-4/29)}function si(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function oi(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ai(t){const e=oi(t.r),i=oi(t.g),r=oi(t.b),n=ri((.4124564*e+.3575761*i+.1804375*r)/.95047),s=ri((.2126729*e+.7151522*i+.072175*r)/1);return{l:116*s-16,a:500*(n-s),b:200*(s-ri((.0193339*e+.119192*i+.9503041*r)/1.08883)),alpha:t.a}}function li(t){let e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*ni(e),i=.95047*ni(i),r=1.08883*ni(r),new le(si(3.2404542*i-1.5371385*e-.4985314*r),si(-.969266*i+1.8760108*e+.041556*r),si(.0556434*i-.2040259*e+1.0572252*r),t.alpha)}function ci(t,e,i){const r=e-t;return t+i*(r>180||r<-180?r-360*Math.round(r/360):r)}const hi={forward:ai,reverse:li,interpolate:function(t,e,i){return{l:Je(t.l,e.l,i),a:Je(t.a,e.a,i),b:Je(t.b,e.b,i),alpha:Je(t.alpha,e.alpha,i)}}},ui={forward:function(t){const{l:e,a:i,b:r}=ai(t),n=Math.atan2(r,i)*ii;return{h:n<0?n+360:n,c:Math.sqrt(i*i+r*r),l:e,alpha:t.a}},reverse:function(t){const e=t.h*ei,i=t.c;return li({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:ci(t.h,e.h,i),c:Je(t.c,e.c,i),l:Je(t.l,e.l,i),alpha:Je(t.alpha,e.alpha,i)}}};var di=Object.freeze({__proto__:null,lab:hi,hcl:ui});class pi{constructor(t,e,i,r,n){this.type=t,this.operator=e,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[s,o]of n)this.labels.push(s),this.outputs.push(o)}static interpolationFactor(t,i,r,n){let s=0;if("exponential"===t.name)s=mi(i,t.base,r,n);else if("linear"===t.name)s=mi(i,1,r,n);else if("cubic-bezier"===t.name){const o=t.controlPoints;s=new e(o[0],o[1],o[2],o[3]).solve(mi(i,1,r,n))}return s}static parse(t,e){let[i,r,n,...s]=t;if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const t=r[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:t}}else{if("cubic-bezier"!==r[0])return e.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const t=r.slice(1);if(4!==t.length||t.some(t=>"number"!=typeof t||t<0||t>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,2,Gt)))return null;const o=[];let a=null;"interpolate-hcl"===i||"interpolate-lab"===i?a=Wt:e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(let l=0;l<s.length;l+=2){const t=s[l],i=s[l+1],r=l+3,n=l+4;if("number"!=typeof t)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(o.length&&o[o.length-1][0]>=t)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=e.parse(i,n,a);if(!c)return null;a=a||c.type,o.push([t,c])}return"number"===a.kind||"color"===a.kind||"array"===a.kind&&"number"===a.itemType.kind&&"number"==typeof a.N?new pi(a,i,r,n,o):e.error(`Type ${ee(a)} is not interpolatable.`)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);const n=e.length;if(r>=e[n-1])return i[n-1].evaluate(t);const s=Ke(e,r),o=pi.interpolationFactor(this.interpolation,r,e[s],e[s+1]),a=i[s].evaluate(t),l=i[s+1].evaluate(t);return"interpolate"===this.operator?Qe[this.type.kind.toLowerCase()](a,l,o):"interpolate-hcl"===this.operator?ui.reverse(ui.interpolate(ui.forward(a),ui.forward(l),o)):hi.reverse(hi.interpolate(hi.forward(a),hi.forward(l),o))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e}}function mi(t,e,i,r){const n=r-i,s=t-i;return 0===n?0:1===e?s/n:(Math.pow(e,s)-1)/(Math.pow(e,n)-1)}class fi{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let i=null;const r=e.expectedType;r&&"value"!==r.kind&&(i=r);const n=[];for(const o of t.slice(1)){const t=e.parse(o,1+n.length,i,void 0,{typeAnnotation:"omit"});if(!t)return null;i=i||t.type,n.push(t)}const s=r&&n.some(t=>re(r,t.type));return new fi(s?Kt:i,n)}evaluate(t){let e,i=null,r=0;for(const n of this.args)if(r++,(i=n.evaluate(t))&&i instanceof de&&!i.available&&(e||(e=i.name),i=null,r===this.args.length&&(i=e)),null!==i)break;return i}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(e=>{t.push(e.serialize())}),t}}class _i{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const i=[];for(let n=1;n<t.length-1;n+=2){const r=t[n];if("string"!=typeof r)return e.error(`Expected string, but found ${typeof r} instead.`,n);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);const s=e.parse(t[n+1],n+1);if(!s)return null;i.push([r,s])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return r?new _i(i,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,i]of this.bindings)t.push(e,i.serialize());return t.push(this.result.serialize()),t}}class gi{constructor(t,e,i){this.type=t,this.index=e,this.input=i}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,Gt),r=e.parse(t[2],2,te(e.expectedType||Kt));return i&&r?new gi(r.type.itemType,i,r):null}evaluate(t){const e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new ye(`Array index out of bounds: ${e} < 0.`);if(e>=i.length)throw new ye(`Array index out of bounds: ${e} > ${i.length-1}.`);if(e!==Math.floor(e))throw new ye(`Array index must be an integer, but found ${e} instead.`);return i[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class yi{constructor(t,e){this.type=Xt,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,Kt),r=e.parse(t[2],2,Kt);return i&&r?ne(i.type,[Xt,jt,Gt,Zt,Kt])?new yi(i,r):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ee(i.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!se(e,["boolean","string","number","null"]))throw new ye(`Expected first argument to be of type boolean, string, number or null, but found ${ee(fe(e))} instead.`);if(!se(i,["string","array"]))throw new ye(`Expected second argument to be of type array or string, but found ${ee(fe(i))} instead.`);return i.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class xi{constructor(t,e,i){this.type=Gt,this.needle=t,this.haystack=e,this.fromIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,Kt),r=e.parse(t[2],2,Kt);if(!i||!r)return null;if(!ne(i.type,[Xt,jt,Gt,Zt,Kt]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ee(i.type)} instead`);if(4===t.length){const n=e.parse(t[3],3,Gt);return n?new xi(i,r,n):null}return new xi(i,r)}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!se(e,["boolean","string","number","null"]))throw new ye(`Expected first argument to be of type boolean, string, number or null, but found ${ee(fe(e))} instead.`);if(!se(i,["string","array"]))throw new ye(`Expected second argument to be of type array or string, but found ${ee(fe(i))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(t);return i.indexOf(e,r)}return i.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class vi{constructor(t,e,i,r,n,s){this.inputType=t,this.type=e,this.input=i,this.cases=r,this.outputs=n,this.otherwise=s}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let i,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const n={},s=[];for(let l=2;l<t.length-1;l+=2){let o=t[l];const a=t[l+1];Array.isArray(o)||(o=[o]);const c=e.concat(l);if(0===o.length)return c.error("Expected at least one branch label.");for(const t of o){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,fe(t)))return null}else i=fe(t);if(void 0!==n[String(t)])return c.error("Branch labels must be unique.");n[String(t)]=s.length}const h=e.parse(a,l,r);if(!h)return null;r=r||h.type,s.push(h)}const o=e.parse(t[1],1,Kt);if(!o)return null;const a=e.parse(t[t.length-1],t.length-1,r);return a?"value"!==o.type.kind&&e.concat(1).checkSubtype(i,o.type)?null:new vi(i,r,o,n,s,a):null}evaluate(t){const e=this.input.evaluate(t);return(fe(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),i=[],r={};for(const s of e){const t=r[this.cases[s]];void 0===t?(r[this.cases[s]]=i.length,i.push([this.cases[s],[s]])):i[t][1].push(s)}const n=t=>"number"===this.inputType.kind?Number(t):t;for(const[s,o]of i)t.push(1===o.length?n(o[0]):o.map(n)),t.push(this.outputs[s].serialize());return t.push(this.otherwise.serialize()),t}}class bi{constructor(t,e,i){this.type=t,this.branches=e,this.otherwise=i}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const r=[];for(let s=1;s<t.length-1;s+=2){const n=e.parse(t[s],s,Xt);if(!n)return null;const o=e.parse(t[s+1],s+1,i);if(!o)return null;r.push([n,o]),i=i||o.type}const n=e.parse(t[t.length-1],t.length-1,i);return n?new bi(i,r,n):null}evaluate(t){for(const[e,i]of this.branches)if(e.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,i]of this.branches)t(e),t(i);t(this.otherwise)}outputDefined(){return this.branches.every(([t,e])=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(e=>{t.push(e.serialize())}),t}}class wi{constructor(t,e,i,r){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,Kt),r=e.parse(t[2],2,Gt);if(!i||!r)return null;if(!ne(i.type,[te(Kt),jt,Kt]))return e.error(`Expected first argument to be of type array or string, but found ${ee(i.type)} instead`);if(4===t.length){const n=e.parse(t[3],3,Gt);return n?new wi(i.type,i,r,n):null}return new wi(i.type,i,r)}evaluate(t){const e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!se(e,["string","array"]))throw new ye(`Expected first argument to be of type array or string, but found ${ee(fe(e))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(i,r)}return e.slice(i)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Ti(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Ei(t,e,i,r){return 0===r.compare(e,i)}function Si(t,e,i){const r="=="!==t&&"!="!==t;return class n{constructor(t,e,i){this.type=Xt,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const i=t[0];let s=e.parse(t[1],1,Kt);if(!s)return null;if(!Ti(i,s.type))return e.concat(1).error(`"${i}" comparisons are not supported for type '${ee(s.type)}'.`);let o=e.parse(t[2],2,Kt);if(!o)return null;if(!Ti(i,o.type))return e.concat(2).error(`"${i}" comparisons are not supported for type '${ee(o.type)}'.`);if(s.type.kind!==o.type.kind&&"value"!==s.type.kind&&"value"!==o.type.kind)return e.error(`Cannot compare types '${ee(s.type)}' and '${ee(o.type)}'.`);r&&("value"===s.type.kind&&"value"!==o.type.kind?s=new ve(o.type,[s]):"value"!==s.type.kind&&"value"===o.type.kind&&(o=new ve(s.type,[o])));let a=null;if(4===t.length){if("string"!==s.type.kind&&"string"!==o.type.kind&&"value"!==s.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(a=e.parse(t[3],3,Yt)))return null}return new n(s,o,a)}evaluate(n){const s=this.lhs.evaluate(n),o=this.rhs.evaluate(n);if(r&&this.hasUntypedArgument){const e=fe(s),i=fe(o);if(e.kind!==i.kind||"string"!==e.kind&&"number"!==e.kind)throw new ye(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${i.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const t=fe(s),i=fe(o);if("string"!==t.kind||"string"!==i.kind)return e(n,s,o)}return this.collator?i(n,s,o,this.collator.evaluate(n)):e(n,s,o)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild(t=>{e.push(t.serialize())}),e}}}const Ii=Si("==",function(t,e,i){return e===i},Ei),Ai=Si("!=",function(t,e,i){return e!==i},function(t,e,i,r){return!Ei(0,e,i,r)}),Ci=Si("<",function(t,e,i){return e<i},function(t,e,i,r){return r.compare(e,i)<0}),Mi=Si(">",function(t,e,i){return e>i},function(t,e,i,r){return r.compare(e,i)>0}),zi=Si("<=",function(t,e,i){return e<=i},function(t,e,i,r){return r.compare(e,i)<=0});class Pi{constructor(t,e,i,r,n){this.type=jt,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=n}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,Gt);if(!i)return null;const r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let n=null;if(r.locale&&!(n=e.parse(r.locale,1,jt)))return null;let s=null;if(r.currency&&!(s=e.parse(r.currency,1,jt)))return null;let o=null;if(r["min-fraction-digits"]&&!(o=e.parse(r["min-fraction-digits"],1,Gt)))return null;let a=null;return r["max-fraction-digits"]&&!(a=e.parse(r["max-fraction-digits"],1,Gt))?null:new Pi(i,n,s,o,a)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class ki{constructor(t){this.type=Gt,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error(`Expected argument of type string or array, but found ${ee(i.type)} instead.`):new ki(i):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ye(`Expected value to be of type string or array, but found ${ee(fe(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(e=>{t.push(e.serialize())}),t}}const Di={"==":Ii,"!=":Ai,">":Mi,"<":Ci,">=":Si(">=",function(t,e,i){return e>=i},function(t,e,i,r){return r.compare(e,i)>=0}),"<=":zi,array:ve,at:gi,boolean:ve,case:bi,coalesce:fi,collator:Ce,format:be,image:we,in:yi,"index-of":xi,interpolate:pi,"interpolate-hcl":pi,"interpolate-lab":pi,length:ki,let:_i,literal:ge,match:vi,number:ve,"number-format":Pi,object:ve,slice:wi,step:Ye,string:ve,"to-boolean":Ee,"to-color":Ee,"to-number":Ee,"to-string":Ee,var:We,within:Ze};function Li(t,[e,i,r,n]){e=e.evaluate(t),i=i.evaluate(t),r=r.evaluate(t);const s=n?n.evaluate(t):1,o=pe(e,i,r,s);if(o)throw new ye(o);return new le(e/255*s,i/255*s,r/255*s,s)}function Ri(t,e){return t in e}function Bi(t,e){const i=e[t];return void 0===i?null:i}function Fi(t){return{type:t}}function Oi(t){return{result:"success",value:t}}function Ui(t){return{result:"error",value:t}}function Vi(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Ni(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function $i(t){return!!t.expression&&t.expression.interpolated}function qi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Zi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Gi(t){return t}function ji(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function Xi(t,e,i,r,n){return ji(typeof i===n?r[i]:void 0,t.default,e.default)}function Wi(t,e,i){if("number"!==qi(i))return ji(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];const n=Ke(t.stops.map(t=>t[0]),i);return t.stops[n][1]}function Hi(t,e,i){const r=void 0!==t.base?t.base:1;if("number"!==qi(i))return ji(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];const s=Ke(t.stops.map(t=>t[0]),i),o=function(t,e,i,r){const n=r-i,s=t-i;return 0===n?0:1===e?s/n:(Math.pow(e,s)-1)/(Math.pow(e,n)-1)}(i,r,t.stops[s][0],t.stops[s+1][0]),a=t.stops[s][1],l=t.stops[s+1][1];let c=Qe[e.type]||Gi;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=di[t.colorSpace];c=((t,i)=>e.reverse(e.interpolate(e.forward(t),e.forward(i),o)))}return"function"==typeof a.evaluate?{evaluate(...t){const e=a.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==i)return c(e,i,o)}}:c(a,l,o)}function Ki(t,e,i){return"color"===e.type?i=le.parse(i):"formatted"===e.type?i=ue.fromString(i.toString()):"resolvedImage"===e.type?i=de.fromString(i.toString()):qi(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),ji(i,t.default,e.default)}Ae.register(Di,{error:[{kind:"error"},[jt],(t,[e])=>{throw new ye(e.evaluate(t))}],typeof:[jt,[Kt],(t,[e])=>ee(fe(e.evaluate(t)))],"to-rgba":[te(Gt,4),[Wt],(t,[e])=>e.evaluate(t).toArray()],rgb:[Wt,[Gt,Gt,Gt],Li],rgba:[Wt,[Gt,Gt,Gt,Gt],Li],has:{type:Xt,overloads:[[[jt],(t,[e])=>Ri(e.evaluate(t),t.properties())],[[jt,Ht],(t,[e,i])=>Ri(e.evaluate(t),i.evaluate(t))]]},get:{type:Kt,overloads:[[[jt],(t,[e])=>Bi(e.evaluate(t),t.properties())],[[jt,Ht],(t,[e,i])=>Bi(e.evaluate(t),i.evaluate(t))]]},"feature-state":[Kt,[jt],(t,[e])=>Bi(e.evaluate(t),t.featureState||{})],properties:[Ht,[],t=>t.properties()],"geometry-type":[jt,[],t=>t.geometryType()],id:[Kt,[],t=>t.id()],zoom:[Gt,[],t=>t.globals.zoom],"heatmap-density":[Gt,[],t=>t.globals.heatmapDensity||0],"line-progress":[Gt,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[Gt,[],t=>t.globals.skyRadialProgress||0],accumulated:[Kt,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[Gt,Fi(Gt),(t,e)=>{let i=0;for(const r of e)i+=r.evaluate(t);return i}],"*":[Gt,Fi(Gt),(t,e)=>{let i=1;for(const r of e)i*=r.evaluate(t);return i}],"-":{type:Gt,overloads:[[[Gt,Gt],(t,[e,i])=>e.evaluate(t)-i.evaluate(t)],[[Gt],(t,[e])=>-e.evaluate(t)]]},"/":[Gt,[Gt,Gt],(t,[e,i])=>e.evaluate(t)/i.evaluate(t)],"%":[Gt,[Gt,Gt],(t,[e,i])=>e.evaluate(t)%i.evaluate(t)],ln2:[Gt,[],()=>Math.LN2],pi:[Gt,[],()=>Math.PI],e:[Gt,[],()=>Math.E],"^":[Gt,[Gt,Gt],(t,[e,i])=>Math.pow(e.evaluate(t),i.evaluate(t))],sqrt:[Gt,[Gt],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Gt,[Gt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Gt,[Gt],(t,[e])=>Math.log(e.evaluate(t))],log2:[Gt,[Gt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Gt,[Gt],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Gt,[Gt],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Gt,[Gt],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Gt,[Gt],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Gt,[Gt],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Gt,[Gt],(t,[e])=>Math.atan(e.evaluate(t))],min:[Gt,Fi(Gt),(t,e)=>Math.min(...e.map(e=>e.evaluate(t)))],max:[Gt,Fi(Gt),(t,e)=>Math.max(...e.map(e=>e.evaluate(t)))],abs:[Gt,[Gt],(t,[e])=>Math.abs(e.evaluate(t))],round:[Gt,[Gt],(t,[e])=>{const i=e.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[Gt,[Gt],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Gt,[Gt],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Xt,[jt,Kt],(t,[e,i])=>t.properties()[e.value]===i.value],"filter-id-==":[Xt,[Kt],(t,[e])=>t.id()===e.value],"filter-type-==":[Xt,[jt],(t,[e])=>t.geometryType()===e.value],"filter-<":[Xt,[jt,Kt],(t,[e,i])=>{const r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r<n}],"filter-id-<":[Xt,[Kt],(t,[e])=>{const i=t.id(),r=e.value;return typeof i==typeof r&&i<r}],"filter->":[Xt,[jt,Kt],(t,[e,i])=>{const r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r>n}],"filter-id->":[Xt,[Kt],(t,[e])=>{const i=t.id(),r=e.value;return typeof i==typeof r&&i>r}],"filter-<=":[Xt,[jt,Kt],(t,[e,i])=>{const r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r<=n}],"filter-id-<=":[Xt,[Kt],(t,[e])=>{const i=t.id(),r=e.value;return typeof i==typeof r&&i<=r}],"filter->=":[Xt,[jt,Kt],(t,[e,i])=>{const r=t.properties()[e.value],n=i.value;return typeof r==typeof n&&r>=n}],"filter-id->=":[Xt,[Kt],(t,[e])=>{const i=t.id(),r=e.value;return typeof i==typeof r&&i>=r}],"filter-has":[Xt,[Kt],(t,[e])=>e.value in t.properties()],"filter-has-id":[Xt,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[Xt,[te(jt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Xt,[te(Kt)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Xt,[jt,te(Kt)],(t,[e,i])=>i.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Xt,[jt,te(Kt)],(t,[e,i])=>(function(t,e,i,r){for(;i<=r;){const n=i+r>>1;if(e[n]===t)return!0;e[n]>t?r=n-1:i=n+1}return!1})(t.properties()[e.value],i.value,0,i.value.length-1)],all:{type:Xt,overloads:[[[Xt,Xt],(t,[e,i])=>e.evaluate(t)&&i.evaluate(t)],[Fi(Xt),(t,e)=>{for(const i of e)if(!i.evaluate(t))return!1;return!0}]]},any:{type:Xt,overloads:[[[Xt,Xt],(t,[e,i])=>e.evaluate(t)||i.evaluate(t)],[Fi(Xt),(t,e)=>{for(const i of e)if(i.evaluate(t))return!0;return!1}]]},"!":[Xt,[Xt],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Xt,[jt],(t,[e])=>{const i=t.globals&&t.globals.isSupportedScript;return!i||i(e.evaluate(t))}],upcase:[jt,[jt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[jt,[jt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[jt,Fi(Kt),(t,e)=>e.map(e=>_e(e.evaluate(t))).join("")],"resolved-locale":[jt,[Yt],(t,[e])=>e.evaluate(t).resolvedLocale()]});class Yi{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Ie,this._defaultValue=e?function(t){return"color"===t.type&&Zi(t.default)?new le(0,0,0,0):"color"===t.type?le.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,i,r,n,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(t,e,i,r,n,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=s||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new ye(`Expected value to be one of ${Object.keys(this._enumValues).map(t=>JSON.stringify(t)).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Ji(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Di}function Qi(t,e){const i=new He(Di,[],e?function(t){const e={color:Wt,string:jt,number:Gt,enum:jt,boolean:Xt,formatted:Jt,resolvedImage:Qt};return"array"===t.type?te(e[t.value]||Kt,t.length):e[t.type]}(e):void 0),r=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Oi(new Yi(r,e)):Ui(i.errors)}class tr{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!je(e.expression)}evaluateWithoutErrorHandling(t,e,i,r,n,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,s)}evaluate(t,e,i,r,n,s){return this._styleExpression.evaluate(t,e,i,r,n,s)}}class er{constructor(t,e,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!je(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,i,r,n,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,n,s)}evaluate(t,e,i,r,n,s){return this._styleExpression.evaluate(t,e,i,r,n,s)}interpolationFactor(t,e,i){return this.interpolationType?pi.interpolationFactor(this.interpolationType,t,e,i):0}}function ir(t,e){if("error"===(t=Qi(t,e)).result)return t;const i=t.value.expression,r=Ge(i);if(!r&&!Vi(e))return Ui([new $t("","data expressions not supported")]);const n=Xe(i,["zoom"]);if(!n&&!Ni(e))return Ui([new $t("","zoom expressions not supported")]);const s=function t(e){let i=null;if(e instanceof _i)i=t(e.result);else if(e instanceof fi){for(const r of e.args)if(i=t(r))break}else(e instanceof Ye||e instanceof pi)&&e.input instanceof Ae&&"zoom"===e.input.name&&(i=e);return i instanceof $t||e.eachChild(e=>{const r=t(e);r instanceof $t?i=r:!i&&r?i=new $t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&r&&i!==r&&(i=new $t("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}(i);return s||n?s instanceof $t?Ui([s]):s instanceof pi&&!$i(e)?Ui([new $t("",'"interpolate" expressions cannot be used with this property')]):Oi(s?new er(r?"camera":"composite",t.value,s.labels,s instanceof pi?s.interpolation:void 0):new tr(r?"constant":"source",t.value)):Ui([new $t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class rr{constructor(t,e){this._parameters=t,this._specification=e,Ut(this,function t(e,i){const r="color"===i.type,n=e.stops&&"object"==typeof e.stops[0][0],s=n||!(n||void 0!==e.property),o=e.type||($i(i)?"exponential":"interval");if(r&&((e=Ut({},e)).stops&&(e.stops=e.stops.map(t=>[t[0],le.parse(t[1])])),e.default=le.parse(e.default?e.default:i.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!di[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let a,l,c;if("exponential"===o)a=Hi;else if("interval"===o)a=Wi;else if("categorical"===o){a=Xi,l=Object.create(null);for(const t of e.stops)l[t[0]]=t[1];c=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=Ki}if(n){const r={},n=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],s=i[0].zoom;void 0===r[s]&&(r[s]={zoom:s,type:e.type,property:e.property,default:e.default,stops:[]},n.push(s)),r[s].stops.push([i[0].value,i[1]])}const s=[];for(const e of n)s.push([r[e].zoom,t(r[e],i)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:pi.interpolationFactor.bind(void 0,o),zoomStops:s.map(t=>t[0]),evaluate:({zoom:t},r)=>Hi({stops:s,base:e.base},i,t).evaluate(t,r)}}if(s){const t="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:t,interpolationFactor:pi.interpolationFactor.bind(void 0,t),zoomStops:e.stops.map(t=>t[0]),evaluate:({zoom:t})=>a(e,i,t,l,c)}}return{kind:"source",evaluate(t,r){const n=r&&r.properties?r.properties[e.property]:void 0;return void 0===n?ji(e.default,i.default):a(e,i,n,l,c)}}}(this._parameters,this._specification))}static deserialize(t){return new rr(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function nr(t){const e=t.key,i=t.value,r=t.valueSpec||{},n=t.objectElementValidators||{},s=t.style,o=t.styleSpec;let a=[];const l=qi(i);if("object"!==l)return[new Ft(e,i,`object expected, ${l} found`)];for(const c in i){const t=c.split(".")[0],l=r[t]||r["*"];let h;if(n[t])h=n[t];else if(r[t])h=zr;else if(n["*"])h=n["*"];else{if(!r["*"]){a.push(new Ft(e,i[c],`unknown property "${c}"`));continue}h=zr}a=a.concat(h({key:(e?`${e}.`:e)+c,value:i[c],valueSpec:l,style:s,styleSpec:o,object:i,objectKey:c},i))}for(const c in r)n[c]||r[c].required&&void 0===r[c].default&&void 0===i[c]&&a.push(new Ft(e,i,`missing required property "${c}"`));return a}function sr(t){const e=t.value,i=t.valueSpec,r=t.style,n=t.styleSpec,s=t.key,o=t.arrayElementValidator||zr;if("array"!==qi(e))return[new Ft(s,e,`array expected, ${qi(e)} found`)];if(i.length&&e.length!==i.length)return[new Ft(s,e,`array length ${i.length} expected, length ${e.length} found`)];if(i["min-length"]&&e.length<i["min-length"])return[new Ft(s,e,`array length at least ${i["min-length"]} expected, length ${e.length} found`)];let a={type:i.value,values:i.values,minimum:i.minimum,maximum:i.maximum};n.$version<7&&(a.function=i.function),"object"===qi(i.value)&&(a=i.value);let l=[];for(let c=0;c<e.length;c++)l=l.concat(o({array:e,arrayIndex:c,value:e[c],valueSpec:a,style:r,styleSpec:n,key:`${s}[${c}]`}));return l}function or(t){const e=t.key,i=t.value,r=t.valueSpec;let n=qi(i);if("number"===n&&i!=i&&(n="NaN"),"number"!==n)return[new Ft(e,i,`number expected, ${n} found`)];if("minimum"in r){let n=r.minimum;if("array"===qi(r.minimum)&&(n=r.minimum[t.arrayIndex]),i<n)return[new Ft(e,i,`${i} is less than the minimum value ${n}`)]}if("maximum"in r){let n=r.maximum;if("array"===qi(r.maximum)&&(n=r.maximum[t.arrayIndex]),i>n)return[new Ft(e,i,`${i} is greater than the maximum value ${n}`)]}return[]}function ar(t){const e=t.valueSpec,i=Vt(t.value.type);let r,n,s,o={};const a="categorical"!==i&&void 0===t.value.property,l=!a,c="array"===qi(t.value.stops)&&"array"===qi(t.value.stops[0])&&"object"===qi(t.value.stops[0][0]),h=nr({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===i)return[new Ft(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const r=t.value;return e=e.concat(sr({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:u})),"array"===qi(r)&&0===r.length&&e.push(new Ft(t.key,r,"array must have at least one stop")),e},default:function(t){return zr({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===i&&a&&h.push(new Ft(t.key,t.value,'missing required property "property"')),"identity"===i||t.value.stops||h.push(new Ft(t.key,t.value,'missing required property "stops"')),"exponential"===i&&t.valueSpec.expression&&!$i(t.valueSpec)&&h.push(new Ft(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Vi(t.valueSpec)?h.push(new Ft(t.key,t.value,"property functions not supported")):a&&!Ni(t.valueSpec)&&h.push(new Ft(t.key,t.value,"zoom functions not supported"))),"categorical"!==i&&!c||void 0!==t.value.property||h.push(new Ft(t.key,t.value,'"property" property is required')),h;function u(t){let i=[];const r=t.value,a=t.key;if("array"!==qi(r))return[new Ft(a,r,`array expected, ${qi(r)} found`)];if(2!==r.length)return[new Ft(a,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==qi(r[0]))return[new Ft(a,r,`object expected, ${qi(r[0])} found`)];if(void 0===r[0].zoom)return[new Ft(a,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new Ft(a,r,"object stop key must have value")];if(s&&s>Vt(r[0].zoom))return[new Ft(a,r[0].zoom,"stop zoom values must appear in ascending order")];Vt(r[0].zoom)!==s&&(s=Vt(r[0].zoom),n=void 0,o={}),i=i.concat(nr({key:`${a}[0]`,value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:or,value:d}}))}else i=i.concat(d({key:`${a}[0]`,value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return Ji(Nt(r[1]))?i.concat([new Ft(`${a}[1]`,r[1],"expressions are not allowed in function stops.")]):i.concat(zr({key:`${a}[1]`,value:r[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function d(t,s){const a=qi(t.value),l=Vt(t.value),c=null!==t.value?t.value:s;if(r){if(a!==r)return[new Ft(t.key,c,`${a} stop domain type must match previous stop domain type ${r}`)]}else r=a;if("number"!==a&&"string"!==a&&"boolean"!==a)return[new Ft(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==i){let r=`number expected, ${a} found`;return Vi(e)&&void 0===i&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ft(t.key,c,r)]}return"categorical"!==i||"number"!==a||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===a&&void 0!==n&&l<n?[new Ft(t.key,c,"stop domain values must appear in ascending order")]:(n=l,"categorical"===i&&l in o?[new Ft(t.key,c,"stop domain values must be unique")]:(o[l]=!0,[])):[new Ft(t.key,c,`integer expected, found ${l}`)]}}function lr(t){const e=("property"===t.expressionContext?ir:Qi)(Nt(t.value),t.valueSpec);if("error"===e.result)return e.value.map(e=>new Ft(`${t.key}${e.key}`,t.value,e.message));const i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new Ft(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!je(i))return[new Ft(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!je(i))return[new Ft(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Xe(i,["zoom","feature-state"]))return[new Ft(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Ge(i))return[new Ft(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function cr(t){const e=t.key,i=t.value,r=t.valueSpec,n=[];return Array.isArray(r.values)?-1===r.values.indexOf(Vt(i))&&n.push(new Ft(e,i,`expected one of [${r.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(r.values).indexOf(Vt(i))&&n.push(new Ft(e,i,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(i)} found`)),n}function hr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!hr(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const ur={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function dr(t){if(null==t)return{filter:()=>!0,needGeometry:!1};hr(t)||(t=mr(t));const e=Qi(t,ur);if("error"===e.result)throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));return{filter:(t,i,r)=>e.value.evaluate(t,i,{},r),needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let i=1;i<e.length;i++)if(t(e[i]))return!0;return!1}(t)}}function pr(t,e){return t<e?-1:t>e?1:0}function mr(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?fr(t[1],t[2],"=="):"!="===e?yr(fr(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?fr(t[1],t[2],e):"any"===e?(i=t.slice(1),["any"].concat(i.map(mr))):"all"===e?["all"].concat(t.slice(1).map(mr)):"none"===e?["all"].concat(t.slice(1).map(mr).map(yr)):"in"===e?_r(t[1],t.slice(2)):"!in"===e?yr(_r(t[1],t.slice(2))):"has"===e?gr(t[1]):"!has"===e?yr(gr(t[1])):"within"!==e||t;var i}function fr(t,e,i){switch(t){case"$type":return[`filter-type-${i}`,e];case"$id":return[`filter-id-${i}`,e];default:return[`filter-${i}`,t,e]}}function _r(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",t,["literal",e.sort(pr)]]:["filter-in-small",t,["literal",e]]}}function gr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function yr(t){return["!",t]}function xr(t){return hr(Nt(t.value))?lr(Ut({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){const i=e.value,r=e.key;if("array"!==qi(i))return[new Ft(r,i,`array expected, ${qi(i)} found`)];const n=e.styleSpec;let s,o=[];if(i.length<1)return[new Ft(r,i,"filter array must have at least 1 element")];switch(o=o.concat(cr({key:`${r}[0]`,value:i[0],valueSpec:n.filter_operator,style:e.style,styleSpec:e.styleSpec})),Vt(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===Vt(i[1])&&o.push(new Ft(r,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":3!==i.length&&o.push(new Ft(r,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&("string"!==(s=qi(i[1]))&&o.push(new Ft(`${r}[1]`,i[1],`string expected, ${s} found`)));for(let t=2;t<i.length;t++)s=qi(i[t]),"$type"===Vt(i[1])?o=o.concat(cr({key:`${r}[${t}]`,value:i[t],valueSpec:n.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==s&&"number"!==s&&"boolean"!==s&&o.push(new Ft(`${r}[${t}]`,i[t],`string, number, or boolean expected, ${s} found`));break;case"any":case"all":case"none":for(let n=1;n<i.length;n++)o=o.concat(t({key:`${r}[${n}]`,value:i[n],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":s=qi(i[1]),2!==i.length?o.push(new Ft(r,i,`filter array for "${i[0]}" operator must have 2 elements`)):"string"!==s&&o.push(new Ft(`${r}[1]`,i[1],`string expected, ${s} found`));break;case"within":s=qi(i[1]),2!==i.length?o.push(new Ft(r,i,`filter array for "${i[0]}" operator must have 2 elements`)):"object"!==s&&o.push(new Ft(`${r}[1]`,i[1],`object expected, ${s} found`))}return o}(t)}function vr(t,e){const i=t.key,r=t.style,n=t.styleSpec,s=t.value,o=t.objectKey,a=n[`${e}_${t.layerType}`];if(!a)return[];const l=o.match(/^(.*)-transition$/);if("paint"===e&&l&&a[l[1]]&&a[l[1]].transition)return zr({key:i,value:s,valueSpec:n.transition,style:r,styleSpec:n});const c=t.valueSpec||a[o];if(!c)return[new Ft(i,s,`unknown property "${o}"`)];let h;if("string"===qi(s)&&Vi(c)&&!c.tokens&&(h=/^{([^}]+)}$/.exec(s)))return[new Ft(i,s,`"${o}" does not support interpolation syntax\n`+`Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(h[1])} }\`.`)];const u=[];return"symbol"===t.layerType&&("text-field"===o&&r&&!r.glyphs&&u.push(new Ft(i,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Zi(Nt(s))&&"identity"===Vt(s.type)&&u.push(new Ft(i,s,'"text-font" does not support identity functions'))),u.concat(zr({key:t.key,value:s,valueSpec:c,style:r,styleSpec:n,expressionContext:"property",propertyType:e,propertyKey:o}))}function br(t){return vr(t,"paint")}function wr(t){return vr(t,"layout")}function Tr(t){let e=[];const i=t.value,r=t.key,n=t.style,s=t.styleSpec;i.type||i.ref||e.push(new Ft(r,i,'either "type" or "ref" is required'));let o=Vt(i.type);const a=Vt(i.ref);if(i.id){const s=Vt(i.id);for(let o=0;o<t.arrayIndex;o++){const t=n.layers[o];Vt(t.id)===s&&e.push(new Ft(r,i.id,`duplicate layer id "${i.id}", previously used at line ${t.id.__line__}`))}}if("ref"in i){let t;["type","source","source-layer","filter","layout"].forEach(t=>{t in i&&e.push(new Ft(r,i[t],`"${t}" is prohibited for ref layers`))}),n.layers.forEach(e=>{Vt(e.id)===a&&(t=e)}),t?t.ref?e.push(new Ft(r,i.ref,"ref cannot reference another ref layer")):o=Vt(t.type):e.push(new Ft(r,i.ref,`ref layer "${a}" not found`))}else if("background"!==o&&"sky"!==o)if(i.source){const t=n.sources&&n.sources[i.source],s=t&&Vt(t.type);t?"vector"===s&&"raster"===o?e.push(new Ft(r,i.source,`layer "${i.id}" requires a raster source`)):"raster"===s&&"raster"!==o?e.push(new Ft(r,i.source,`layer "${i.id}" requires a vector source`)):"vector"!==s||i["source-layer"]?"raster-dem"===s&&"hillshade"!==o?e.push(new Ft(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==o||!i.paint||!i.paint["line-gradient"]||"geojson"===s&&t.lineMetrics||e.push(new Ft(r,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Ft(r,i,`layer "${i.id}" must specify a "source-layer"`)):e.push(new Ft(r,i.source,`source "${i.source}" not found`))}else e.push(new Ft(r,i,'missing required property "source"'));return e=e.concat(nr({key:r,value:i,valueSpec:s.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>zr({key:`${r}.type`,value:i.type,valueSpec:s.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"}),filter:xr,layout:t=>nr({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>wr(Ut({layerType:o},t))}}),paint:t=>nr({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>br(Ut({layerType:o},t))}})}}))}function Er(t){const e=t.value,i=t.key,r=qi(e);return"string"!==r?[new Ft(i,e,`string expected, ${r} found`)]:[]}const Sr={promoteId:function({key:t,value:e}){if("string"===qi(e))return Er({key:t,value:e});{const i=[];for(const r in e)i.push(...Er({key:`${t}.${r}`,value:e[r]}));return i}}};function Ir(t){const e=t.value,i=t.key,r=t.styleSpec,n=t.style;if(!e.type)return[new Ft(i,e,'"type" is required')];const s=Vt(e.type);let o;switch(s){case"vector":case"raster":case"raster-dem":return o=nr({key:i,value:e,valueSpec:r[`source_${s.replace("-","_")}`],style:t.style,styleSpec:r,objectElementValidators:Sr});case"geojson":if(o=nr({key:i,value:e,valueSpec:r.source_geojson,style:n,styleSpec:r,objectElementValidators:Sr}),e.cluster)for(const t in e.clusterProperties){const[r,n]=e.clusterProperties[t],s="string"==typeof r?[r,["accumulated"],["get",t]]:r;o.push(...lr({key:`${i}.${t}.map`,value:n,expressionContext:"cluster-map"})),o.push(...lr({key:`${i}.${t}.reduce`,value:s,expressionContext:"cluster-reduce"}))}return o;case"video":return nr({key:i,value:e,valueSpec:r.source_video,style:n,styleSpec:r});case"image":return nr({key:i,value:e,valueSpec:r.source_image,style:n,styleSpec:r});case"canvas":return[new Ft(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return cr({key:`${i}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:r})}}function Ar(t){const e=t.value,i=t.styleSpec,r=i.light,n=t.style;let s=[];const o=qi(e);if(void 0===e)return s;if("object"!==o)return s=s.concat([new Ft("light",e,`object expected, ${o} found`)]);for(const a in e){const t=a.match(/^(.*)-transition$/);s=s.concat(t&&r[t[1]]&&r[t[1]].transition?zr({key:a,value:e[a],valueSpec:i.transition,style:n,styleSpec:i}):r[a]?zr({key:a,value:e[a],valueSpec:r[a],style:n,styleSpec:i}):[new Ft(a,e[a],`unknown property "${a}"`)])}return s}function Cr(t){const e=t.value,i=t.key,r=t.style,n=t.styleSpec,s=n.terrain;let o=[];const a=qi(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new Ft("terrain",e,`object expected, ${a} found`)]);for(const l in e){const t=l.match(/^(.*)-transition$/);o=o.concat(t&&s[t[1]]&&s[t[1]].transition?zr({key:l,value:e[l],valueSpec:n.transition,style:r,styleSpec:n}):s[l]?zr({key:l,value:e[l],valueSpec:s[l],style:r,styleSpec:n}):[new Ft(l,e[l],`unknown property "${l}"`)])}if(e.source){const t=r.sources&&r.sources[e.source],n=t&&Vt(t.type);t?"raster-dem"!==n&&o.push(new Ft(i,e.source,`terrain cannot be used with a source of type ${n}, it only be used with a "raster-dem" source type`)):o.push(new Ft(i,e.source,`source "${e.source}" not found`))}else o.push(new Ft(i,e,'terrain is missing required property "source"'));return o}const Mr={"*":()=>[],array:sr,boolean:function(t){const e=t.value,i=t.key,r=qi(e);return"boolean"!==r?[new Ft(i,e,`boolean expected, ${r} found`)]:[]},number:or,color:function(t){const e=t.key,i=t.value,r=qi(i);return"string"!==r?[new Ft(e,i,`color expected, ${r} found`)]:null===ae(i)?[new Ft(e,i,`color expected, "${i}" found`)]:[]},constants:Ot,enum:cr,filter:xr,function:ar,layer:Tr,object:nr,source:Ir,light:Ar,terrain:Cr,string:Er,formatted:function(t){return 0===Er(t).length?[]:lr(t)},resolvedImage:function(t){return 0===Er(t).length?[]:lr(t)}};function zr(t){const e=t.value,i=t.valueSpec,r=t.styleSpec;return i.expression&&Zi(Vt(e))?ar(t):i.expression&&Ji(Nt(e))?lr(t):i.type&&Mr[i.type]?Mr[i.type](t):nr(Ut({},t,{valueSpec:i.type?r[i.type]:i}))}function Pr(t){const e=t.value,i=t.key,r=Er(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new Ft(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new Ft(i,e,'"glyphs" url must include a "{range}" token'))),r}function kr(t,e=Bt){let i=[];return i=i.concat(zr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Pr,"*":()=>[]}})),t.constants&&(i=i.concat(Ot({key:"constants",value:t.constants,style:t,styleSpec:e}))),Dr(i)}function Dr(t){return[].concat(t).sort((t,e)=>t.line-e.line)}function Lr(t){return function(...e){return Dr(t.apply(this,e))}}kr.source=Lr(Ir),kr.light=Lr(Ar),kr.terrain=Lr(Cr),kr.layer=Lr(Tr),kr.filter=Lr(xr),kr.paintProperty=Lr(br),kr.layoutProperty=Lr(wr);const Rr=kr,Br=Rr.light,Fr=Rr.paintProperty,Or=Rr.layoutProperty;function Ur(t,e){let i=!1;if(e&&e.length)for(const r of e)t.fire(new Lt(new Error(r.message))),i=!0;return i}var Vr=Nr;function Nr(t,e,i){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var n=new Int32Array(this.arrayBuffer);t=n[0],this.d=(e=n[1])+2*(i=n[2]);for(var s=0;s<this.d*this.d;s++){var o=n[3+s],a=n[3+s+1];r.push(o===a?null:n.subarray(o,a))}var l=n[3+r.length+1];this.keys=n.subarray(n[3+r.length],l),this.bboxes=n.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var h=i/e*t;this.min=-h,this.max=t+h}Nr.prototype.insert=function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},Nr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Nr.prototype._insertCell=function(t,e,i,r,n,s){this.cells[n].push(s)},Nr.prototype.query=function(t,e,i,r,n){var s=this.min,o=this.max;if(t<=s&&e<=s&&o<=i&&o<=r&&!n)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,i,r,this._queryCell,a,{},n),a},Nr.prototype._queryCell=function(t,e,i,r,n,s,o,a){var l=this.cells[n];if(null!==l)for(var c=this.keys,h=this.bboxes,u=0;u<l.length;u++){var d=l[u];if(void 0===o[d]){var p=4*d;(a?a(h[p+0],h[p+1],h[p+2],h[p+3]):t<=h[p+2]&&e<=h[p+3]&&i>=h[p+0]&&r>=h[p+1])?(o[d]=!0,s.push(c[d])):o[d]=!1}}},Nr.prototype._forEachCell=function(t,e,i,r,n,s,o,a){for(var l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),h=this._convertToCellCoord(i),u=this._convertToCellCoord(r),d=l;d<=h;d++)for(var p=c;p<=u;p++){var m=this.d*p+d;if((!a||a(this._convertFromCellCoord(d),this._convertFromCellCoord(p),this._convertFromCellCoord(d+1),this._convertFromCellCoord(p+1)))&&n.call(this,t,e,i,r,m,s,o,a))return}},Nr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Nr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Nr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,i=0,r=0;r<this.cells.length;r++)i+=this.cells[r].length;var n=new Int32Array(e+i+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;for(var s=e,o=0;o<t.length;o++){var a=t[o];n[3+o]=s,n.set(a,s),s+=a.length}return n[3+t.length]=s,n.set(this.keys,s),n[3+t.length+1]=s+=this.keys.length,n.set(this.bboxes,s),s+=this.bboxes.length,n.buffer};const{ImageData:$r,ImageBitmap:qr}=s,Zr={};function Gr(t,e,i={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Zr[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}Gr("Object",Object),Vr.serialize=function(t,e){const i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},Vr.deserialize=function(t){return new Vr(t.buffer)},Gr("Grid",Vr),Gr("Color",le),Gr("Error",Error),Gr("ResolvedImage",de),Gr("StylePropertyFunction",rr),Gr("StyleExpression",Yi,{omit:["_evaluator"]}),Gr("ZoomDependentExpression",er),Gr("ZoomConstantExpression",tr),Gr("CompoundExpression",Ae,{omit:["_evaluate"]});for(const Ld in Di)Di[Ld]._classRegistryKey||Gr(`Expression_${Ld}`,Di[Ld]);function jr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Xr(t){return qr&&t instanceof qr}function Wr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(jr(t)||Xr(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const i=t;return e&&e.push(i.buffer),i}if(t instanceof $r)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const i=[];for(const r of t)i.push(Wr(r,e));return i}if("object"==typeof t){const i=t.constructor,r=i._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class");const n=i.serialize?i.serialize(t,e):{};if(!i.serialize){for(const i in t){if(!t.hasOwnProperty(i))continue;if(Zr[r].omit.indexOf(i)>=0)continue;const s=t[i];n[i]=Zr[r].shallow.indexOf(i)>=0?s:Wr(s,e)}t instanceof Error&&(n.message=t.message)}if(n.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(n.$name=r),n}throw new Error(`can't serialize object of type ${typeof t}`)}function Hr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||jr(t)||Xr(t)||ArrayBuffer.isView(t)||t instanceof $r)return t;if(Array.isArray(t))return t.map(Hr);if("object"==typeof t){const e=t.$name||"Object",{klass:i}=Zr[e];if(!i)throw new Error(`can't deserialize unregistered class ${e}`);if(i.deserialize)return i.deserialize(t);const r=Object.create(i.prototype);for(const n of Object.keys(t)){if("$name"===n)continue;const i=t[n];r[n]=Zr[e].shallow.indexOf(n)>=0?i:Hr(i)}return r}throw new Error(`can't deserialize object of type ${typeof t}`)}class Kr{constructor(){this.first=!0}update(t,e){const i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))}}const Yr=t=>t>=1536&&t<=1791,Jr=t=>t>=1872&&t<=1919,Qr=t=>t>=2208&&t<=2303,tn=t=>t>=11904&&t<=12031,en=t=>t>=12032&&t<=12255,rn=t=>t>=12272&&t<=12287,nn=t=>t>=12288&&t<=12351,sn=t=>t>=12352&&t<=12447,on=t=>t>=12448&&t<=12543,an=t=>t>=12544&&t<=12591,ln=t=>t>=12704&&t<=12735,cn=t=>t>=12736&&t<=12783,hn=t=>t>=12784&&t<=12799,un=t=>t>=12800&&t<=13055,dn=t=>t>=13056&&t<=13311,pn=t=>t>=13312&&t<=19903,mn=t=>t>=19968&&t<=40959,fn=t=>t>=40960&&t<=42127,_n=t=>t>=42128&&t<=42191,gn=t=>t>=44032&&t<=55215,yn=t=>t>=63744&&t<=64255,xn=t=>t>=64336&&t<=65023,vn=t=>t>=65040&&t<=65055,bn=t=>t>=65072&&t<=65103,wn=t=>t>=65104&&t<=65135,Tn=t=>t>=65136&&t<=65279,En=t=>t>=65280&&t<=65519;function Sn(t){for(const e of t)if(Cn(e.charCodeAt(0)))return!0;return!1}function In(t){for(const e of t)if(!An(e.charCodeAt(0)))return!1;return!0}function An(t){return!(Yr(t)||Jr(t)||Qr(t)||xn(t)||Tn(t))}function Cn(t){return!(746!==t&&747!==t&&(t<4352||!(ln(t)||an(t)||bn(t)&&!(t>=65097&&t<=65103)||yn(t)||dn(t)||tn(t)||cn(t)||!(!nn(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||pn(t)||mn(t)||un(t)||(t=>t>=12592&&t<=12687)(t)||(t=>t>=43360&&t<=43391)(t)||(t=>t>=55216&&t<=55295)(t)||(t=>t>=4352&&t<=4607)(t)||gn(t)||sn(t)||rn(t)||(t=>t>=12688&&t<=12703)(t)||en(t)||hn(t)||on(t)&&12540!==t||!(!En(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!wn(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||(t=>t>=5120&&t<=5759)(t)||(t=>t>=6320&&t<=6399)(t)||vn(t)||(t=>t>=19904&&t<=19967)(t)||fn(t)||_n(t))))}function Mn(t){return!(Cn(t)||function(t){return!!((t=>t>=128&&t<=255)(t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||(t=>t>=8192&&t<=8303)(t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||(t=>t>=8448&&t<=8527)(t)||(t=>t>=8528&&t<=8591)(t)||(t=>t>=8960&&t<=9215)(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||(t=>t>=9216&&t<=9279)(t)&&9251!==t||(t=>t>=9280&&t<=9311)(t)||(t=>t>=9312&&t<=9471)(t)||(t=>t>=9632&&t<=9727)(t)||(t=>t>=9728&&t<=9983)(t)&&!(t>=9754&&t<=9759)||(t=>t>=11008&&t<=11263)(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||nn(t)||on(t)||(t=>t>=57344&&t<=63743)(t)||bn(t)||wn(t)||En(t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function zn(t){return t>=1424&&t<=2303||xn(t)||Tn(t)}function Pn(t,e){return!(!e&&zn(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||(t=>t>=6016&&t<=6143)(t))}function kn(t){for(const e of t)if(zn(e.charCodeAt(0)))return!0;return!1}let Dn=null,Ln="unavailable",Rn=null;const Bn=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Ln="error"),Dn&&Dn(t)};function Fn(){On.fire(new Dt("pluginStateChange",{pluginStatus:Ln,pluginURL:Rn}))}const On=new Rt,Un=function(){return Ln},Vn=function(){if("deferred"!==Ln||!Rn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ln="loading",Fn(),Rn&&Tt({url:Rn},t=>{t?Bn(t):(Ln="loaded",Fn())})},Nn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>"loaded"===Ln||null!=Nn.applyArabicShaping,isLoading:()=>"loading"===Ln,setState(t){Ln=t.pluginStatus,Rn=t.pluginURL},isParsed:()=>null!=Nn.applyArabicShaping&&null!=Nn.processBidirectionalText&&null!=Nn.processStyledBidirectionalText,getPluginURL:()=>Rn};class $n{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Kr,this.transition={})}isSupportedScript(t){return function(t,e){for(const i of t)if(!Pn(i.charCodeAt(0),e))return!1;return!0}(t,Nn.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}}}class qn{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Zi(t))return new rr(t,e);if(Ji(t)){const i=ir(t,e);if("error"===i.result)throw new Error(i.value.map(t=>`${t.key}: ${t.message}`).join(", "));return i.value}{let i=t;return"string"==typeof t&&"color"===e.type&&(i=le.parse(t)),{kind:"constant",evaluate:()=>i}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)}}class Zn{constructor(t){this.property=t,this.value=new qn(t,void 0)}transitioned(t,e){return new jn(this.property,this.value,e,y({},t.transition,this.transition),t.now)}untransitioned(){return new jn(this.property,this.value,null,{},0)}}class Gn{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return A(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Zn(this._values[t].property)),this._values[t].value=new qn(this._values[t].property,null===e?void 0:A(e))}getTransition(t){return A(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Zn(this._values[t].property)),this._values[t].transition=A(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i);const r=this.getTransition(e);void 0!==r&&(t[`${e}-transition`]=r)}return t}transitioned(t,e){const i=new Xn(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].transitioned(t,e._values[r]);return i}untransitioned(){const t=new Xn(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class jn{constructor(t,e,i,r,n){this.property=t,this.value=e,this.begin=n+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=i)}possiblyEvaluate(t,e,i){const r=t.now||0,n=this.value.possiblyEvaluate(t,e,i),s=this.prior;if(s){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return s.possiblyEvaluate(t,e,i);{const o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(s.possiblyEvaluate(t,e,i),n,u(o))}}return n}}class Xn{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,i){const r=new Kn(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(t,e,i);return r}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Wn{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return A(this._values[t].value)}setValue(t,e){this._values[t]=new qn(this._values[t].property,null===e?void 0:A(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i)}return t}possiblyEvaluate(t,e,i){const r=new Kn(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(t,e,i);return r}}class Hn{constructor(t,e,i){this.property=t,this.value=e,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,i,r){return this.property.evaluate(this.value,this.parameters,t,e,i,r)}}class Kn{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Yn{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,i){const r=Qe[this.specification.type];return r?r(t,e,i):t}}class Jn{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,i,r){return new Hn(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,r)}:t.expression,e)}interpolate(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Hn(this,{kind:"constant",value:void 0},t.parameters);const r=Qe[this.specification.type];return r?new Hn(this,{kind:"constant",value:r(t.value.value,e.value.value,i)},t.parameters):t}evaluate(t,e,i,r,n,s){return"constant"===t.kind?t.value:t.evaluate(e,i,r,n,s)}}class Qn extends Jn{possiblyEvaluate(t,e,i,r){if(void 0===t.value)return new Hn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const n=t.expression.evaluate(e,null,{},i,r),s="resolvedImage"===t.property.specification.type&&"string"!=typeof n?n.name:n,o=this._calculate(s,s,s,e);return new Hn(this,{kind:"constant",value:o},e)}if("camera"===t.expression.kind){const i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Hn(this,{kind:"constant",value:i},e)}return new Hn(this,t.expression,e)}evaluate(t,e,i,r,n,s){if("source"===t.kind){const o=t.evaluate(e,i,r,n,s);return this._calculate(o,o,o,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,r),t.evaluate({zoom:Math.floor(e.zoom)},i,r),t.evaluate({zoom:Math.floor(e.zoom)+1},i,r),e):t.value}_calculate(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class ts{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,r){if(void 0!==t.value){if("constant"===t.expression.kind){const n=t.expression.evaluate(e,null,{},i,r);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new $n(Math.floor(e.zoom-1),e)),t.expression.evaluate(new $n(Math.floor(e.zoom),e)),t.expression.evaluate(new $n(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class es{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,r){return!!t.expression.evaluate(e,null,{},i,r)}interpolate(){return!1}}class is{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const i=t[e];i.specification.overridable&&this.overridableProperties.push(e);const r=this.defaultPropertyValues[e]=new qn(i,void 0),n=this.defaultTransitionablePropertyValues[e]=new Zn(i);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}}}function rs(t,e){return 256*(t=m(Math.floor(t),0,255))+m(Math.floor(e),0,255)}Gr("DataDrivenProperty",Jn),Gr("DataConstantProperty",Yn),Gr("CrossFadedDataDrivenProperty",Qn),Gr("CrossFadedProperty",ts),Gr("ColorRampProperty",es);const ns={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ss{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class os{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function as(t,e=1){let i=0,r=0;return{members:t.map(t=>{const n=ns[t.type].BYTES_PER_ELEMENT,s=i=ls(i,Math.max(e,n)),o=t.components||1;return r=Math.max(r,n),i+=n*o,{name:t.name,type:t.type,components:o,offset:s}}),size:ls(i,Math.max(r,e)),alignment:e}}function ls(t,e){return Math.ceil(t/e)*e}class cs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const r=2*t;return this.int16[r+0]=e,this.int16[r+1]=i,t}}cs.prototype.bytesPerElement=4,Gr("StructArrayLayout2i4",cs);class hs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)}emplace(t,e,i,r,n){const s=4*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,t}}hs.prototype.bytesPerElement=8,Gr("StructArrayLayout4i8",hs);class us extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,s,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,r,n,s,o)}emplace(t,e,i,r,n,s,o,a){const l=6*t,c=12*t,h=3*t;return this.int16[l+0]=e,this.int16[l+1]=i,this.uint8[c+4]=r,this.uint8[c+5]=n,this.uint8[c+6]=s,this.uint8[c+7]=o,this.float32[h+2]=a,t}}us.prototype.bytesPerElement=12,Gr("StructArrayLayout2i4ub1f12",us);class ds extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const r=2*t;return this.float32[r+0]=e,this.float32[r+1]=i,t}}ds.prototype.bytesPerElement=8,Gr("StructArrayLayout2f8",ds);class ps extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,s,o,a,l,c){const h=this.length;return this.resize(h+1),this.emplace(h,t,e,i,r,n,s,o,a,l,c)}emplace(t,e,i,r,n,s,o,a,l,c,h){const u=10*t;return this.uint16[u+0]=e,this.uint16[u+1]=i,this.uint16[u+2]=r,this.uint16[u+3]=n,this.uint16[u+4]=s,this.uint16[u+5]=o,this.uint16[u+6]=a,this.uint16[u+7]=l,this.uint16[u+8]=c,this.uint16[u+9]=h,t}}ps.prototype.bytesPerElement=20,Gr("StructArrayLayout10ui20",ps);class ms extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,s,o,a,l,c,h,u){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,i,r,n,s,o,a,l,c,h,u)}emplace(t,e,i,r,n,s,o,a,l,c,h,u,d){const p=12*t;return this.int16[p+0]=e,this.int16[p+1]=i,this.int16[p+2]=r,this.int16[p+3]=n,this.uint16[p+4]=s,this.uint16[p+5]=o,this.uint16[p+6]=a,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=h,this.int16[p+10]=u,this.int16[p+11]=d,t}}ms.prototype.bytesPerElement=24,Gr("StructArrayLayout4i4ui4i24",ms);class fs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){const n=3*t;return this.float32[n+0]=e,this.float32[n+1]=i,this.float32[n+2]=r,t}}fs.prototype.bytesPerElement=12,Gr("StructArrayLayout3f12",fs);class _s extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}_s.prototype.bytesPerElement=4,Gr("StructArrayLayout1ul4",_s);class gs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,s,o,a,l,c){const h=this.length;return this.resize(h+1),this.emplace(h,t,e,i,r,n,s,o,a,l,c)}emplace(t,e,i,r,n,s,o,a,l,c,h){const u=16*t,d=8*t;return this.int16[u+0]=e,this.int16[u+1]=i,this.float32[d+1]=r,this.float32[d+2]=n,this.float32[d+3]=s,this.float32[d+4]=o,this.int16[u+10]=a,this.uint32[d+6]=l,this.uint16[u+14]=c,this.uint16[u+15]=h,t}}gs.prototype.bytesPerElement=32,Gr("StructArrayLayout2i4f1i1ul2ui32",gs);class ys extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,s){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,r,n,s)}emplace(t,e,i,r,n,s,o){const a=6*t;return this.int16[a+0]=e,this.int16[a+1]=i,this.int16[a+2]=r,this.int16[a+3]=n,this.int16[a+4]=s,this.int16[a+5]=o,t}}ys.prototype.bytesPerElement=12,Gr("StructArrayLayout2i2i2i12",ys);class xs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,i,r,n)}emplace(t,e,i,r,n,s){const o=4*t,a=8*t;return this.float32[o+0]=e,this.float32[o+1]=i,this.float32[o+2]=r,this.int16[a+6]=n,this.int16[a+7]=s,t}}xs.prototype.bytesPerElement=16,Gr("StructArrayLayout2f1f2i16",xs);class vs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)}emplace(t,e,i,r,n){const s=12*t,o=3*t;return this.uint8[s+0]=e,this.uint8[s+1]=i,this.float32[o+1]=r,this.float32[o+2]=n,t}}vs.prototype.bytesPerElement=12,Gr("StructArrayLayout2ub2f12",vs);class bs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){const n=3*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,this.uint16[n+2]=r,t}}bs.prototype.bytesPerElement=6,Gr("StructArrayLayout3ui6",bs);class ws extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,s,o,a,l,c,h,u,d,p,m,f,_){const g=this.length;return this.resize(g+1),this.emplace(g,t,e,i,r,n,s,o,a,l,c,h,u,d,p,m,f,_)}emplace(t,e,i,r,n,s,o,a,l,c,h,u,d,p,m,f,_,g){const y=24*t,x=12*t,v=48*t;return this.int16[y+0]=e,this.int16[y+1]=i,this.uint16[y+2]=r,this.uint16[y+3]=n,this.uint32[x+2]=s,this.uint32[x+3]=o,this.uint32[x+4]=a,this.uint16[y+10]=l,this.uint16[y+11]=c,this.uint16[y+12]=h,this.float32[x+7]=u,this.float32[x+8]=d,this.uint8[v+36]=p,this.uint8[v+37]=m,this.uint8[v+38]=f,this.uint32[x+10]=_,this.int16[y+22]=g,t}}ws.prototype.bytesPerElement=48,Gr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ws);class Ts extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r,n,s,o,a,l,c,h,u,d,p,m,f,_,g,y,x,v,b,w,T,E,S,I,A){const C=this.length;return this.resize(C+1),this.emplace(C,t,e,i,r,n,s,o,a,l,c,h,u,d,p,m,f,_,g,y,x,v,b,w,T,E,S,I,A)}emplace(t,e,i,r,n,s,o,a,l,c,h,u,d,p,m,f,_,g,y,x,v,b,w,T,E,S,I,A,C){const M=34*t,z=17*t;return this.int16[M+0]=e,this.int16[M+1]=i,this.int16[M+2]=r,this.int16[M+3]=n,this.int16[M+4]=s,this.int16[M+5]=o,this.int16[M+6]=a,this.int16[M+7]=l,this.uint16[M+8]=c,this.uint16[M+9]=h,this.uint16[M+10]=u,this.uint16[M+11]=d,this.uint16[M+12]=p,this.uint16[M+13]=m,this.uint16[M+14]=f,this.uint16[M+15]=_,this.uint16[M+16]=g,this.uint16[M+17]=y,this.uint16[M+18]=x,this.uint16[M+19]=v,this.uint16[M+20]=b,this.uint16[M+21]=w,this.uint16[M+22]=T,this.uint32[z+12]=E,this.float32[z+13]=S,this.float32[z+14]=I,this.float32[z+15]=A,this.float32[z+16]=C,t}}Ts.prototype.bytesPerElement=68,Gr("StructArrayLayout8i15ui1ul4f68",Ts);class Es extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}Es.prototype.bytesPerElement=4,Gr("StructArrayLayout1f4",Es);class Ss extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i)}emplace(t,e,i,r){const n=3*t;return this.int16[n+0]=e,this.int16[n+1]=i,this.int16[n+2]=r,t}}Ss.prototype.bytesPerElement=6,Gr("StructArrayLayout3i6",Ss);class Is extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)}emplace(t,e,i,r,n){const s=6*t;return this.uint32[3*t+0]=e,this.uint16[s+2]=i,this.uint16[s+3]=r,this.uint16[s+4]=n,t}}Is.prototype.bytesPerElement=12,Gr("StructArrayLayout1ul3ui12",Is);class As extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=i,t}}As.prototype.bytesPerElement=4,Gr("StructArrayLayout2ui4",As);class Cs extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}Cs.prototype.bytesPerElement=2,Gr("StructArrayLayout1ui2",Cs);class Ms extends os{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i,r)}emplace(t,e,i,r,n){const s=4*t;return this.float32[s+0]=e,this.float32[s+1]=i,this.float32[s+2]=r,this.float32[s+3]=n,t}}Ms.prototype.bytesPerElement=16,Gr("StructArrayLayout4f16",Ms);class zs extends ss{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.float32[this._pos4+1]}get y1(){return this._structArray.float32[this._pos4+2]}get x2(){return this._structArray.float32[this._pos4+3]}get y2(){return this._structArray.float32[this._pos4+4]}get padding(){return this._structArray.int16[this._pos2+10]}get featureIndex(){return this._structArray.uint32[this._pos4+6]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+14]}get bucketIndex(){return this._structArray.uint16[this._pos2+15]}get anchorPoint(){return new r(this.anchorPointX,this.anchorPointY)}}zs.prototype.size=32;class Ps extends gs{get(t){return new zs(this,t)}}Gr("CollisionBoxArray",Ps);class ks extends ss{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ks.prototype.size=48;class Ds extends ws{get(t){return new ks(this,t)}}Gr("PlacedSymbolArray",Ds);class Ls extends ss{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ls.prototype.size=68;class Rs extends Ts{get(t){return new Ls(this,t)}}Gr("SymbolInstanceArray",Rs);class Bs extends Es{getoffsetX(t){return this.float32[1*t+0]}}Gr("GlyphOffsetArray",Bs);class Fs extends Ss{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Gr("SymbolLineVertexArray",Fs);class Os extends ss{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Os.prototype.size=12;class Us extends Is{get(t){return new Os(this,t)}}Gr("FeatureIndexArray",Us);class Vs extends ss{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}Vs.prototype.size=4;class Ns extends As{get(t){return new Vs(this,t)}}Gr("FillExtrusionCentroidArray",Ns);const $s=as([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]);var qs=oe(function(t){t.exports=function(t,e){var i,r,n,s,o,a,l,c;for(r=t.length-(i=3&t.length),n=e,o=3432918353,a=461845907,c=0;c<r;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,n=27492+(65535&(s=5*(65535&(n=(n^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:n^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295}return n^=t.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}}),Zs=oe(function(t){t.exports=function(t,e){for(var i,r=t.length,n=e^r,s=0;r>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),r-=4,++s;switch(r){case 3:n^=(255&t.charCodeAt(s+2))<<16;case 2:n^=(255&t.charCodeAt(s+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(s)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}}),Gs=qs,js=Zs;Gs.murmur3=qs,Gs.murmur2=js;class Xs{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,i,r){this.ids.push(Ws(t)),this.positions.push(e,i,r)}getPositions(t){const e=Ws(t);let i=0,r=this.ids.length-1;for(;i<r;){const t=i+r>>1;this.ids[t]>=e?r=t:i=t+1}const n=[];for(;this.ids[i]===e;)n.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return n}static serialize(t,e){const i=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,i,r,n){for(;r<n;){const s=e[r+n>>1];let o=r-1,a=n+1;for(;;){do{o++}while(e[o]<s);do{a--}while(e[a]>s);if(o>=a)break;Hs(e,o,a),Hs(i,3*o,3*a),Hs(i,3*o+1,3*a+1),Hs(i,3*o+2,3*a+2)}a-r<n-a?(t(e,i,r,a),r=a+1):(t(e,i,a+1,n),n=a)}}(i,r,0,i.length-1),e&&e.push(i.buffer,r.buffer),{ids:i,positions:r}}static deserialize(t){const e=new Xs;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Ws(t){const e=+t;return!isNaN(e)&&e<=a?e:Gs(String(t))}function Hs(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}Gr("FeaturePositionMap",Xs);class Ks{constructor(t,e){this.gl=t.gl,this.location=e}}class Ys extends Ks{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Js extends Ks{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Qs extends Ks{constructor(t,e){super(t,e),this.current=le.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const to=new Float32Array(16),eo=new Float32Array(9);function io(t){return[rs(255*t.r,255*t.g),rs(255*t.b,255*t.a)]}class ro{constructor(t,e,i){this.value=t,this.uniformNames=e.map(t=>`u_${t}`),this.type=i}setUniform(t,e,i){t.set(i.constantOr(this.value))}getBinding(t,e,i){return"color"===this.type?new Qs(t,e):new Ys(t,e)}}class no{constructor(t,e){this.uniformNames=e.map(t=>`u_${t}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr}setUniform(t,e,i,r){const n="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;n&&t.set(n)}getBinding(t,e,i){return"u_pattern"===i.substr(0,9)?new Js(t,e):new Ys(t,e)}}class so{constructor(t,e,i,r){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map(t=>({name:`a_${t}`,type:"Float32",components:"color"===i?2:1,offset:0})),this.paintVertexArray=new r}populatePaintArray(t,e,i,r,n){const s=this.paintVertexArray.length,o=this.expression.evaluate(new $n(0),e,{},r,[],n);this.paintVertexArray.resize(t),this._setPaintValue(s,t,o)}updatePaintArray(t,e,i,r){const n=this.expression.evaluate({zoom:0},i,r);this._setPaintValue(t,e,n)}_setPaintValue(t,e,i){if("color"===this.type){const r=io(i);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class oo{constructor(t,e,i,r,n,s){this.expression=t,this.uniformNames=e.map(t=>`u_${t}_t`),this.type=i,this.useIntegerZoom=r,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=e.map(t=>({name:`a_${t}`,type:"Float32",components:"color"===i?4:2,offset:0})),this.paintVertexArray=new s}populatePaintArray(t,e,i,r,n){const s=this.expression.evaluate(new $n(this.zoom),e,{},r,[],n),o=this.expression.evaluate(new $n(this.zoom+1),e,{},r,[],n),a=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(a,t,s,o)}updatePaintArray(t,e,i,r){const n=this.expression.evaluate({zoom:this.zoom},i,r),s=this.expression.evaluate({zoom:this.zoom+1},i,r);this._setPaintValue(t,e,n,s)}_setPaintValue(t,e,i,r){if("color"===this.type){const n=io(i),s=io(r);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n[0],n[1],s[0],s[1])}else{for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i,r);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(r))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=m(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(r)}getBinding(t,e,i){return new Ys(t,e)}}class ao{constructor(t,e,i,r,n,s,o){this.expression=t,this.type=i,this.useIntegerZoom=r,this.zoom=n,this.layerId=o;for(let a=0;a<e.length;++a);this.zoomInPaintVertexArray=new s,this.zoomOutPaintVertexArray=new s}populatePaintArray(t,e,i){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],i)}updatePaintArray(t,e,i,r,n){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],n)}_setPaintValues(t,e,i,r){if(!r||!i)return;const{min:n,mid:s,max:o}=i,a=r[n],l=r[s],c=r[o];if(a&&l&&c)for(let h=t;h<e;h++)this.zoomInPaintVertexArray.emplace(h,l.tl[0],l.tl[1],l.br[0],l.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],l.pixelRatio,a.pixelRatio),this.zoomOutPaintVertexArray.emplace(h,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,$s.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,$s.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class lo{constructor(t,e,i=(()=>!0)){this.binders={},this._buffers=[];const r=[];for(const n in t.paint._values){if(!i(n))continue;const s=t.paint.get(n);if(!(s instanceof Hn&&Vi(s.property.specification)))continue;const o=ho(n,t.type),a=s.value,l=s.property.specification.type,c=s.property.useIntegerZoom,h=s.property.specification["property-type"],u="cross-faded"===h||"cross-faded-data-driven"===h;if("constant"===a.kind)this.binders[n]=u?new no(a.value,o):new ro(a.value,o,l),r.push(`/u_${n}`);else if("source"===a.kind||u){const i=uo(n,l,"source");this.binders[n]=u?new ao(a,o,l,c,e,i,t.id):new so(a,o,l,i),r.push(`/a_${n}`)}else{const t=uo(n,l,"composite");this.binders[n]=new oo(a,o,l,c,e,t),r.push(`/z_${n}`)}}this.cacheKey=r.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof so||e instanceof oo?e.maxValue:0}populatePaintArrays(t,e,i,r,n){for(const s in this.binders){const o=this.binders[s];(o instanceof so||o instanceof oo||o instanceof ao)&&o.populatePaintArray(t,e,i,r,n)}}setConstantPatternPositions(t,e){for(const i in this.binders){const r=this.binders[i];r instanceof no&&r.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,i,r,n){let s=!1;for(const o in t){const a=e.getPositions(o);for(const e of a){const a=i.feature(e.index);for(const i in this.binders){const l=this.binders[i];if((l instanceof so||l instanceof oo||l instanceof ao)&&!0===l.expression.isStateDependent){const c=r.paint.get(i);l.expression=c.value,l.updatePaintArray(e.start,e.end,a,t[o],n),s=!0}}}}return s}defines(){const t=[];for(const e in this.binders){const i=this.binders[e];(i instanceof ro||i instanceof no)&&t.push(...i.uniformNames.map(t=>`#define HAS_UNIFORM_${t}`))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof so||i instanceof oo)for(let e=0;e<i.paintVertexAttributes.length;e++)t.push(i.paintVertexAttributes[e].name);else if(i instanceof ao)for(let e=0;e<$s.members.length;e++)t.push($s.members[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof ro||i instanceof no||i instanceof oo)for(const e of i.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const i=[];for(const r in this.binders){const n=this.binders[r];if(n instanceof ro||n instanceof no||n instanceof oo)for(const s of n.uniformNames)if(e[s]){const o=n.getBinding(t,e[s],s);i.push({name:s,property:r,binding:o})}}return i}setUniforms(t,e,i,r){for(const{name:n,property:s,binding:o}of e)this.binders[s].setUniform(o,r,i.get(s),n)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const i=this.binders[e];if(t&&i instanceof ao){const e=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(i instanceof so||i instanceof oo)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(t){for(const e in this.binders){const i=this.binders[e];(i instanceof so||i instanceof oo||i instanceof ao)&&i.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof so||e instanceof oo||e instanceof ao)&&e.destroy()}}}class co{constructor(t,e,i=(()=>!0)){this.programConfigurations={};for(const r of t)this.programConfigurations[r.id]=new lo(r,e,i);this.needsUpload=!1,this._featureMap=new Xs,this._bufferOffset=0}populatePaintArrays(t,e,i,r,n,s){for(const o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(t,e,r,n,s);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,i,r){for(const n of i)this.needsUpload=this.programConfigurations[n.id].updatePaintArrays(t,this._featureMap,e,n,r)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function ho(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}function uo(t,e,i){const r={color:{source:ds,composite:Ms},number:{source:Es,composite:ds}},n=function(t){return{"line-pattern":{source:ps,composite:ps},"fill-pattern":{source:ps,composite:ps},"fill-extrusion-pattern":{source:ps,composite:ps}}[t]}(t);return n&&n[i]||r[e][i]}Gr("ConstantBinder",ro),Gr("CrossFadedConstantBinder",no),Gr("SourceExpressionBinder",so),Gr("CrossFadedCompositeBinder",ao),Gr("CompositeExpressionBinder",oo),Gr("ProgramConfiguration",lo,{omit:["_buffers"]}),Gr("ProgramConfigurationSet",co);class po extends Rt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Wn(e.layout)),e.paint)){this._transitionablePaint=new Gn(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Kn(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,i={}){null!=e&&this._validate(Or,`layers.${this.id}.layout.${t}`,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return E(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,i={}){if(null!=e&&this._validate(Fr,`layers.${this.id}.paint.${t}`,t,e,i))return!1;if(E(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;{const i=this._transitionablePaint._values[t],r="cross-faded-data-driven"===i.property.specification["property-type"],n=i.value.isDataDriven(),s=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const o=this._transitionablePaint._values[t].value;return o.isDataDriven()||n||r||this._handleOverridablePaintPropertyUpdate(t,s,o)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,i){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),I(t,(t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length))}_validate(t,e,i,r,n={}){return(!n||!1!==n.validate)&&Ur(this,t.call(Rr,{key:e,layerType:this.type,objectKey:i,value:r,styleSpec:Bt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof Hn&&Vi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const mo=as([{name:"a_pos",components:2,type:"Int16"}],4),{members:fo}=mo;class _o{constructor(t=[]){this.segments=t}prepareSegment(t,e,i,r){let n=this.segments[this.segments.length-1];return t>_o.MAX_VERTEX_ARRAY_LENGTH&&M(`Max vertices per segment is ${_o.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!n||n.vertexLength+t>_o.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==r)&&(n={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(n.sortKey=r),this.segments.push(n)),n}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,i,r){return new _o([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])}}_o.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Gr("SegmentVector",_o);const go=Math.pow(2,14)-1,yo=-go-1;function xo(t){const e=8192/t.extent,i=t.loadGeometry();for(let r=0;r<i.length;r++){const t=i[r];for(let i=0;i<t.length;i++){const r=t[i],n=Math.round(r.x*e),s=Math.round(r.y*e);r.x=m(n,yo,go),r.y=m(s,yo,go),(n<r.x||n>r.x+1||s<r.y||s>r.y+1)&&M("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function vo(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?xo(t):[]}}function bo(t,e,i,r,n){t.emplaceBack(2*e+(r+1)/2,2*i+(n+1)/2)}class wo{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new cs,this.indexArray=new bs,this.segments=new _o,this.programConfigurations=new co(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id)}populate(t,e,i){const r=this.layers[0],n=[];let s=null;"circle"===r.type&&(s=r.layout.get("circle-sort-key"));for(const{feature:o,id:a,index:l,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,e=vo(o,t);if(!this.layers[0]._featureFilter.filter(new $n(this.zoom),e,i))continue;const r=s?s.evaluate(e,{},i):void 0,h={id:a,properties:o.properties,type:o.type,sourceLayerIndex:c,index:l,geometry:t?e.geometry:xo(o),patterns:{},sortKey:r};n.push(h)}s&&n.sort((t,e)=>t.sortKey-e.sortKey);for(const o of n){const{geometry:r,index:n,sourceLayerIndex:s}=o,a=t[n].feature;this.addFeature(o,r,n,i),e.featureIndex.insert(a,r,n,s,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,fo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,i,r){for(const n of e)for(const e of n){const i=e.x,r=e.y;if(i<0||i>=8192||r<0||r>=8192)continue;const n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),s=n.vertexLength;bo(this.layoutVertexArray,i,r,-1,-1),bo(this.layoutVertexArray,i,r,1,-1),bo(this.layoutVertexArray,i,r,1,1),bo(this.layoutVertexArray,i,r,-1,1),this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+3,s+2),n.vertexLength+=4,n.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},r)}}function To(t,e){for(let i=0;i<t.length;i++)if(ko(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(ko(t,e[i]))return!0;return!!Ao(t,e)}function Eo(t,e,i){return!!ko(t,e)||!!Mo(e,t,i)}function So(t,e){if(1===t.length)return Po(e,t[0]);for(let i=0;i<e.length;i++){const r=e[i];for(let e=0;e<r.length;e++)if(ko(t,r[e]))return!0}for(let i=0;i<t.length;i++)if(Po(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(Ao(t,e[i]))return!0;return!1}function Io(t,e,i){if(t.length>1){if(Ao(t,e))return!0;for(let r=0;r<e.length;r++)if(Mo(e[r],t,i))return!0}for(let r=0;r<t.length;r++)if(Mo(t[r],e,i))return!0;return!1}function Ao(t,e){if(0===t.length||0===e.length)return!1;for(let i=0;i<t.length-1;i++){const r=t[i],n=t[i+1];for(let t=0;t<e.length-1;t++)if(Co(r,n,e[t],e[t+1]))return!0}return!1}function Co(t,e,i,r){return z(t,i,r)!==z(e,i,r)&&z(t,e,i)!==z(t,e,r)}function Mo(t,e,i){const r=i*i;if(1===e.length)return t.distSqr(e[0])<r;for(let n=1;n<e.length;n++)if(zo(t,e[n-1],e[n])<r)return!0;return!1}function zo(t,e,i){const r=e.distSqr(i);if(0===r)return t.distSqr(e);const n=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return t.distSqr(n<0?e:n>1?i:i.sub(e)._mult(n)._add(e))}function Po(t,e){let i,r,n,s=!1;for(let o=0;o<t.length;o++){i=t[o];for(let t=0,o=i.length-1;t<i.length;o=t++)r=i[t],n=i[o],r.y>e.y!=n.y>e.y&&e.x<(n.x-r.x)*(e.y-r.y)/(n.y-r.y)+r.x&&(s=!s)}return s}function ko(t,e){let i=!1;for(let r=0,n=t.length-1;r<t.length;n=r++){const s=t[r],o=t[n];s.y>e.y!=o.y>e.y&&e.x<(o.x-s.x)*(e.y-s.y)/(o.y-s.y)+s.x&&(i=!i)}return i}function Do(t,e,i,n,s){for(const r of t)if(e<=r.x&&i<=r.y&&n>=r.x&&s>=r.y)return!0;const o=[new r(e,i),new r(e,s),new r(n,s),new r(n,i)];if(t.length>2)for(const r of o)if(ko(t,r))return!0;for(let r=0;r<t.length-1;r++)if(Lo(t[r],t[r+1],o))return!0;return!1}function Lo(t,e,i){const r=i[0],n=i[2];if(t.x<r.x&&e.x<r.x||t.x>n.x&&e.x>n.x||t.y<r.y&&e.y<r.y||t.y>n.y&&e.y>n.y)return!1;const s=z(t,e,i[0]);return s!==z(t,e,i[1])||s!==z(t,e,i[2])||s!==z(t,e,i[3])}function Ro(t,e,i){const r=e.paint.get(t).value;return"constant"===r.kind?r.value:i.programConfigurations.get(e.id).getMaxValue(t)}function Bo(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Fo(t,e,i,n,s){if(!e[0]&&!e[1])return t;const o=r.convert(e)._mult(s);"viewport"===i&&o._rotate(-n);const a=[];for(let r=0;r<t.length;r++)a.push(t[r].sub(o));return a}function Oo(t,e,i,n){const s=r.convert(t)._mult(n);return"viewport"===e&&s._rotate(-i),s}Gr("CircleBucket",wo,{omit:["layers"]});const Uo=new is({"circle-sort-key":new Jn(Bt.layout_circle["circle-sort-key"])});var Vo={paint:new is({"circle-radius":new Jn(Bt.paint_circle["circle-radius"]),"circle-color":new Jn(Bt.paint_circle["circle-color"]),"circle-blur":new Jn(Bt.paint_circle["circle-blur"]),"circle-opacity":new Jn(Bt.paint_circle["circle-opacity"]),"circle-translate":new Yn(Bt.paint_circle["circle-translate"]),"circle-translate-anchor":new Yn(Bt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Yn(Bt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Yn(Bt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Jn(Bt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Jn(Bt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Jn(Bt.paint_circle["circle-stroke-opacity"])}),layout:Uo},No="undefined"!=typeof Float32Array?Float32Array:Array;function $o(){var t=new No(9);return No!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function qo(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Zo(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=e[9],p=e[10],m=e[11],f=e[12],_=e[13],g=e[14],y=e[15],x=i[0],v=i[1],b=i[2],w=i[3];return t[0]=x*r+v*a+b*u+w*f,t[1]=x*n+v*l+b*d+w*_,t[2]=x*s+v*c+b*p+w*g,t[3]=x*o+v*h+b*m+w*y,t[4]=(x=i[4])*r+(v=i[5])*a+(b=i[6])*u+(w=i[7])*f,t[5]=x*n+v*l+b*d+w*_,t[6]=x*s+v*c+b*p+w*g,t[7]=x*o+v*h+b*m+w*y,t[8]=(x=i[8])*r+(v=i[9])*a+(b=i[10])*u+(w=i[11])*f,t[9]=x*n+v*l+b*d+w*_,t[10]=x*s+v*c+b*p+w*g,t[11]=x*o+v*h+b*m+w*y,t[12]=(x=i[12])*r+(v=i[13])*a+(b=i[14])*u+(w=i[15])*f,t[13]=x*n+v*l+b*d+w*_,t[14]=x*s+v*c+b*p+w*g,t[15]=x*o+v*h+b*m+w*y,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Go=Zo;function jo(){var t=new No(3);return No!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Xo(t){var e=new No(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Wo(t){return Math.hypot(t[0],t[1],t[2])}function Ho(t,e,i){var r=new No(3);return r[0]=t,r[1]=e,r[2]=i,r}function Ko(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function Yo(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function Jo(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Qo(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function ta(t,e){var i=e[0],r=e[1],n=e[2],s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function ea(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ia(t,e,i){var r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],l=i[2];return t[0]=n*l-s*a,t[1]=s*o-r*l,t[2]=r*a-n*o,t}function ra(t,e,i){var r=e[0],n=e[1],s=e[2],o=i[3]*r+i[7]*n+i[11]*s+i[15];return t[0]=(i[0]*r+i[4]*n+i[8]*s+i[12])/(o=o||1),t[1]=(i[1]*r+i[5]*n+i[9]*s+i[13])/o,t[2]=(i[2]*r+i[6]*n+i[10]*s+i[14])/o,t}function na(t,e,i){var r=i[0],n=i[1],s=i[2],o=e[0],a=e[1],l=e[2],c=n*l-s*a,h=s*o-r*l,u=r*a-n*o,d=n*u-s*h,p=s*c-r*u,m=r*h-n*c,f=2*i[3];return h*=f,u*=f,p*=2,m*=2,t[0]=o+(c*=f)+(d*=2),t[1]=a+h+p,t[2]=l+u+m,t}var sa,oa=Yo,aa=Wo;function la(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,t[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,t[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,t[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,t}function ca(){var t=new No(4);return No!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function ha(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function ua(t,e,i){i*=.5;var r=e[0],n=e[1],s=e[2],o=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=r*l+o*a,t[1]=n*l+s*a,t[2]=s*l-n*a,t[3]=o*l-r*a,t}jo(),sa=new No(4),No!=Float32Array&&(sa[0]=0,sa[1]=0,sa[2]=0,sa[3]=0),jo(),Ho(1,0,0),Ho(0,1,0),ca(),ca(),$o();class da{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(t,e,i){const r=Math.pow(2,i),n=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(i=>{const n=la([],i,t),s=1/n[3]/e*r;return function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}(n,n,[s,s,1/n[3],s])}),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(t=>{const e=ta([],ia([],oa([],n[t[0]],n[t[1]]),oa([],n[t[2]],n[t[1]]))),i=-ea(e,n[t[1]]);return e.concat(i)});return new da(n,s)}}class pa{constructor(t,e){this.min=t,this.max=e,this.center=Jo([],Ko([],this.min,this.max),.5)}quadrant(t){const e=[t%2==0,t<2],i=Xo(this.min),r=Xo(this.max);for(let n=0;n<e.length;n++)i[n]=e[n]?this.min[n]:this.center[n],r[n]=e[n]?this.center[n]:this.max[n];return r[2]=this.max[2],new pa(i,r)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}intersects(t){const e=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let i=!0;for(let s=0;s<t.planes.length;s++){const o=t.planes[s];let a=0;for(let t=0;t<e.length;t++)a+=(r=o)[0]*(n=e[t])[0]+r[1]*n[1]+r[2]*n[2]+r[3]*n[3]>=0;if(0===a)return 0;a!==e.length&&(i=!1)}var r,n;if(i)return 2;for(let s=0;s<3;s++){let e=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let r=0;r<t.points.length;r++){const n=t.points[r][s]-this.min[s];e=Math.min(e,n),i=Math.max(i,n)}if(i<0||e>this.max[s]-this.min[s])return 0}return 1}}function ma(t,e,i){const n=la([],[t.x,t.y,e,1],i);return new r(n[0]/n[3],n[1]/n[3])}const fa=Ho(0,0,0),_a=Ho(0,0,1);function ga(t,e){const i=jo();return fa[2]=e,t.intersectsPlane(fa,_a,i),new r(i[0],i[1])}class ya extends wo{}function xa(t,{width:e,height:i},r,n){if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==e*i*r)throw new RangeError("mismatched image size")}else n=new Uint8Array(e*i*r);return t.width=e,t.height=i,t.data=n,t}function va(t,{width:e,height:i},r){if(e===t.width&&i===t.height)return;const n=xa({},{width:e,height:i},r);ba(t,n,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,i)},r),t.width=e,t.height=i,t.data=n.data}function ba(t,e,i,r,n,s){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||i.x>t.width-n.width||i.y>t.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||r.x>e.width-n.width||r.y>e.height-n.height)throw new RangeError("out of range destination coordinates for image copy");const o=t.data,a=e.data;for(let l=0;l<n.height;l++){const c=((i.y+l)*t.width+i.x)*s,h=((r.y+l)*e.width+r.x)*s;for(let t=0;t<n.width*s;t++)a[h+t]=o[c+t]}return e}Gr("HeatmapBucket",ya,{omit:["layers"]});class wa{constructor(t,e){xa(this,t,1,e)}resize(t){va(this,t,1)}clone(){return new wa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,r,n){ba(t,e,i,r,n,1)}}class Ta{constructor(t,e){xa(this,t,4,e)}resize(t){va(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Ta({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,r,n){ba(t,e,i,r,n,4)}}Gr("AlphaImage",wa),Gr("RGBAImage",Ta);var Ea={paint:new is({"heatmap-radius":new Jn(Bt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Jn(Bt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Yn(Bt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new es(Bt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Yn(Bt.paint_heatmap["heatmap-opacity"])})};function Sa(t){const e={},i=t.resolution||256,r=t.clips?t.clips.length:1,n=t.image||new Ta({width:i,height:r}),s=(i,r,s)=>{e[t.evaluationKey]=s;const o=t.expression.evaluate(e);n.data[i+r+0]=Math.floor(255*o.r/o.a),n.data[i+r+1]=Math.floor(255*o.g/o.a),n.data[i+r+2]=Math.floor(255*o.b/o.a),n.data[i+r+3]=Math.floor(255*o.a)};if(t.clips)for(let o=0,a=0;o<r;++o,a+=4*i)for(let e=0,r=0;e<i;e++,r+=4){const n=e/(i-1),{start:l,end:c}=t.clips[o];s(a,r,l*(1-n)+c*n)}else for(let o=0,a=0;o<i;o++,a+=4)s(0,a,o/(i-1));return n}var Ia={paint:new is({"hillshade-illumination-direction":new Yn(Bt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Yn(Bt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Yn(Bt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Yn(Bt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Yn(Bt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Yn(Bt.paint_hillshade["hillshade-accent-color"])})};const Aa=as([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ca}=Aa;var Ma=Pa,za=Pa;function Pa(t,e,i){i=i||2;var r,n,s,o,a,l,c,h=e&&e.length,u=h?e[0]*i:t.length,d=ka(t,0,u,i,!0),p=[];if(!d||d.next===d.prev)return p;if(h&&(d=function(t,e,i,r){var n,s,o,a=[];for(n=0,s=e.length;n<s;n++)(o=ka(t,e[n]*r,n<s-1?e[n+1]*r:t.length,r,!1))===o.next&&(o.steiner=!0),a.push(qa(o));for(a.sort(Ua),n=0;n<a.length;n++)Va(a[n],i),i=Da(i,i.next);return i}(t,e,d,i)),t.length>80*i){r=s=t[0],n=o=t[1];for(var m=i;m<u;m+=i)(a=t[m])<r&&(r=a),(l=t[m+1])<n&&(n=l),a>s&&(s=a),l>o&&(o=l);c=0!==(c=Math.max(s-r,o-n))?1/c:0}return La(d,p,i,r,n,c),p}function ka(t,e,i,r,n){var s,o;if(n===il(t,e,i,r)>0)for(s=e;s<i;s+=r)o=Qa(s,t[s],t[s+1],o);else for(s=i-r;s>=e;s-=r)o=Qa(s,t[s],t[s+1],o);return o&&Xa(o,o.next)&&(tl(o),o=o.next),o}function Da(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!Xa(r,r.next)&&0!==ja(r.prev,r,r.next))r=r.next;else{if(tl(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function La(t,e,i,r,n,s,o){if(t){!o&&s&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=$a(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,s,o,a,l,c=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,r=i,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,l--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;i=r}s.nextZ=null,c*=2}while(o>1)}(n)}(t,r,n,s);for(var a,l,c=t;t.prev!==t.next;)if(a=t.prev,l=t.next,s?Ba(t,r,n,s):Ra(t))e.push(a.i/i),e.push(t.i/i),e.push(l.i/i),tl(t),t=l.next,c=l.next;else if((t=l)===c){o?1===o?La(t=Fa(Da(t),e,i),e,i,r,n,s,2):2===o&&Oa(t,e,i,r,n,s):La(Da(t),e,i,r,n,s,1);break}}}function Ra(t){var e=t.prev,i=t,r=t.next;if(ja(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(Za(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&ja(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function Ba(t,e,i,r){var n=t.prev,s=t,o=t.next;if(ja(n,s,o)>=0)return!1;for(var a=n.x>s.x?n.x>o.x?n.x:o.x:s.x>o.x?s.x:o.x,l=n.y>s.y?n.y>o.y?n.y:o.y:s.y>o.y?s.y:o.y,c=$a(n.x<s.x?n.x<o.x?n.x:o.x:s.x<o.x?s.x:o.x,n.y<s.y?n.y<o.y?n.y:o.y:s.y<o.y?s.y:o.y,e,i,r),h=$a(a,l,e,i,r),u=t.prevZ,d=t.nextZ;u&&u.z>=c&&d&&d.z<=h;){if(u!==t.prev&&u!==t.next&&Za(n.x,n.y,s.x,s.y,o.x,o.y,u.x,u.y)&&ja(u.prev,u,u.next)>=0)return!1;if(u=u.prevZ,d!==t.prev&&d!==t.next&&Za(n.x,n.y,s.x,s.y,o.x,o.y,d.x,d.y)&&ja(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;u&&u.z>=c;){if(u!==t.prev&&u!==t.next&&Za(n.x,n.y,s.x,s.y,o.x,o.y,u.x,u.y)&&ja(u.prev,u,u.next)>=0)return!1;u=u.prevZ}for(;d&&d.z<=h;){if(d!==t.prev&&d!==t.next&&Za(n.x,n.y,s.x,s.y,o.x,o.y,d.x,d.y)&&ja(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Fa(t,e,i){var r=t;do{var n=r.prev,s=r.next.next;!Xa(n,s)&&Wa(n,r,r.next,s)&&Ya(n,s)&&Ya(s,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(s.i/i),tl(r),tl(r.next),r=t=s),r=r.next}while(r!==t);return Da(r)}function Oa(t,e,i,r,n,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Ga(o,a)){var l=Ja(o,a);return o=Da(o,o.next),l=Da(l,l.next),La(o,e,i,r,n,s),void La(l,e,i,r,n,s)}a=a.next}o=o.next}while(o!==t)}function Ua(t,e){return t.x-e.x}function Va(t,e){if(e=function(t,e){var i,r=e,n=t.x,s=t.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o){if(o=a,a===n){if(s===r.y)return r;if(s===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===o)return i;var l,c=i,h=i.x,u=i.y,d=1/0;r=i;do{n>=r.x&&r.x>=h&&n!==r.x&&Za(s<u?n:o,s,h,u,s<u?o:n,s,r.x,r.y)&&(l=Math.abs(s-r.y)/(n-r.x),Ya(r,t)&&(l<d||l===d&&(r.x>i.x||r.x===i.x&&Na(i,r)))&&(i=r,d=l)),r=r.next}while(r!==c);return i}(t,e)){var i=Ja(e,t);Da(e,e.next),Da(i,i.next)}}function Na(t,e){return ja(t.prev,t,e.prev)<0&&ja(e.next,t,t.next)<0}function $a(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function qa(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function Za(t,e,i,r,n,s,o,a){return(n-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(r-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(n-o)*(r-a)>=0}function Ga(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Wa(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(Ya(t,e)&&Ya(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(ja(t.prev,t,e.prev)||ja(t,e.prev,e))||Xa(t,e)&&ja(t.prev,t,t.next)>0&&ja(e.prev,e,e.next)>0)}function ja(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Xa(t,e){return t.x===e.x&&t.y===e.y}function Wa(t,e,i,r){var n=Ka(ja(t,e,i)),s=Ka(ja(t,e,r)),o=Ka(ja(i,r,t)),a=Ka(ja(i,r,e));return n!==s&&o!==a||!(0!==n||!Ha(t,i,e))||!(0!==s||!Ha(t,r,e))||!(0!==o||!Ha(i,t,r))||!(0!==a||!Ha(i,e,r))}function Ha(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Ka(t){return t>0?1:t<0?-1:0}function Ya(t,e){return ja(t.prev,t,t.next)<0?ja(t,e,t.next)>=0&&ja(t,t.prev,e)>=0:ja(t,e,t.prev)<0||ja(t,t.next,e)<0}function Ja(t,e){var i=new el(t.i,t.x,t.y),r=new el(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function Qa(t,e,i,r){var n=new el(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function tl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function el(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function il(t,e,i,r){for(var n=0,s=e,o=i-r;s<i;s+=r)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}function rl(t,e,i,r,n){!function t(e,i,r,n,s){for(;n>r;){if(n-r>600){var o=n-r+1,a=i-r+1,l=Math.log(o),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(o-c)/o)*(a-o/2<0?-1:1);t(e,i,Math.max(r,Math.floor(i-a*c/o+h)),Math.min(n,Math.floor(i+(o-a)*c/o+h)),s)}var u=e[i],d=r,p=n;for(nl(e,r,i),s(e[n],u)>0&&nl(e,r,n);d<p;){for(nl(e,d,p),d++,p--;s(e[d],u)<0;)d++;for(;s(e[p],u)>0;)p--}0===s(e[r],u)?nl(e,r,p):nl(e,++p,n),p<=i&&(r=p+1),i<=p&&(n=p-1)}}(t,e,i||0,r||t.length-1,n||sl)}function nl(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function sl(t,e){return t<e?-1:t>e?1:0}function ol(t,e){const i=t.length;if(i<=1)return[t];const r=[];let n,s;for(let o=0;o<i;o++){const e=P(t[o]);0!==e&&(t[o].area=Math.abs(e),void 0===s&&(s=e<0),s===e<0?(n&&r.push(n),n=[t[o]]):n.push(t[o]))}if(n&&r.push(n),e>1)for(let o=0;o<r.length;o++)r[o].length<=e||(rl(r[o],e,1,r[o].length-1,al),r[o]=r[o].slice(0,e));return r}function al(t,e){return e.area-t.area}function ll(t,e,i){const r=i.patternDependencies;let n=!1;for(const s of e){const e=s.paint.get(`${t}-pattern`);e.isConstant()||(n=!0);const i=e.constantOr(null);i&&(n=!0,r[i.to]=!0,r[i.from]=!0)}return n}function cl(t,e,i,r,n){const s=n.patternDependencies;for(const o of e){const e=o.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:r-1},i,{},n.availableImages),a=e.evaluate({zoom:r},i,{},n.availableImages),l=e.evaluate({zoom:r+1},i,{},n.availableImages);t=t&&t.name?t.name:t,a=a&&a.name?a.name:a,l=l&&l.name?l.name:l,s[t]=!0,s[a]=!0,s[l]=!0,i.patterns[o.id]={min:t,mid:a,max:l}}}return i}Pa.deviation=function(t,e,i,r){var n=e&&e.length,s=Math.abs(il(t,0,n?e[0]*i:t.length,i));if(n)for(var o=0,a=e.length;o<a;o++)s-=Math.abs(il(t,e[o]*i,o<a-1?e[o+1]*i:t.length,i));var l=0;for(o=0;o<r.length;o+=3){var c=r[o]*i,h=r[o+1]*i,u=r[o+2]*i;l+=Math.abs((t[c]-t[u])*(t[h+1]-t[c+1])-(t[c]-t[h])*(t[u+1]-t[c+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},Pa.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[n][s][o]);n>0&&i.holes.push(r+=t[n-1].length)}return i},Ma.default=za;class hl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new cs,this.indexArray=new bs,this.indexArray2=new As,this.programConfigurations=new co(t.layers,t.zoom),this.segments=new _o,this.segments2=new _o,this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id)}populate(t,e,i){this.hasPattern=ll("fill",this.layers,e);const r=this.layers[0].layout.get("fill-sort-key"),n=[];for(const{feature:s,id:o,index:a,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,c=vo(s,t);if(!this.layers[0]._featureFilter.filter(new $n(this.zoom),c,i))continue;const h=r?r.evaluate(c,{},i,e.availableImages):void 0,u={id:o,properties:s.properties,type:s.type,sourceLayerIndex:l,index:a,geometry:t?c.geometry:xo(s),patterns:{},sortKey:h};n.push(u)}r&&n.sort((t,e)=>t.sortKey-e.sortKey);for(const s of n){const{geometry:r,index:n,sourceLayerIndex:o}=s;if(this.hasPattern){const t=cl("fill",this.layers,s,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(s,r,n,i,{});e.featureIndex.insert(t[n].feature,r,n,o,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ca),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,i,r,n){for(const s of ol(e,500)){let t=0;for(const a of s)t+=a.length;const e=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),i=e.vertexLength,r=[],n=[];for(const a of s){if(0===a.length)continue;a!==s[0]&&n.push(r.length/2);const t=this.segments2.prepareSegment(a.length,this.layoutVertexArray,this.indexArray2),e=t.vertexLength;this.layoutVertexArray.emplaceBack(a[0].x,a[0].y),this.indexArray2.emplaceBack(e+a.length-1,e),r.push(a[0].x),r.push(a[0].y);for(let i=1;i<a.length;i++)this.layoutVertexArray.emplaceBack(a[i].x,a[i].y),this.indexArray2.emplaceBack(e+i-1,e+i),r.push(a[i].x),r.push(a[i].y);t.vertexLength+=a.length,t.primitiveLength+=a.length}const o=Ma(r,n);for(let s=0;s<o.length;s+=3)this.indexArray.emplaceBack(i+o[s],i+o[s+1],i+o[s+2]);e.vertexLength+=t,e.primitiveLength+=o.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)}}Gr("FillBucket",hl,{omit:["layers","patternFeatures"]});const ul=new is({"fill-sort-key":new Jn(Bt.layout_fill["fill-sort-key"])});var dl={paint:new is({"fill-antialias":new Yn(Bt.paint_fill["fill-antialias"]),"fill-opacity":new Jn(Bt.paint_fill["fill-opacity"]),"fill-color":new Jn(Bt.paint_fill["fill-color"]),"fill-outline-color":new Jn(Bt.paint_fill["fill-outline-color"]),"fill-translate":new Yn(Bt.paint_fill["fill-translate"]),"fill-translate-anchor":new Yn(Bt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qn(Bt.paint_fill["fill-pattern"])}),layout:ul};const pl=as([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),ml=as([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:fl}=pl;var _l=gl;function gl(t,e,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=n,t.readFields(yl,this,e)}function yl(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function xl(t){for(var e,i,r=0,n=0,s=t.length,o=s-1;n<s;o=n++)r+=((i=t[o]).x-(e=t[n]).x)*(e.y+i.y);return r}gl.types=["Unknown","Point","LineString","Polygon"],gl.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,n=1,s=0,o=0,a=0,l=[];t.pos<i;){if(s<=0){var c=t.readVarint();n=7&c,s=c>>3}if(s--,1===n||2===n)o+=t.readSVarint(),a+=t.readSVarint(),1===n&&(e&&l.push(e),e=[]),e.push(new r(o,a));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&l.push(e),l},gl.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,n=0,s=0,o=1/0,a=-1/0,l=1/0,c=-1/0;t.pos<e;){if(r<=0){var h=t.readVarint();i=7&h,r=h>>3}if(r--,1===i||2===i)(n+=t.readSVarint())<o&&(o=n),n>a&&(a=n),(s+=t.readSVarint())<l&&(l=s),s>c&&(c=s);else if(7!==i)throw new Error("unknown command "+i)}return[o,l,a,c]},gl.prototype.toGeoJSON=function(t,e,i){var r,n,s=this.extent*Math.pow(2,i),o=this.extent*t,a=this.extent*e,l=this.loadGeometry(),c=gl.types[this.type];function h(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+o)/s-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+a)/s)*Math.PI/180))-90]}}switch(this.type){case 1:var u=[];for(r=0;r<l.length;r++)u[r]=l[r][0];h(l=u);break;case 2:for(r=0;r<l.length;r++)h(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],s=0;s<e;s++){var o=xl(t[s]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(i&&n.push(i),i=[t[s]]):i.push(t[s]))}return i&&n.push(i),n}(l),r=0;r<l.length;r++)for(n=0;n<l[r].length;n++)h(l[r][n])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var vl=bl;function bl(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(wl,this,e),this.length=this._features.length}function wl(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(i))}function Tl(t,e,i){if(3===t){var r=new vl(i,i.readVarint()+i.pos);r.length&&(e[r.name]=r)}}bl.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new _l(this._pbf,e,this.extent,this._keys,this._values)};var El={VectorTile:function(t,e){this.layers=t.readFields(Tl,{},e)},VectorTileFeature:_l,VectorTileLayer:vl};const Sl=El.VectorTileFeature.types,Il=Math.pow(2,13);function Al(t,e,i,r,n,s,o,a){t.emplaceBack((e<<1)+o,(i<<1)+s,(Math.floor(r*Il)<<1)+n,Math.round(a))}class Cl{constructor(){this.acc=new r(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new r(t.x,t.y),this.max=new r(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);let i=!!this.borders;const r=this.min,n=this.max;t.x<r.x?(r.x=t.x,i=!0):t.x>n.x&&(n.x=t.x,i=!0),t.y<r.y?(r.y=t.y,i=!0):t.y>n.y&&(n.y=t.y,i=!0),((0===t.x||8192===t.x)&&t.x===e.x)!=((0===t.y||8192===t.y)&&t.y===e.y)&&this.processBorderOverlap(t,e),i&&this.checkBorderIntersection(t,e)}checkBorderIntersection(t,e){e.x<0!=t.x<0&&this.addBorderIntersection(0,Je(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>8192!=t.x>8192&&this.addBorderIntersection(1,Je(e.y,t.y,(8192-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,Je(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>8192!=t.y>8192&&this.addBorderIntersection(3,Je(e.x,t.x,(8192-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const i=this.borders[t];e<i[0]&&(i[0]=e),e>i[1]&&(i[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const i=0===t.x?0:1;this.addBorderIntersection(i,e.y),this.addBorderIntersection(i,t.y)}else{const i=0===t.y?2:3;this.addBorderIntersection(i,e.x),this.addBorderIntersection(i,t.x)}}centroid(){const t=this.polyCount.reduce((t,e)=>t+e.edges,0);return 0!==t?this.acc.div(t)._round():new r(0,0)}span(){return new r(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((t,e)=>t+ +(e[0]!==Number.MAX_VALUE),0)}}class Ml{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new hs,this.centroidVertexArray=new Ns,this.indexArray=new bs,this.programConfigurations=new co(t.layers,t.zoom),this.segments=new _o,this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id),this.enableTerrain=t.enableTerrain}populate(t,e,i){this.features=[],this.hasPattern=ll("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(t){const e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/8192/(1<<t.z)}(i);for(const{feature:r,id:n,index:s,sourceLayerIndex:o}of t){const t=this.layers[0]._featureFilter.needGeometry,a=vo(r,t);if(!this.layers[0]._featureFilter.filter(new $n(this.zoom),a,i))continue;const l={id:n,sourceLayerIndex:o,index:s,geometry:t?a.geometry:xo(r),properties:r.properties,type:r.type,patterns:{}},c=this.layoutVertexArray.length;this.hasPattern?this.features.push(cl("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,s,i,{}),e.featureIndex.insert(r,l.geometry,s,o,this.index,c)}this.sortBorders()}addFeatures(t,e,i){for(const r of this.features){const{geometry:t}=r;this.addFeature(r,t,r.index,e,i)}this.sortBorders()}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,fl),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,ml.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,i,r,n){const s=this.enableTerrain&&t.properties&&t.properties.hasOwnProperty("type")&&t.properties.hasOwnProperty("height")&&"Polygon"===Sl[t.type]?new Cl:null;for(const a of ol(e,500)){let e=0,i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===a.length||(o=a[0]).every(t=>t.x<=0)||o.every(t=>t.x>=8192)||o.every(t=>t.y<=0)||o.every(t=>t.y>=8192))continue;for(let t=0;t<a.length;t++){const r=a[t];if(0===r.length)continue;e+=r.length;let n=0;s&&s.startRing(r[0]);for(let t=0;t<r.length;t++){const e=r[t];if(t>=1){const o=r[t-1];if(!zl(e,o)){s&&s.append(e,o),i.vertexLength+4>_o.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=e.sub(o)._perp(),r=t.x/(Math.abs(t.x)+Math.abs(t.y)),a=t.y>0?1:0,l=o.dist(e);n+l>32768&&(n=0),Al(this.layoutVertexArray,e.x,e.y,r,a,0,0,n),Al(this.layoutVertexArray,e.x,e.y,r,a,0,1,n),n+=l,Al(this.layoutVertexArray,o.x,o.y,r,a,0,0,n),Al(this.layoutVertexArray,o.x,o.y,r,a,0,1,n);const c=i.vertexLength;this.indexArray.emplaceBack(c,c+2,c+1),this.indexArray.emplaceBack(c+1,c+2,c+3),i.vertexLength+=4,i.primitiveLength+=2}}}}if(i.vertexLength+e>_o.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==Sl[t.type])continue;const r=[],n=[],l=i.vertexLength;for(let t=0;t<a.length;t++){const e=a[t];if(0!==e.length){e!==a[0]&&n.push(r.length/2);for(let t=0;t<e.length;t++){const i=e[t];Al(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),r.push(i.x),r.push(i.y),s&&s.currentPolyCount.top++}}}const c=Ma(r,n);for(let t=0;t<c.length;t+=3)this.indexArray.emplaceBack(l+c[t],l+c[t+2],l+c[t+1]);i.primitiveLength+=c.length/3,i.vertexLength+=e}var o;if(s&&s.polyCount.length>0){if(s.borders){s.vertexArrayOffset=this.centroidVertexArray.length;const t=s.borders,e=this.featuresOnBorder.push(s)-1;for(let i=0;i<4;i++)t[i][0]!==Number.MAX_VALUE&&this.borders[i].push(e)}this.encodeCentroid(s.borders?void 0:s.centroid(),s)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort((e,i)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[i].borders[t][0])}encodeCentroid(t,e,i=!0){let r,n;if(t)if(0!==t.y){const i=e.span()._mult(this.tileToMeter);r=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(i.x/10)),n=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(i.y/10))}else r=Math.ceil(7.3*t.x),n=0;else r=0,n=+i;let s=i?this.centroidVertexArray.length:e.vertexArrayOffset;for(const o of e.polyCount){i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*o.edges+o.top);for(let t=0;t<2*o.edges;t++)this.centroidVertexArray.emplace(s++,0,n),this.centroidVertexArray.emplace(s++,r,n);for(let t=0;t<o.top;t++)this.centroidVertexArray.emplace(s++,r,n)}}}function zl(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}Gr("FillExtrusionBucket",Ml,{omit:["layers","features"]}),Gr("PartMetadata",Cl);var Pl={paint:new is({"fill-extrusion-opacity":new Yn(Bt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Jn(Bt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Yn(Bt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Yn(Bt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qn(Bt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Jn(Bt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Jn(Bt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Yn(Bt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function kl(t,e){return t.x*e.x+t.y*e.y}function Dl(t,e){if(1===t.length){let i=0;const r=e[i++];let n;for(;!n||r.equals(n);)if(!(n=e[i++]))return 1/0;for(;i<e.length;i++){const s=e[i],o=t[0],a=n.sub(r),l=s.sub(r),c=o.sub(r),h=kl(a,a),u=kl(a,l),d=kl(l,l),p=kl(c,a),m=kl(c,l),f=h*d-u*u,_=(d*p-u*m)/f,g=(h*m-u*p)/f,y=r.z*(1-_-g)+n.z*_+s.z*g;if(isFinite(y))return y}return 1/0}{let t=1/0;for(const i of e)t=Math.min(t,i.z);return t}}function Ll(t){const e=new r(t[0],t[1]);return e.z=t[2],e}function Rl(t,e,i,r,n,s,o,a){const l=o*n.getElevationAt(t,e,!0,!0),c=0!==s[0],h=c?0===s[1]?o*(s[0]/7.3):o*function(t,e,i){const r=Math.floor(e[0]/8),n=Math.floor(e[1]/8),s=10*(e[0]-8*r),o=10*(e[1]-8*n),a=t.getElevationAt(r,n,!0,!0),l=t.getMeterToDEM(i),c=Math.floor(.5*(s*l-1)),h=Math.floor(.5*(o*l-1)),u=t.tileCoordToPixel(r,n),d=2*c+1,p=2*h+1,m=function(t,e,i,r,n){return[t.getElevationAtPixel(e,i,!0),t.getElevationAtPixel(e+n,i,!0),t.getElevationAtPixel(e,i+n,!0),t.getElevationAtPixel(e+r,i+n,!0)]}(t,u.x-c,u.y-h,d,p),f=Math.abs(m[0]-m[1]),_=Math.abs(m[2]-m[3]),g=Math.abs(m[0]-m[2])+Math.abs(m[1]-m[3]),y=Math.min(.25,.5*l*(f+_)/d),x=Math.min(.25,.5*l*g/p);return a+Math.max(y*s,x*o)}(n,s,a):l;return{base:l+(0===i)?-1:i,top:c?Math.max(h+r,l+i+2):l+r}}const Bl=as([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Fl}=Bl,Ol=as([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Ul}=Ol,Vl=El.VectorTileFeature.types,Nl=Math.cos(Math.PI/180*37.5);class $l{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(t=>{this.gradients[t.id]={}}),this.layoutVertexArray=new us,this.layoutVertexArray2=new ds,this.indexArray=new bs,this.programConfigurations=new co(t.layers,t.zoom),this.segments=new _o,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id)}populate(t,e,i){this.hasPattern=ll("line",this.layers,e);const r=this.layers[0].layout.get("line-sort-key"),n=[];for(const{feature:s,id:o,index:a,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,e=vo(s,t);if(!this.layers[0]._featureFilter.filter(new $n(this.zoom),e,i))continue;const c=r?r.evaluate(e,{},i):void 0,h={id:o,properties:s.properties,type:s.type,sourceLayerIndex:l,index:a,geometry:t?e.geometry:xo(s),patterns:{},sortKey:c};n.push(h)}r&&n.sort((t,e)=>t.sortKey-e.sortKey);for(const s of n){const{geometry:r,index:n,sourceLayerIndex:o}=s;if(this.hasPattern){const t=cl("line",this.layers,s,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(s,r,n,i,{});e.featureIndex.insert(t[n].feature,r,n,o,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Ul)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Fl),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,i,r,n){const s=this.layers[0].layout,o=s.get("line-join").evaluate(t,{}),a=s.get("line-cap"),l=s.get("line-miter-limit"),c=s.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const h of e)this.addLine(h,t,o,a,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,n,r)}addLine(t,e,i,r,n,s){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const o="Polygon"===Vl[e.type];let a=t.length;for(;a>=2&&t[a-1].equals(t[a-2]);)a--;let l=0;for(;l<a-1&&t[l].equals(t[l+1]);)l++;if(a<(o?3:2))return;"bevel"===i&&(n=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,h=this.segments.prepareSegment(10*a,this.layoutVertexArray,this.indexArray);let u,d=void 0,p=void 0,m=void 0,f=void 0;this.e1=this.e2=-1,o&&(u=t[a-2],f=t[l].sub(u)._unit()._perp());for(let _=l;_<a;_++){if((p=_===a-1?o?t[l+1]:void 0:t[_+1])&&t[_].equals(p))continue;f&&(m=f),u&&(d=u),u=t[_],f=p?p.sub(u)._unit()._perp():m;let e=(m=m||f).add(f);0===e.x&&0===e.y||e._unit();const g=m.x*f.x+m.y*f.y,y=e.x*f.x+e.y*f.y,x=0!==y?1/y:1/0,v=2*Math.sqrt(2-2*y),b=y<Nl&&d&&p,w=m.x*f.y-m.y*f.x>0;if(b&&_>l){const t=u.dist(d);if(t>2*c){const e=u.sub(u.sub(d)._mult(c/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,m,0,0,h),d=e}}const T=d&&p;let E=T?i:o?"butt":r;if(T&&"round"===E&&(x<s?E="miter":x<=2&&(E="fakeround")),"miter"===E&&x>n&&(E="bevel"),"bevel"===E&&(x>2&&(E="flipbevel"),x<n&&(E="miter")),d&&this.updateDistance(d,u),"miter"===E)e._mult(x),this.addCurrentVertex(u,e,0,0,h);else if("flipbevel"===E){if(x>100)e=f.mult(-1);else{const t=x*m.add(f).mag()/m.sub(f).mag();e._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(u,e,0,0,h),this.addCurrentVertex(u,e.mult(-1),0,0,h)}else if("bevel"===E||"fakeround"===E){const t=-Math.sqrt(x*x-1),e=w?t:0,i=w?0:t;if(d&&this.addCurrentVertex(u,m,e,i,h),"fakeround"===E){const t=Math.round(180*v/Math.PI/20);for(let e=1;e<t;e++){let i=e/t;if(.5!==i){const t=i-.5;i+=i*t*(i-1)*((1.0904+g*(g*(3.55645-1.43519*g)-3.2452))*t*t+(.848013+g*(.215638*g-1.06021)))}const r=f.sub(m)._mult(i)._add(m)._unit()._mult(w?-1:1);this.addHalfVertex(u,r.x,r.y,!1,w,0,h)}}p&&this.addCurrentVertex(u,f,-e,-i,h)}else if("butt"===E)this.addCurrentVertex(u,e,0,0,h);else if("square"===E){const t=d?1:-1;this.addCurrentVertex(u,e,t,t,h)}else"round"===E&&(d&&(this.addCurrentVertex(u,m,0,0,h),this.addCurrentVertex(u,m,1,1,h,!0)),p&&(this.addCurrentVertex(u,f,-1,-1,h,!0),this.addCurrentVertex(u,f,0,0,h)));if(b&&_<a-1){const t=u.dist(p);if(t>2*c){const e=u.add(p.sub(u)._mult(c/t)._round());this.updateDistance(u,e),this.addCurrentVertex(e,f,0,0,h),u=e}}}}addCurrentVertex(t,e,i,r,n,s=!1){const o=e.y*r-e.x,a=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,s,!1,i,n),this.addHalfVertex(t,o,a,s,!0,-r,n)}addHalfVertex({x:t,y:e},i,r,n,s,o,a){this.layoutVertexArray.emplaceBack((t<<1)+(n?1:0),(e<<1)+(s?1:0),Math.round(63*i)+128,Math.round(63*r)+128,1+(0===o?0:o<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);const l=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),a.primitiveLength++),s?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}Gr("LineBucket",$l,{omit:["layers","patternFeatures"]});const ql=new is({"line-cap":new Yn(Bt.layout_line["line-cap"]),"line-join":new Jn(Bt.layout_line["line-join"]),"line-miter-limit":new Yn(Bt.layout_line["line-miter-limit"]),"line-round-limit":new Yn(Bt.layout_line["line-round-limit"]),"line-sort-key":new Jn(Bt.layout_line["line-sort-key"])});var Zl={paint:new is({"line-opacity":new Jn(Bt.paint_line["line-opacity"]),"line-color":new Jn(Bt.paint_line["line-color"]),"line-translate":new Yn(Bt.paint_line["line-translate"]),"line-translate-anchor":new Yn(Bt.paint_line["line-translate-anchor"]),"line-width":new Jn(Bt.paint_line["line-width"]),"line-gap-width":new Jn(Bt.paint_line["line-gap-width"]),"line-offset":new Jn(Bt.paint_line["line-offset"]),"line-blur":new Jn(Bt.paint_line["line-blur"]),"line-dasharray":new ts(Bt.paint_line["line-dasharray"]),"line-pattern":new Qn(Bt.paint_line["line-pattern"]),"line-gradient":new es(Bt.paint_line["line-gradient"])}),layout:ql};const Gl=new class extends Jn{possiblyEvaluate(t,e){return e=new $n(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,i,r){return e=y({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,i,r)}}(Zl.paint.properties["line-width"].specification);function jl(t,e){return e>0?e+2*t:t}Gl.useIntegerZoom=!0;const Xl=as([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Wl=as([{name:"a_projected_pos",components:3,type:"Float32"}],4),Hl=(as([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),as([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Kl=as([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]),Yl=(as([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),as([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Jl=as([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ql(t,e){const{expression:i}=e;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new $n(t+1))};if("source"===i.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:r}=i;let n=0;for(;n<e.length&&e[n]<=t;)n++;let s=n=Math.max(0,n-1);for(;s<e.length&&e[s]<t+1;)s++;s=Math.min(e.length-1,s);const o=e[n],a=e[s];return"composite"===i.kind?{kind:"composite",minZoom:o,maxZoom:a,interpolationType:r}:{kind:"camera",minZoom:o,maxZoom:a,minSize:i.evaluate(new $n(o)),maxSize:i.evaluate(new $n(a)),interpolationType:r}}}function tc(t,{uSize:e,uSizeT:i},{lowerSize:r,upperSize:n}){return"source"===t.kind?r/128:"composite"===t.kind?Je(r/128,n/128,i):e}function ec(t,e){let i=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){const{interpolationType:n,minZoom:s,maxZoom:o}=t,a=n?m(pi.interpolationFactor(n,e,s,o),0,1):0;"camera"===t.kind?r=Je(t.minSize,t.maxSize,a):i=a}return{uSizeT:i,uSize:r}}as([{name:"triangle",components:3,type:"Uint16"}]),as([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),as([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),as([{type:"Float32",name:"offsetX"}]),as([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ic=Object.freeze({__proto__:null,getSizeData:Ql,evaluateSizeForFeature:tc,evaluateSizeForZoom:ec,SIZE_PACK_FACTOR:128});function rc(t,e,i){return t.sections.forEach(t=>{t.text=function(t,e,i){const r=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),Nn.applyArabicShaping&&(t=Nn.applyArabicShaping(t)),t}(t.text,e,i)}),t}const nc={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var sc=function(t,e,i,r,n){var s,o,a=8*n-r-1,l=(1<<a)-1,c=l>>1,h=-7,u=i?n-1:0,d=i?-1:1,p=t[e+u];for(u+=d,s=p&(1<<-h)-1,p>>=-h,h+=a;h>0;s=256*s+t[e+u],u+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=r;h>0;o=256*o+t[e+u],u+=d,h-=8);if(0===s)s=1-c;else{if(s===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),s-=c}return(p?-1:1)*o*Math.pow(2,s-r)},oc=function(t,e,i,r,n,s){var o,a,l,c=8*s-n-1,h=(1<<c)-1,u=h>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,m=r?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(o++,l/=2),o+u>=h?(a=0,o=h):o+u>=1?(a=(e*l-1)*Math.pow(2,n),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,n),o=0));n>=8;t[i+p]=255&a,p+=m,a/=256,n-=8);for(o=o<<n|a,c+=n;c>0;t[i+p]=255&o,p+=m,o/=256,c-=8);t[i+p-m]|=128*f},ac=lc;function lc(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}lc.Varint=0,lc.Fixed64=1,lc.Bytes=2,lc.Fixed32=5;var cc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function hc(t){return t.type===lc.Bytes?t.readVarint()+t.pos:t.pos+1}function uc(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function dc(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function pc(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function mc(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function fc(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function _c(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function gc(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function yc(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function xc(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function vc(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function bc(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function wc(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Tc(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function Ec(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Sc(t,e,i){1===t&&i.readMessage(Ic,e)}function Ic(t,e,i){if(3===t){const{id:t,bitmap:r,width:n,height:s,left:o,top:a,advance:l}=i.readMessage(Ac,{});e.push({id:t,bitmap:new wa({width:n+6,height:s+6},r),metrics:{width:n,height:s,left:o,top:a,advance:l}})}}function Ac(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function Cc(t){let e=0,i=0;for(const o of t)e+=o.w*o.h,i=Math.max(i,o.w);t.sort((t,e)=>e.h-t.h);const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}];let n=0,s=0;for(const o of t)for(let t=r.length-1;t>=0;t--){const e=r[t];if(!(o.w>e.w||o.h>e.h)){if(o.x=e.x,o.y=e.y,s=Math.max(s,o.y+o.h),n=Math.max(n,o.x+o.w),o.w===e.w&&o.h===e.h){const e=r.pop();t<r.length&&(r[t]=e)}else o.h===e.h?(e.x+=o.w,e.w-=o.w):o.w===e.w?(e.y+=o.h,e.h-=o.h):(r.push({x:e.x+o.w,y:e.y,w:e.w-o.w,h:o.h}),e.y+=o.h,e.h-=o.h);break}}return{w:n,h:s,fill:e/(n*s)||0}}lc.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,s=this.pos;this.type=7&r,t(n,e,this),this.pos===s&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=wc(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Ec(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=wc(this.buf,this.pos)+4294967296*wc(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=wc(this.buf,this.pos)+4294967296*Ec(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=sc(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=sc(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,s=i.buf;if(r=(112&(n=s[i.pos++]))>>4,n<128)return uc(t,r,e);if(r|=(127&(n=s[i.pos++]))<<3,n<128)return uc(t,r,e);if(r|=(127&(n=s[i.pos++]))<<10,n<128)return uc(t,r,e);if(r|=(127&(n=s[i.pos++]))<<17,n<128)return uc(t,r,e);if(r|=(127&(n=s[i.pos++]))<<24,n<128)return uc(t,r,e);if(r|=(1&(n=s[i.pos++]))<<31,n<128)return uc(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&cc?function(t,e,i){return cc.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var r="",n=e;n<i;){var s,o,a,l=t[n],c=null,h=l>239?4:l>223?3:l>191?2:1;if(n+h>i)break;1===h?l<128&&(c=l):2===h?128==(192&(s=t[n+1]))&&(c=(31&l)<<6|63&s)<=127&&(c=null):3===h?(o=t[n+2],128==(192&(s=t[n+1]))&&128==(192&o)&&((c=(15&l)<<12|(63&s)<<6|63&o)<=2047||c>=55296&&c<=57343)&&(c=null)):4===h&&(o=t[n+2],a=t[n+3],128==(192&(s=t[n+1]))&&128==(192&o)&&128==(192&a)&&((c=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,h=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),n+=h}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==lc.Bytes)return t.push(this.readVarint(e));var i=hc(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==lc.Bytes)return t.push(this.readSVarint());var e=hc(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==lc.Bytes)return t.push(this.readBoolean());var e=hc(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==lc.Bytes)return t.push(this.readFloat());var e=hc(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==lc.Bytes)return t.push(this.readDouble());var e=hc(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==lc.Bytes)return t.push(this.readFixed32());var e=hc(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==lc.Bytes)return t.push(this.readSFixed32());var e=hc(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==lc.Bytes)return t.push(this.readFixed64());var e=hc(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==lc.Bytes)return t.push(this.readSFixed64());var e=hc(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===lc.Varint)for(;this.buf[this.pos++]>127;);else if(e===lc.Bytes)this.pos=this.readVarint()+this.pos;else if(e===lc.Fixed32)this.pos+=4;else{if(e!==lc.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Tc(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Tc(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Tc(this.buf,-1&t,this.pos),Tc(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Tc(this.buf,-1&t,this.pos),Tc(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,s=0;s<e.length;s++){if((r=e.charCodeAt(s))>55295&&r<57344){if(!n){r>56319||s+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&dc(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),oc(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),oc(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&dc(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,lc.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,pc,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,mc,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,gc,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,fc,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,_c,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,yc,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,xc,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,vc,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,bc,e)},writeBytesField:function(t,e){this.writeTag(t,lc.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,lc.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,lc.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,lc.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,lc.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,lc.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,lc.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,lc.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,lc.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,lc.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class Mc{constructor(t,{pixelRatio:e,version:i,stretchX:r,stretchY:n,content:s}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=r,this.stretchY=n,this.content=s,this.version=i}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class zc{constructor(t,e){const i={},r={};this.haveRenderCallbacks=[];const n=[];this.addImages(t,i,n),this.addImages(e,r,n);const{w:s,h:o}=Cc(n),a=new Ta({width:s||1,height:o||1});for(const l in t){const e=t[l],r=i[l].paddedRect;Ta.copy(e.data,a,{x:0,y:0},{x:r.x+1,y:r.y+1},e.data)}for(const l in e){const t=e[l],i=r[l].paddedRect,n=i.x+1,s=i.y+1,o=t.data.width,c=t.data.height;Ta.copy(t.data,a,{x:0,y:0},{x:n,y:s},t.data),Ta.copy(t.data,a,{x:0,y:c-1},{x:n,y:s-1},{width:o,height:1}),Ta.copy(t.data,a,{x:0,y:0},{x:n,y:s+c},{width:o,height:1}),Ta.copy(t.data,a,{x:o-1,y:0},{x:n-1,y:s},{width:1,height:c}),Ta.copy(t.data,a,{x:0,y:0},{x:n+o,y:s},{width:1,height:c})}this.image=a,this.iconPositions=i,this.patternPositions=r}addImages(t,e,i){for(const r in t){const n=t[r],s={x:0,y:0,w:n.data.width+2,h:n.data.height+2};i.push(s),e[r]=new Mc(s,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const i in t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)}patchUpdatedImage(t,e,i){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[r,n]=t.tl;i.update(e.data,void 0,{x:r,y:n})}}Gr("ImagePosition",Mc),Gr("ImageAtlas",zc);const Pc={horizontal:1,vertical:2,horizontalOnly:3};class kc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const i=new kc;return i.scale=t||1,i.fontStack=e,i}static forImage(t){const e=new kc;return e.imageName=t,e}}class Dc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const i=new Dc;for(let r=0;r<t.sections.length;r++){const n=t.sections[r];n.image?i.addImageSection(n):i.addTextSection(n,e)}return i}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let e="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i+1)||null,n=t.charCodeAt(i-1)||null;e+=r&&Mn(r)&&!nc[t[i+1]]||n&&Mn(n)&&!nc[t[i-1]]||!nc[t[i]]?t[i]:nc[t[i]]}return e}(this.text)}trim(){let t=0;for(let i=0;i<this.text.length&&Rc[this.text.charCodeAt(i)];i++)t++;let e=this.text.length;for(let i=this.text.length-1;i>=0&&i>=t&&Rc[this.text.charCodeAt(i)];i--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const i=new Dc;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,e)=>Math.max(t,this.sections[e].scale),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(kc.forText(t.scale,t.fontStack||e));const i=this.sections.length-1;for(let r=0;r<t.text.length;++r)this.sectionIndex.push(i)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void M("Can't add FormattedSection with an empty image.");const i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(kc.forImage(e)),this.sectionIndex.push(this.sections.length-1)):M("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Lc(t,e,i,r,n,s,o,a,l,c,h,u,d,p,m,f){const _=Dc.fromFeature(t,n);let g;u===Pc.vertical&&_.verticalizePunctuation();const{processBidirectionalText:y,processStyledBidirectionalText:x}=Nn;if(y&&1===_.sections.length){g=[];const t=y(_.toString(),Nc(_,c,s,e,r,p,m));for(const e of t){const t=new Dc;t.text=e,t.sections=_.sections;for(let i=0;i<e.length;i++)t.sectionIndex.push(0);g.push(t)}}else if(x){g=[];const t=x(_.text,_.sectionIndex,Nc(_,c,s,e,r,p,m));for(const e of t){const t=new Dc;t.text=e[0],t.sectionIndex=e[1],t.sections=_.sections,g.push(t)}}else g=function(t,e){const i=[],r=t.text;let n=0;for(const s of e)i.push(t.substring(n,s)),n=s;return n<r.length&&i.push(t.substring(n,r.length)),i}(_,Nc(_,c,s,e,r,p,m));const v=[],b={positionedLines:v,text:_.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:u,iconsInText:!1,verticalizable:!1};return function(t,e,i,r,n,s,o,a,l,c,h,u){let d=0,p=-17,m=0,f=0;const _="right"===a?1:"left"===a?0:.5;let g=0;for(const w of n){w.trim();const n=w.getMaxScale(),o=24*(n-1),a={positionedGlyphs:[],lineOffset:0};t.positionedLines[g]=a;const x=a.positionedGlyphs;let v=0;if(!w.length()){p+=s,++g;continue}for(let s=0;s<w.length();s++){const a=w.getSection(s),m=w.getSectionIndex(s),f=w.getCharCode(s);let _=0,g=null,b=null,T=null,E=24;const S=!(l===Pc.horizontal||!h&&!Cn(f)||h&&(Rc[f]||(y=f,Yr(y)||Jr(y)||Qr(y)||xn(y)||Tn(y))));if(a.imageName){const e=r[a.imageName];if(!e)continue;T=a.imageName,t.iconsInText=t.iconsInText||!0,b=e.paddedRect;const i=e.displaySize;a.scale=24*a.scale/u,g={width:i[0],height:i[1],left:1,top:-3,advance:S?i[1]:i[0],localGlyph:!1},_=o+(24-i[1]*a.scale),E=g.advance;const s=S?i[0]*a.scale-24*n:i[1]*a.scale-24*n;s>0&&s>v&&(v=s)}else{const t=i[a.fontStack],r=t&&t[f];if(r&&r.rect)b=r.rect,g=r.metrics;else{const t=e[a.fontStack],i=t&&t[f];if(!i)continue;g=i.metrics}_=24*(n-a.scale)}S?(t.verticalizable=!0,x.push({glyph:f,imageName:T,x:d,y:p+_,vertical:S,scale:a.scale,localGlyph:g.localGlyph,fontStack:a.fontStack,sectionIndex:m,metrics:g,rect:b}),d+=E*a.scale+c):(x.push({glyph:f,imageName:T,x:d,y:p+_,vertical:S,scale:a.scale,localGlyph:g.localGlyph,fontStack:a.fontStack,sectionIndex:m,metrics:g,rect:b}),d+=g.advance*a.scale+c)}0!==x.length&&(m=Math.max(d-c,m),qc(x,0,x.length-1,_,v)),d=0;const b=s*n+v;a.lineOffset=Math.max(v,o),p+=b,f=Math.max(b,f),++g}var y;const x=p- -17,{horizontalAlign:v,verticalAlign:b}=$c(o);(function(t,e,i,r,n,s,o,a,l){const c=(e-i)*n;let h=0;h=s!==o?-a*r- -17:(-r*l+.5)*o;for(const u of t)for(const t of u.positionedGlyphs)t.x+=c,t.y+=h})(t.positionedLines,_,v,b,m,f,s,x,n.length),t.top+=-b*x,t.bottom=t.top+x,t.left+=-v*m,t.right=t.left+m}(b,e,i,r,g,o,a,l,u,c,d,f),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(v)&&b}const Rc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Bc={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Fc(t,e,i,r,n,s){if(e.imageName){const t=r[e.imageName];return t?t.displaySize[0]*e.scale*24/s+n:0}{const r=i[e.fontStack],s=r&&r[t];return s?s.metrics.advance*e.scale+n:0}}function Oc(t,e,i,r){const n=Math.pow(t-e,2);return r?t<e?n/2:2*n:n+Math.abs(i)*i}function Uc(t,e,i){let r=0;return 10===t&&(r-=1e4),i&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Vc(t,e,i,r,n,s){let o=null,a=Oc(e,i,n,s);for(const l of r){const t=Oc(e-l.x,i,n,s)+l.badness;t<=a&&(o=l,a=t)}return{index:t,x:e,priorBreak:o,badness:a}}function Nc(t,e,i,r,n,s,o){if("point"!==s)return[];if(!t)return[];const a=[],l=function(t,e,i,r,n,s){let o=0;for(let a=0;a<t.length();a++){const i=t.getSection(a);o+=Fc(t.getCharCode(a),i,r,n,e,s)}return o/Math.max(1,Math.ceil(o/i))}(t,e,i,r,n,o),c=t.text.indexOf("")>=0;let h=0;for(let d=0;d<t.length();d++){const i=t.getSection(d),s=t.getCharCode(d);if(Rc[s]||(h+=Fc(s,i,r,n,e,o)),d<t.length()-1){const e=!((u=s)<11904||!(ln(u)||an(u)||bn(u)||yn(u)||dn(u)||tn(u)||cn(u)||nn(u)||pn(u)||mn(u)||un(u)||En(u)||sn(u)||rn(u)||en(u)||hn(u)||on(u)||vn(u)||_n(u)||fn(u)));(Bc[s]||e||i.imageName)&&a.push(Vc(d+1,h,l,a,Uc(s,t.getCharCode(d+1),e&&c),!1))}}var u;return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Vc(t.length(),h,l,a,0,!0))}function $c(t){let e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function qc(t,e,i,r,n){if(!r&&!n)return;const s=t[i],o=(t[i].x+s.metrics.advance*s.scale)*r;for(let a=e;a<=i;a++)t[a].x-=o,t[a].y+=n}function Zc(t,e,i){const{horizontalAlign:r,verticalAlign:n}=$c(i),s=e[0]-t.displaySize[0]*r,o=e[1]-t.displaySize[1]*n;return{image:t,top:o,bottom:o+t.displaySize[1],left:s,right:s+t.displaySize[0]}}function Gc(t,e,i,r,n,s){const o=t.image;let a;if(o.content){const t=o.content,e=o.pixelRatio||1;a=[t[0]/e,t[1]/e,o.displaySize[0]-t[2]/e,o.displaySize[1]-t[3]/e]}const l=e.left*s,c=e.right*s;let h,u,d,p;"width"===i||"both"===i?(p=n[0]+l-r[3],u=n[0]+c+r[1]):u=(p=n[0]+(l+c-o.displaySize[0])/2)+o.displaySize[0];const m=e.top*s,f=e.bottom*s;return"height"===i||"both"===i?(h=n[1]+m-r[0],d=n[1]+f+r[2]):d=(h=n[1]+(m+f-o.displaySize[1])/2)+o.displaySize[1],{image:o,top:h,right:u,bottom:d,left:p,collisionPadding:a}}class jc extends r{constructor(t,e,i,r){super(t,e),this.angle=i,void 0!==r&&(this.segment=r)}clone(){return new jc(this.x,this.y,this.angle,this.segment)}}function Xc(t,e,i,r,n){if(void 0===e.segment)return!0;let s=e,o=e.segment+1,a=0;for(;a>-i/2;){if(--o<0)return!1;a-=t[o].dist(s),s=t[o]}a+=t[o].dist(t[o+1]),o++;const l=[];let c=0;for(;a<i/2;){const e=t[o],i=t[o+1];if(!i)return!1;let s=t[o-1].angleTo(e)-e.angleTo(i);for(s=Math.abs((s+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:a,angleDelta:s}),c+=s;a-l[0].distance>r;)c-=l.shift().angleDelta;if(c>n)return!1;o++,a+=e.dist(i)}return!0}function Wc(t){let e=0;for(let i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function Hc(t,e,i){return t?.6*e*i:0}function Kc(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Yc(t,e,i,r,n,s){const o=Hc(i,n,s),a=Kc(i,r)*s;let l=0;const c=Wc(t)/2;for(let h=0;h<t.length-1;h++){const i=t[h],r=t[h+1],n=i.dist(r);if(l+n>c){const s=(c-l)/n,u=Je(i.x,r.x,s),d=Je(i.y,r.y,s),p=new jc(u,d,r.angleTo(i),h);return p._round(),!o||Xc(t,p,a,o,e)?p:void 0}l+=n}}function Jc(t,e,i,r,n,s,o,a,l){const c=Hc(r,s,o),h=Kc(r,n),u=h*o,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-u<e/4&&(e=u+e/4),function t(e,i,r,n,s,o,a,l,c){const h=o/2,u=Wc(e);let d=0,p=i-r,m=[];for(let f=0;f<e.length-1;f++){const t=e[f],i=e[f+1],a=t.dist(i),l=i.angleTo(t);for(;p+r<d+a;){const _=((p+=r)-d)/a,g=Je(t.x,i.x,_),y=Je(t.y,i.y,_);if(g>=0&&g<c&&y>=0&&y<c&&p-h>=0&&p+h<=u){const t=new jc(g,y,l,f);t._round(),n&&!Xc(e,t,o,n,s)||m.push(t)}}d+=a}return l||m.length||a||(m=t(e,d/2,r,n,s,o,a,!0,c)),m}(t,d?e/2*a%e:(h/2+2*s)*o*a%e,e,c,i,u,d,!1,l)}function Qc(t,e,i,n,s){const o=[];for(let a=0;a<t.length;a++){const l=t[a];let c;for(let t=0;t<l.length-1;t++){let a=l[t],h=l[t+1];a.x<e&&h.x<e||(a.x<e?a=new r(e,a.y+(e-a.x)/(h.x-a.x)*(h.y-a.y))._round():h.x<e&&(h=new r(e,a.y+(e-a.x)/(h.x-a.x)*(h.y-a.y))._round()),a.y<i&&h.y<i||(a.y<i?a=new r(a.x+(i-a.y)/(h.y-a.y)*(h.x-a.x),i)._round():h.y<i&&(h=new r(a.x+(i-a.y)/(h.y-a.y)*(h.x-a.x),i)._round()),a.x>=n&&h.x>=n||(a.x>=n?a=new r(n,a.y+(n-a.x)/(h.x-a.x)*(h.y-a.y))._round():h.x>=n&&(h=new r(n,a.y+(n-a.x)/(h.x-a.x)*(h.y-a.y))._round()),a.y>=s&&h.y>=s||(a.y>=s?a=new r(a.x+(s-a.y)/(h.y-a.y)*(h.x-a.x),s)._round():h.y>=s&&(h=new r(a.x+(s-a.y)/(h.y-a.y)*(h.x-a.x),s)._round()),c&&a.equals(c[c.length-1])||(c=[a],o.push(c)),c.push(h)))))}}return o}Gr("Anchor",jc);var th=rh,eh=rh,ih=1e20;function rh(t,e,i,r,n,s){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=n||"sans-serif",this.fontWeight=s||"normal",this.radius=i||8;var o=this.size=this.fontSize+2*this.buffer,a=o+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function nh(t,e,i,r,n,s){for(var o=0;o<e;o++)sh(t,o,e,i,r,n,s);for(var a=0;a<i;a++)sh(t,a*e,1,e,r,n,s)}function sh(t,e,i,r,n,s,o){var a,l,c,h;for(s[0]=0,o[0]=-ih,o[1]=ih,a=0;a<r;a++)n[a]=t[e+a*i];for(a=1,l=0,c=0;a<r;a++){do{c=(n[a]-n[h=s[l]]+a*a-h*h)/(a-h)/2}while(c<=o[l]&&--l>-1);s[++l]=a,o[l]=c,o[l+1]=ih}for(a=0,l=0;a<r;a++){for(;o[l+1]<a;)l++;t[e+a*i]=n[h=s[l]]+(a-h)*(a-h)}}rh.prototype._draw=function(t,e){var i,r,n,s,o,a,l,c,h=this.ctx.measureText(t),u=h.width,d=2*this.buffer;e&&void 0!==h.actualBoundingBoxLeft?(o=Math.floor(h.actualBoundingBoxAscent)-this.middle,a=Math.max(0,this.middle-Math.ceil(h.actualBoundingBoxAscent)),l=this.buffer,i=(r=Math.min(this.size,Math.ceil(h.actualBoundingBoxRight-h.actualBoundingBoxLeft)))+d,n=(s=Math.min(this.size-a,Math.ceil(h.actualBoundingBoxAscent+h.actualBoundingBoxDescent)))+d):(i=r=this.size,n=s=this.size,o=0,a=l=0),r&&s&&(this.ctx.clearRect(l,a,r,s),this.ctx.fillText(t,this.buffer,this.middle),c=this.ctx.getImageData(l,a,r,s));var p=new Uint8ClampedArray(i*n);return function(t,e,i,r,n,s,o){s.fill(ih,0,e*i),o.fill(0,0,e*i);for(var a=(e-r)/2,l=0;l<n;l++)for(var c=0;c<r;c++){var h=(l+a)*e+c+a,u=t.data[4*(l*r+c)+3]/255;if(1===u)s[h]=0,o[h]=ih;else if(0===u)s[h]=ih,o[h]=0;else{var d=Math.max(0,.5-u),p=Math.max(0,u-.5);s[h]=d*d,o[h]=p*p}}}(c,i,n,r,s,this.gridOuter,this.gridInner),nh(this.gridOuter,i,n,this.f,this.v,this.z),nh(this.gridInner,i,n,this.f,this.v,this.z),function(t,e,i,r,n,s,o){for(var a=0;a<e*i;a++){var l=Math.sqrt(r[a])-Math.sqrt(n[a]);t[a]=Math.round(255-255*(l/s+o))}}(p,i,n,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:r,height:s,sdfWidth:i,sdfHeight:n,top:o,left:0,advance:u,fontAscent:h.fontBoundingBoxAscent}}},rh.prototype.draw=function(t){return this._draw(t,!1).data},rh.prototype.drawWithMetrics=function(t){return this._draw(t,!0)},th.default=eh;const oh={none:0,ideographs:1,all:2};class ah{constructor(t,e,i){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=i,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,e){const i=[];for(const r in t)for(const e of t[r])i.push({stack:r,id:e});_(i,({stack:t,id:e},i)=>{let r=this.entries[t];r||(r=this.entries[t]={glyphs:{},requests:{},ranges:{}});let n=r.glyphs[e];if(void 0!==n)return void i(null,{stack:t,id:e,glyph:n});if(n=this._tinySDF(r,t,e))return r.glyphs[e]=n,void i(null,{stack:t,id:e,glyph:n});const s=Math.floor(e/256);if(256*s>65535)return void i(new Error("glyphs > 65535 not supported"));if(r.ranges[s])return void i(null,{stack:t,id:e,glyph:n});let o=r.requests[s];o||(o=r.requests[s]=[],ah.loadGlyphRange(t,s,this.url,this.requestManager,(t,e)=>{if(e){for(const t in e)this._doesCharSupportLocalGlyph(+t)||(r.glyphs[+t]=e[+t]);r.ranges[s]=!0}for(const i of o)i(t,e);delete r.requests[s]})),o.push((r,n)=>{r?i(r):n&&i(null,{stack:t,id:e,glyph:n[e]||null})})},(t,i)=>{if(t)e(t);else if(i){const t={};for(const{stack:e,id:r,glyph:n}of i)(t[e]||(t[e]={}))[r]=n&&{id:n.id,bitmap:n.bitmap.clone(),metrics:n.metrics};e(null,t)}})}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==oh.none&&(this.localGlyphMode===oh.all?!!this.localFontFamily:!!this.localFontFamily&&(mn(t)||gn(t)||sn(t)||on(t)))}_tinySDF(t,e,i){const r=this.localFontFamily;if(!r)return;if(!this._doesCharSupportLocalGlyph(i))return;let n=t.tinySDF;if(!n){let i="400";/bold/i.test(e)?i="900":/medium/i.test(e)?i="500":/light/i.test(e)&&(i="200"),n=t.tinySDF=new ah.TinySDF(48,6,16,.25,r,i)}if(this.localGlyphs[n.fontWeight][i])return this.localGlyphs[n.fontWeight][i];const{data:s,metrics:o}=n.drawWithMetrics(String.fromCharCode(i)),{fontAscent:a,sdfWidth:l,sdfHeight:c,width:h,height:u,left:d,top:p,advance:m}=o,f=(a?a/2:17)-9;return this.localGlyphs[n.fontWeight][i]={id:i,bitmap:new wa({width:l,height:c},s),metrics:{width:h/2,height:u/2,left:d/2,top:p/2-f,advance:m/2,localGlyph:!0}}}}function lh(t,e,i,n){const s=[],o=t.image,a=o.pixelRatio,l=o.paddedRect.w-2,c=o.paddedRect.h-2,h=t.right-t.left,u=t.bottom-t.top,d=o.stretchX||[[0,l]],p=o.stretchY||[[0,c]],m=(t,e)=>t+e[1]-e[0],f=d.reduce(m,0),_=p.reduce(m,0),g=l-f,y=c-_;let x=0,v=f,b=0,w=_,T=0,E=g,S=0,I=y;if(o.content&&n){const t=o.content;x=ch(d,0,t[0]),b=ch(p,0,t[1]),v=ch(d,t[0],t[2]),w=ch(p,t[1],t[3]),T=t[0]-x,S=t[1]-b,E=t[2]-t[0]-v,I=t[3]-t[1]-w}const A=(n,s,l,c)=>{const d=uh(n.stretch-x,v,h,t.left),p=dh(n.fixed-T,E,n.stretch,f),m=uh(s.stretch-b,w,u,t.top),g=dh(s.fixed-S,I,s.stretch,_),y=uh(l.stretch-x,v,h,t.left),A=dh(l.fixed-T,E,l.stretch,f),C=uh(c.stretch-b,w,u,t.top),M=dh(c.fixed-S,I,c.stretch,_),z=new r(d,m),P=new r(y,m),k=new r(y,C),D=new r(d,C),L=new r(p/a,g/a),R=new r(A/a,M/a),B=e*Math.PI/180;if(B){const t=Math.sin(B),e=Math.cos(B),i=[e,-t,t,e];z._matMult(i),P._matMult(i),D._matMult(i),k._matMult(i)}const F=n.stretch+n.fixed,O=s.stretch+s.fixed;return{tl:z,tr:P,bl:D,br:k,tex:{x:o.paddedRect.x+1+F,y:o.paddedRect.y+1+O,w:l.stretch+l.fixed-F,h:c.stretch+c.fixed-O},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:L,pixelOffsetBR:R,minFontScaleX:E/a/h,minFontScaleY:I/a/u,isSDF:i}};if(n&&(o.stretchX||o.stretchY)){const t=hh(d,g,f),e=hh(p,y,_);for(let i=0;i<t.length-1;i++){const r=t[i],n=t[i+1];for(let t=0;t<e.length-1;t++)s.push(A(r,e[t],n,e[t+1]))}}else s.push(A({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return s}function ch(t,e,i){let r=0;for(const n of t)r+=Math.max(e,Math.min(i,n[1]))-Math.max(e,Math.min(i,n[0]));return r}function hh(t,e,i){const r=[{fixed:-1,stretch:0}];for(const[n,s]of t){const t=r[r.length-1];r.push({fixed:n-t.stretch,stretch:t.stretch}),r.push({fixed:n-t.stretch,stretch:t.stretch+(s-n)})}return r.push({fixed:e+1,stretch:i}),r}function uh(t,e,i,r){return t/e*i+r}function dh(t,e,i,r){return t-e*i/r}ah.loadGlyphRange=function(t,e,i,r,n){const s=256*e,o=s+255,a=r.transformRequest(r.normalizeGlyphsURL(i).replace("{fontstack}",t).replace("{range}",`${s}-${o}`),xt.Glyphs);Tt(a,(t,e)=>{if(t)n(t);else if(e){const t={};for(const i of function(t){return new ac(e).readFields(Sc,[])}())t[i.id]=i;n(null,t)}})},ah.TinySDF=th;class ph{constructor(t=[],e=function(t,e){return t<e?-1:t>e?1:0}){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:i}=this,r=e[t];for(;t>0;){const n=t-1>>1,s=e[n];if(i(r,s)>=0)break;e[t]=s,t=n}e[t]=r}_down(t){const{data:e,compare:i}=this,r=this.length>>1,n=e[t];for(;t<r;){let r=1+(t<<1),s=e[r];const o=r+1;if(o<this.length&&i(e[o],s)<0&&(r=o,s=e[o]),i(s,n)>=0)break;e[t]=s,t=r}e[t]=n}}function mh(t,e=1,i=!1){let n=1/0,s=1/0,o=-1/0,a=-1/0;const l=t[0];for(let r=0;r<l.length;r++){const t=l[r];(!r||t.x<n)&&(n=t.x),(!r||t.y<s)&&(s=t.y),(!r||t.x>o)&&(o=t.x),(!r||t.y>a)&&(a=t.y)}const c=Math.min(o-n,a-s);let h=c/2;const u=new ph([],fh);if(0===c)return new r(n,s);for(let r=n;r<o;r+=c)for(let e=s;e<a;e+=c)u.push(new _h(r+h,e+h,h,t));let d=function(t){let e=0,i=0,r=0;const n=t[0];for(let s=0,o=n.length,a=o-1;s<o;a=s++){const t=n[s],o=n[a],l=t.x*o.y-o.x*t.y;i+=(t.x+o.x)*l,r+=(t.y+o.y)*l,e+=3*l}return new _h(i/e,r/e,0,t)}(t),p=u.length;for(;u.length;){const r=u.pop();(r.d>d.d||!d.d)&&(d=r,i&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,p)),r.max-d.d<=e||(h=r.h/2,u.push(new _h(r.p.x-h,r.p.y-h,h,t)),u.push(new _h(r.p.x+h,r.p.y-h,h,t)),u.push(new _h(r.p.x-h,r.p.y+h,h,t)),u.push(new _h(r.p.x+h,r.p.y+h,h,t)),p+=4)}return i&&(console.log(`num probes: ${p}`),console.log(`best distance: ${d.d}`)),d.p}function fh(t,e){return e.max-t.max}function _h(t,e,i,n){this.p=new r(t,e),this.h=i,this.d=function(t,e){let i=!1,r=1/0;for(let n=0;n<e.length;n++){const s=e[n];for(let e=0,n=s.length,o=n-1;e<n;o=e++){const n=s[e],a=s[o];n.y>t.y!=a.y>t.y&&t.x<(a.x-n.x)*(t.y-n.y)/(a.y-n.y)+n.x&&(i=!i),r=Math.min(r,zo(t,n,a))}}return(i?1:-1)*Math.sqrt(r)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}const gh=Number.POSITIVE_INFINITY;function yh(t,e){return e[1]!==gh?function(t,e,i){let r=0,n=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":n=i-7;break;case"bottom-right":case"bottom-left":case"bottom":n=7-i}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,n]}(t,e[0],e[1]):function(t,e){let i=0,r=0;e<0&&(e=0);const n=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=n-7;break;case"bottom-right":case"bottom-left":r=7-n;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=e;break;case"right":i=-e}return[i,r]}(t,e[0])}function xh(t,e,i,r,n,s,o,a){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const l=t.layers[0].layout,c=t.layers[0]._unevaluatedLayout._values,h={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:i}=t.textSizeData;h.compositeTextSizes=[c["text-size"].possiblyEvaluate(new $n(e),o),c["text-size"].possiblyEvaluate(new $n(i),o)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:i}=t.iconSizeData;h.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new $n(e),o),c["icon-size"].possiblyEvaluate(new $n(i),o)]}h.layoutTextSize=c["text-size"].possiblyEvaluate(new $n(a+1),o),h.layoutIconSize=c["icon-size"].possiblyEvaluate(new $n(a+1),o),h.textMaxSize=c["text-size"].possiblyEvaluate(new $n(18),o);const u=24*l.get("text-line-height"),d="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),p=l.get("text-keep-upright"),m=l.get("text-size");for(const f of t.features){const s=l.get("text-font").evaluate(f,{},o).join(","),a=m.evaluate(f,{},o),c=h.layoutTextSize.evaluate(f,{},o),_=(h.layoutIconSize.evaluate(f,{},o),{horizontal:{},vertical:void 0}),g=f.text;let y,x=[0,0];if(g){const r=g.toString(),h=24*l.get("text-letter-spacing").evaluate(f,{},o),m=In(r)?h:0,y=l.get("text-anchor").evaluate(f,{},o),v=l.get("text-variable-anchor");if(!v){const t=l.get("text-radial-offset").evaluate(f,{},o);x=t?yh(y,[24*t,gh]):l.get("text-offset").evaluate(f,{},o).map(t=>24*t)}let b=d?"center":l.get("text-justify").evaluate(f,{},o);const w=l.get("symbol-placement"),T="point"===w?24*l.get("text-max-width").evaluate(f,{},o):0,E=()=>{t.allowVerticalPlacement&&Sn(r)&&(_.vertical=Lc(g,e,i,n,s,T,u,y,"left",m,x,Pc.vertical,!0,w,c,a))};if(!d&&v){const t="auto"===b?v.map(t=>vh(t)):[b];let r=!1;for(let o=0;o<t.length;o++){const l=t[o];if(!_.horizontal[l])if(r)_.horizontal[l]=_.horizontal[0];else{const t=Lc(g,e,i,n,s,T,u,"center",l,m,x,Pc.horizontal,!1,w,c,a);t&&(_.horizontal[l]=t,r=1===t.positionedLines.length)}}E()}else{"auto"===b&&(b=vh(y));const t=Lc(g,e,i,n,s,T,u,y,b,m,x,Pc.horizontal,!1,w,c,a);t&&(_.horizontal[b]=t),E(),Sn(r)&&d&&p&&(_.vertical=Lc(g,e,i,n,s,T,u,y,b,m,x,Pc.vertical,!1,w,c,a))}}let v=!1;if(f.icon&&f.icon.name){const e=r[f.icon.name];e&&(y=Zc(n[f.icon.name],l.get("icon-offset").evaluate(f,{},o),l.get("icon-anchor").evaluate(f,{},o)),v=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&M("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==l.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const b=Th(_.horizontal)||_.vertical;t.iconsInText=!!b&&b.iconsInText,(b||y)&&bh(t,f,_,y,r,h,c,0,x,v,o)}s&&t.generateCollisionDebugBuffers(a,t.collisionBoxArray)}function vh(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function bh(t,e,i,r,n,s,o,a,l,c,u){let d=s.textMaxSize.evaluate(e,{},u);void 0===d&&(d=o);const p=t.layers[0].layout,m=p.get("icon-offset").evaluate(e,{},u),f=Th(i.horizontal),_=o/24,g=t.tilePixelRatio*_,y=t.tilePixelRatio*d/24,x=t.tilePixelRatio*p.get("symbol-spacing"),v=p.get("text-padding")*t.tilePixelRatio,b=p.get("icon-padding")*t.tilePixelRatio,w=h(p.get("text-max-angle")),T="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),E="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),S=p.get("symbol-placement"),I=x/2,A=p.get("icon-text-fit");let C;r&&"none"!==A&&(t.allowVerticalPlacement&&i.vertical&&(C=Gc(r,i.vertical,A,p.get("icon-text-fit-padding"),m,_)),f&&(r=Gc(r,f,A,p.get("icon-text-fit-padding"),m,_)));const z=(a,h)=>{h.x<0||h.x>=8192||h.y<0||h.y>=8192||function(t,e,i,r,n,s,o,a,l,c,h,u,d,p,m,f,_,g,y,x,v,b,w,T,E){const S=t.addToLineVertexArray(e,i);let I,A,C,z,P,k,D,L=0,R=0,B=0,F=0,O=-1,U=-1;const V={};let N=Gs(""),$=0,q=0;if(void 0===a._unevaluatedLayout.getValue("text-radial-offset")?[$,q]=a.layout.get("text-offset").evaluate(v,{},T).map(t=>24*t):($=24*a.layout.get("text-radial-offset").evaluate(v,{},T),q=gh),t.allowVerticalPlacement&&r.vertical){const t=r.vertical;if(m)k=Sh(t),o&&(D=Sh(o));else{const i=a.layout.get("text-rotate").evaluate(v,{},T)+90;C=Eh(l,e,c,h,u,t,0,p,i),o&&(z=Eh(l,e,c,h,u,o,0,g,i))}}if(n){const i=a.layout.get("icon-rotate").evaluate(v,{},T),r="none"!==a.layout.get("icon-text-fit"),s=lh(n,i,w,r),d=o?lh(o,i,w,r):void 0;A=Eh(l,e,c,h,u,n,0,g,i),L=4*s.length;const p=t.iconSizeData;let m=null;"source"===p.kind?(m=[128*a.layout.get("icon-size").evaluate(v,{},T)])[0]>32640&&M(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`):"composite"===p.kind&&(((m=[128*b.compositeIconSizes[0].evaluate(v,{},T),128*b.compositeIconSizes[1].evaluate(v,{},T)])[0]>32640||m[1]>32640)&&M(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),t.addSymbols(t.icon,s,m,x,y,v,!1,e,S.lineStartIndex,S.lineLength,-1,T),O=t.icon.placedSymbolArray.length-1,d&&(R=4*d.length,t.addSymbols(t.icon,d,m,x,y,v,Pc.vertical,e,S.lineStartIndex,S.lineLength,-1,T),U=t.icon.placedSymbolArray.length-1)}for(const M in r.horizontal){const i=r.horizontal[M];I||(N=Gs(i.text),m?P=Sh(i):I=Eh(l,e,c,h,u,i,0,p,a.layout.get("text-rotate").evaluate(v,{},T)));const n=1===i.positionedLines.length;if(B+=wh(t,e,i,s,a,m,v,f,S,r.vertical?Pc.horizontal:Pc.horizontalOnly,n?Object.keys(r.horizontal):[M],V,O,b,T),n)break}r.vertical&&(F+=wh(t,e,r.vertical,s,a,m,v,f,S,Pc.vertical,["vertical"],V,U,b,T));let Z=-1;const G=(t,e)=>t?Math.max(t,e):e;Z=G(P,Z),Z=G(k,Z);const j=(Z=G(D,Z))>-1?1:0;j&&(Z*=E/24),t.glyphOffsetArray.length>=Lh.MAX_GLYPHS&&M("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==v.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,v.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,V.right>=0?V.right:-1,V.center>=0?V.center:-1,V.left>=0?V.left:-1,V.vertical||-1,O,U,N,void 0!==I?I:t.collisionBoxArray.length,void 0!==I?I+1:t.collisionBoxArray.length,void 0!==C?C:t.collisionBoxArray.length,void 0!==C?C+1:t.collisionBoxArray.length,void 0!==A?A:t.collisionBoxArray.length,void 0!==A?A+1:t.collisionBoxArray.length,z||t.collisionBoxArray.length,z?z+1:t.collisionBoxArray.length,c,B,F,L,R,j,0,d,$,q,Z)}(t,h,a,i,r,n,C,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,g,v,T,l,0,b,E,m,e,s,c,u,o)};if("line"===S)for(const h of Qc(e.geometry,0,0,8192,8192)){const e=Jc(h,x,w,i.vertical||f,r,24,y,t.overscaling,8192);for(const i of e){const e=f;e&&Ih(t,e.text,I,i)||z(h,i)}}else if("line-center"===S){for(const h of e.geometry)if(h.length>1){const t=Yc(h,w,i.vertical||f,r,24,y);t&&z(h,t)}}else if("Polygon"===e.type)for(const h of ol(e.geometry,0)){const t=mh(h,16);z(h[0],new jc(t.x,t.y,0))}else if("LineString"===e.type)for(const h of e.geometry)z(h,new jc(h[0].x,h[0].y,0));else if("Point"===e.type)for(const h of e.geometry)for(const t of h)z([t],new jc(t.x,t.y,0))}function wh(t,e,i,n,s,o,a,l,c,h,u,d,p,m,f){const _=function(t,e,i,n,s,o,a,l){const c=n.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,h=[];for(const u of e.positionedLines)for(const t of u.positionedGlyphs){if(!t.rect)continue;const n=t.rect||{};let o=4,d=!0,p=1,m=0;const f=(s||l)&&t.vertical,_=t.metrics.advance*t.scale/2;if(l&&e.verticalizable){const e=24*(t.scale-1),i=(24-t.metrics.width*t.scale)/2;m=u.lineOffset/2-(t.imageName?-i:e)}if(t.imageName){const e=a[t.imageName];d=e.sdf,o=1/(p=e.pixelRatio)}const g=s?[t.x+_,t.y]:[0,0];let y=s?[0,0]:[t.x+_+i[0],t.y+i[1]-m],x=[0,0];f&&(x=y,y=[0,0]);const v=(t.metrics.left-o)*t.scale-_+y[0],b=(-t.metrics.top-o)*t.scale+y[1],w=v+n.w*t.scale/(p*(t.localGlyph?2:1)),T=b+n.h*t.scale/(p*(t.localGlyph?2:1)),E=new r(v,b),S=new r(w,b),I=new r(v,T),A=new r(w,T);if(f){const e=new r(-_,_- -17),i=-Math.PI/2,n=12-_,s=new r(22-n,-(t.imageName?n:0)),o=new r(...x);E._rotateAround(i,e)._add(s)._add(o),S._rotateAround(i,e)._add(s)._add(o),I._rotateAround(i,e)._add(s)._add(o),A._rotateAround(i,e)._add(s)._add(o)}if(c){const t=Math.sin(c),e=Math.cos(c),i=[e,-t,t,e];E._matMult(i),S._matMult(i),I._matMult(i),A._matMult(i)}const C=new r(0,0),M=new r(0,0);h.push({tl:E,tr:S,bl:I,br:A,tex:n,writingMode:e.writingMode,glyphOffset:g,sectionIndex:t.sectionIndex,isSDF:d,pixelOffsetTL:C,pixelOffsetBR:M,minFontScaleX:0,minFontScaleY:0})}return h}(0,i,l,s,o,a,n,t.allowVerticalPlacement),g=t.textSizeData;let y=null;"source"===g.kind?(y=[128*s.layout.get("text-size").evaluate(a,{},f)])[0]>32640&&M(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`):"composite"===g.kind&&(((y=[128*m.compositeTextSizes[0].evaluate(a,{},f),128*m.compositeTextSizes[1].evaluate(a,{},f)])[0]>32640||y[1]>32640)&&M(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,_,y,l,o,a,h,e,c.lineStartIndex,c.lineLength,p,f);for(const r of u)d[r]=t.text.placedSymbolArray.length-1;return 4*_.length}function Th(t){for(const e in t)return t[e];return null}function Eh(t,e,i,n,s,o,a,l,c){let u=o.top,d=o.bottom,p=o.left,m=o.right;const f=o.collisionPadding;if(f&&(p-=f[0],u-=f[1],m+=f[2],d+=f[3]),c){const t=new r(p,u),e=new r(m,u),i=new r(p,d),n=new r(m,d),s=h(c);t._rotate(s),e._rotate(s),i._rotate(s),n._rotate(s),p=Math.min(t.x,e.x,i.x,n.x),m=Math.max(t.x,e.x,i.x,n.x),u=Math.min(t.y,e.y,i.y,n.y),d=Math.max(t.y,e.y,i.y,n.y)}return t.emplaceBack(e.x,e.y,p,u,m,d,l,i,n,s),t.length-1}function Sh(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function Ih(t,e,i,r){const n=t.compareText;if(e in n){const t=n[e];for(let e=t.length-1;e>=0;e--)if(r.dist(t[e])<i)return!0}else n[e]=[];return n[e].push(r),!1}const Ah=El.VectorTileFeature.types,Ch=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Mh(t,e,i,r,n,s,o,a,l,c,h,u,d){const p=a?Math.min(32640,Math.round(a[0])):0,m=a?Math.min(32640,Math.round(a[1])):0;t.emplaceBack(e,i,Math.round(32*r),Math.round(32*n),s,o,(p<<1)+(l?1:0),m,16*c,16*h,256*u,256*d)}function zh(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function Ph(t){for(const e of t.sections)if(kn(e.text))return!0;return!1}class kh{constructor(t){this.layoutVertexArray=new ms,this.indexArray=new bs,this.programConfigurations=t,this.segments=new _o,this.dynamicLayoutVertexArray=new fs,this.opacityVertexArray=new _s,this.placedSymbolArray=new Ds}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,i,r){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Xl.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Wl.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Ch,!0),this.opacityVertexBuffer.itemSize=1),(i||r)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Gr("SymbolBuffers",kh);class Dh{constructor(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new _o,this.collisionVertexArray=new vs,this.collisionVertexArrayExt=new fs}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Hl.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,Kl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Gr("CollisionBuffers",Dh);class Lh{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=qo([]),this.placementViewportMatrix=qo([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ql(this.zoom,e["text-size"]),this.iconSizeData=Ql(this.zoom,e["icon-size"]);const i=this.layers[0].layout,r=i.get("symbol-sort-key"),n=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==n&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===n||"auto"===n&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map(t=>Pc[t])),this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id),this.sourceID=t.sourceID}createArrays(){this.text=new kh(new co(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new kh(new co(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new Bs,this.lineVertexArray=new Fs,this.symbolInstances=new Rs}calculateGlyphDependencies(t,e,i,r,n){for(let s=0;s<t.length;s++)if(e[t.charCodeAt(s)]=!0,(i||r)&&n){const i=nc[t.charAt(s)];i&&(e[i.charCodeAt(0)]=!0)}}populate(t,e,i){const r=this.layers[0],n=r.layout,s=n.get("text-font"),o=n.get("text-field"),a=n.get("icon-image"),l=("constant"!==o.value.kind||o.value.value instanceof ue&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),c="constant"!==a.value.kind||!!a.value.value||Object.keys(a.parameters).length>0,h=n.get("symbol-sort-key");if(this.features=[],!l&&!c)return;const u=e.iconDependencies,d=e.glyphDependencies,p=e.availableImages,m=new $n(this.zoom);for(const{feature:f,id:_,index:g,sourceLayerIndex:y}of t){const t=r._featureFilter.needGeometry,e=vo(f,t);if(!r._featureFilter.filter(m,e,i))continue;let o,a;if(t||(e.geometry=xo(f)),l){const t=r.getValueAndResolveTokens("text-field",e,i,p),n=ue.factory(t);Ph(n)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Un()||this.hasRTLText&&Nn.isParsed())&&(o=rc(n,r,e))}if(c){const t=r.getValueAndResolveTokens("icon-image",e,i,p);a=t instanceof de?t:de.fromString(t)}if(!o&&!a)continue;const x=this.sortFeaturesByKey?h.evaluate(e,{},i):void 0;if(this.features.push({id:_,text:o,icon:a,index:g,sourceLayerIndex:y,geometry:e.geometry,properties:f.properties,type:Ah[f.type],sortKey:x}),a&&(u[a.name]=!0),o){const t=s.evaluate(e,{},i).join(","),r="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Pc.vertical)>=0;for(const e of o.sections)if(e.image)u[e.image.name]=!0;else{const i=Sn(o.toString()),n=e.fontStack||t,s=d[n]=d[n]||{};this.calculateGlyphDependencies(e.text,s,r,this.allowVerticalPlacement,i)}}}"line"===n.get("symbol-placement")&&(this.features=function(t){const e={},i={},r=[];let n=0;function s(e){r.push(t[e]),n++}function o(t,e,n){const s=i[t];return delete i[t],i[e]=s,r[s].geometry[0].pop(),r[s].geometry[0]=r[s].geometry[0].concat(n[0]),s}function a(t,i,n){const s=e[i];return delete e[i],e[t]=s,r[s].geometry[0].shift(),r[s].geometry[0]=n[0].concat(r[s].geometry[0]),s}function l(t,e,i){const r=i?e[0][e[0].length-1]:e[0][0];return`${t}:${r.x}:${r.y}`}for(let c=0;c<t.length;c++){const h=t[c],u=h.geometry,d=h.text?h.text.toString():null;if(!d){s(c);continue}const p=l(d,u),m=l(d,u,!0);if(p in i&&m in e&&i[p]!==e[m]){const t=a(p,m,u),n=o(p,m,r[t].geometry);delete e[p],delete i[m],i[l(d,r[n].geometry,!0)]=n,r[t].geometry=null}else p in i?o(p,m,u):m in e?a(p,m,u):(s(c),e[p]=n-1,i[m]=n-1)}return r.filter(t=>t.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((t,e)=>t.sortKey-e.sortKey)}update(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const i=this.lineVertexArray.length;if(void 0!==t.segment){let i=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]);const n={};for(let s=t.segment+1;s<e.length;s++)n[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s<e.length-1&&(i+=e[s+1].dist(e[s]));for(let s=t.segment||0;s>=0;s--)n[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:r},s>0&&(r+=e[s-1].dist(e[s]));for(let t=0;t<e.length;t++){const e=n[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(t,e,i,r,n,s,o,a,l,c,h,u){const d=t.indexArray,p=t.layoutVertexArray,m=t.segments.prepareSegment(4*e.length,p,d,this.canOverlap?s.sortKey:void 0),f=this.glyphOffsetArray.length,_=m.vertexLength,g=this.allowVerticalPlacement&&o===Pc.vertical?Math.PI/2:0,y=s.text&&s.text.sections;for(let x=0;x<e.length;x++){const{tl:r,tr:n,bl:o,br:l,tex:c,pixelOffsetTL:h,pixelOffsetBR:f,minFontScaleX:_,minFontScaleY:v,glyphOffset:b,isSDF:w,sectionIndex:T}=e[x],E=m.vertexLength,S=b[1];Mh(p,a.x,a.y,r.x,S+r.y,c.x,c.y,i,w,h.x,h.y,_,v),Mh(p,a.x,a.y,n.x,S+n.y,c.x+c.w,c.y,i,w,f.x,h.y,_,v),Mh(p,a.x,a.y,o.x,S+o.y,c.x,c.y+c.h,i,w,h.x,f.y,_,v),Mh(p,a.x,a.y,l.x,S+l.y,c.x+c.w,c.y+c.h,i,w,f.x,f.y,_,v),zh(t.dynamicLayoutVertexArray,a,g),d.emplaceBack(E,E+1,E+2),d.emplaceBack(E+1,E+2,E+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(b[0]),x!==e.length-1&&T===e[x+1].sectionIndex||t.programConfigurations.populatePaintArrays(p.length,s,s.index,{},u,y&&y[T])}t.placedSymbolArray.emplaceBack(a.x,a.y,f,this.glyphOffsetArray.length-f,_,l,c,a.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],o,0,!1,0,h)}_commitLayoutVertex(t,e,i,r,n){t.emplaceBack(e.x,e.y,i,r,Math.round(n.x),Math.round(n.y))}_addCollisionDebugVertices(t,e,i,n,s){const o=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),a=o.vertexLength,l=s.anchorX,c=s.anchorY;for(let r=0;r<4;r++)i.collisionVertexArray.emplaceBack(0,0,0,0);i.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),i.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),i.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),i.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(i.layoutVertexArray,n,l,c,new r(t.x1,t.y1)),this._commitLayoutVertex(i.layoutVertexArray,n,l,c,new r(t.x2,t.y1)),this._commitLayoutVertex(i.layoutVertexArray,n,l,c,new r(t.x2,t.y2)),this._commitLayoutVertex(i.layoutVertexArray,n,l,c,new r(t.x1,t.y2)),o.vertexLength+=4;const h=i.indexArray;h.emplaceBack(a,a+1),h.emplaceBack(a+1,a+2),h.emplaceBack(a+2,a+3),h.emplaceBack(a+3,a),o.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,i,r,n,s){for(let o=r;o<n;o++){const r=i.get(o),n=this.getSymbolInstanceTextSize(t,s,e,o);this._addCollisionDebugVertices(r,n,this.textCollisionBox,r.anchorPoint,s)}}_addIconDebugCollisionBoxes(t,e,i,r,n,s){for(let o=r;o<n;o++){const r=i.get(o),n=this.getSymbolInstanceIconSize(t,e,o);this._addCollisionDebugVertices(r,n,this.iconCollisionBox,r.anchorPoint,s)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Dh(ys,Yl.members,As),this.iconCollisionBox=new Dh(ys,Yl.members,As);const i=ec(this.iconSizeData,t),r=ec(this.textSizeData,t);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this._addTextDebugCollisionBoxes(r,t,e,s.textBoxStartIndex,s.textBoxEndIndex,s),this._addTextDebugCollisionBoxes(r,t,e,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._addIconDebugCollisionBoxes(i,t,e,s.iconBoxStartIndex,s.iconBoxEndIndex,s),this._addIconDebugCollisionBoxes(i,t,e,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s)}}getSymbolInstanceTextSize(t,e,i,r){const n=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:r),s=tc(this.textSizeData,t,n)/24;return this.tilePixelRatio*s}getSymbolInstanceIconSize(t,e,i){const r=this.icon.placedSymbolArray.get(i),n=tc(this.iconSizeData,t,r);return this.tilePixelRatio*n}_commitDebugCollisionVertexUpdate(t,e,i){t.emplaceBack(e,-i,-i),t.emplaceBack(e,i,-i),t.emplaceBack(e,i,i),t.emplaceBack(e,-i,i)}_updateTextDebugCollisionBoxes(t,e,i,r,n,s){for(let o=r;o<n;o++){const r=i.get(o),n=this.getSymbolInstanceTextSize(t,s,e,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,n,r.padding)}}_updateIconDebugCollisionBoxes(t,e,i,r,n){for(let s=r;s<n;s++){const r=i.get(s),n=this.getSymbolInstanceIconSize(t,e,s);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,n,r.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const i=ec(this.iconSizeData,t),r=ec(this.textSizeData,t);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this._updateTextDebugCollisionBoxes(r,t,e,s.textBoxStartIndex,s.textBoxEndIndex,s),this._updateTextDebugCollisionBoxes(r,t,e,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s),this._updateIconDebugCollisionBoxes(i,t,e,s.iconBoxStartIndex,s.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(i,t,e,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,e,i,r,n,s,o,a,l){const c={};for(let h=e;h<i;h++){const e=t.get(h);c.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.textFeatureIndex=e.featureIndex;break}for(let h=r;h<n;h++){const e=t.get(h);c.verticalTextBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.verticalTextFeatureIndex=e.featureIndex;break}for(let h=s;h<o;h++){const e=t.get(h);c.iconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.iconFeatureIndex=e.featureIndex;break}for(let h=a;h<l;h++){const e=t.get(h);c.verticalIconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.verticalIconFeatureIndex=e.featureIndex;break}return c}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const i=t.placedSymbolArray.get(e),r=i.vertexStartIndex+4*i.numGlyphs;for(let n=i.vertexStartIndex;n<r;n+=4)t.indexArray.emplaceBack(n,n+1,n+2),t.indexArray.emplaceBack(n+1,n+2,n+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),i=Math.cos(t),r=[],n=[],s=[];for(let o=0;o<this.symbolInstances.length;++o){s.push(o);const t=this.symbolInstances.get(o);r.push(0|Math.round(e*t.anchorX+i*t.anchorY)),n.push(t.featureIndex)}return s.sort((t,e)=>r[t]-r[e]||n[e]-n[t]),s}addToSortKeyRanges(t,e){const i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach((t,e,i)=>{t>=0&&i.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)}),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Gr("SymbolBucket",Lh,{omit:["layers","collisionBoxArray","features","compareText"]}),Lh.MAX_GLYPHS=65535,Lh.addDynamicAttributes=zh;const Rh=new is({"symbol-placement":new Yn(Bt.layout_symbol["symbol-placement"]),"symbol-spacing":new Yn(Bt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Yn(Bt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Jn(Bt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Yn(Bt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Yn(Bt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Yn(Bt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Yn(Bt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Yn(Bt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Jn(Bt.layout_symbol["icon-size"]),"icon-text-fit":new Yn(Bt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Yn(Bt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Jn(Bt.layout_symbol["icon-image"]),"icon-rotate":new Jn(Bt.layout_symbol["icon-rotate"]),"icon-padding":new Yn(Bt.layout_symbol["icon-padding"]),"icon-keep-upright":new Yn(Bt.layout_symbol["icon-keep-upright"]),"icon-offset":new Jn(Bt.layout_symbol["icon-offset"]),"icon-anchor":new Jn(Bt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Yn(Bt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Yn(Bt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Yn(Bt.layout_symbol["text-rotation-alignment"]),"text-field":new Jn(Bt.layout_symbol["text-field"]),"text-font":new Jn(Bt.layout_symbol["text-font"]),"text-size":new Jn(Bt.layout_symbol["text-size"]),"text-max-width":new Jn(Bt.layout_symbol["text-max-width"]),"text-line-height":new Yn(Bt.layout_symbol["text-line-height"]),"text-letter-spacing":new Jn(Bt.layout_symbol["text-letter-spacing"]),"text-justify":new Jn(Bt.layout_symbol["text-justify"]),"text-radial-offset":new Jn(Bt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Yn(Bt.layout_symbol["text-variable-anchor"]),"text-anchor":new Jn(Bt.layout_symbol["text-anchor"]),"text-max-angle":new Yn(Bt.layout_symbol["text-max-angle"]),"text-writing-mode":new Yn(Bt.layout_symbol["text-writing-mode"]),"text-rotate":new Jn(Bt.layout_symbol["text-rotate"]),"text-padding":new Yn(Bt.layout_symbol["text-padding"]),"text-keep-upright":new Yn(Bt.layout_symbol["text-keep-upright"]),"text-transform":new Jn(Bt.layout_symbol["text-transform"]),"text-offset":new Jn(Bt.layout_symbol["text-offset"]),"text-allow-overlap":new Yn(Bt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Yn(Bt.layout_symbol["text-ignore-placement"]),"text-optional":new Yn(Bt.layout_symbol["text-optional"])});var Bh={paint:new is({"icon-opacity":new Jn(Bt.paint_symbol["icon-opacity"]),"icon-color":new Jn(Bt.paint_symbol["icon-color"]),"icon-halo-color":new Jn(Bt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Jn(Bt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Jn(Bt.paint_symbol["icon-halo-blur"]),"icon-translate":new Yn(Bt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Yn(Bt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Jn(Bt.paint_symbol["text-opacity"]),"text-color":new Jn(Bt.paint_symbol["text-color"],{runtimeType:Wt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new Jn(Bt.paint_symbol["text-halo-color"]),"text-halo-width":new Jn(Bt.paint_symbol["text-halo-width"]),"text-halo-blur":new Jn(Bt.paint_symbol["text-halo-blur"]),"text-translate":new Yn(Bt.paint_symbol["text-translate"]),"text-translate-anchor":new Yn(Bt.paint_symbol["text-translate-anchor"])}),layout:Rh};class Fh{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Zt,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Gr("FormatSectionOverride",Fh,{omit:["defaultValue"]});class Oh extends po{constructor(t){super(t,Bh)}recalculate(t,e){if(super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const t=this.layout.get("text-writing-mode");if(t){const e=[];for(const i of t)e.indexOf(i)<0&&e.push(i);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,e,i,r){const n=this.layout.get(t).evaluate(e,{},i,r),s=this._unevaluatedLayout._values[t];return s.isDataDriven()||Ji(s.value)||!n?n:function(t,e){return n.replace(/{([^{}]+)}/g,(e,i)=>i in t?String(t[i]):"")}(e.properties)}createBucket(t){return new Lh(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of Bh.paint.overridableProperties){if(!Oh.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),i=new Fh(e),r=new Yi(i,e.property.specification);let n=null;n="constant"===e.value.kind||"source"===e.value.kind?new tr("source",r):new er("composite",r,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new Hn(e.property,n,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,i){return!(!this.layout||e.isDataDriven()||i.isDataDriven())&&Oh.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const i=t.get("text-field"),r=Bh.paint.properties[e];let n=!1;const s=t=>{for(const e of t)if(r.overrides&&r.overrides.hasOverride(e))return void(n=!0)};if("constant"===i.value.kind&&i.value.value instanceof ue)s(i.value.value.sections);else if("source"===i.value.kind){const t=e=>{n||(e instanceof ge&&fe(e.value)===Jt?s(e.value.sections):e instanceof be?s(e.sections):e.eachChild(t))},e=i.value;e._styleExpression&&t(e._styleExpression.expression)}return n}getProgramConfiguration(t){return new lo(this,t)}}var Uh={paint:new is({"background-color":new Yn(Bt.paint_background["background-color"]),"background-pattern":new ts(Bt.paint_background["background-pattern"]),"background-opacity":new Yn(Bt.paint_background["background-opacity"])})},Vh={paint:new is({"raster-opacity":new Yn(Bt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Yn(Bt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Yn(Bt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Yn(Bt.paint_raster["raster-brightness-max"]),"raster-saturation":new Yn(Bt.paint_raster["raster-saturation"]),"raster-contrast":new Yn(Bt.paint_raster["raster-contrast"]),"raster-resampling":new Yn(Bt.paint_raster["raster-resampling"]),"raster-fade-duration":new Yn(Bt.paint_raster["raster-fade-duration"])})};class Nh extends po{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var $h={paint:new is({"sky-type":new Yn(Bt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Yn(Bt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Yn(Bt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Yn(Bt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Yn(Bt.paint_sky["sky-gradient-radius"]),"sky-gradient":new es(Bt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Yn(Bt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Yn(Bt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Yn(Bt.paint_sky["sky-opacity"])})};function qh(t,e,i){const r=Ho(0,0,1),n=ha(ca());return function(t,e,i){i*=.5;var r=e[0],n=e[1],s=e[2],o=e[3],a=Math.sin(i),l=Math.cos(i);t[0]=r*l-s*a,t[1]=n*l+o*a,t[2]=s*l+r*a,t[3]=o*l-n*a}(n,n,i?-h(t)+Math.PI:h(t)),ua(n,n,-h(e)),na(r,r,n),ta(r,r)}const Zh={circle:class extends po{constructor(t){super(t,Vo)}createBucket(t){return new wo(t)}queryRadius(t){const e=t;return Ro("circle-radius",this,e)+Ro("circle-stroke-width",this,e)+Bo(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,i,r,n,s,o,a){const l="map"===this.paint.get("circle-pitch-alignment");if(l&&t.queryGeometry.isAboveHorizon)return!1;const c=Oo(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),h=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),u=l?h*t.pixelToTileUnitsFactor:h;for(const d of r)for(const e of d){const i=e.add(c),r=a&&s.elevation?s.elevation.exaggeration()*a.getElevationAt(i.x,i.y,!0):0,n=l?i:ma(i,r,o),h=l?t.tilespaceRays.map(t=>ga(t,r)):t.queryGeometry.screenGeometry;let d=u;const p=la([],[e.x,e.y,r,1],o);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?d*=p[3]/s.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(d*=s.cameraToCenterDistance/p[3]),Eo(h,n,d))return!0}return!1}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new lo(this,t)}},heatmap:class extends po{createBucket(t){return new ya(t)}constructor(t){super(t,Ea),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Sa({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new lo(this,t)}},hillshade:class extends po{constructor(t){super(t,Ia)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(t){return new lo(this,t)}},fill:class extends po{constructor(t){super(t,dl)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),i=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&i.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),i}getProgramConfiguration(t){return new lo(this,t)}recalculate(t,e){super.recalculate(t,e);const i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new hl(t)}queryRadius(){return Bo(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,i,r,n,s){return!t.queryGeometry.isAboveHorizon&&So(Fo(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),s.angle,t.pixelToTileUnitsFactor),r)}isTileClipped(){return!0}},"fill-extrusion":class extends po{constructor(t){super(t,Pl)}createBucket(t){return new Ml(t)}queryRadius(){return Bo(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new lo(this,t)}queryIntersectsFeature(t,e,i,n,s,o,a,l,c){const h=Oo(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(e,i),d=this.paint.get("fill-extrusion-base").evaluate(e,i),p=[0,0],m=l&&o.elevation,f=o.elevation?o.elevation.exaggeration():1;if(m){const e=t.tile.getBucket(this).centroidVertexArray,i=c+1;if(i<e.length){const t=e.get(i);p[0]=t.a_centroid_pos0,p[1]=t.a_centroid_pos1}}if(0===p[0]&&1===p[1])return!1;const _=function(t,e,i,n,s,o,a,l,c){return o?function(t,e,i,r,n,s,o,a,l){const c=[],h=[],u=[0,0,0];for(const d of t){const t=[],p=[];for(const c of d){const h=c.x+r.x,d=c.y+r.y,m=Rl(h,d,e,i,s,o,a,l);u[0]=h,u[1]=d,u[2]=m.base;const f=Ll(ra(u,u,n));u[0]=h,u[1]=d,u[2]=m.top;const _=Ll(ra(u,u,n));t.push(f),p.push(_)}c.push(t),h.push(p)}return[c,h]}(t,e,i,n,s,o,a,l,c):function(t,e,i,n,s){const o=[],a=[],l=s[8]*e,c=s[9]*e,h=s[10]*e,u=s[11]*e,d=s[8]*i,p=s[9]*i,m=s[10]*i,f=s[11]*i;for(const _ of t){const t=[],e=[];for(const i of _){const o=i.x+n.x,a=i.y+n.y,_=s[0]*o+s[4]*a+s[12],g=s[1]*o+s[5]*a+s[13],y=s[2]*o+s[6]*a+s[14],x=s[3]*o+s[7]*a+s[15],v=y+h,b=x+u,w=_+d,T=g+p,E=y+m,S=x+f,I=new r((_+l)/b,(g+c)/b);I.z=v/b,t.push(I);const A=new r(w/S,T/S);A.z=E/S,e.push(A)}o.push(t),a.push(e)}return[o,a]}(t,e,i,n,s)}(n,d,u,h,a,m?l:null,p,f,o.center.lat),g=t.queryGeometry;return function(t,e,i){let r=1/0;So(i,e)&&(r=Dl(i,e[0]));for(let n=0;n<e.length;n++){const s=e[n],o=t[n];for(let t=0;t<s.length-1;t++){const e=s[t],n=[e,s[t+1],o[t+1],o[t],e];To(i,n)&&(r=Math.min(r,Dl(i,n)))}}return r!==1/0&&r}(_[0],_[1],g.isPointQuery()?g.screenBounds:g.screenGeometry)}},line:class extends po{constructor(t){super(t,Zl),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ye,this.gradientVersion=(this.gradientVersion+1)%a)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Gl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new $l(t)}getProgramIds(){const t=this.paint.get("line-dasharray"),e=this.paint.get("line-pattern").constantOr(1),i=this.paint.get("line-gradient");return[e?"linePattern":t?"lineSDF":i?"lineGradient":"line"]}getProgramConfiguration(t){return new lo(this,t)}queryRadius(t){const e=t,i=jl(Ro("line-width",this,e),Ro("line-gap-width",this,e)),r=Ro("line-offset",this,e);return i/2+Math.abs(r)+Bo(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,i,n,s,o){if(t.queryGeometry.isAboveHorizon)return!1;const a=Fo(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),l=t.pixelToTileUnitsFactor/2*jl(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),c=this.paint.get("line-offset").evaluate(e,i);return c&&(n=function(t,e){const i=[],n=new r(0,0);for(let r=0;r<t.length;r++){const s=t[r],o=[];for(let t=0;t<s.length;t++){const i=s[t-1],r=s[t],a=s[t+1],l=0===t?n:r.sub(i)._unit()._perp(),c=t===s.length-1?n:a.sub(r)._unit()._perp(),h=l._add(c)._unit();h._mult(1/(h.x*c.x+h.y*c.y)),o.push(h._mult(e)._add(r))}i.push(o)}return i}(n,c*t.pixelToTileUnitsFactor)),function(t,e,i){for(let r=0;r<e.length;r++){const n=e[r];if(t.length>=3)for(let e=0;e<n.length;e++)if(ko(t,n[e]))return!0;if(Io(t,n,i))return!0}return!1}(a,n,l)}isTileClipped(){return!0}},symbol:Oh,background:class extends po{constructor(t){super(t,Uh)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends po{constructor(t){super(t,Vh)}getProgramIds(){return["raster"]}},sky:class extends po{constructor(t){super(t,$h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Sa({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}}getCenter(t,e){const i=this.paint.get("sky-type");if("atmosphere"===i){const i=this.paint.get("sky-atmosphere-sun"),r=!i,n=t.style.light,s=n.properties.get("position");return r&&"viewport"===n.properties.get("anchor")&&M("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?qh(s.azimuthal,90-s.polar,e):qh(i[0],90-i[1],e)}if("gradient"===i){const t=this.paint.get("sky-gradient-center");return qh(t[0],90-t[1],e)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}},{HTMLImageElement:Gh,HTMLCanvasElement:jh,HTMLVideoElement:Xh,ImageData:Wh,ImageBitmap:Hh}=s;class Kh{constructor(t,e,i,r){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,r)}update(t,e,i){const{width:r,height:n}=t,s=!(this.size&&this.size[0]===r&&this.size[1]===n||i),{context:o}=this,{gl:a}=o;if(this.useMipmap=Boolean(e&&e.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!e||!1!==e.premultiply)),s)this.size=[r,n],t instanceof Gh||t instanceof jh||t instanceof Xh||t instanceof Wh||Hh&&t instanceof Hh?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,r,n,0,this.format,a.UNSIGNED_BYTE,t.data);else{const{x:e,y:s}=i||{x:0,y:0};t instanceof Gh||t instanceof jh||t instanceof Xh||t instanceof Wh||Hh&&t instanceof Hh?a.texSubImage2D(a.TEXTURE_2D,0,e,s,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,e,s,r,n,a.RGBA,a.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)}bind(t,e,i){const{context:r}=this,{gl:n}=r;n.bindTexture(n.TEXTURE_2D,this.texture),i!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class Yh{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=(()=>{this._triggered=!1,this._callback()}))}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=(()=>{})}}const Jh=s.performance;class Qh{constructor(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},Jh.mark(this._marks.start)}finish(){Jh.mark(this._marks.end);let t=Jh.getEntriesByName(this._marks.measure);return 0===t.length&&(Jh.measure(this._marks.measure,this._marks.start,this._marks.end),t=Jh.getEntriesByName(this._marks.measure),Jh.clearMarks(this._marks.start),Jh.clearMarks(this._marks.end),Jh.clearMeasures(this._marks.measure)),t}}class tu{constructor(){this.tasks={},this.taskQueue=[],T(["process"],this),this.invoker=new Yh(this.process),this.nextId=0}add(t,e){const i=this.nextId++;return this.tasks[i]={fn:t,metadata:e,priority:eu(e),id:i},this.taskQueue.push(i),this.invoker.trigger(),{cancel:()=>{delete this.tasks[i]}}}process(){k();try{if(this.taskQueue=this.taskQueue.filter(t=>!!this.tasks[t]),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!e)return;e.fn()}finally{}}pick(){let t=null,e=1/0;for(let r=0;r<this.taskQueue.length;r++){const i=this.tasks[this.taskQueue[r]];i.priority<e&&(e=i.priority,t=r)}if(null===t)return null;const i=this.taskQueue[t];return this.taskQueue.splice(t,1),i}remove(){this.invoker.remove()}}function eu({type:t,isSymbolTile:e,zoom:i}){return i=i||0,"message"===t?0:"maybePrepare"!==t||e?"parseTile"!==t||e?"parseTile"===t&&e?300-i:"maybePrepare"===t&&e?400-i:500:200-i:100-i}class iu{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof ru?new ru(t.lng,t.lat):ru.convert(t),this}setSouthWest(t){return this._sw=t instanceof ru?new ru(t.lng,t.lat):ru.convert(t),this}extend(t){const e=this._sw,i=this._ne;let r,n;if(t instanceof ru)r=t,n=t;else{if(!(t instanceof iu))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(iu.convert(t)):this.extend(ru.convert(t)):this;if(r=t._sw,n=t._ne,!r||!n)return this}return e||i?(e.lng=Math.min(r.lng,e.lng),e.lat=Math.min(r.lat,e.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new ru(r.lng,r.lat),this._ne=new ru(n.lng,n.lat)),this}getCenter(){return new ru((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ru(this.getWest(),this.getNorth())}getSouthEast(){return new ru(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:i}=ru.convert(t);let r=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&r}static convert(t){return!t||t instanceof iu?t:new iu(t)}}class ru{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ru(f(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,i=this.lat*e,r=t.lat*e,n=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(n,1))}toBounds(t=0){const e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new iu(new ru(this.lng-i,this.lat-e),new ru(this.lng+i,this.lat+e))}static convert(t){if(t instanceof ru)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new ru(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new ru(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const nu=2*Math.PI*6371008.8;function su(t){return nu*Math.cos(t*Math.PI/180)}function ou(t){return(180+t)/360}function au(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function lu(t,e){return t/su(e)}function cu(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function hu(t,e){return t*su(cu(e))}class uu{constructor(t,e,i=0){this.x=+t,this.y=+e,this.z=+i}static fromLngLat(t,e=0){const i=ru.convert(t);return new uu(ou(i.lng),au(i.lat),lu(e,i.lat))}toLngLat(){return new ru(360*this.x-180,cu(this.y))}toAltitude(){return hu(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/nu*(t=cu(this.y),1/Math.cos(t*Math.PI/180));var t}}function du(t,e,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}class pu{constructor(t,e,i){this.z=t,this.x=e,this.y=i,this.key=_u(0,t,t,e,i)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const i=(n=this.y,s=this.z,o=du(256*(r=this.x),256*(n=Math.pow(2,s)-n-1),s),a=du(256*(r+1),256*(n+1),s),o[0]+","+o[1]+","+a[0]+","+a[1]);var r,n,s,o,a;const l=function(t,e,i){let r,n="";for(let s=t;s>0;s--)n+=(e&(r=1<<s-1)?1:0)+(i&r?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",i)}getTilePoint(t){const e=Math.pow(2,this.z);return new r(8192*(t.x*e-this.x),8192*(t.y*e-this.y))}getTileVec3(t){const e=Math.pow(2,this.z);return Ho(8192*(t.x*e-this.x),8192*(t.y*e-this.y),hu(t.z,t.y))}toString(){return`${this.z}/${this.x}/${this.y}`}}class mu{constructor(t,e){this.wrap=t,this.canonical=e,this.key=_u(t,e.z,e.z,e.x,e.y)}}class fu{constructor(t,e,i,r,n){this.overscaledZ=t,this.wrap=e,this.canonical=new pu(i,+r,+n),this.key=0===e&&t===i?this.canonical.key:_u(e,t,i,r,n)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new fu(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fu(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e=!0){if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return _u(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const i=this.canonical.z-t;return _u(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new fu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new fu(e,this.wrap,e,i,r),new fu(e,this.wrap,e,i+1,r),new fu(e,this.wrap,e,i,r+1),new fu(e,this.wrap,e,i+1,r+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new fu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new fu(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new mu(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new uu(t.x-this.wrap,t.y))}getTileVec3(t){return this.canonical.getTileVec3(new uu(t.x-this.wrap,t.y,t.z))}}function _u(t,e,i,r,n){const s=1<<Math.min(i,22);let o=s*(n%s)+r%s;return t&&i<22&&(o+=s*s*((t<0?-2*t-1:2*t)%(1<<2*(22-i)))),16*(32*o+i)+(e-i)}Gr("CanonicalTileID",pu),Gr("OverscaledTileID",fu,{omit:["posMatrix"]});class gu{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}class yu{constructor(t,e,i,r,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=r,this.properties=t.properties,this.id=n}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}var xu=as([{name:"a_pos",type:"Int16",components:2}]);class vu{constructor(t,e,i){this.tileID=t,this.uid=v(),this.uses=0,this.tileSize=e,this.tileZoom=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const e=t+this.timeAdded;e<N.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const i={};if(!e)return i;for(const r of t){const t=r.layerIds.map(t=>e.getLayer(t)).filter(Boolean);if(0!==t.length){r.layers=t,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map(e=>t.filter(t=>t.id===e)[0]));for(const e of t)i[e.id]=r}}return i}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof Lh){if(this.hasSymbolBuckets=!0,!i)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof Lh&&e.hasRTLText){this.hasRTLText=!0,Nn.isLoading()||Nn.isLoaded()||"deferred"!==Un()||Vn();break}}this.queryPadding=0;for(const t in this.buckets){const i=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(i))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Ps}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const i in this.buckets){const e=this.buckets[i];e.uploadPending()&&e.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Kh(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Kh(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,i,r,n,s,o,a){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:o,transform:s,params:n},t,e,i):{}}querySourceFeatures(t,e){const i=this.latestFeatureIndex;if(!i||!i.rawTileData)return;const r=i.loadVTLayers(),n=e?e.sourceLayer:"",s=r._geojsonTileLayer||r[n];if(!s)return;const o=dr(e&&e.filter),{z:a,x:l,y:c}=this.tileID.canonical,h={z:a,x:l,y:c};for(let u=0;u<s.length;u++){const e=s.feature(u);if(o.needGeometry){const t=vo(e,!0);if(!o.filter(new $n(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!o.filter(new $n(this.tileID.overscaledZ),e))continue;const r=i.getId(e,n),d=new yu(e,a,l,c,r);d.tile=h,t.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=D(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let i=!1;if(this.expirationTime>t)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{const r=this.expirationTime-e;r?this.expirationTime=t+Math.max(r,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const i=this.latestFeatureIndex.loadVTLayers();for(const r in this.buckets){if(!e.style.hasLayer(r))continue;const n=this.buckets[r],s=n.layers[0].sourceLayer||"_geojsonTileLayer",o=i[s],a=t[s];if(!o||!a||0===Object.keys(a).length)continue;n.update(a,o,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=e&&e.style&&e.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(n)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<N.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=N.now()+t}setDependencies(t,e){const i={};for(const r of e)i[r]=!0;this.dependencies[t]=i}hasDependency(t,e){for(const i of t){const t=this.dependencies[i];if(t)for(const i of e)if(t[i])return!0}return!1}clearQueryDebugViz(){}}class bu{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,i){const r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},y(this.stateChanges[t][r],i),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==r&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][r]){this.deletedStates[t][r]={};for(const e in this.state[t][r])i[e]||(this.deletedStates[t][r][e]=null)}else for(const n in i)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][n]&&delete this.deletedStates[t][r][n]}removeFeatureState(t,e,i){if(null===this.deletedStates[t])return;const r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(i in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][i]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}getState(t,e){const i=String(e),r=y({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const i=this.deletedStates[t][e];if(null===i)return{};for(const t in i)delete r[t]}return r}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,e){const i={};for(const r in this.stateChanges){this.state[r]=this.state[r]||{};const t={};for(const e in this.stateChanges[r])this.state[r][e]||(this.state[r][e]={}),y(this.state[r][e],this.stateChanges[r][e]),t[e]=this.state[r][e];i[r]=t}for(const r in this.deletedStates){this.state[r]=this.state[r]||{};const t={};if(null===this.deletedStates[r])for(const e in this.state[r])t[e]={},this.state[r][e]={};else for(const e in this.deletedStates[r]){if(null===this.deletedStates[r][e])this.state[r][e]={};else for(const t of Object.keys(this.deletedStates[r][e]))delete this.state[r][e][t];t[e]=this.state[r][e]}i[r]=i[r]||{},y(i[r],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(const r in t)t[r].setFeatureState(i,e)}}class wu{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,e){const i=this.toIdx(t,e);return{min:this.minimums[i],max:this.maximums[i]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function Tu(t,e,i,r){let n=0,s=Number.MAX_VALUE;for(let o=0;o<3;o++)if(Math.abs(r[o])<1e-15){if(i[o]<t[o]||i[o]>e[o])return null}else{const a=1/r[o];let l=(t[o]-i[o])*a,c=(e[o]-i[o])*a;if(l>c){const t=l;l=c,c=t}if(l>n&&(n=l),c<s&&(s=c),n>s)return null}return n}function Eu(t,e,i,r,n,s,o,a,l,c,h){const u=r-t,d=n-e,p=s-i,m=o-t,f=a-e,_=l-i,g=h[1]*_-h[2]*f,y=h[2]*m-h[0]*_,x=h[0]*f-h[1]*m,v=u*g+d*y+p*x;if(Math.abs(v)<1e-15)return null;const b=1/v,w=c[0]-t,T=c[1]-e,E=c[2]-i,S=(w*g+T*y+E*x)*b;if(S<0||S>1)return null;const I=T*p-E*d,A=E*u-w*p,C=w*d-T*u,M=(h[0]*I+h[1]*A+h[2]*C)*b;return M<0||S+M>1?null:(m*I+f*A+_*C)*b}function Su(t,e,i){return(t-e)/(i-e)}function Iu(t,e,i,r,n,s,o,a,l){const c=1<<i,h=s-r,u=o-n,d=(t+1)/c*h+r,p=(e+0)/c*u+n,m=(e+1)/c*u+n;a[0]=(t+0)/c*h+r,a[1]=p,l[0]=d,l[1]=m}class Au{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=Math.ceil(Math.log2(t.dim/8)),i=[];let r=Math.ceil(Math.pow(2,e));const n=1/r,s=(t,e,i,r,n)=>{const s=r?1:0,o=(t+1)*i-s,a=e*i,l=(e+1)*i-s;n[0]=t*i,n[1]=a,n[2]=o,n[3]=l};let o=new wu(r);const a=[];for(let l=0;l<r*r;l++){s(l%r,Math.floor(l/r),n,!1,a);const e=Mu(a[0],a[1],t),i=Mu(a[2],a[1],t),c=Mu(a[2],a[3],t),h=Mu(a[0],a[3],t);o.minimums.push(Math.min(e,i,c,h)),o.maximums.push(Math.max(e,i,c,h)),o.leaves.push(1)}for(i.push(o),r/=2;r>=1;r/=2){const t=i[i.length-1];o=new wu(r);for(let e=0;e<r*r;e++){s(e%r,Math.floor(e/r),2,!0,a);const i=t.getElevation(a[0],a[1]),n=t.getElevation(a[2],a[1]),l=t.getElevation(a[2],a[3]),c=t.getElevation(a[0],a[3]),h=t.isLeaf(a[0],a[1]),u=t.isLeaf(a[2],a[1]),d=t.isLeaf(a[2],a[3]),p=t.isLeaf(a[0],a[3]),m=Math.min(i.min,n.min,l.min,c.min),f=Math.max(i.max,n.max,l.max,c.max),_=h&&u&&d&&p;o.maximums.push(f),o.minimums.push(m),o.leaves.push(f-m<=5&&_?1:0)}i.push(o)}return i}(this.dem),i=e.length-1,r=e[i];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(e,0,0,i,0)}raycastRoot(t,e,i,r,n,s,o=1){return Tu([t,e,-100],[i,r,this.maximums[0]*o],n,s)}raycast(t,e,i,r,n,s,o=1){if(!this.nodeCount)return null;const a=this.raycastRoot(t,e,i,r,n,s,o);if(null==a)return null;const l=[],c=[],h=[],u=[],d=[{idx:0,t:a,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:a,t:p,nodex:m,nodey:f,depth:_}=d.pop();if(this.leaves[a]){Iu(m,f,_,t,e,i,r,h,u);const a=1<<_,l=(m+0)/a,c=(m+1)/a,d=(f+0)/a,g=(f+1)/a,y=Mu(l,d,this.dem)*o,x=Mu(c,d,this.dem)*o,v=Mu(c,g,this.dem)*o,b=Mu(l,g,this.dem)*o,w=Eu(h[0],h[1],y,u[0],h[1],x,u[0],u[1],v,n,s),T=Eu(u[0],u[1],v,h[0],u[1],b,h[0],h[1],y,n,s),E=Math.min(null!==w?w:Number.MAX_VALUE,null!==T?T:Number.MAX_VALUE);if(E!==Number.MAX_VALUE)return E;{const t=Qo([],n,s,p);if(Cu(y,x,b,v,Su(t[0],h[0],u[0]),Su(t[1],h[1],u[1]))>=t[2])return p}continue}let g=0;for(let d=0;d<this._siblingOffset.length;d++){Iu((m<<1)+this._siblingOffset[d][0],(f<<1)+this._siblingOffset[d][1],_+1,t,e,i,r,h,u),h[2]=-100,u[2]=this.maximums[this.childOffsets[a]+d]*o;const p=Tu(h,u,n,s);if(null!=p){const t=p;l[d]=t;let e=!1;for(let i=0;i<g&&!e;i++)t>=l[c[i]]&&(c.splice(i,0,d),e=!0);e||(c[g]=d),g++}}for(let t=0;t<g;t++){const e=c[t];d.push({idx:this.childOffsets[a]+e,t:l[e],nodex:(m<<1)+this._siblingOffset[e][0],nodey:(f<<1)+this._siblingOffset[e][1],depth:_+1})}}return null}_addNode(t,e,i){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(i),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,i,r,n){if(1===t[r].isLeaf(e,i))return;this.childOffsets[n]||(this.childOffsets[n]=this.nodeCount);const s=r-1,o=t[s];let a,l=0;for(let c=0;c<this._siblingOffset.length;c++){const t=2*e+this._siblingOffset[c][0],r=2*i+this._siblingOffset[c][1],n=o.getElevation(t,r),s=o.isLeaf(t,r),h=this._addNode(n.min,n.max,s);s&&(l|=1<<c),a||(a=h)}for(let c=0;c<this._siblingOffset.length;c++)l&1<<c||this._construct(t,2*e+this._siblingOffset[c][0],2*i+this._siblingOffset[c][1],s,a+c)}}function Cu(t,e,i,r,n,s){return Je(Je(t,i,s),Je(e,r,s),n)}function Mu(t,e,i){const r=i.dim,n=m(t*r-.5,0,r-1),s=m(e*r-.5,0,r-1),o=Math.floor(n),a=Math.floor(s),l=Math.min(o+1,r-1),c=Math.min(a+1,r-1);return Cu(i.get(o,a),i.get(l,a),i.get(o,c),i.get(l,c),n-o,s-a)}const zu={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Pu{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,i,r=!1,n=!1){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return M(`"${i}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const s=this.dim=e.height-2;if(this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox",this.borderReady=r,!r){for(let t=0;t<s;t++)this.data[this._idx(-1,t)]=this.data[this._idx(0,t)],this.data[this._idx(s,t)]=this.data[this._idx(s-1,t)],this.data[this._idx(t,-1)]=this.data[this._idx(t,0)],this.data[this._idx(t,s)]=this.data[this._idx(t,s-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(s,-1)]=this.data[this._idx(s-1,0)],this.data[this._idx(-1,s)]=this.data[this._idx(0,s-1)],this.data[this._idx(s,s)]=this.data[this._idx(s-1,s-1)],n&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Au(this)}get(t,e,i=!1){const r=new Uint8Array(this.data.buffer);i&&(t=m(t,-1,this.dim),e=m(e,-1,this.dim));const n=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(r[n],r[n+1],r[n+2])}static getUnpackVector(t){return zu[t]}get unpackVector(){return zu[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,i){return(256*t*256+256*e+i)/10-1e4}_unpackTerrarium(t,e,i){return 256*t+e+i/256-32768}static pack(t,e){const i=[0,0,0,0],r=Pu.getUnpackVector(e);let n=Math.floor((t+r[3])/r[2]);return i[2]=n%256,n=Math.floor(n/256),i[1]=n%256,n=Math.floor(n/256),i[0]=n,i}getPixels(){return new Ta({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let r=e*this.dim,n=e*this.dim+this.dim,s=i*this.dim,o=i*this.dim+this.dim;switch(e){case-1:r=n-1;break;case 1:n=r+1}switch(i){case-1:s=o-1;break;case 1:o=s+1}const a=-e*this.dim,l=-i*this.dim;for(let c=s;c<o;c++)for(let e=r;e<n;e++)this.data[this._idx(e,c)]=t.data[this._idx(e+a,c+l)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}Gr("DEMData",Pu),Gr("DemMinMaxQuadTree",Au,{omit:["dem"]});class ku{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,i){const r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const n={value:e,timeout:void 0};if(void 0!==i&&(n.timeout=setTimeout(()=>{this.remove(t,n)},i)),this.data[r].push(n),this.order.push(r),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const i=t.wrapped().key,r=void 0===e?0:this.data[i].indexOf(e),n=this.data[i][r];return this.data[i].splice(r,1),n.timeout&&clearTimeout(n.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(n.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const i in this.data)for(const r of this.data[i])t(r.value)||e.push(r);for(const i of e)this.remove(i.value.tileID,i)}}class Du{constructor(t,e,i){this.context=t;const r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Lu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ru{constructor(t,e,i,r){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;const n=t.gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let i=0;i<this.attributes.length;i++){const r=e.attributes[this.attributes[i].name];void 0!==r&&t.enableVertexAttribArray(r)}}setVertexAttribPointers(t,e,i){for(let r=0;r<this.attributes.length;r++){const n=this.attributes[r],s=e.attributes[n.name];void 0!==s&&t.vertexAttribPointer(s,n.components,t[Lu[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Bu{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Fu extends Bu{getDefault(){return le.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Ou extends Bu{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Uu extends Bu{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Vu extends Bu{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Nu extends Bu{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class $u extends Bu{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class qu extends Bu{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Zu extends Bu{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Gu extends Bu{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class ju extends Bu{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Xu extends Bu{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class Wu extends Bu{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Hu extends Bu{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class Ku extends Bu{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Yu extends Bu{getDefault(){return le.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Ju extends Bu{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Qu extends Bu{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class td extends Bu{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class ed extends Bu{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class id extends Bu{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class rd extends Bu{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class nd extends Bu{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class sd extends Bu{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class od extends Bu{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class ad extends Bu{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class ld extends Bu{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class cd extends Bu{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class hd extends Bu{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class ud extends Bu{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class dd extends Bu{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class pd extends Bu{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class md extends Bu{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class fd extends md{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class _d extends md{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class gd{constructor(t,e,i,r){this.context=t,this.width=e,this.height=i;const n=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new fd(t,n),r&&(this.depthAttachment=new _d(t,n))}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class yd{constructor(t,e,i){this.func=t,this.mask=e,this.range=i}}yd.ReadOnly=!1,yd.ReadWrite=!0,yd.disabled=new yd(519,yd.ReadOnly,[0,1]);class xd{constructor(t,e,i,r,n,s){this.test=t,this.ref=e,this.mask=i,this.fail=r,this.depthFail=n,this.pass=s}}xd.disabled=new xd({func:519,mask:0},0,0,7680,7680,7680);class vd{constructor(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i}}vd.Replace=[1,0],vd.disabled=new vd(vd.Replace,le.transparent,[!1,!1,!1,!1]),vd.unblended=new vd(vd.Replace,le.transparent,[!0,!0,!0,!0]),vd.alphaBlended=new vd([1,771],le.transparent,[!0,!0,!0,!0]);class bd{constructor(t,e,i){this.enable=t,this.mode=e,this.frontFace=i}}bd.disabled=new bd(!1,1029,2305),bd.backCCW=new bd(!0,1029,2305),bd.backCW=new bd(!0,1029,2304),bd.frontCW=new bd(!0,1028,2304),bd.frontCCW=new bd(!0,1028,2305);class wd extends Rt{constructor(t,e,i){super(),this.id=t,this._onlySymbols=i,e.on("data",t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),e.on("error",()=>{this._sourceErrored=!0}),this._source=e,this._tiles={},this._cache=new ku(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new bu}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,()=>{})}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,()=>{})}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}}getIds(){return g(this._tiles).map(t=>t.tileID).sort(Td).map(t=>t.key)}getRenderableIds(t){const e=[];for(const i in this._tiles)this._isIdRenderable(+i,t)&&e.push(this._tiles[i]);return t?e.sort((t,e)=>{const i=t.tileID,n=e.tileID,s=new r(i.canonical.x,i.canonical.y)._rotate(this.transform.angle),o=new r(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return i.overscaledZ-n.overscaledZ||o.y-s.y||o.x-s.x}).map(t=>t.tileID.key):e.map(t=>t.tileID).sort(Td).map(t=>t.key)}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,e){const i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))}_tileLoaded(t,e,i,r){if(r)return t.state="errored",void(404!==r.status?this._source.fire(new Lt(r,{tile:t})):this.update(this.transform));t.timeAdded=N.now(),"expired"===i&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Dt("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const e=this.getRenderableIds();for(let r=0;r<e.length;r++){const n=e[r];if(t.neighboringTiles&&t.neighboringTiles[n]){const e=this.getTileByID(n);i(t,e),i(e,t)}}function i(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let i=e.tileID.canonical.x-t.tileID.canonical.x;const r=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),s=e.tileID.key;0===i&&0===r||Math.abs(r)>1||(Math.abs(i)>1&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,r),t.neighboringTiles&&t.neighboringTiles[s]&&(t.neighboringTiles[s].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,i,r){for(const n in this._tiles){let s=this._tiles[n];if(r[n]||!s.hasData()||s.tileID.overscaledZ<=e||s.tileID.overscaledZ>i)continue;let o=s.tileID;for(;s&&s.tileID.overscaledZ>e+1;){const t=s.tileID.scaledTo(s.tileID.overscaledZ-1);(s=this._tiles[t.key])&&s.hasData()&&(o=t)}let a=o;for(;a.overscaledZ>e;)if(t[(a=a.scaledTo(a.overscaledZ-1)).key]){r[o.key]=o;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(let i=t.overscaledZ-1;i>=e;i--){const e=t.scaledTo(i),r=this._getLoadedTile(e);if(r)return r}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const i=Math.ceil(t.width/e)+1,r=Math.ceil(t.height/e)+1,n=Math.floor(i*r*5),s="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(s)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const i in this._tiles){const r=this._tiles[i];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),t[r.tileID.key]=r}this._tiles=t;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(t,e,i){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!i)return;let r;this.updateCacheSize(t,e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(t=>new fu(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)):(r=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!i,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!!this.transform.elevation&&!this.usedForTerrain}),this._source.hasTile&&(r=r.filter(t=>this._source.hasTile(t)))):r=[];const n=this._updateRetainedTiles(r);if(Ed(this._source.type)&&0!==r.length){const t={},e={},i=Object.keys(n);for(const r of i){const i=n[r],s=this._tiles[r];if(!s||s.fadeEndTime&&s.fadeEndTime<=N.now())continue;const o=this.findLoadedParent(i,Math.max(i.overscaledZ-wd.maxOverzooming,this._source.minzoom));o&&(this._addTile(o.tileID),t[o.tileID.key]=o.tileID),e[r]=i}const s=r[r.length-1].overscaledZ;for(const r in this._tiles){const t=this._tiles[r];if(n[r]||!t.hasData())continue;let i=t.tileID;for(;i.overscaledZ>s;){i=i.scaledTo(i.overscaledZ-1);const s=this._tiles[i.key];if(s&&s.hasData()&&e[i.key]){n[r]=t.tileID;break}}}for(const r in t)n[r]||(this._coveredTiles[r]=!0,n[r]=t[r])}for(const o in n)this._tiles[o].clearFadeHold();const s=function(t,e){const i=[];for(const r in t)r in e||i.push(r);return i}(this._tiles,n);for(const o of s){const t=this._tiles[o];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+o)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const i={},r=t[t.length-1].overscaledZ,n=t[0].overscaledZ,s=Math.max(n-wd.maxOverzooming,this._source.minzoom),o=Math.max(n+wd.maxUnderzooming,this._source.minzoom),a={};for(const l of t){const t=this._addTile(l);e[l.key]=l,t.hasData()||r<this._source.maxzoom&&(a[l.key]=l)}this._retainLoadedChildren(a,r,o,e);for(const l of t){let t=this._tiles[l.key];if(t.hasData())continue;if(l.canonical.z>=this._source.maxzoom){const t=l.children(this._source.maxzoom)[0],i=this.getTile(t);if(i&&i.hasData()){e[t.key]=t;continue}}else{const t=l.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let r=t.wasRequested();for(let n=l.overscaledZ-1;n>=s;--n){const s=l.scaledTo(n);if(i[s.key])break;if(i[s.key]=!0,!(t=this.getTile(s))&&r&&(t=this._addTile(s)),t&&(e[s.key]=s,r=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let i,r=this._tiles[t].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){i=this._loadedParentTiles[r.key];break}e.push(r.key);const t=r.scaledTo(r.overscaledZ-1);if(i=this._getLoadedTile(t))break;r=t}for(const t of e)this._loadedParentTiles[t]=i}}_addTile(t){let e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const i=Boolean(e);return i||(e=new vu(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,i||this._source.fire(new Dt("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},i))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._cache.reset()}tilesIn(t,e,i){const r=[],n=this.transform;if(!n)return r;for(const s in this._tiles){const o=this._tiles[s];if(i&&o.clearQueryDebugViz(),o.holdingForFade())continue;const a=t.containsTile(o,n,e);a&&r.push(a)}return r}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map(t=>this._tiles[t].tileID);for(const i of e)i.posMatrix=this.transform.calculatePosMatrix(i.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(Ed(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=N.now())return!0}return!1}setFeatureState(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)}removeFeatureState(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,i){const r=this._tiles[t];r&&r.setDependencies(e,i)}reloadTilesForDependencies(t,e){for(const i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(+i,"reloading");this._cache.filter(i=>!i.hasDependency(t,e))}}function Td(t,e){const i=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Ed(t){return"raster"===t||"image"===t||"video"===t}wd.maxOverzooming=10,wd.maxUnderzooming=3;class Sd{constructor(t,e,i){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=i}static create(t,e,i){const r=i||t.findDEMTileFor(e);if(!r||!r.dem)return;const n=r.dem,s=r.tileID,o=1<<e.canonical.z-s.canonical.z;return new Sd(r,r.tileSize/8192/o,[(e.canonical.x/o-s.canonical.x)*n.dim,(e.canonical.y/o-s.canonical.y)*n.dim])}tileCoordToPixel(t,e){const i=e*this._scale+this._offset[1],n=Math.floor(t*this._scale+this._offset[0]),s=Math.floor(i);return new r(n,s)}getElevationAt(t,e,i,r){const n=t*this._scale+this._offset[0],s=e*this._scale+this._offset[1],o=Math.floor(n),a=Math.floor(s),l=this._dem;return r=!!r,i?Je(Je(l.get(o,a,r),l.get(o,a+1,r),s-a),Je(l.get(o+1,a,r),l.get(o+1,a+1,r),s-a),n-o):l.get(o,a,r)}getElevationAtPixel(t,e,i){return this._dem.get(t,e,!!i)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*lu(1,t)*this._dem.stride}}class Id{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Vr(8192,16,0),this.featureIndexArray=new Us,this.promoteId=e}insert(t,e,i,r,n,s=0){const o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,n,s);const a=this.grid;for(let l=0;l<e.length;l++){const t=e[l],i=[1/0,1/0,-1/0,-1/0];for(let e=0;e<t.length;e++){const r=t[e];i[0]=Math.min(i[0],r.x),i[1]=Math.min(i[1],r.y),i[2]=Math.max(i[2],r.x),i[3]=Math.max(i[3],r.y)}i[0]<8192&&i[1]<8192&&i[2]>=0&&i[3]>=0&&a.insert(o,i[0],i[1],i[2],i[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new El.VectorTile(new ac(this.rawTileData)).layers,this.sourceLayerCoder=new gu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,i,r){this.loadVTLayers();const n=t.params||{},s=dr(n.filter),o=t.tileResult,a=t.transform,l=o.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,(t,e,i,r)=>Do(o.bufferedTilespaceGeometry,t,e,i,r));c.sort(Cd);let h=null;a.elevation&&c.length>0&&(h=Sd.create(a.elevation,this.tileID));const u={};let d;for(let p=0;p<c.length;p++){const a=c[p];if(a===d)continue;d=a;const l=this.featureIndexArray.get(a);let m=null;this.loadMatchingFeature(u,l,s,n.layers,n.availableImages,e,i,r,(e,i,r,n=0)=>(m||(m=xo(e)),i.queryIntersectsFeature(o,e,r,m,this.z,t.transform,t.pixelPosMatrix,h,n)))}return u}loadMatchingFeature(t,e,i,r,n,s,o,a,l){const{featureIndex:c,bucketIndex:h,sourceLayerIndex:u,layoutVertexArrayOffset:d}=e,p=this.bucketLayerIDs[h];if(r&&!function(t,e){for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(r,p))return;const m=this.sourceLayerCoder.decode(u),f=this.vtLayers[m].feature(c);if(i.needGeometry){const t=vo(f,!0);if(!i.filter(new $n(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!i.filter(new $n(this.tileID.overscaledZ),f))return;const _=this.getId(f,m);for(let g=0;g<p.length;g++){const e=p[g];if(r&&r.indexOf(e)<0)continue;const i=s[e];if(!i)continue;let h={};void 0!==_&&a&&(h=a.getState(i.sourceLayer||"_geojsonTileLayer",_));const u=y({},o[e]);u.paint=Ad(u.paint,i.paint,f,h,n),u.layout=Ad(u.layout,i.layout,f,h,n);const m=!l||l(f,i,h,d);if(!m)continue;const x=new yu(f,this.z,this.x,this.y,_);x.layer=u;let v=t[e];void 0===v&&(v=t[e]=[]),v.push({featureIndex:c,feature:x,intersectionZ:m})}}lookupSymbolFeatures(t,e,i,r,n,s,o,a){const l={};this.loadVTLayers();const c=dr(n);for(const h of t)this.loadMatchingFeature(l,{bucketIndex:i,sourceLayerIndex:r,featureIndex:h,layoutVertexArrayOffset:0},c,s,o,a,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const i of e)if(t===i)return!0;return!1}getId(t,e){let i=t.id;return this.promoteId&&("boolean"==typeof(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(i=Number(i))),i}}function Ad(t,e,i,r,n){return S(t,(t,s)=>{const o=e instanceof Kn?e.get(s):null;return o&&o.evaluate?o.evaluate(i,r,n):o})}function Cd(t,e){return e-t}Gr("FeatureIndex",Id,{omit:["rawTileData","sourceLayerCoder"]});class Md{constructor(t){const e={},i=[];for(const o in t){const r=t[o],n=e[o]={};for(const t in r){const e=r[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const s=e.metrics.localGlyph?2:1,o={x:0,y:0,w:e.bitmap.width+2*s,h:e.bitmap.height+2*s};i.push(o),n[t]={rect:o,metrics:e.metrics}}}const{w:r,h:n}=Cc(i),s=new wa({width:r||1,height:n||1});for(const o in t){const i=t[o];for(const t in i){const r=i[+t];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const n=e[o][t].rect,a=r.metrics.localGlyph?2:1;wa.copy(r.bitmap,s,{x:0,y:0},{x:n.x+a,y:n.y+a},r.bitmap)}}this.image=s,this.positions=e}}Gr("GlyphAtlas",Md);class zd{constructor(t){this.tileID=new fu(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile}parse(t,e,i,r,n){this.status="parsing",this.data=t,this.collisionBoxArray=new Ps;const s=new gu(Object.keys(t.layers).sort()),o=new Id(this.tileID,this.promoteId);o.bucketLayerIDs=[];const a={},l={featureIndex:o,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},c=e.familiesBySource[this.source];for(const g in c){const e=t.layers[g];if(!e)continue;let r=!1,n=!1;for(const t of c[g])"symbol"===t[0].type?r=!0:n=!0;if(!0===this.isSymbolTile&&!r)continue;if(!1===this.isSymbolTile&&!n)continue;1===e.version&&M(`Vector tile source "${this.source}" layer "${g}" `+"does not use vector tile spec v2 and therefore may have some rendering errors.");const h=s.encode(g),u=[];for(let t=0;t<e.length;t++){const i=e.feature(t),r=o.getId(i,g);u.push({feature:i,id:r,index:t,sourceLayerIndex:h})}for(const t of c[g]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(Pd(t,this.zoom,i),(a[e.id]=e.createBucket({index:o.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:h,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(u,l,this.tileID.canonical),o.bucketLayerIDs.push(t.map(t=>t.id)))}}let h,u,d,p;const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},f=S(l.glyphDependencies,t=>Object.keys(t).map(Number));Object.keys(f).length?r.send("getGlyphs",{uid:this.uid,stacks:f},(t,e)=>{h||(h=t,u=e,x.call(this))},void 0,void 0,m):u={};const _=Object.keys(l.iconDependencies);_.length?r.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"icons"},(t,e)=>{h||(h=t,d=e,x.call(this))},void 0,void 0,m):d={};const y=Object.keys(l.patternDependencies);function x(){if(h)return n(h);if(u&&d&&p){const t=new Md(u),e=new zc(d,p);for(const r in a){const n=a[r];n instanceof Lh?(Pd(n.layers,this.zoom,i),xh(n,u,t.positions,d,e.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):n.hasPattern&&(n instanceof $l||n instanceof hl||n instanceof Ml)&&(Pd(n.layers,this.zoom,i),n.addFeatures(l,this.tileID.canonical,e.patternPositions))}this.status="done",n(null,{buckets:g(a).filter(t=>!t.isEmpty()),featureIndex:o,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:e,glyphMap:this.returnDependencies?u:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?t.positions:null})}}y.length?r.send("getImages",{icons:y,source:this.source,tileID:this.tileID,type:"patterns"},(t,e)=>{h||(h=t,p=e,x.call(this))},void 0,void 0,m):p={},x.call(this)}}function Pd(t,e,i){const r=new $n(e);for(const n of t)n.recalculate(r,i)}class kd{constructor(t){this.entries={},this.scheduler=t}request(t,e,i,r){const n=this.entries[t]=this.entries[t]||{callbacks:[]};if(n.result){const[t,i]=n.result;return this.scheduler?this.scheduler.add(()=>{r(t,i)},e):r(t,i),()=>{}}return n.callbacks.push(r),n.cancel||(n.cancel=i((i,r)=>{n.result=[i,r];for(const t of n.callbacks)this.scheduler?this.scheduler.add(()=>{t(i,r)},e):t(i,r);setTimeout(()=>delete this.entries[t],3e3)})),()=>{n.result||(n.callbacks=n.callbacks.filter(t=>t!==r),n.callbacks.length||(n.cancel(),delete this.entries[t]))}}}function Dd(t,e,i){const r=JSON.stringify(t.request);return t.data&&(this.deduped.entries[r]={result:[null,t.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},e=>{const r=Tt(t.request,(t,r,n,s)=>{t?e(t):r&&e(null,{vectorTile:i?void 0:new El.VectorTile(new ac(r)),rawData:r,cacheControl:n,expires:s})});return()=>{r.cancel(),e()}},e)}t.AUTH_ERR_MSG="NO_ACCESS_TOKEN",t.Aabb=pa,t.Actor=class{constructor(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.cancelCallbacks={},T(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=k()?t:s,this.scheduler=new tu}send(t,e,i,r,n=!1,s){const o=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(i.metadata=s,this.callbacks[o]=i);const a=F(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:t,hasCallback:!!i,targetMapId:r,mustQueue:n,sourceMapId:this.mapId,data:Wr(e,a)},a),{cancel:()=>{i&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(t){const e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[i];delete this.cancelCallbacks[i],t&&t.cancel()}else if(k()||e.mustQueue){const t=this.callbacks[i];this.cancelCallbacks[i]=this.scheduler.add(()=>this.processTask(i,e),t&&t.metadata||{type:"message"})}else this.processTask(i,e)}processTask(t,e){if("<response>"===e.type){const i=this.callbacks[t];delete this.callbacks[t],i&&(e.error?i(Hr(e.error)):i(null,Hr(e.data)))}else{const i=F(this.globalScope)?void 0:[],r=e.hasCallback?(e,r)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Wr(e):null,data:Wr(r,i)},i)}:t=>{},n=Hr(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,n,r);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],n.source)[t[1]](n,r)}else r(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=pu,t.Color=le,t.ColorMode=vd,t.Context=class{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Fu(this),this.clearDepth=new Ou(this),this.clearStencil=new Uu(this),this.colorMask=new Vu(this),this.depthMask=new Nu(this),this.stencilMask=new $u(this),this.stencilFunc=new qu(this),this.stencilOp=new Zu(this),this.stencilTest=new Gu(this),this.depthRange=new ju(this),this.depthTest=new Xu(this),this.depthFunc=new Wu(this),this.blend=new Hu(this),this.blendFunc=new Ku(this),this.blendColor=new Yu(this),this.blendEquation=new Ju(this),this.cullFace=new Qu(this),this.cullFaceSide=new td(this),this.frontFace=new ed(this),this.program=new id(this),this.activeTexture=new rd(this),this.viewport=new nd(this),this.bindFramebuffer=new sd(this),this.bindRenderbuffer=new od(this),this.bindTexture=new ad(this),this.bindVertexBuffer=new ld(this),this.bindElementBuffer=new cd(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new hd(this),this.pixelStoreUnpack=new ud(this),this.pixelStoreUnpackPremultiplyAlpha=new dd(this),this.pixelStoreUnpackFlipY=new pd(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new Du(this,t,e)}createVertexBuffer(t,e,i){return new Ru(this,t,e,i)}createRenderbuffer(t,e,i){const r=this.gl,n=r.createRenderbuffer();return this.bindRenderbuffer.set(n),r.renderbufferStorage(r.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),n}createFramebuffer(t,e,i){return new gd(this,t,e,i)}clear({color:t,depth:e,stencil:i}){const r=this.gl;let n=0;t&&(n|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(n|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),void 0!==i&&(n|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),r.clear(n)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){o(t.blendFunction,vd.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}},t.CullFaceMode=bd,t.DEMData=Pu,t.DataConstantProperty=Yn,t.DedupedRequest=kd,t.DepthMode=yd,t.DepthStencilAttachment=class extends _d{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}},t.EXTENT=8192,t.Elevation=class{getAtPoint(t,e=0){const i=this._source();if(!i)return e;if(t.y<0||t.y>1)return e;const r=i.getSource().maxzoom,n=1<<r,s=Math.floor(t.x),o=t.x-s,a=new fu(r,s,r,Math.floor(o*n),Math.floor(t.y*n)),l=this.findDEMTileFor(a);if(!l||!l.dem)return e;const c=l.dem,h=1<<l.tileID.canonical.z,u=(o*h-l.tileID.canonical.x)*c.dim,d=(t.y*h-l.tileID.canonical.y)*c.dim,p=Math.floor(u),m=Math.floor(d);return this.exaggeration()*Je(Je(c.get(p,m),c.get(p,m+1),d-m),Je(c.get(p+1,m),c.get(p+1,m+1),d-m),u-p)}getAtTileOffset(t,e,i){const r=1<<t.canonical.z;return this.getAtPoint(new uu(t.wrap+(t.canonical.x+e/8192)/r,(t.canonical.y+i/8192)/r))}getForTilePoints(t,e,i,r){const n=Sd.create(this,t,r);return!!n&&(e.forEach(t=>{t[2]=this.exaggeration()*n.getElevationAt(t[0],t[1],i)}),!0)}getMinMaxForTile(t){const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const i=e.dem.tree,r=e.tileID,n=1<<t.canonical.z-r.canonical.z;let s=t.canonical.x/n-r.canonical.x,o=t.canonical.y/n-r.canonical.y,a=0;for(let l=0;l<t.canonical.z-r.canonical.z&&!i.leaves[a];l++){s*=2,o*=2;const t=2*Math.floor(o)+Math.floor(s);a=i.childOffsets[a]+t,s%=1,o%=1}return{min:this.exaggeration()*i.minimums[a],max:this.exaggeration()*i.maximums[a]}}raycast(t,e,i){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=Lt,t.EvaluationParameters=$n,t.Event=Dt,t.Evented=Rt,t.Frustum=da,t.GlyphManager=ah,t.ImagePosition=Mc,t.LngLat=ru,t.LngLatBounds=iu,t.LocalGlyphMode=oh,t.MAX_SAFE_INTEGER=a,t.MercatorCoordinate=uu,t.ONE_EM=24,t.OverscaledTileID=fu,t.Point=r,t.Point$1=r,t.Properties=is,t.RGBAImage=Ta,t.Ray=class{constructor(t,e){this.pos=t,this.dir=e}intersectsPlane(t,e,i){const r=ea(e,this.dir);if(Math.abs(r)<1e-6)return!1;const n=ea(oa(jo(),t,this.pos),e)/r;return function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2]}(i,Qo(jo(),this.pos,this.dir,n)),!0}},t.RequestManager=class{constructor(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",K,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!Y(t))return t;const i=tt(t);return i.path=`/styles/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!Y(t))return t;const i=tt(t);return i.path=`/fonts/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||e)}normalizeSourceURL(t,e){if(!Y(t))return t;const i=tt(t);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)}normalizeSpriteURL(t,e,i,r){const n=tt(t);return Y(t)?(n.path=`/styles/v1${n.path}/sprite${e}${i}`,this._makeAPIURL(n,this._customAccessToken||r)):(n.path+=`${e}${i}`,et(n))}normalizeTileURL(t,e,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!Y(t))return t;const r=tt(t);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||i&&"raster"!==r.authority&&512===i?"@2x":""}${Z.supported?".webp":"$1"}`),"raster"===r.authority?r.path=`/${q.RASTER_URL_PREFIX}${r.path}`:(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path=`/${q.TILE_URL_VERSION}${r.path}`);const n=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(r.params)||q.ACCESS_TOKEN;return q.REQUIRE_ACCESS_TOKEN&&n&&this._skuToken&&r.params.push(`sku=${this._skuToken}`),this._makeAPIURL(r,n)}canonicalizeTileURL(t,e){const i=tt(t);if(!i.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!i.path.match(/\.[\w]+$/))return t;let r="mapbox://";i.path.match(/^\/raster\/v1\//)?r+=`raster/${i.path.replace(`/${q.RASTER_URL_PREFIX}/`,"")}`:r+=`tiles/${i.path.replace(`/${q.TILE_URL_VERSION}/`,"")}`;let n=i.params;return e&&(n=n.filter(t=>!t.match(/^access_token=/))),n.length&&(r+=`?${n.join("&")}`),r}canonicalizeTileset(t,e){const i=!!e&&Y(e),r=[];for(const n of t.tiles||[])J(n)?r.push(this.canonicalizeTileURL(n,i)):r.push(n);return r}_makeAPIURL(t,e){const i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=tt(q.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==r.path&&(t.path=`${r.path}${t.path}`),!q.REQUIRE_ACCESS_TOKEN)return et(t);if(!(e=e||q.ACCESS_TOKEN))throw new Error(`An API access token is required to use Mapbox GL. ${i}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${i}`);return t.params=t.params.filter(t=>-1===t.indexOf("access_token")),t.params.push(`access_token=${e}`),et(t)}},t.RequestPerformance=Qh,t.ResourceType=xt,t.SegmentVector=_o,t.SourceCache=wd,t.StencilMode=xd,t.StructArrayLayout1ui2=Cs,t.StructArrayLayout2f1f2i16=xs,t.StructArrayLayout2i4=cs,t.StructArrayLayout3f12=fs,t.StructArrayLayout3ui6=bs,t.StructArrayLayout4i8=hs,t.Texture=Kh,t.Tile=vu,t.Transitionable=Gn,t.Uniform1f=Ys,t.Uniform1i=class extends Ks{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.Uniform2f=class extends Ks{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.Uniform3f=class extends Ks{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.Uniform4f=Js,t.UniformColor=Qs,t.UniformMatrix3f=class extends Ks{constructor(t,e){super(t,e),this.current=eo}set(t){for(let e=0;e<9;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix3fv(this.location,!1,t);break}}},t.UniformMatrix4f=class extends Ks{constructor(t,e){super(t,e),this.current=to}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.UnwrappedTileID=mu,t.ValidationError=Ft,t.VectorTileWorkerSource=class extends Rt{constructor(t,e,i,r,n){super(),this.actor=t,this.layerIndex=e,this.availableImages=i,this.loadVectorData=n||Dd,this.loading={},this.loaded={},this.deduped=new kd(t.scheduler),this.isSpriteLoaded=r,this.scheduler=t.scheduler}loadTile(t,e){const i=t.uid,r=!!(t&&t.request&&t.request.collectResourceTiming)&&new Qh(t.request),n=this.loading[i]=new zd(t);n.abort=this.loadVectorData(t,(s,o)=>{const a=!this.loading[i];if(delete this.loading[i],a||s||!o)return n.status="done",a||(this.loaded[i]=n),e(s);const l=o.rawData,c={};o.expires&&(c.expires=o.expires),o.cacheControl&&(c.cacheControl=o.cacheControl);const h={};if(r){const t=r.finish();t&&(h.resourceTiming=JSON.parse(JSON.stringify(t)))}n.vectorTile=o.vectorTile||new El.VectorTile(new ac(l));const u=()=>{n.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor,(t,i)=>{if(t||!i)return e(t);e(null,y({rawTileData:l.slice(0)},i,c,h))})};this.isSpriteLoaded?u():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(u,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):u()}),this.loaded=this.loaded||{},this.loaded[i]=n})}reloadTile(t,e){const i=this.loaded,r=t.uid,n=this;if(i&&i[r]){const s=i[r];s.showCollisionBoxes=t.showCollisionBoxes,s.enableTerrain=!!t.enableTerrain;const o=(t,i)=>{const r=s.reloadCallback;r&&(delete s.reloadCallback,s.parse(s.vectorTile,n.layerIndex,this.availableImages,n.actor,r)),e(t,i)};"parsing"===s.status?s.reloadCallback=o:"done"===s.status&&(s.vectorTile?s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,o):o())}}abortTile(t,e){const i=t.uid,r=this.loading[i];r&&(r.abort&&r.abort(),delete this.loading[i]),e()}removeTile(t,e){const i=this.loaded,r=t.uid;i&&i[r]&&delete i[r],e()}},t.WritingMode=Pc,t.ZoomHistory=Kr,t.add=Ko,t.addDynamicAttributes=zh,t.altitudeFromMercatorZ=hu,t.asyncAll=_,t.bezier=d,t.bindAll=T,t.browser=N,t.bufferConvexPolygon=function(t,e){const i=[];for(let r=0;r<t.length;r++){const n=f(r-1,-1,t.length-1),s=f(r+1,-1,t.length-1),o=t[r],a=t[s],l=t[n].sub(o).unit(),c=a.sub(o).unit(),h=c.angleWithSep(l.x,l.y),u=l.add(c).unit().mult(-1*e/Math.sin(h/2));i.push(o.add(u))}return i},t.cacheEntryPossiblyAdded=function(t){++gt>pt&&(t.getActor().send("enforceCacheSizeLimit",dt),gt=0)},t.clamp=m,t.clearTileCache=function(t){const e=s.caches.delete("mapbox-tiles");t&&e.catch(t).then(()=>t())},t.clipLine=Qc,t.clone=function(t){var e=new No(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=A,t.collisionCircleLayout=Jl,t.config=q,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.create=function(){var t=new No(16);return No!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=$o,t.create$2=function(){var t=new No(4);return No!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createExpression=Qi,t.createLayout=as,t.createStyleLayer=function(t){return"custom"===t.type?new Nh(t):new Zh[t.type](t)},t.cross=ia,t.deepEqual=o,t.degToRad=h,t.div=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t},t.dot=ea,t.ease=p,t.easeCubicInOut=u,t.emitValidationErrors=Ur,t.endsWith=E,t.enforceCacheSizeLimit=function(t){mt(),ht&&ht.then(e=>{e.keys().then(i=>{for(let r=0;r<i.length-t;r++)e.delete(i[r])})})},t.evaluateSizeForFeature=tc,t.evaluateSizeForZoom=ec,t.evaluateVariableOffset=yh,t.evented=On,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.extend=y,t.featureFilter=dr,t.filterObject=I,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,l=n+n,c=i*o,h=r*o,u=r*a,d=n*o,p=n*a,m=n*l,f=s*o,_=s*a,g=s*l;return t[0]=1-u-m,t[1]=h+g,t[2]=d-_,t[3]=0,t[4]=h-g,t[5]=1-c-m,t[6]=p+f,t[7]=0,t[8]=d+_,t[9]=p-f,t[10]=1-c-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=$c,t.getAnchorJustification=vh,t.getBounds=function(t){let e=1/0,i=1/0,n=-1/0,s=-1/0;for(const r of t)e=Math.min(e,r.x),i=Math.min(i,r.y),n=Math.max(n,r.x),s=Math.max(s,r.y);return{min:new r(e,i),max:new r(n,s)}},t.getImage=zt,t.getJSON=function(t,e){return wt(y(t,{type:"json"}),e)},t.getMapSessionAPI=ct,t.getRTLTextPluginStatus=Un,t.getReferrer=bt,t.getVideo=function(t,e){const i=s.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(let r=0;r<t.length;r++){const e=s.document.createElement("source");It(t[r])||(i.crossOrigin="Anonymous"),e.src=t[r],i.appendChild(e)}return{cancel:()=>{}}},t.identity=qo,t.identity$1=ha,t.invert=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=e[9],d=e[10],p=e[11],m=e[12],f=e[13],_=e[14],g=e[15],y=i*a-r*o,x=i*l-n*o,v=i*c-s*o,b=r*l-n*a,w=r*c-s*a,T=n*c-s*l,E=h*f-u*m,S=h*_-d*m,I=h*g-p*m,A=u*_-d*f,C=u*g-p*f,M=d*g-p*_,z=y*M-x*C+v*A+b*I-w*S+T*E;return z?(t[0]=(a*M-l*C+c*A)*(z=1/z),t[1]=(n*C-r*M-s*A)*z,t[2]=(f*T-_*w+g*b)*z,t[3]=(d*w-u*T-p*b)*z,t[4]=(l*I-o*M-c*S)*z,t[5]=(i*M-n*I+s*S)*z,t[6]=(_*v-m*T-g*x)*z,t[7]=(h*T-d*v+p*x)*z,t[8]=(o*C-a*I+c*E)*z,t[9]=(r*I-i*C-s*E)*z,t[10]=(m*w-f*v+g*y)*z,t[11]=(u*v-h*w-p*y)*z,t[12]=(a*S-o*A-l*E)*z,t[13]=(i*A-r*S+n*E)*z,t[14]=(f*x-m*b-_*y)*z,t[15]=(h*b-u*x+d*y)*z,t):null},t.isMapboxURL=Y,t.latFromMercatorY=cu,t.len=aa,t.length=Wo,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.loadVectorTile=Dd,t.makeRequest=wt,t.mercatorXfromLng=ou,t.mercatorYfromLat=au,t.mercatorZfromAltitude=lu,t.mul=Go,t.mul$1=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t},t.multiply=Zo,t.mvt=El,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=ta,t.normalize$1=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=i*o,t[1]=r*o,t[2]=n*o,t[3]=s*o,t},t.number=Je,t.offscreenCanvasSupported=yt,t.ortho=function(t,e,i,r,n,s,o){var a=1/(e-i),l=1/(r-n),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(n+r)*l,t[14]=(o+s)*c,t[15]=1,t},t.pbf=ac,t.perspective=function(t,e,i,r,n){var s,o=1/Math.tan(e/2);return t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+r)*(s=1/(r-n)),t[14]=2*n*r*s):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){const i={};for(let r=0;r<e.length;r++){const n=e[r];n in t&&(i[n]=t[n])}return i},t.plugin=Nn,t.polygonIntersectsBox=Do,t.polygonIntersectsPolygon=To,t.polygonizeBounds=function(t,e,i=0,n=!0){const s=new r(i,i),o=t.sub(s),a=e.add(s),l=[o,new r(a.x,o.y),a,new r(o.x,a.y)];return n&&l.push(o),l},t.posAttributes=xu,t.postMapLoadEvent=at,t.postTurnstileEvent=st,t.potpack=Cc,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=function(t){return t*c},t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:Ln,pluginURL:Rn}),On.on("pluginStateChange",t),t},t.renderColorRamp=Sa,t.rotate=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=r*l+s*a,t[1]=n*l+o*a,t[2]=r*-a+s*l,t[3]=n*-a+o*l,t},t.rotateX=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],h=e[9],u=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+c*r,t[5]=o*n+h*r,t[6]=a*n+u*r,t[7]=l*n+d*r,t[8]=c*n-s*r,t[9]=h*n-o*r,t[10]=u*n-a*r,t[11]=d*n-l*r,t},t.rotateX$1=ua,t.rotateY=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],h=e[9],u=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-c*r,t[1]=o*n-h*r,t[2]=a*n-u*r,t[3]=l*n-d*r,t[8]=s*r+c*n,t[9]=o*r+h*n,t[10]=a*r+u*n,t[11]=l*r+d*n,t},t.rotateZ=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],h=e[5],u=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+c*r,t[1]=o*n+h*r,t[2]=a*n+u*r,t[3]=l*n+d*r,t[4]=c*n-s*r,t[5]=h*n-o*r,t[6]=u*n-a*r,t[7]=d*n-l*r,t},t.rotateZ$1=function(t,e,i){i*=.5;var r=e[0],n=e[1],s=e[2],o=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=r*l+n*a,t[1]=n*l-r*a,t[2]=s*l+o*a,t[3]=o*l-s*a,t},t.scale=function(t,e,i){var r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},t.scale$2=Jo,t.scaleAndAdd=Qo,t.setCacheLimits=function(t,e){dt=t,pt=e},t.setRTLTextPlugin=function(t,e,i=!1){if("deferred"===Ln||"loading"===Ln||"loaded"===Ln)throw new Error("setRTLTextPlugin cannot be called multiple times.");Rn=N.resolveURL(t),Ln="deferred",Dn=e,Fn(),i||Vn()},t.styleSpec=Bt,t.sub=oa,t.subtract=Yo,t.symbolSize=ic,t.transformMat3=function(t,e,i){var r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t},t.transformMat4=la,t.transformQuat=na,t.translate=function(t,e,i){var r,n,s,o,a,l,c,h,u,d,p,m,f=i[0],_=i[1],g=i[2];return e===t?(t[12]=e[0]*f+e[4]*_+e[8]*g+e[12],t[13]=e[1]*f+e[5]*_+e[9]*g+e[13],t[14]=e[2]*f+e[6]*_+e[10]*g+e[14],t[15]=e[3]*f+e[7]*_+e[11]*g+e[15]):(n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=e[9],p=e[10],m=e[11],t[0]=r=e[0],t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=c,t[7]=h,t[8]=u,t[9]=d,t[10]=p,t[11]=m,t[12]=r*f+a*_+u*g+e[12],t[13]=n*f+l*_+d*g+e[13],t[14]=s*f+c*_+p*g+e[14],t[15]=o*f+h*_+m*g+e[15]),t},t.triggerPluginCompletionEvent=Bn,t.uniqueId=v,t.validateCustomStyleLayer=function(t){const e=[],i=t.id;return void 0===i&&e.push({message:`layers.${i}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${i}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateLight=Br,t.validateStyle=Rr,t.values=g,t.vectorTile=El,t.version="2.1.1",t.warnOnce=M,t.webpSupported=Z,t.window=s,t.wrap=f}),r(0,function(t){function e(t){const i=typeof t;if("number"===i||"boolean"===i||"string"===i||null==t)return JSON.stringify(t);if(Array.isArray(t)){let i="[";for(const r of t)i+=`${e(r)},`;return`${i}]`}const r=Object.keys(t).sort();let n="{";for(let s=0;s<r.length;s++)n+=`${JSON.stringify(r[s])}:${e(t[r[s]])},`;return`${n}}`}function i(i){let r="";for(const n of t.refProperties)r+=`/${e(i[n])}`;return r}class r{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,r){for(const i of e){this._layerConfigs[i.id]=i;const e=this._layers[i.id]=t.createStyleLayer(i);e._featureFilter=t.featureFilter(e.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(const t of r)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const n=function(t,e){const r={};for(let s=0;s<t.length;s++){const n=e&&e[t[s].id]||i(t[s]);e&&(e[t[s].id]=n);let o=r[n];o||(o=r[n]=[]),o.push(t[s])}const n=[];for(const i in r)n.push(r[i]);return n}(t.values(this._layerConfigs),this.keyCache);for(const t of n){const e=t.map(t=>this._layers[t.id]),i=e[0];if("none"===i.visibility)continue;const r=i.source||"";let n=this.familiesBySource[r];n||(n=this.familiesBySource[r]={});const s=i.sourceLayer||"_geojsonTileLayer";let o=n[s];o||(o=n[s]=[]),o.push(e)}}}const{ImageBitmap:n}=t.window;class s{loadTile(e,i){const{uid:r,encoding:s,rawImageData:o,padding:a,buildQuadTree:l}=e,c=n&&o instanceof n?this.getImageData(o,a):o;i(null,new t.DEMData(r,c,s,a<1,l))}getImageData(e,i){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const r=this.offscreenCanvasContext.getImageData(-i,-i,e.width+2*i,e.height+2*i);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:r.width,height:r.height},r.data)}}function o(t,e){if(0!==t.length){a(t[0],e);for(var i=1;i<t.length;i++)a(t[i],!e)}}function a(t,e){for(var i=0,r=0,n=t.length,s=n-1;r<n;s=r++)i+=(t[r][0]-t[s][0])*(t[s][1]+t[r][1]);i>=0!=!!e&&t.reverse()}const l=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class c{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const i of this._feature.geometry)e.push([new t.Point$1(i[0],i[1])]);return e}{const e=[];for(const i of this._feature.geometry){const r=[];for(const e of i)r.push(new t.Point$1(e[0],e[1]));e.push(r)}return e}}toGeoJSON(t,e,i){return l.call(this,t,e,i)}}class h{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new c(this._features[t])}}var u=t.vectorTile.VectorTileFeature,d=p;function p(t,e){this.options=e||{},this.features=t,this.length=t.length}function m(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}p.prototype.feature=function(t){return new m(this.features[t],this.options.extent)},m.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var i=0;i<e.length;i++){for(var r=e[i],n=[],s=0;s<r.length;s++)n.push(new t.Point$1(r[s][0],r[s][1]));this.geometry.push(n)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,r=1/0,n=-1/0,s=0;s<t.length;s++)for(var o=t[s],a=0;a<o.length;a++){var l=o[a];e=Math.min(e,l.x),i=Math.max(i,l.x),r=Math.min(r,l.y),n=Math.max(n,l.y)}return[e,r,i,n]},m.prototype.toGeoJSON=u.prototype.toGeoJSON;var f=g,_=d;function g(e){var i=new t.pbf;return function(t,e){for(var i in t.layers)e.writeMessage(3,y,t.layers[i])}(e,i),i.finish()}function y(t,e){var i;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)r.feature=t.feature(i),e.writeMessage(2,x,r);var n=r.keys;for(i=0;i<n.length;i++)e.writeStringField(3,n[i]);var s=r.values;for(i=0;i<s.length;i++)e.writeMessage(4,E,s[i])}function x(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,v,t),e.writeVarintField(3,i.type),e.writeMessage(4,T,i)}function v(t,e){var i=t.feature,r=t.keys,n=t.values,s=t.keycache,o=t.valuecache;for(var a in i.properties){var l=s[a];void 0===l&&(r.push(a),s[a]=l=r.length-1),e.writeVarint(l);var c=i.properties[a],h=typeof c;"string"!==h&&"boolean"!==h&&"number"!==h&&(c=JSON.stringify(c));var u=h+":"+c,d=o[u];void 0===d&&(n.push(c),o[u]=d=n.length-1),e.writeVarint(d)}}function b(t,e){return(e<<3)+(7&t)}function w(t){return t<<1^t>>31}function T(t,e){for(var i=t.loadGeometry(),r=t.type,n=0,s=0,o=i.length,a=0;a<o;a++){var l=i[a],c=1;1===r&&(c=l.length),e.writeVarint(b(1,c));for(var h=3===r?l.length-1:l.length,u=0;u<h;u++){1===u&&1!==r&&e.writeVarint(b(2,h-1));var d=l[u].x-n,p=l[u].y-s;e.writeVarint(w(d)),e.writeVarint(w(p)),n+=d,s+=p}3===r&&e.writeVarint(b(7,1))}}function E(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function S(t,e,i,r){I(t,i,r),I(e,2*i,2*r),I(e,2*i+1,2*r+1)}function I(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function A(t,e,i,r){const n=t-i,s=e-r;return n*n+s*s}f.fromVectorTileJs=g,f.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var r in t)i[r]=new d(t[r].features,e),i[r].name=r,i[r].version=e.version,i[r].extent=e.extent;return g({layers:i})},f.GeoJSONWrapper=_;const C=t=>t[0],M=t=>t[1];class z{constructor(t,e=C,i=M,r=64,n=Float64Array){this.nodeSize=r,this.points=t;const s=t.length<65536?Uint16Array:Uint32Array,o=this.ids=new s(t.length),a=this.coords=new n(2*t.length);for(let l=0;l<t.length;l++)o[l]=l,a[2*l]=e(t[l]),a[2*l+1]=i(t[l]);!function t(e,i,r,n,s,o){if(s-n<=r)return;const a=n+s>>1;!function t(e,i,r,n,s,o){for(;s>n;){if(s-n>600){const a=s-n+1,l=r-n+1,c=Math.log(a),h=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*h*(a-h)/a)*(l-a/2<0?-1:1);t(e,i,r,Math.max(n,Math.floor(r-l*h/a+u)),Math.min(s,Math.floor(r+(a-l)*h/a+u)),o)}const a=i[2*r+o];let l=n,c=s;for(S(e,i,n,r),i[2*s+o]>a&&S(e,i,n,s);l<c;){for(S(e,i,l,c),l++,c--;i[2*l+o]<a;)l++;for(;i[2*c+o]>a;)c--}i[2*n+o]===a?S(e,i,n,c):S(e,i,++c,s),c<=r&&(n=c+1),r<=c&&(s=c-1)}}(e,i,a,n,s,o%2),t(e,i,r,n,a-1,o+1),t(e,i,r,a+1,s,o+1)}(o,a,r,0,o.length-1,0)}range(t,e,i,r){return function(t,e,i,r,n,s,o){const a=[0,t.length-1,0],l=[];let c,h;for(;a.length;){const u=a.pop(),d=a.pop(),p=a.pop();if(d-p<=o){for(let o=p;o<=d;o++)c=e[2*o],h=e[2*o+1],c>=i&&c<=n&&h>=r&&h<=s&&l.push(t[o]);continue}const m=Math.floor((p+d)/2);c=e[2*m],h=e[2*m+1],c>=i&&c<=n&&h>=r&&h<=s&&l.push(t[m]);const f=(u+1)%2;(0===u?i<=c:r<=h)&&(a.push(p),a.push(m-1),a.push(f)),(0===u?n>=c:s>=h)&&(a.push(m+1),a.push(d),a.push(f))}return l}(this.ids,this.coords,t,e,i,r,this.nodeSize)}within(t,e,i){return function(t,e,i,r,n,s){const o=[0,t.length-1,0],a=[],l=n*n;for(;o.length;){const c=o.pop(),h=o.pop(),u=o.pop();if(h-u<=s){for(let n=u;n<=h;n++)A(e[2*n],e[2*n+1],i,r)<=l&&a.push(t[n]);continue}const d=Math.floor((u+h)/2),p=e[2*d],m=e[2*d+1];A(p,m,i,r)<=l&&a.push(t[d]);const f=(c+1)%2;(0===c?i-n<=p:r-n<=m)&&(o.push(u),o.push(d-1),o.push(f)),(0===c?i+n>=p:r+n>=m)&&(o.push(d+1),o.push(h),o.push(f))}return a}(this.ids,this.coords,t,e,i,this.nodeSize)}}const P={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},k=Math.fround||(D=new Float32Array(1),t=>(D[0]=+t,D[0]));var D;class L{constructor(t){this.options=$(Object.create(P),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:i,maxZoom:r,nodeSize:n}=this.options;e&&console.time("total time");const s=`prepare ${t.length} points`;e&&console.time(s),this.points=t;let o=[];for(let a=0;a<t.length;a++)t[a].geometry&&o.push(B(t[a],a));this.trees[r+1]=new z(o,q,Z,n,Float32Array),e&&console.timeEnd(s);for(let a=r;a>=i;a--){const t=+Date.now();o=this._cluster(o,a),this.trees[a]=new z(o,q,Z,n,Float32Array),e&&console.log("z%d: %d clusters in %dms",a,o.length,+Date.now()-t)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let i=((t[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[1]));let n=180===t[2]?180:((t[2]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,n=180;else if(i>n){const t=this.getClusters([i,r,180,s],e),o=this.getClusters([-180,r,n,s],e);return t.concat(o)}const o=this.trees[this._limitZoom(e)],a=o.range(U(i),V(s),U(n),V(r)),l=[];for(const c of a){const t=o.points[c];l.push(t.numPoints?F(t):this.points[t.index])}return l}getChildren(t){const e=this._getOriginId(t),i=this._getOriginZoom(t),r="No cluster with the specified id.",n=this.trees[i];if(!n)throw new Error(r);const s=n.points[e];if(!s)throw new Error(r);const o=this.options.radius/(this.options.extent*Math.pow(2,i-1)),a=n.within(s.x,s.y,o),l=[];for(const c of a){const e=n.points[c];e.parentId===t&&l.push(e.numPoints?F(e):this.points[e.index])}if(0===l.length)throw new Error(r);return l}getLeaves(t,e,i){const r=[];return this._appendLeaves(r,t,e=e||10,i=i||0,0),r}getTile(t,e,i){const r=this.trees[this._limitZoom(t)],n=Math.pow(2,t),{extent:s,radius:o}=this.options,a=o/s,l=(i-a)/n,c=(i+1+a)/n,h={features:[]};return this._addTileFeatures(r.range((e-a)/n,l,(e+1+a)/n,c),r.points,e,i,n,h),0===e&&this._addTileFeatures(r.range(1-a/n,l,1,c),r.points,n,i,n,h),e===n-1&&this._addTileFeatures(r.range(0,l,a/n,c),r.points,-1,i,n,h),h.features.length?h:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e}_appendLeaves(t,e,i,r,n){const s=this.getChildren(e);for(const o of s){const e=o.properties;if(e&&e.cluster?n+e.point_count<=r?n+=e.point_count:n=this._appendLeaves(t,e.cluster_id,i,r,n):n<r?n++:t.push(o),t.length===i)break}return n}_addTileFeatures(t,e,i,r,n,s){for(const o of t){const t=e[o],a=t.numPoints,l={type:1,geometry:[[Math.round(this.options.extent*(t.x*n-i)),Math.round(this.options.extent*(t.y*n-r))]],tags:a?O(t):this.points[t.index].properties};let c;a?c=t.id:this.options.generateId?c=t.index:this.points[t.index].id&&(c=this.points[t.index].id),void 0!==c&&(l.id=c),s.features.push(l)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))}_cluster(t,e){const i=[],{radius:r,extent:n,reduce:s,minPoints:o}=this.options,a=r/(n*Math.pow(2,e));for(let l=0;l<t.length;l++){const r=t[l];if(r.zoom<=e)continue;r.zoom=e;const n=this.trees[e+1],c=n.within(r.x,r.y,a),h=r.numPoints||1;let u=h;for(const t of c){const i=n.points[t];i.zoom>e&&(u+=i.numPoints||1)}if(u>=o){let t=r.x*h,o=r.y*h,a=s&&h>1?this._map(r,!0):null;const d=(l<<5)+(e+1)+this.points.length;for(const i of c){const l=n.points[i];if(l.zoom<=e)continue;l.zoom=e;const c=l.numPoints||1;t+=l.x*c,o+=l.y*c,l.parentId=d,s&&(a||(a=this._map(r,!0)),s(a,this._map(l)))}r.parentId=d,i.push(R(t/u,o/u,d,u,a))}else if(i.push(r),u>1)for(const t of c){const r=n.points[t];r.zoom<=e||(r.zoom=e,i.push(r))}}return i}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?$({},t.properties):t.properties;const i=this.points[t.index].properties,r=this.options.map(i);return e&&r===i?$({},r):r}}function R(t,e,i,r,n){return{x:k(t),y:k(e),zoom:1/0,id:i,parentId:-1,numPoints:r,properties:n}}function B(t,e){const[i,r]=t.geometry.coordinates;return{x:k(U(i)),y:k(V(r)),zoom:1/0,index:e,parentId:-1}}function F(t){return{type:"Feature",id:t.id,properties:O(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),N(t.y)]}};var e}function O(t){const e=t.numPoints,i=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?`${Math.round(e/100)/10}k`:e;return $($({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function U(t){return t/360+.5}function V(t){const e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function N(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function $(t,e){for(const i in e)t[i]=e[i];return t}function q(t){return t.x}function Z(t){return t.y}function G(t,e,i,r,n,s){var o=n-i,a=s-r;if(0!==o||0!==a){var l=((t-i)*o+(e-r)*a)/(o*o+a*a);l>1?(i=n,r=s):l>0&&(i+=o*l,r+=a*l)}return(o=t-i)*o+(a=e-r)*a}function j(t,e,i,r){var n={id:void 0===t?null:t,type:e,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)X(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var r=0;r<e.length;r++)X(t,e[r]);else if("MultiPolygon"===i)for(r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)X(t,e[r][n])}(n),n}function X(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function W(t,e,i,r){if(e.geometry){var n=e.geometry.coordinates,s=e.geometry.type,o=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),a=[],l=e.id;if(i.promoteId?l=e.properties[i.promoteId]:i.generateId&&(l=r||0),"Point"===s)H(n,a);else if("MultiPoint"===s)for(var c=0;c<n.length;c++)H(n[c],a);else if("LineString"===s)K(n,a,o,!1);else if("MultiLineString"===s){if(i.lineMetrics){for(c=0;c<n.length;c++)K(n[c],a=[],o,!1),t.push(j(l,"LineString",a,e.properties));return}Y(n,a,o,!1)}else if("Polygon"===s)Y(n,a,o,!0);else{if("MultiPolygon"!==s){if("GeometryCollection"===s){for(c=0;c<e.geometry.geometries.length;c++)W(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},i,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<n.length;c++){var h=[];Y(n[c],h,o,!0),a.push(h)}}t.push(j(l,s,a,e.properties))}}function H(t,e){e.push(J(t[0])),e.push(Q(t[1])),e.push(0)}function K(t,e,i,r){for(var n,s,o=0,a=0;a<t.length;a++){var l=J(t[a][0]),c=Q(t[a][1]);e.push(l),e.push(c),e.push(0),a>0&&(o+=r?(n*c-l*s)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(c-s,2))),n=l,s=c}var h=e.length-3;e[2]=1,function t(e,i,r,n){for(var s,o=n,a=r-i>>1,l=r-i,c=e[i],h=e[i+1],u=e[r],d=e[r+1],p=i+3;p<r;p+=3){var m=G(e[p],e[p+1],c,h,u,d);if(m>o)s=p,o=m;else if(m===o){var f=Math.abs(p-a);f<l&&(s=p,l=f)}}o>n&&(s-i>3&&t(e,i,s,n),e[s+2]=o,r-s>3&&t(e,s,r,n))}(e,0,h,i),e[h+2]=1,e.size=Math.abs(o),e.start=0,e.end=e.size}function Y(t,e,i,r){for(var n=0;n<t.length;n++){var s=[];K(t[n],s,i,r),e.push(s)}}function J(t){return t/360+.5}function Q(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function tt(t,e,i,r,n,s,o,a){if(r/=e,s>=(i/=e)&&o<r)return t;if(o<i||s>=r)return null;for(var l=[],c=0;c<t.length;c++){var h=t[c],u=h.geometry,d=h.type,p=0===n?h.minX:h.minY,m=0===n?h.maxX:h.maxY;if(p>=i&&m<r)l.push(h);else if(!(m<i||p>=r)){var f=[];if("Point"===d||"MultiPoint"===d)et(u,f,i,r,n);else if("LineString"===d)it(u,f,i,r,n,!1,a.lineMetrics);else if("MultiLineString"===d)nt(u,f,i,r,n,!1);else if("Polygon"===d)nt(u,f,i,r,n,!0);else if("MultiPolygon"===d)for(var _=0;_<u.length;_++){var g=[];nt(u[_],g,i,r,n,!0),g.length&&f.push(g)}if(f.length){if(a.lineMetrics&&"LineString"===d){for(_=0;_<f.length;_++)l.push(j(h.id,d,f[_],h.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===f.length?(d="LineString",f=f[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===f.length?"Point":"MultiPoint"),l.push(j(h.id,d,f,h.tags))}}}return l.length?l:null}function et(t,e,i,r,n){for(var s=0;s<t.length;s+=3){var o=t[s+n];o>=i&&o<=r&&(e.push(t[s]),e.push(t[s+1]),e.push(t[s+2]))}}function it(t,e,i,r,n,s,o){for(var a,l,c=rt(t),h=0===n?ot:at,u=t.start,d=0;d<t.length-3;d+=3){var p=t[d],m=t[d+1],f=t[d+2],_=t[d+3],g=t[d+4],y=0===n?p:m,x=0===n?_:g,v=!1;o&&(a=Math.sqrt(Math.pow(p-_,2)+Math.pow(m-g,2))),y<i?x>i&&(l=h(c,p,m,_,g,i),o&&(c.start=u+a*l)):y>r?x<r&&(l=h(c,p,m,_,g,r),o&&(c.start=u+a*l)):st(c,p,m,f),x<i&&y>=i&&(l=h(c,p,m,_,g,i),v=!0),x>r&&y<=r&&(l=h(c,p,m,_,g,r),v=!0),!s&&v&&(o&&(c.end=u+a*l),e.push(c),c=rt(t)),o&&(u+=a)}var b=t.length-3;p=t[b],m=t[b+1],f=t[b+2],(y=0===n?p:m)>=i&&y<=r&&st(c,p,m,f),b=c.length-3,s&&b>=3&&(c[b]!==c[0]||c[b+1]!==c[1])&&st(c,c[0],c[1],c[2]),c.length&&e.push(c)}function rt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function nt(t,e,i,r,n,s){for(var o=0;o<t.length;o++)it(t[o],e,i,r,n,s,!1)}function st(t,e,i,r){t.push(e),t.push(i),t.push(r)}function ot(t,e,i,r,n,s){var o=(s-e)/(r-e);return t.push(s),t.push(i+(n-i)*o),t.push(1),o}function at(t,e,i,r,n,s){var o=(s-i)/(n-i);return t.push(e+(r-e)*o),t.push(s),t.push(1),o}function lt(t,e){for(var i=[],r=0;r<t.length;r++){var n,s=t[r],o=s.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)n=ct(s.geometry,e);else if("MultiLineString"===o||"Polygon"===o){n=[];for(var a=0;a<s.geometry.length;a++)n.push(ct(s.geometry[a],e))}else if("MultiPolygon"===o)for(n=[],a=0;a<s.geometry.length;a++){for(var l=[],c=0;c<s.geometry[a].length;c++)l.push(ct(s.geometry[a][c],e));n.push(l)}i.push(j(s.id,o,n,s.tags))}return i}function ct(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var r=0;r<t.length;r+=3)i.push(t[r]+e,t[r+1],t[r+2]);return i}function ht(t,e){if(t.transformed)return t;var i,r,n,s=1<<t.z,o=t.x,a=t.y;for(i=0;i<t.features.length;i++){var l=t.features[i],c=l.geometry,h=l.type;if(l.geometry=[],1===h)for(r=0;r<c.length;r+=2)l.geometry.push(ut(c[r],c[r+1],e,s,o,a));else for(r=0;r<c.length;r++){var u=[];for(n=0;n<c[r].length;n+=2)u.push(ut(c[r][n],c[r][n+1],e,s,o,a));l.geometry.push(u)}}return t.transformed=!0,t}function ut(t,e,i,r,n,s){return[Math.round(i*(t*r-n)),Math.round(i*(e*r-s))]}function dt(t,e,i,r,n){for(var s=e===n.maxZoom?0:n.tolerance/((1<<e)*n.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<t.length;a++){o.numFeatures++,pt(o,t[a],s,n);var l=t[a].minX,c=t[a].minY,h=t[a].maxX,u=t[a].maxY;l<o.minX&&(o.minX=l),c<o.minY&&(o.minY=c),h>o.maxX&&(o.maxX=h),u>o.maxY&&(o.maxY=u)}return o}function pt(t,e,i,r){var n=e.geometry,s=e.type,o=[];if("Point"===s||"MultiPoint"===s)for(var a=0;a<n.length;a+=3)o.push(n[a]),o.push(n[a+1]),t.numPoints++,t.numSimplified++;else if("LineString"===s)mt(o,n,t,i,!1,!1);else if("MultiLineString"===s||"Polygon"===s)for(a=0;a<n.length;a++)mt(o,n[a],t,i,"Polygon"===s,0===a);else if("MultiPolygon"===s)for(var l=0;l<n.length;l++){var c=n[l];for(a=0;a<c.length;a++)mt(o,c[a],t,i,!0,0===a)}if(o.length){var h=e.tags||null;if("LineString"===s&&r.lineMetrics){for(var u in h={},e.tags)h[u]=e.tags[u];h.mapbox_clip_start=n.start/n.size,h.mapbox_clip_end=n.end/n.size}var d={geometry:o,type:"Polygon"===s||"MultiPolygon"===s?3:"LineString"===s||"MultiLineString"===s?2:1,tags:h};null!==e.id&&(d.id=e.id),t.features.push(d)}}function mt(t,e,i,r,n,s){var o=r*r;if(r>0&&e.size<(n?o:r))i.numPoints+=e.length/3;else{for(var a=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>o)&&(i.numSimplified++,a.push(e[l]),a.push(e[l+1])),i.numPoints++;n&&function(t,e){for(var i=0,r=0,n=t.length,s=n-2;r<n;s=r,r+=2)i+=(t[r]-t[s])*(t[r+1]+t[s+1]);if(i>0===e)for(r=0,n=t.length;r<n/2;r+=2){var o=t[r],a=t[r+1];t[r]=t[n-2-r],t[r+1]=t[n-1-r],t[n-2-r]=o,t[n-1-r]=a}}(a,s),t.push(a)}}function ft(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)W(i,t.features[r],e,r);else W(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var i=e.buffer/e.extent,r=t,n=tt(t,1,-1-i,i,0,-1,2,e),s=tt(t,1,1-i,2+i,0,-1,2,e);return(n||s)&&(r=tt(t,1,-i,1+i,0,-1,2,e)||[],n&&(r=lt(n,1).concat(r)),s&&(r=r.concat(lt(s,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function _t(t,e,i){return 32*((1<<t)*i+e)+t}function gt(t,e){const i=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const r=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!r)return e(null,null);const n=new h(r.features);let s=f(n);0===s.byteOffset&&s.byteLength===s.buffer.byteLength||(s=new Uint8Array(s)),e(null,{vectorTile:n,rawData:s.buffer})}ft.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ft.prototype.splitTile=function(t,e,i,r,n,s,o){for(var a=[t,e,i,r],l=this.options,c=l.debug;a.length;){r=a.pop(),i=a.pop(),e=a.pop(),t=a.pop();var h=1<<e,u=_t(e,i,r),d=this.tiles[u];if(!d&&(c>1&&console.time("creation"),d=this.tiles[u]=dt(t,e,i,r,l),this.tileCoords.push({z:e,x:i,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=t,n){if(e===l.maxZoom||e===n)continue;var m=1<<n-e;if(i!==Math.floor(s/m)||r!==Math.floor(o/m))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){c>1&&console.time("clipping");var f,_,g,y,x,v,b=.5*l.buffer/l.extent,w=.5-b,T=.5+b,E=1+b;f=_=g=y=null,x=tt(t,h,i-b,i+T,0,d.minX,d.maxX,l),v=tt(t,h,i+w,i+E,0,d.minX,d.maxX,l),t=null,x&&(f=tt(x,h,r-b,r+T,1,d.minY,d.maxY,l),_=tt(x,h,r+w,r+E,1,d.minY,d.maxY,l),x=null),v&&(g=tt(v,h,r-b,r+T,1,d.minY,d.maxY,l),y=tt(v,h,r+w,r+E,1,d.minY,d.maxY,l),v=null),c>1&&console.timeEnd("clipping"),a.push(f||[],e+1,2*i,2*r),a.push(_||[],e+1,2*i,2*r+1),a.push(g||[],e+1,2*i+1,2*r),a.push(y||[],e+1,2*i+1,2*r+1)}}},ft.prototype.getTile=function(t,e,i){var r=this.options,n=r.extent,s=r.debug;if(t<0||t>24)return null;var o=1<<t,a=_t(t,e=(e%o+o)%o,i);if(this.tiles[a])return ht(this.tiles[a],n);s>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var l,c=t,h=e,u=i;!l&&c>0;)c--,h=Math.floor(h/2),u=Math.floor(u/2),l=this.tiles[_t(c,h,u)];return l&&l.source?(s>1&&console.log("found parent tile z%d-%d-%d",c,h,u),s>1&&console.time("drilling down"),this.splitTile(l.source,c,h,u,t,e,i),s>1&&console.timeEnd("drilling down"),this.tiles[a]?ht(this.tiles[a],n):null):null};class yt extends t.VectorTileWorkerSource{constructor(t,e,i,r,n){super(t,e,i,r,gt),n&&(this.loadGeoJSON=n)}loadData(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const e=this._pendingCallback,i=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const r=!!(i&&i.request&&i.request.collectResourceTiming)&&new t.RequestPerformance(i.request);this.loadGeoJSON(i,(n,s)=>{if(n||!s)return e(n);if("object"!=typeof s)return e(new Error(`Input data given to '${i.source}' is not a valid GeoJSON object.`));{!function t(e,i){var r,n=e&&e.type;if("FeatureCollection"===n)for(r=0;r<e.features.length;r++)t(e.features[r],i);else if("GeometryCollection"===n)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],i);else if("Feature"===n)t(e.geometry,i);else if("Polygon"===n)o(e.coordinates,i);else if("MultiPolygon"===n)for(r=0;r<e.coordinates.length;r++)o(e.coordinates[r],i);return e}(s,!0);try{if(i.filter){const e=t.createExpression(i.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===e.result)throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));const r=s.features.filter(t=>e.value.evaluate({zoom:0},t));s={type:"FeatureCollection",features:r}}this._geoJSONIndex=i.cluster?new L(function({superclusterOptions:e,clusterProperties:i}){if(!i||!e)return e;const r={},n={},s={accumulated:null,zoom:0},o={properties:null},a=Object.keys(i);for(const l of a){const[e,s]=i[l],o=t.createExpression(s),a=t.createExpression("string"==typeof e?[e,["accumulated"],["get",l]]:e);r[l]=o.value,n[l]=a.value}return e.map=(t=>{o.properties=t;const e={};for(const i of a)e[i]=r[i].evaluate(s,o);return e}),e.reduce=((t,e)=>{o.properties=e;for(const i of a)s.accumulated=t[i],t[i]=n[i].evaluate(s,o)}),e}(i)).load(s.features):function(t,e){return new ft(s,i.geojsonVtOptions)}()}catch(n){return e(n)}this.loaded={};const a={};if(r){const t=r.finish();t&&(a.resourceTiming={},a.resourceTiming[i.source]=JSON.parse(JSON.stringify(t)))}e(null,a)}})}coalesce(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())}reloadTile(t,e){const i=this.loaded;return i&&i[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,i){if(e.request)t.getJSON(e.request,i);else{if("string"!=typeof e.data)return i(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));try{return i(null,JSON.parse(e.data))}catch(t){return i(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}}}removeSource(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class xt{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded=!1,this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:yt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=((t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e}),this.self.registerRTLTextPlugin=(e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText})}checkIfReady(t,e,i){i()}setReferrer(t,e){this.referrer=e}spriteLoaded(e,i){this.isSpriteLoaded=i;for(const r in this.workerSources[e]){const n=this.workerSources[e][r];for(const e in n)n[e]instanceof t.VectorTileWorkerSource&&(n[e].isSpriteLoaded=i,n[e].fire(new t.Event("isSpriteLoaded")))}}setImages(t,e,i){this.availableImages[t]=e;for(const r in this.workerSources[t]){const i=this.workerSources[t][r];for(const t in i)i[t].availableImages=e}i()}enableTerrain(t,e,i){this.terrain=e,i()}setLayers(t,e,i){this.getLayerIndex(t).replace(e),i()}updateLayers(t,e,i){this.getLayerIndex(t).update(e.layers,e.removedIds),i()}loadTile(e,i,r){const n=this.enableTerrain?t.extend({enableTerrain:this.terrain},i):i;this.getWorkerSource(e,i.type,i.source).loadTile(n,r)}loadDEMTile(e,i,r){const n=this.enableTerrain?t.extend({buildQuadTree:this.terrain},i):i;this.getDEMWorkerSource(e,i.source).loadTile(n,r)}reloadTile(e,i,r){const n=this.enableTerrain?t.extend({enableTerrain:this.terrain},i):i;this.getWorkerSource(e,i.type,i.source).reloadTile(n,r)}abortTile(t,e,i){this.getWorkerSource(t,e.type,e.source).abortTile(e,i)}removeTile(t,e,i){this.getWorkerSource(t,e.type,e.source).removeTile(e,i)}removeSource(t,e,i){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,i):i()}loadWorkerSource(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t.toString())}}syncRTLPluginState(e,i,r){try{t.plugin.setState(i);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const i=t.plugin.isParsed();r(i?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),i)}}catch(t){r(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e}getWorkerSource(t,e,i){return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][i]||(this.workerSources[t][e][i]=new this.workerSourceTypes[e]({send:(e,i,r,n,s,o)=>{this.actor.send(e,i,r,t,n,o)},scheduler:this.actor.scheduler},this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded)),this.workerSources[t][e][i]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new s),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,i){t.enforceCacheSizeLimit(i)}getWorkerPerformanceMetrics(t,e,i){i(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new xt(self)),xt}),r(0,function(t){var e=i;function i(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(i);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()?(void 0===r[e=t&&t.failIfMajorPerformanceCaveat]&&(r[e]=function(t){var e,r=function(t){var e=document.createElement("canvas"),r=Object.create(i.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,e.getContext("webgl",r)||e.getContext("experimental-webgl",r)}(t);if(!r)return!1;try{e=r.createShader(r.VERTEX_SHADER)}catch(t){return!1}return!(!e||r.isContextLost())&&(r.shaderSource(e,"void main() {}"),r.compileShader(e),!0===r.getShaderParameter(e,r.COMPILE_STATUS))}(e)),r[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var r={};i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const n={create:function(e,i,r){const n=t.window.document.createElement(e);return void 0!==i&&(n.className=i),r&&r.appendChild(n),n},createNS:function(e,i){return t.window.document.createElementNS(e,i)}},s=t.window.document&&t.window.document.documentElement.style,o=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let a;n.disableDrag=function(){s&&o&&(a=s[o],s[o]="none")},n.enableDrag=function(){s&&o&&(s[o]=a)},n.setTransform=function(t,e){t.style.transform=e};let l=!1;try{const e=Object.defineProperty({},"passive",{get(){l=!0}});t.window.addEventListener("test",e,e),t.window.removeEventListener("test",e,e)}catch(t){l=!1}n.addEventListener=function(t,e,i,r={}){t.addEventListener(e,i,"passive"in r&&l?r:r.capture)},n.removeEventListener=function(t,e,i,r={}){t.removeEventListener(e,i,"passive"in r&&l?r:r.capture)};const c=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",c,!0)};function h(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}n.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout(()=>{t.window.removeEventListener("click",c,!0)},0)},n.mousePos=function(e,i){const r=e.getBoundingClientRect();return new t.Point(i.clientX-r.left-e.clientLeft,i.clientY-r.top-e.clientTop)},n.touchPos=function(e,i){const r=e.getBoundingClientRect(),n=[];for(let s=0;s<i.length;s++)n.push(new t.Point(i[s].clientX-r.left-e.clientLeft,i[s].clientY-r.top-e.clientTop));return n},n.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};class u extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,e){this._validate(t,e)&&(this.images[t]=e)}_validate(e,i){let r=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),r=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),r=!1),this._validateContent(i.content,i)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),r=!1),r}_validateStretch(t,e){if(!t)return!0;let i=0;for(const r of t){if(r[0]<i||r[1]<r[0]||e<r[1])return!1;i=r[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let i=!0;if(!this.isLoaded())for(const r of t)this.images[r]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,i){const r={};for(const n of e){this.images[n]||this.fire(new t.Event("styleimagemissing",{id:n}));const e=this.images[n];e?r[n]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}i(null,r)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const i=this.patterns[e],r=this.getImage(e);if(!r)return null;if(i&&i.position.version===r.version)return i.position;if(i)i.position.version=r.version;else{const i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},n=new t.ImagePosition(i,r);this.patterns[e]={bin:i,position:n}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:i,h:r}=t.potpack(e),n=this.atlasImage;n.resize({width:i||1,height:r||1});for(const s in this.patterns){const{bin:e}=this.patterns[s],i=e.x+1,r=e.y+1,o=this.images[s].data,a=o.width,l=o.height;t.RGBAImage.copy(o,n,{x:0,y:0},{x:i,y:r},{width:a,height:l}),t.RGBAImage.copy(o,n,{x:0,y:l-1},{x:i,y:r-1},{width:a,height:1}),t.RGBAImage.copy(o,n,{x:0,y:0},{x:i,y:r+l},{width:a,height:1}),t.RGBAImage.copy(o,n,{x:a-1,y:0},{x:i-1,y:r},{width:1,height:l}),t.RGBAImage.copy(o,n,{x:0,y:0},{x:i+a,y:r},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const e of t){if(this.callbackDispatchedThisFrame[e])continue;this.callbackDispatchedThisFrame[e]=!0;const t=this.images[e];h(t)&&this.updateImage(e,t)}}}const d=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new class{constructor(){this.specification=t.styleSpec.light.position}possiblyEvaluate(e,i){return function([e,i,r]){const n=t.degToRad(i+90),s=t.degToRad(r);return{x:e*Math.cos(n)*Math.sin(s),y:e*Math.sin(n)*Math.sin(s),z:e*Math.cos(s),azimuthal:i,polar:r}}(e.expression.evaluate(i))}interpolate(e,i,r){return{x:t.number(e.x,i.x,r),y:t.number(e.y,i.y,r),z:t.number(e.z,i.z,r),azimuthal:t.number(e.azimuthal,i.azimuthal,r),polar:t.number(e.polar,i.polar,r)}}},color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)});class p extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(d),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,i={}){if(!this._validate(t.validateLight,e,i))for(const r in e){const i=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),i):this._transitionable.setValue(r,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,i,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))}}const m=new t.Properties({source:new t.DataConstantProperty(t.styleSpec.terrain.source),exaggeration:new t.DataConstantProperty(t.styleSpec.terrain.exaggeration)});class f extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(m),this.set(e),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(e){for(const i in e){const r=e[i];t.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),r):this._transitionable.setValue(i,r)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}}class _{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,e){const i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]}getDashRanges(t,e,i){const r=[];let n=t.length%2==1?-t[t.length-1]*i:0,s=t[0]*i,o=!0;r.push({left:n,right:s,isDash:o,zeroLength:0===t[0]});let a=t[0];for(let l=1;l<t.length;l++){o=!o;const e=t[l];n=a*i,s=(a+=e)*i,r.push({left:n,right:s,isDash:o,zeroLength:0===e})}return r}addRoundDash(t,e,i){const r=e/2;for(let n=-i;n<=i;n++){const e=this.width*(this.nextRow+i+n);let s=0,o=t[s];for(let a=0;a<this.width;a++){a/o.right>1&&(o=t[++s]);const l=Math.abs(a-o.left),c=Math.abs(a-o.right),h=Math.min(l,c);let u;const d=n/i*(r+1);if(o.isDash){const t=r-Math.abs(d);u=Math.sqrt(h*h+t*t)}else u=r-Math.sqrt(h*h+d*d);this.data[e+a]=Math.max(0,Math.min(255,u+128))}}}addRegularDash(t){for(let o=t.length-1;o>=0;--o){const e=t[o],i=t[o+1];e.zeroLength?t.splice(o,1):i&&i.isDash===e.isDash&&(i.left=e.left,t.splice(o,1))}const e=t[0],i=t[t.length-1];e.isDash===i.isDash&&(e.left=i.left-this.width,i.right=e.right+this.width);const r=this.width*this.nextRow;let n=0,s=t[n];for(let o=0;o<this.width;o++){o/s.right>1&&(s=t[++n]);const e=Math.abs(o-s.left),i=Math.abs(o-s.right),a=Math.min(e,i);this.data[r+o]=Math.max(0,Math.min(255,(s.isDash?a:-a)+128))}}addDash(e,i){const r=i?7:0,n=2*r+1;if(this.nextRow+n>this.height)return t.warnOnce("LineAtlas out of space"),null;0===e.length&&e.push(1);let s=0;for(let a=0;a<e.length;a++)e[a]<0&&(t.warnOnce("Negative value is found in line dasharray, replacing values with 0"),e[a]=0),s+=e[a];if(0!==s){const t=this.width/s,n=this.getDashRanges(e,this.width,t);i?this.addRoundDash(n,t,r):this.addRegularDash(n)}const o={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:s};return this.nextRow+=n,this.dirty=!0,o}bind(t){const e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}class g{constructor(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const r=this.workerPool.acquire(this.id);for(let t=0;t<r.length;t++){const e=new g.Actor(r[t],i,this.id);e.name=`Worker ${t}`,this.actors.push(e)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(e,i,r){t.asyncAll(this.actors,(t,r)=>{t.send(e,i,r)},r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(t=>{t.remove()}),this.actors=[],this.workerPool.release(this.id)}}function y(e,i,r){return i*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}g.Actor=t.Actor;class x{constructor(t,e,i,r){this.screenBounds=t,this.cameraPoint=e,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=i,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map(t=>r.pointCoordinate3D(t)),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(e,i){let r,n;if(e instanceof t.Point||"number"==typeof e[0]){const s=t.Point.convert(e);r=[t.Point.convert(e)],n=i.isPointAboveHorizon(s)}else{const s=t.Point.convert(e[0]),o=t.Point.convert(e[1]);r=[s,o],n=t.polygonizeBounds(s,o).every(t=>i.isPointAboveHorizon(t))}return new x(r,i.getCameraPoint(),n,i)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const i=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new t.Point(1,1)):this.screenBounds[1],n=t.polygonizeBounds(i,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>i.x&&this.cameraPoint.x<r.x?n.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?n[2]=this.cameraPoint:this.cameraPoint.x<=i.x&&(n[3]=this.cameraPoint)),t.bufferConvexPolygon(n,e)}containsTile(e,i,r){const n=e.queryPadding+1,s=r?this._bufferedCameraMercator(n,i).map(t=>e.tileID.getTilePoint(t)):this._bufferedScreenMercator(n,i).map(t=>e.tileID.getTilePoint(t)),o=this.screenGeometryMercator.map(t=>e.tileID.getTileVec3(t)),a=o.map(e=>new t.Point(e[0],e[1])),l=i.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),c=e.tileID.getTileVec3(l),h=o.map(e=>{const i=t.sub(e,e,c);return t.normalize(i,i),new t.Ray(c,i)}),u=y(e,1,i.zoom);if(t.polygonIntersectsBox(s,0,0,t.EXTENT,t.EXTENT))return{queryGeometry:this,tilespaceGeometry:a,tilespaceRays:h,bufferedTilespaceGeometry:s,bufferedTilespaceBounds:(d=t.getBounds(s),d.min.x=t.clamp(d.min.x,0,t.EXTENT),d.min.y=t.clamp(d.min.y,0,t.EXTENT),d.max.x=t.clamp(d.max.x,0,t.EXTENT),d.max.y=t.clamp(d.max.y,0,t.EXTENT),d),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:u};var d}_bufferedScreenMercator(t,e){const i=v(t);if(this._screenRaycastCache[i])return this._screenRaycastCache[i];{const r=this.bufferedScreenGeometry(t).map(t=>e.pointCoordinate3D(t));return this._screenRaycastCache[i]=r,r}}_bufferedCameraMercator(t,e){const i=v(t);if(this._cameraRaycastCache[i])return this._cameraRaycastCache[i];{const r=this.bufferedCameraGeometry(t).map(t=>e.pointCoordinate3D(t));return this._cameraRaycastCache[i]=r,r}}}function v(t){return 100*t|0}function b(e,i,r){const n=function(n,s){if(n)return r(n);if(s){const n=t.pick(t.extend(s,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);s.vector_layers&&(n.vectorLayers=s.vector_layers,n.vectorLayerIds=n.vectorLayers.map(t=>t.id)),n.tiles=i.canonicalizeTileset(n,e.url),r(null,n)}};return e.url?t.getJSON(i.transformRequest(i.normalizeSourceURL(e.url),t.ResourceType.Source),n):t.browser.frame(()=>n(null,e))}class w{constructor(e,i,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=r||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const i=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),n=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),s=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),o=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=r&&e.x<s&&e.y>=n&&e.y<o}}class T extends t.Evented{constructor(e,i,r,n){super(),this.id=e,this.dispatcher=r,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=b(this._options,this.map._requestManager,(e,i)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(t.extend(this,i),i.bounds&&(this.tileBounds=new w(i.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(i.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,i){const r=t.browser.devicePixelRatio>=2,n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),(r,n)=>{if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(r)e.state="errored",i(r);else if(n){this.map._refreshExpiredTiles&&e.setExpiryData(n),delete n.cacheControl,delete n.expires;const r=this.map.painter.context,s=r.gl;e.texture=this.map.painter.getTileTexture(n.width),e.texture?e.texture.update(n,{useMipmap:!0}):(e.texture=new t.Texture(r,n,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),i(null)}})}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}var E=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class S extends t.Evented{constructor(t,e,i,r){super(),this.id=t,this.dispatcher=i,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=e}load(e,i){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(r,n)=>{this._loaded=!0,r?this.fire(new t.ErrorEvent(r)):n&&(this.image=n,e&&(this.coordinates=e),i&&i(),this._finishLoading())})}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(e){this.coordinates=e;const i=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){let i=1/0,r=1/0,n=-1/0,s=-1/0;for(const t of e)i=Math.min(i,t.x),r=Math.min(r,t.y),n=Math.max(n,t.x),s=Math.max(s,t.y);const o=Math.max(n-i,s-r),a=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),l=Math.pow(2,a);return new t.CanonicalTileID(a,Math.floor((i+n)/2*l),Math.floor((r+s)/2*l))}(i),this.minzoom=this.maxzoom=this.tileID.z;const r=i.map(t=>this.tileID.getTilePoint(t)._round());return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,i=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,E.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const I={vector:class extends t.Evented{constructor(e,i,r,n){if(super(),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(i,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=b(this._options,this.map._requestManager,(e,i)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(t.extend(this,i),i.bounds&&(this.tileBounds=new w(i.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(i.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t();const e=this.map.style._getSourceCaches(this.id);for(const i of e)i.clearTiles();this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,i){const r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),n={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(n.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=i:e.request=e.actor.send("reloadTile",n,s.bind(this));else if(e.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",n,s.bind(this));else{const i=t.loadVectorTile.call({deduped:this._deduped},n,(t,i)=>{t||!i?s.call(this,t):(n.data={cacheControl:i.cacheControl,expires:i.expires,rawData:i.rawData.slice(0)},e.actor&&e.actor.send("loadTile",n,s.bind(this)))},!0);e.request={cancel:i}}function s(r,n){return delete e.request,e.aborted?i(null):r&&404!==r.status?i(r):(n&&n.resourceTiming&&(e.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&n&&e.setExpiryData(n),e.loadVectorData(n,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:T,"raster-dem":class extends T{constructor(e,i,r,n){super(e,i,r,n),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(e,i){const r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,n){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(r)e.state="errored",i(r);else if(n){this.map._refreshExpiredTiles&&e.setExpiryData(n),delete n.cacheControl,delete n.expires;const i=t.window.ImageBitmap&&n instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported(),r=1-(n.width-t.prevPowerOfTwo(n.width))/2;r<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));const s=i?n:t.browser.getImageData(n,r),o={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:s,encoding:this.encoding,padding:r};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",o,function(t,r){t&&(e.state="errored",i(t)),r&&(e.dem=r,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",i(null))}.bind(this)))}}.bind(this))}_getNeighboringTiles(e){const i=e.canonical,r=Math.pow(2,i.z),n=(i.x-1+r)%r,s=0===i.x?e.wrap-1:e.wrap,o=(i.x+1+r)%r,a=i.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,i.z,o,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,i.z,o,i.y-1).key]={backfilled:!1}),i.y+1<r&&(l[new t.OverscaledTileID(e.overscaledZ,s,i.z,n,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,i.z,o,i.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}},geojson:class extends t.Evented{constructor(e,i,r,n){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(n),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const s=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*s,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*s,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:t.EXTENT,radius:(i.clusterRadius||50)*s,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}load(){this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(e=>{if(e)return void this.fire(new t.ErrorEvent(e));const i={dataType:"source",sourceDataType:"metadata"};this._collectResourceTiming&&this._resourceTiming&&this._resourceTiming.length>0&&(i.resourceTiming=this._resourceTiming,this._resourceTiming=[]),this.fire(new t.Event("data",i))})}onAdd(t){this.map=t,this.load()}setData(e){return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(e=>{if(e)return void this.fire(new t.ErrorEvent(e));const i={dataType:"source",sourceDataType:"content"};this._collectResourceTiming&&this._resourceTiming&&this._resourceTiming.length>0&&(i.resourceTiming=this._resourceTiming,this._resourceTiming=[]),this.fire(new t.Event("data",i))}),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,i,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},r),this}_updateWorkerData(e){this._loaded=!1;const i=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(i.request=this.map._requestManager.transformRequest(t.browser.resolveURL(r),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(r),this.actor.send(`${this.type}.loadData`,i,(t,r)=>{this._removed||r&&r.abandoned||(this._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[this.id]&&(this._resourceTiming=r.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:i.source},null),e(t))})}loaded(){return this._loaded}loadTile(e,i){const r=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(r,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(t,n)=>(delete e.request,e.unloadVectorData(),e.aborted?i(null):t?i(t):(e.loadVectorData(n,this.map.painter,"reloadTile"===r),i(null))))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends S{constructor(t,e,i,r){super(t,e,i,r),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const i of e.urls)this.urls.push(this.map._requestManager.transformRequest(i,t.ResourceType.Source).url);t.getVideo(this.urls,(e,i)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(this.video=i,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,i=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,E.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:S,canvas:class extends S{constructor(e,i,r,n){super(e,i,r,n),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(t=>!Array.isArray(t)||2!==t.length||t.some(t=>"number"!=typeof t))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context,r=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,E.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(i,this.canvas,r.RGBA,{premultiply:!0});for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}},A=function(e,i,r,n){const s=new I[i.type](e,i,r,n);if(s.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${s.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],s),s};function C(e,i){const r=t.identity([]);return t.scale(r,r,[.5*e.width,.5*-e.height,1]),t.translate(r,r,[1,-1,0]),t.multiply(r,r,e.calculatePosMatrix(i.toUnwrapped()))}function M(t,e,i,r,n,s,o,a=!1){const l=t.tilesIn(r,o,a);l.sort(P);const c=[];for(const u of l)c.push({wrappedTileID:u.tile.tileID.wrapped().key,queryResults:u.tile.queryRenderedFeatures(e,i,t._state,u,n,s,C(t.transform,u.tile.tileID),a)});const h=function(t){const e={},i={};for(const r of t){const t=r.queryResults,n=r.wrappedTileID,s=i[n]=i[n]||{};for(const i in t){const r=t[i],n=s[i]=s[i]||{},o=e[i]=e[i]||[];for(const t of r)n[t.featureIndex]||(n[t.featureIndex]=!0,o.push(t))}}return e}(c);for(const u in h)h[u].forEach(e=>{const i=e.feature,r=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r});return h}function z(t,e){const i=t.getRenderableIds().map(e=>t.getTileByID(e)),r=[],n={};for(let s=0;s<i.length;s++){const t=i[s],o=t.tileID.canonical.key;n[o]||(n[o]=!0,t.querySourceFeatures(r,e))}return r}function P(t,e){const i=t.tileID,r=e.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}function k(){return null!=_n.workerClass?new _n.workerClass:new t.window.Worker(_n.workerUrl)}const D="mapboxgl_preloaded_worker_pool";class L{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<L.workerCount;)this.workers.push(new k);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach(t=>{t.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[D]}numActive(){return Object.keys(this.active).length}}let R;function B(){return R||(R=new L),R}function F(e,i){const r={};for(const t in e)"ref"!==t&&(r[t]=e[t]);return t.refProperties.forEach(t=>{t in i&&(r[t]=i[t])}),r}function O(t){t=t.slice();const e=Object.create(null);for(let i=0;i<t.length;i++)e[t[i].id]=t[i];for(let i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=F(t[i],e[t[i].ref]));return t}L.workerCount=2;const U={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain"};function V(t,e,i){i.push({command:U.addSource,args:[t,e[t]]})}function N(t,e,i){e.push({command:U.removeSource,args:[t]}),i[t]=!0}function $(t,e,i,r){N(t,i,r),V(t,e,i)}function q(e,i,r){let n;for(n in e[r])if(e[r].hasOwnProperty(n)&&"data"!==n&&!t.deepEqual(e[r][n],i[r][n]))return!1;for(n in i[r])if(i[r].hasOwnProperty(n)&&"data"!==n&&!t.deepEqual(e[r][n],i[r][n]))return!1;return!0}function Z(e,i,r,n,s,o){let a;for(a in i=i||{},e=e||{})e.hasOwnProperty(a)&&(t.deepEqual(e[a],i[a])||r.push({command:o,args:[n,a,i[a],s]}));for(a in i)i.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(t.deepEqual(e[a],i[a])||r.push({command:o,args:[n,a,i[a],s]}))}function G(t){return t.id}function j(t,e){return t[e.id]=e,t}class X{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let i=1,r=this._distances[i];const n=e*this.paddedLength+this.padding;for(;r<n&&i<this._distances.length;)r=this._distances[++i];const s=i-1,o=this._distances[s],a=r-o,l=a>0?(n-o)/a:0;return this.points[s].mult(1-l).add(this.points[i].mult(l))}}class W{constructor(t,e,i){const r=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(let s=0;s<this.xCellCount*this.yCellCount;s++)r.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)}insertCircle(t,e,i,r){this._forEachCell(e-r,i-r,e+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(r)}_insertBoxCell(t,e,i,r,n,s){this.boxCells[n].push(s)}_insertCircleCell(t,e,i,r,n,s){this.circleCells[n].push(s)}_query(t,e,i,r,n,s){if(i<0||t>this.width||r<0||e>this.height)return!n&&[];const o=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=r){if(n)return!0;for(let t=0;t<this.boxKeys.length;t++)o.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],i=this.circles[3*t+1],r=this.circles[3*t+2];o.push({key:this.circleKeys[t],x1:e-r,y1:i-r,x2:e+r,y2:i+r})}return s?o.filter(s):o}return this._forEachCell(t,e,i,r,this._queryCell,o,{hitTest:n,seenUids:{box:{},circle:{}}},s),n?o.length>0:o}_queryCircle(t,e,i,r,n){const s=t-i,o=t+i,a=e-i,l=e+i;if(o<0||s>this.width||l<0||a>this.height)return!r&&[];const c=[];return this._forEachCell(s,a,o,l,this._queryCellCircle,c,{hitTest:r,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},n),r?c.length>0:c}query(t,e,i,r,n){return this._query(t,e,i,r,!1,n)}hitTest(t,e,i,r,n){return this._query(t,e,i,r,!0,n)}hitTestCircle(t,e,i,r){return this._queryCircle(t,e,i,!0,r)}_queryCell(t,e,i,r,n,s,o,a){const l=o.seenUids,c=this.boxCells[n];if(null!==c){const n=this.bboxes;for(const h of c)if(!l.box[h]){l.box[h]=!0;const c=4*h;if(t<=n[c+2]&&e<=n[c+3]&&i>=n[c+0]&&r>=n[c+1]&&(!a||a(this.boxKeys[h]))){if(o.hitTest)return s.push(!0),!0;s.push({key:this.boxKeys[h],x1:n[c],y1:n[c+1],x2:n[c+2],y2:n[c+3]})}}}const h=this.circleCells[n];if(null!==h){const n=this.circles;for(const c of h)if(!l.circle[c]){l.circle[c]=!0;const h=3*c;if(this._circleAndRectCollide(n[h],n[h+1],n[h+2],t,e,i,r)&&(!a||a(this.circleKeys[c]))){if(o.hitTest)return s.push(!0),!0;{const t=n[h],e=n[h+1],i=n[h+2];s.push({key:this.circleKeys[c],x1:t-i,y1:e-i,x2:t+i,y2:e+i})}}}}}_queryCellCircle(t,e,i,r,n,s,o,a){const l=o.circle,c=o.seenUids,h=this.boxCells[n];if(null!==h){const t=this.bboxes;for(const e of h)if(!c.box[e]){c.box[e]=!0;const i=4*e;if(this._circleAndRectCollide(l.x,l.y,l.radius,t[i+0],t[i+1],t[i+2],t[i+3])&&(!a||a(this.boxKeys[e])))return s.push(!0),!0}}const u=this.circleCells[n];if(null!==u){const t=this.circles;for(const e of u)if(!c.circle[e]){c.circle[e]=!0;const i=3*e;if(this._circlesCollide(t[i],t[i+1],t[i+2],l.x,l.y,l.radius)&&(!a||a(this.circleKeys[e])))return s.push(!0),!0}}}_forEachCell(t,e,i,r,n,s,o,a){const l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),h=this._convertToXCellCoord(i),u=this._convertToYCellCoord(r);for(let d=l;d<=h;d++)for(let l=c;l<=u;l++)if(n.call(this,t,e,i,r,this.xCellCount*l+d,s,o,a))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,i,r,n,s){const o=r-t,a=n-e,l=i+s;return l*l>o*o+a*a}_circleAndRectCollide(t,e,i,r,n,s,o){const a=(s-r)/2,l=Math.abs(t-(r+a));if(l>a+i)return!1;const c=(o-n)/2,h=Math.abs(e-(n+c));if(h>c+i)return!1;if(l<=a||h<=c)return!0;const u=l-a,d=h-c;return u*u+d*d<=i*i}}function H(e,i,r,n,s){const o=t.create();return i?(t.scale(o,o,[1/s,1/s,1]),r||t.rotateZ(o,o,n.angle)):t.multiply(o,n.labelPlaneMatrix,e),o}function K(e,i,r,n,s){if(i){const i=t.clone(e);return t.scale(i,i,[s,s,1]),r||t.rotateZ(i,i,-n.angle),i}return n.glCoordMatrix}function Y(e,i,r=0){const n=[e.x,e.y,r,1];r?t.transformMat4(n,n,i):lt(n,n,i);const s=n[3];return{point:new t.Point(n[0]/s,n[1]/s),signedDistanceFromCamera:s}}function J(t,e){return Math.min(.5+t/e*.5,1.5)}function Q(t,e){const i=t[0]/t[3],r=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&r>=-e[1]&&r<=e[1]}function tt(e,i,r,n,s,o,a,l,c){const h=n?e.textSizeData:e.iconSizeData,u=t.evaluateSizeForZoom(h,r.transform.zoom),d=[256/r.width*2+1,256/r.height*2+1],p=n?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();const m=e.lineVertexArray,f=n?e.text.placedSymbolArray:e.icon.placedSymbolArray,_=r.transform.width/r.transform.height;let g=!1;for(let y=0;y<f.length;y++){const n=f.get(y);if(n.hidden||n.writingMode===t.WritingMode.vertical&&!g){at(n.numGlyphs,p);continue}g=!1;const x=c?c({x:n.anchorX,y:n.anchorY}):0,v=[n.anchorX,n.anchorY,x,1];if(t.transformMat4(v,v,i),!Q(v,d)){at(n.numGlyphs,p);continue}const b=J(r.transform.cameraToCenterDistance,v[3]),w=t.evaluateSizeForFeature(h,u,n),T=a?w/b:w*b,E=new t.Point(n.anchorX,n.anchorY),S=Y(E,s,x);if(S.signedDistanceFromCamera<=0){at(n.numGlyphs,p);continue}const I=S.point;let A={};const C=a?null:c,M=rt(n,T,!1,l,i,s,o,e.glyphOffsetArray,m,p,I,E,A,_,C);g=M.useVertical,C&&M.needsFlipping&&(A={}),(M.notEnoughRoom||g||M.needsFlipping&&rt(n,T,!0,l,i,s,o,e.glyphOffsetArray,m,p,I,E,A,_,C).notEnoughRoom)&&at(n.numGlyphs,p)}n?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function et(t,e,i,r,n,s,o,a,l,c,h,u,d){const p=a.glyphStartIndex+a.numGlyphs,m=a.lineStartIndex,f=a.lineStartIndex+a.lineLength,_=e.getoffsetX(a.glyphStartIndex),g=e.getoffsetX(p-1),y=st(t*_,i,r,n,s,o,a.segment,m,f,l,c,h,u,d,!0);if(!y)return null;const x=st(t*g,i,r,n,s,o,a.segment,m,f,l,c,h,u,d,!0);return x?{first:y,last:x}:null}function it(e,i,r,n){return e===t.WritingMode.horizontal&&Math.abs(r.y-i.y)>Math.abs(r.x-i.x)*n?{useVertical:!0}:(e===t.WritingMode.vertical?i.y<r.y:i.x>r.x)?{needsFlipping:!0}:null}function rt(e,i,r,n,s,o,a,l,c,h,u,d,p,m,f){const _=i/24,g=e.lineOffsetX*_,y=e.lineOffsetY*_;let x;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,i=e.lineStartIndex,s=e.lineStartIndex+e.lineLength,h=et(_,l,g,y,r,u,d,e,c,o,p,f);if(!h)return{notEnoughRoom:!0};const v=Y(h.first.point,a).point,b=Y(h.last.point,a).point;if(n&&!r){const t=it(e.writingMode,v,b,m);if(t)return t}x=[h.first];for(let n=e.glyphStartIndex+1;n<t-1;n++)x.push(st(_*l.getoffsetX(n),g,y,r,u,d,e.segment,i,s,c,o,p,f));x.push(h.last)}else{if(n&&!r){const i=Y(d,s).point,r=e.lineStartIndex+e.segment+1,n=new t.Point(c.getx(r),c.gety(r)),o=Y(n,s),a=o.signedDistanceFromCamera>0?o.point:nt(d,n,i,1,s),l=it(e.writingMode,i,a,m);if(l)return l}const i=st(_*l.getoffsetX(e.glyphStartIndex),g,y,r,u,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,o,p,f);if(!i)return{notEnoughRoom:!0};x=[i]}for(const v of x)t.addDynamicAttributes(h,v.point,v.angle);return{}}function nt(t,e,i,r,n,s){const o=t.add(t.sub(e)._unit()),a=Y(o,n,s?s(o):0).point,l=i.sub(a);return i.add(l._mult(r/l.mag()))}function st(e,i,r,n,s,o,a,l,c,h,u,d,p,m,f){const _=n?e-i:e+i;let g=_>0?1:-1,y=0;n&&(g*=-1,y=Math.PI),g<0&&(y+=Math.PI);let x=g>0?l+a:l+a+1,v=s,b=s,w=0,T=0;const E=Math.abs(_),S=[],I=[];let A=o;const C=()=>{const e=x-g;return 0===w?o:new t.Point(h.getx(e),h.gety(e))},M=()=>nt(C(),A,b,E-w+1,u,p);for(;w+T<=E;){if((x+=g)<l||x>=c)return null;if(b=v,S.push(v),m&&I.push(A||C()),void 0===(v=d[x])){const e=Y(A=new t.Point(h.getx(x),h.gety(x)),u,p?p(A):0);v=e.signedDistanceFromCamera>0?d[x]=e.point:M()}else A=null;w+=T,T=b.dist(v)}f&&p&&(A=A||new t.Point(h.getx(x),h.gety(x)),d[x]=v=void 0===d[x]?v:M(),T=b.dist(v));const z=(E-w)/T,P=v.sub(b),k=P.mult(z)._add(b);r&&k._add(P._unit()._perp()._mult(r*g));const D=y+Math.atan2(v.y-b.y,v.x-b.x);return S.push(k),m&&(A=A||new t.Point(h.getx(x),h.gety(x)),I.push(function(e,i,r){const n=1-r;return new t.Point(e.x*n+i.x*r,e.y*n+i.y*r)}(I.length>0?I[I.length-1]:A,A,z))),{point:k,angle:D,path:S,tilePath:I}}const ot=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function at(t,e){for(let i=0;i<t;i++){const t=e.length;e.resize(t+4),e.float32.set(ot,3*t)}}function lt(t,e,i){const r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t[3]=i[3]*r+i[7]*n+i[15],t}class ct{constructor(t,e=new W(t.width+200,t.height+200,25),i=new W(t.width+200,t.height+200,25)){this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200}placeCollisionBox(t,e,i,r,n,s,o){const a=this.projectAndGetPerspectiveRatio(s,e.anchorPointX,e.anchorPointY,e.elevation),l=n*a.perspectiveRatio,c=(e.x1*t+i.x-e.padding)*l+a.point.x,h=(e.y1*t+i.y-e.padding)*l+a.point.y,u=(e.x2*t+i.x+e.padding)*l+a.point.x,d=(e.y2*t+i.y+e.padding)*l+a.point.y,p=a.perspectiveRatio<=.55||a.aboveHorizon;return!this.isInsideGrid(c,h,u,d)||!r&&this.grid.hitTest(c,h,u,d,o)||p?{box:[],offscreen:!1}:{box:[c,h,u,d],offscreen:this.isOffscreen(c,h,u,d)}}placeCollisionCircles(e,i,r,n,s,o,a,l,c,h,u,d,p,m){const f=[],_=this.transform.elevation,g=_?t=>_.getAtTileOffset(m,t.x,t.y):t=>0,y=new t.Point(i.anchorX,i.anchorY),x=g(y),v=this.projectAndGetPerspectiveRatio(o,y.x,y.y,x),{perspectiveRatio:b}=v,w=(h?s/b:s*b)/t.ONE_EM,T=Y(y,a,x).point,E=v.signedDistanceFromCamera>0?et(w,n,i.lineOffsetX*w,i.lineOffsetY*w,!1,T,y,i,r,a,{},_&&!h?g:null,h&&!!_):null;let S=!1,I=!1,A=!0;if(E&&!v.aboveHorizon){const i=.5*d*b+p,r=new t.Point(-100,-100),n=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),s=new X,o=E.first,a=E.last;let h=[];for(let t=o.path.length-1;t>=1;t--)h.push(o.path[t]);for(let t=1;t<a.path.length;t++)h.push(a.path[t]);const m=2.5*i;if(l){const t=h.map(_?(t,e)=>{const i=g(e<o.path.length-1?o.tilePath[o.path.length-1-e]:a.tilePath[e-o.path.length+2]);return Y(t,l,i)}:t=>Y(t,l));h=t.some(t=>t.signedDistanceFromCamera<=0)?[]:t.map(t=>t.point)}let y=[];if(h.length>0){const e=h[0].clone(),i=h[0].clone();for(let t=1;t<h.length;t++)e.x=Math.min(e.x,h[t].x),e.y=Math.min(e.y,h[t].y),i.x=Math.max(i.x,h[t].x),i.y=Math.max(i.y,h[t].y);y=e.x>=r.x&&i.x<=n.x&&e.y>=r.y&&i.y<=n.y?[h]:i.x<r.x||e.x>n.x||i.y<r.y||e.y>n.y?[]:t.clipLine([h],r.x,r.y,n.x,n.y)}for(const t of y){s.reset(t,.25*i);let r=0;r=s.length<=.5*i?1:Math.ceil(s.paddedLength/m)+1;for(let t=0;t<r;t++){const n=t/Math.max(r-1,1),o=s.lerp(n),a=o.x+100,l=o.y+100;f.push(a,l,i,0);const h=a-i,d=l-i,p=a+i,m=l+i;if(A=A&&this.isOffscreen(h,d,p,m),I=I||this.isInsideGrid(h,d,p,m),!e&&this.grid.hitTestCircle(a,l,i,u)&&(S=!0,!c))return{circles:[],offscreen:!1,collisionDetected:S}}}}return{circles:!c&&S||!I?[]:f,offscreen:A,collisionDetected:S}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const i=[];let r=1/0,n=1/0,s=-1/0,o=-1/0;for(const h of e){const e=new t.Point(h.x+100,h.y+100);r=Math.min(r,e.x),n=Math.min(n,e.y),s=Math.max(s,e.x),o=Math.max(o,e.y),i.push(e)}const a=this.grid.query(r,n,s,o).concat(this.ignoredGrid.query(r,n,s,o)),l={},c={};for(const h of a){const e=h.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const r=[new t.Point(h.x1,h.y1),new t.Point(h.x2,h.y1),new t.Point(h.x2,h.y2),new t.Point(h.x1,h.y2)];t.polygonIntersectsPolygon(i,r)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===c[e.bucketInstanceId]&&(c[e.bucketInstanceId]=[]),c[e.bucketInstanceId].push(e.featureIndex))}return c}insertCollisionBox(t,e,i,r,n){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:r,collisionGroupID:n},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,i,r,n){const s=e?this.ignoredGrid:this.grid,o={bucketInstanceId:i,featureIndex:r,collisionGroupID:n};for(let a=0;a<t.length;a+=4)s.insertCircle(o,t[a],t[a+1],t[a+2])}projectAndGetPerspectiveRatio(e,i,r,n){const s=[i,r,n||0,1];let o=!1;return n||this.transform.pitch>0?(t.transformMat4(s,s,e),o=s[2]>s[3]):lt(s,s,e),{point:new t.Point((s[0]/s[3]+1)/2*this.transform.width+100,(-s[1]/s[3]+1)/2*this.transform.height+100),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/s[3]*.5,1.5),signedDistanceFromCamera:s[3],aboveHorizon:o}}isOffscreen(t,e,i,r){return i<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary}isInsideGrid(t,e,i,r){return i>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}class ht{constructor(t,e,i,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class ut{constructor(t,e,i,r,n){this.text=new ht(t?t.text:null,e,i,n),this.icon=new ht(t?t.icon:null,e,r,n)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class dt{constructor(t,e,i){this.text=t,this.icon=e,this.skipFade=i}}class pt{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class mt{constructor(t,e,i,r,n){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=n}}class ft{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function _t(e,i,r,n,s){const{horizontalAlign:o,verticalAlign:a}=t.getAnchorAlignment(e),l=-(o-.5)*i,c=-(a-.5)*r,h=t.evaluateVariableOffset(e,n);return new t.Point(l+h[0]*s,c+h[1]*s)}function gt(e,i,r,n,s){const o=new t.Point(e,i);return r&&o._rotate(n?s:-s),o}class yt{constructor(t,e,i,r){this.transform=t.clone(),this.collisionIndex=new ct(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ft(i),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,i,r,n){const s=r.getBucket(i),o=r.latestFeatureIndex;if(!s||!o||i.id!==s.layerIds[0])return;const a=r.collisionBoxArray,l=s.layers[0].layout,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),h=r.tileSize/t.EXTENT,u=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),p="map"===l.get("text-rotation-alignment"),m=y(r,1,this.transform.zoom),f=H(u,d,p,this.transform,m);let _=null;if(d){const e=K(u,d,p,this.transform,m);_=t.multiply([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[s.bucketInstanceId]=new mt(s.bucketInstanceId,o,s.sourceLayerIndex,s.index,r.tileID);const g={bucket:s,layout:l,posMatrix:u,textLabelPlaneMatrix:f,labelToScreenMatrix:_,scale:c,textPixelRatio:h,holdingForFade:r.holdingForFade(),collisionBoxArray:a,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(s.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(s.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(s.sourceID)};if(n)for(const t of s.sortKeyRanges){const{sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:n}=t;e.push({sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:n,parameters:g})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:s.symbolInstances.length,parameters:g})}attemptAnchorPlacement(t,e,i,r,n,s,o,a,l,c,h,u,d,p,m,f,_,g){const y=[u.textOffset0,u.textOffset1],x=p.getSymbolInstanceTextSize(_,u,this.transform.zoom,d),v=_t(t,i,r,y,n),b=this.collisionIndex.placeCollisionBox(x,e,gt(v.x,v.y,s,o,this.transform.angle),h,a,l,c.predicate);if((!f||0!==this.collisionIndex.placeCollisionBox(p.getSymbolInstanceIconSize(g,this.transform.zoom,d),f,gt(v.x,v.y,s,o,this.transform.angle),h,a,l,c.predicate).box.length)&&b.box.length>0){let e;return this.prevPlacement&&this.prevPlacement.variableOffsets[u.crossTileID]&&this.prevPlacement.placements[u.crossTileID]&&this.prevPlacement.placements[u.crossTileID].text&&(e=this.prevPlacement.variableOffsets[u.crossTileID].anchor),this.variableOffsets[u.crossTileID]={textOffset:y,width:i,height:r,anchor:t,textBoxScale:n,prevAnchor:e},this.markUsedJustification(p,t,u,m),p.allowVerticalPlacement&&(this.markUsedOrientation(p,m,u),this.placedOrientations[u.crossTileID]=m),{shift:v,placedGlyphBoxes:b}}}placeLayerBucketPart(e,i,r){const{bucket:n,layout:s,posMatrix:o,textLabelPlaneMatrix:a,labelToScreenMatrix:l,textPixelRatio:c,holdingForFade:h,collisionBoxArray:u,partiallyEvaluatedTextSize:d,partiallyEvaluatedIconSize:p,collisionGroup:m}=e.parameters,f=s.get("text-optional"),_=s.get("icon-optional"),g=s.get("text-allow-overlap"),y=s.get("icon-allow-overlap"),x="map"===s.get("text-rotation-alignment"),v="map"===s.get("text-pitch-alignment"),b="none"!==s.get("icon-text-fit"),w="viewport-y"===s.get("symbol-z-order"),T=g&&(y||!n.hasIconData()||_),E=y&&(g||!n.hasTextData()||f);!n.collisionArrays&&u&&n.deserializeCollisionBoxes(u),r&&n.updateCollisionDebugBuffers(this.transform.zoom,u);const S=(e,u,w)=>{if(i[e.crossTileID])return;if(h)return void(this.placements[e.crossTileID]=new dt(!1,!1,!1));let S=!1,I=!1,A=!0,C=null,M={box:null,offscreen:null},z={box:null,offscreen:null},P=null,k=null,D=null,L=0,R=0,B=0;w.textFeatureIndex?L=w.textFeatureIndex:e.useRuntimeCollisionCircles&&(L=e.featureIndex),w.verticalTextFeatureIndex&&(R=w.verticalTextFeatureIndex);const F=t=>{(this.transform.elevation||t.elevation)&&(t.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[n.bucketInstanceId].tileID,t.anchorPointX,t.anchorPointY):0)},O=w.textBox;if(O){F(O);const i=i=>{let r=t.WritingMode.horizontal;if(n.allowVerticalPlacement&&!i&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,r=t,this.markUsedOrientation(n,r,e))}return r},r=(i,r)=>{if(n.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&w.verticalTextBox){for(const e of n.writingModes)if(e===t.WritingMode.vertical?(M=r(),z=M):M=i(),M&&M.box&&M.box.length)break}else M=i()};if(s.get("text-variable-anchor")){let a=s.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];a.indexOf(t.anchor)>0&&(a=a.filter(e=>e!==t.anchor)).unshift(t.anchor)}const l=(t,i,r)=>{const s=e.textBoxScale,l=(t.x2-t.x1)*s+2*t.padding,h=(t.y2-t.y1)*s+2*t.padding,f=b&&!y?i:null;f&&F(f);let _={box:[],offscreen:!1};const w=g?2*a.length:a.length;for(let g=0;g<w;++g){const i=this.attemptAnchorPlacement(a[g%a.length],t,l,h,s,x,v,c,o,m,g>=a.length,e,u,n,r,f,d,p);if(i&&((_=i.placedGlyphBoxes)&&_.box&&_.box.length)){S=!0,C=i.shift;break}}return _};r(()=>l(O,w.iconBox,t.WritingMode.horizontal),()=>{const i=w.verticalTextBox;return i&&F(i),n.allowVerticalPlacement&&!(M&&M.box&&M.box.length)&&e.numVerticalGlyphVertices>0&&i?l(i,w.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),M&&(S=M.box,A=M.offscreen);const h=i(M&&M.box);if(!S&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(n,t.anchor,e,h))}}else{const s=(i,r)=>{const s=n.getSymbolInstanceTextSize(d,e,this.transform.zoom,u),a=this.collisionIndex.placeCollisionBox(s,i,new t.Point(0,0),g,c,o,m.predicate);return a&&a.box&&a.box.length&&(this.markUsedOrientation(n,r,e),this.placedOrientations[e.crossTileID]=r),a};r(()=>s(O,t.WritingMode.horizontal),()=>{const i=w.verticalTextBox;return n.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&i?(F(i),s(i,t.WritingMode.vertical)):{box:null,offscreen:null}}),i(M&&M.box&&M.box.length)}}if(S=(P=M)&&P.box&&P.box.length>0,A=P&&P.offscreen,e.useRuntimeCollisionCircles){const i=n.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),c=t.evaluateSizeForFeature(n.textSizeData,d,i),h=s.get("text-padding");k=this.collisionIndex.placeCollisionCircles(g,i,n.lineVertexArray,n.glyphOffsetArray,c,o,a,l,r,v,m.predicate,e.collisionCircleDiameter,h,this.retainedQueryData[n.bucketInstanceId].tileID),S=g||k.circles.length>0&&!k.collisionDetected,A=A&&k.offscreen}if(w.iconFeatureIndex&&(B=w.iconFeatureIndex),w.iconBox){const e=e=>{F(e);const i=b&&C?gt(C.x,C.y,x,v,this.transform.angle):new t.Point(0,0),r=n.getSymbolInstanceIconSize(p,this.transform.zoom,u);return this.collisionIndex.placeCollisionBox(r,e,i,y,c,o,m.predicate)};z&&z.box&&z.box.length&&w.verticalIconBox?I=(D=e(w.verticalIconBox)).box.length>0:I=(D=e(w.iconBox)).box.length>0,A=A&&D.offscreen}const U=f||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,V=_||0===e.numIconVertices;if(U||V?V?U||(I=I&&S):S=I&&S:I=S=I&&S,S&&P&&P.box&&this.collisionIndex.insertCollisionBox(P.box,s.get("text-ignore-placement"),n.bucketInstanceId,z&&z.box&&R?R:L,m.ID),I&&D&&this.collisionIndex.insertCollisionBox(D.box,s.get("icon-ignore-placement"),n.bucketInstanceId,B,m.ID),k&&(S&&this.collisionIndex.insertCollisionCircles(k.circles,s.get("text-ignore-placement"),n.bucketInstanceId,L,m.ID),r)){const t=n.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new pt);for(let i=0;i<k.circles.length;i+=4)e.circles.push(k.circles[i+0]),e.circles.push(k.circles[i+1]),e.circles.push(k.circles[i+2]),e.circles.push(k.collisionDetected?1:0)}this.placements[e.crossTileID]=new dt(S||T,I||E,A||n.justReloaded),i[e.crossTileID]=!0};if(w){const t=n.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const i=t[e];S(n.symbolInstances.get(i),i,n.collisionArrays[i])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)S(n.symbolInstances.get(t),t,n.collisionArrays[t]);if(r&&n.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[n.bucketInstanceId];t.invert(e.invProjMatrix,o),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}n.justReloaded=!1}markUsedJustification(e,i,r,n){let s;s=n===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(i)];const o=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const t of o)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=s>=0&&t!==s?0:r.crossTileID)}markUsedOrientation(e,i,r){const n=i===t.WritingMode.horizontal||i===t.WritingMode.horizontalOnly?i:0,s=i===t.WritingMode.vertical?i:0,o=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const t of o)e.text.placedSymbolArray.get(t).placedOrientation=n;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=s)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const r=e?e.symbolFadeChange(t):1,n=e?e.opacities:{},s=e?e.variableOffsets:{},o=e?e.placedOrientations:{};for(const a in this.placements){const t=this.placements[a],e=n[a];e?(this.opacities[a]=new ut(e,r,t.text,t.icon),i=i||t.text!==e.text.placed||t.icon!==e.icon.placed):(this.opacities[a]=new ut(null,r,t.text,t.icon,t.skipFade),i=i||t.text||t.icon)}for(const a in n){const t=n[a];if(!this.opacities[a]){const e=new ut(t,r,!1,!1);e.isHidden()||(this.opacities[a]=e,i=i||t.text.placed||t.icon.placed)}}for(const a in s)this.variableOffsets[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.variableOffsets[a]=s[a]);for(const a in o)this.placedOrientations[a]||!this.opacities[a]||this.opacities[a].isHidden()||(this.placedOrientations[a]=o[a]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const i={};for(const r of e){const e=r.getBucket(t);e&&r.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,i,r.collisionBoxArray)}}updateBucketOpacities(e,i,r){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const n=e.layers[0].layout,s=new ut(null,0,!1,!1,!0),o=n.get("text-allow-overlap"),a=n.get("icon-allow-overlap"),l=n.get("text-variable-anchor"),c="map"===n.get("text-rotation-alignment"),h="map"===n.get("text-pitch-alignment"),u="none"!==n.get("icon-text-fit"),d=new ut(null,0,o&&(a||!e.hasIconData()||n.get("icon-optional")),a&&(o||!e.hasTextData()||n.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const p=(t,e,i)=>{for(let r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(i)};for(let m=0;m<e.symbolInstances.length;m++){const r=e.symbolInstances.get(m),{numHorizontalGlyphVertices:n,numVerticalGlyphVertices:o,crossTileID:a}=r;let f=this.opacities[a];i[a]?f=s:f||(f=d,this.opacities[a]=f),i[a]=!0;const _=r.numIconVertices>0,g=this.placedOrientations[r.crossTileID],y=g===t.WritingMode.vertical,x=g===t.WritingMode.horizontal||g===t.WritingMode.horizontalOnly;if(n>0||o>0){const t=At(f.text);p(e.text,n,y?Ct:t),p(e.text,o,x?Ct:t);const i=f.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach(t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=i||y?1:0)}),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=i||x?1:0);const s=this.variableOffsets[r.crossTileID];s&&this.markUsedJustification(e,s.anchor,r,g);const a=this.placedOrientations[r.crossTileID];a&&(this.markUsedJustification(e,"left",r,a),this.markUsedOrientation(e,a,r))}if(_){const t=At(f.icon),i=!(u&&r.verticalPlacedIconSymbolIndex&&y);r.placedIconSymbolIndex>=0&&(p(e.icon,r.numIconVertices,i?t:Ct),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=f.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(p(e.icon,r.numVerticalIconVertices,i?Ct:t),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=f.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const i=e.collisionArrays[m];if(i){let r=new t.Point(0,0);if(i.textBox||i.verticalTextBox){let t=!0;if(l){const e=this.variableOffsets[a];e?(r=_t(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),c&&r._rotate(h?this.transform.angle:-this.transform.angle)):t=!1}i.textBox&&xt(e.textCollisionBox.collisionVertexArray,f.text.placed,!t||y,r.x,r.y),i.verticalTextBox&&xt(e.textCollisionBox.collisionVertexArray,f.text.placed,!t||x,r.x,r.y)}const n=Boolean(!x&&i.verticalIconBox);i.iconBox&&xt(e.iconCollisionBox.collisionVertexArray,f.icon.placed,n,u?r.x:0,u?r.y:0),i.verticalIconBox&&xt(e.iconCollisionBox.collisionVertexArray,f.icon.placed,!n,u?r.x:0,u?r.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t}setStale(){this.stale=!0}}function xt(t,e,i,r,n){t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0),t.emplaceBack(e?1:0,i?1:0,r||0,n||0)}const vt=Math.pow(2,25),bt=Math.pow(2,24),wt=Math.pow(2,17),Tt=Math.pow(2,16),Et=Math.pow(2,9),St=Math.pow(2,8),It=Math.pow(2,1);function At(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*vt+e*bt+i*wt+e*Tt+i*Et+e*St+i*It+e}const Ct=0;class Mt{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,i,r,n){const s=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(s,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,s.sort((t,e)=>t.sortKey-e.sortKey));this._currentPartIndex<s.length;)if(e.placeLayerBucketPart(s[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,n())return!0;return!1}}class zt{constructor(t,e,i,r,n,s,o){this.placement=new yt(t,n,s,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(e,i,r){const n=t.browser.now(),s=()=>{const e=t.browser.now()-n;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=i[e[this._currentPlacementIndex]],n=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=n)&&(!t.maxzoom||t.maxzoom>n)){if(this._inProgressLayer||(this._inProgressLayer=new Mt(t)),this._inProgressLayer.continuePlacement(r[t.source],this.placement,this._showCollisionBoxes,t,s))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Pt=512/t.EXTENT/2;class kt{constructor(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(let r=0;r<e.length;r++){const i=e.get(r),n=i.key;this.indexedSymbolInstances[n]||(this.indexedSymbolInstances[n]=[]),this.indexedSymbolInstances[n].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}}getScaledCoordinates(e,i){const r=Pt/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((i.canonical.y*t.EXTENT+e.anchorY)*r)}}findMatches(t,e,i){const r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let n=0;n<t.length;n++){const s=t.get(n);if(s.crossTileID)continue;const o=this.indexedSymbolInstances[s.key];if(!o)continue;const a=this.getScaledCoordinates(s,e);for(const t of o)if(Math.abs(t.coord.x-a.x)<=r&&Math.abs(t.coord.y-a.y)<=r&&!i[t.crossTileID]){i[t.crossTileID]=!0,s.crossTileID=t.crossTileID;break}}}}class Dt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Lt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const i in this.indexes){const t=this.indexes[i],r={};for(const i in t){const n=t[i];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),r[n.tileID.key]=n}this.indexes[i]=r}this.lng=t}addBucket(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let n=0;n<e.symbolInstances.length;n++)e.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const r=this.usedCrossTileIDs[t.overscaledZ];for(const n in this.indexes){const i=this.indexes[n];if(Number(n)>t.overscaledZ)for(const n in i){const s=i[n];s.tileID.isChildOf(t)&&s.findMatches(e.symbolInstances,t,r)}else{const s=i[t.scaledTo(Number(n)).key];s&&s.findMatches(e.symbolInstances,t,r)}}for(let n=0;n<e.symbolInstances.length;n++){const t=e.symbolInstances.get(n);t.crossTileID||(t.crossTileID=i.generate(),r[t.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new kt(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const i in e.indexedSymbolInstances)for(const r of e.indexedSymbolInstances[i])delete this.usedCrossTileIDs[t][r.crossTileID]}removeStaleBuckets(t){let e=!1;for(const i in this.indexes){const r=this.indexes[i];for(const n in r)t[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],e=!0)}return e}}class Rt{constructor(){this.layerIndexes={},this.crossTileIDs=new Dt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,i){let r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Lt);let n=!1;const s={};r.handleWrapJump(i);for(const o of e){const e=o.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(o.tileID,e,this.crossTileIDs)&&(n=!0),s[e.bucketInstanceId]=!0)}return r.removeStaleBuckets(s)&&(n=!0),n}pruneUnusedLayers(t){const e={};t.forEach(t=>{e[t]=!0});for(const i in this.layerIndexes)e[i]||delete this.layerIndexes[i]}}const Bt=(e,i)=>t.emitValidationErrors(e,i&&i.filter(t=>"source.canvas"!==t.identifier)),Ft=t.pick(U,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain"]),Ot=t.pick(U,["setCenter","setZoom","setBearing","setPitch"]),Ut=function(){const e={},i=t.styleSpec.$version;for(const r in t.styleSpec.$root){const n=t.styleSpec.$root[r];if(n.required){let t=null;null!=(t="version"===r?i:"array"===n.type?[]:{})&&(e[r]=t)}}return e}(),Vt={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Nt extends t.Evented{constructor(e,i={}){super(),this.map=e,this.dispatcher=new g(B(),this),this.imageManager=new u,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(e._requestManager,i.localFontFamily?t.LocalGlyphMode.all:i.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,i.localFontFamily||i.localIdeographFontFamily),this.lineAtlas=new _(256,512),this.crossTileSymbolIndex=new Rt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const r=this;this._rtlTextPluginCallback=Nt.registerForPluginStateChange(e=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(e,i)=>{if(t.triggerPluginCompletionEvent(e),i&&i.every(t=>t))for(const t in r._sourceCaches){const e=r._sourceCaches[t],i=e.getSource().type;"vector"!==i&&"geojson"!==i||e.reload()}})}),this.on("data",t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(const i in this._layers){const t=this._layers[i];t.source===e.id&&this._validateLayer(t)}})}loadURL(e,i={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const r="boolean"==typeof i.validate?i.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,i.accessToken);const n=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(n,(e,i)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):i&&this._load(i,r)})}loadJSON(e,i={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(()=>{this._request=null,this._load(e,!1!==i.validate)})}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ut,!1)}_updateLayerCount(t,e){const i=e?1:-1;t.is3D()&&(this._num3DLayers+=i),"circle"===t.type&&(this._numCircleLayers+=i),"symbol"===t.type&&(this._numSymbolLayers+=i)}_load(e,i){if(i&&Bt(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=e;for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);const r=O(this.stylesheet.layers);this._order=r.map(t=>t.id),this._layers={},this._serializedLayers={};for(let n of r)(n=t.createStyleLayer(n)).setEventedParent(this,{layer:{id:n.id}}),this._layers[n.id]=n,this._serializedLayers[n.id]=n.serialize(),this._updateLayerCount(n,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new p(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}_loadSprite(e){this._spriteRequest=function(e,i,r){let n,s,o;const a=t.browser.devicePixelRatio>1?"@2x":"";let l=t.getJSON(i.transformRequest(i.normalizeSpriteURL(e,a,".json"),t.ResourceType.SpriteJSON),(t,e)=>{l=null,o||(o=t,n=e,h())}),c=t.getImage(i.transformRequest(i.normalizeSpriteURL(e,a,".png"),t.ResourceType.SpriteImage),(t,e)=>{c=null,o||(o=t,s=e,h())});function h(){if(o)r(o);else if(n&&s){const e=t.browser.getImageData(s),i={};for(const r in n){const{width:s,height:o,x:a,y:l,sdf:c,pixelRatio:h,stretchX:u,stretchY:d,content:p}=n[r],m=new t.RGBAImage({width:s,height:o});t.RGBAImage.copy(e,m,{x:a,y:l},{x:0,y:0},{width:s,height:o}),i[r]={data:m,pixelRatio:h,sdf:c,stretchX:u,stretchY:d,content:p}}r(null,i)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,(e,i)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(i)for(const t in i)this.imageManager.addImage(t,i[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))})}_validateLayer(e){const i=this.getSource(e.source);if(!i)return;const r=e.sourceLayer;r&&("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${r}" `+`does not exist on source "${i.id}" `+`as specified by style layer "${e.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const i of t){const t=this._layers[i];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(t){return!!this.terrain&&Vt[t.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(e){if(!this._loaded)return;const i=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(t.length||i.length)&&this._updateWorkerLayers(t,i);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const r in this._updatedPaintProps)this._layers[r].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}const r={};for(const t in this._sourceCaches){const e=this._sourceCaches[t];r[t]=e.used,e.used=!1}for(const t of this._order){const i=this._layers[t];if(i.recalculate(e,this._availableImages),!i.isHidden(e.zoom)){const t=this._getLayerSourceCache(i);t&&(t.used=!0)}const r=this.map.painter;if(r){const t=i.getProgramIds();if(!t)continue;const n=i.getProgramConfiguration(e.zoom);for(const e of t)r.useProgram(e,n)}}for(const n in r){const e=this._sourceCaches[n];r[n]!==e.used&&e.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:e.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.z=e.zoom,i&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(e){if(this._checkLoaded(),Bt(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=O(e.layers);const i=function(e,i){if(!e)return[{command:U.setStyle,args:[i]}];let r=[];try{if(!t.deepEqual(e.version,i.version))return[{command:U.setStyle,args:[i]}];t.deepEqual(e.center,i.center)||r.push({command:U.setCenter,args:[i.center]}),t.deepEqual(e.zoom,i.zoom)||r.push({command:U.setZoom,args:[i.zoom]}),t.deepEqual(e.bearing,i.bearing)||r.push({command:U.setBearing,args:[i.bearing]}),t.deepEqual(e.pitch,i.pitch)||r.push({command:U.setPitch,args:[i.pitch]}),t.deepEqual(e.sprite,i.sprite)||r.push({command:U.setSprite,args:[i.sprite]}),t.deepEqual(e.glyphs,i.glyphs)||r.push({command:U.setGlyphs,args:[i.glyphs]}),t.deepEqual(e.transition,i.transition)||r.push({command:U.setTransition,args:[i.transition]}),t.deepEqual(e.light,i.light)||r.push({command:U.setLight,args:[i.light]});const n={},s=[];!function(e,i,r,n){let s;for(s in i=i||{},e=e||{})e.hasOwnProperty(s)&&(i.hasOwnProperty(s)||N(s,r,n));for(s in i)i.hasOwnProperty(s)&&(e.hasOwnProperty(s)?t.deepEqual(e[s],i[s])||("geojson"===e[s].type&&"geojson"===i[s].type&&q(e,i,s)?r.push({command:U.setGeoJSONSourceData,args:[s,i[s].data]}):$(s,i,r,n)):V(s,i,r))}(e.sources,i.sources,s,n);const o=[];e.layers&&e.layers.forEach(t=>{n[t.source]?r.push({command:U.removeLayer,args:[t.id]}):o.push(t)});let a=e.terrain;a&&n[a.source]&&(r.push({command:U.setTerrain,args:[void 0]}),a=void 0),r=r.concat(s),t.deepEqual(a,i.terrain)||r.push({command:U.setTerrain,args:[i.terrain]}),function(e,i,r){i=i||[];const n=(e=e||[]).map(G),s=i.map(G),o=e.reduce(j,{}),a=i.reduce(j,{}),l=n.slice(),c=Object.create(null);let h,u,d,p,m,f,_;for(h=0,u=0;h<n.length;h++)d=n[h],a.hasOwnProperty(d)?u++:(r.push({command:U.removeLayer,args:[d]}),l.splice(l.indexOf(d,u),1));for(h=0,u=0;h<s.length;h++)d=s[s.length-1-h],l[l.length-1-h]!==d&&(o.hasOwnProperty(d)?(r.push({command:U.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-u),1)):u++,f=l[l.length-h],r.push({command:U.addLayer,args:[a[d],f]}),l.splice(l.length-h,0,d),c[d]=!0);for(h=0;h<s.length;h++)if(p=o[d=s[h]],m=a[d],!c[d]&&!t.deepEqual(p,m))if(t.deepEqual(p.source,m.source)&&t.deepEqual(p["source-layer"],m["source-layer"])&&t.deepEqual(p.type,m.type)){for(_ in Z(p.layout,m.layout,r,d,null,U.setLayoutProperty),Z(p.paint,m.paint,r,d,null,U.setPaintProperty),t.deepEqual(p.filter,m.filter)||r.push({command:U.setFilter,args:[d,m.filter]}),t.deepEqual(p.minzoom,m.minzoom)&&t.deepEqual(p.maxzoom,m.maxzoom)||r.push({command:U.setLayerZoomRange,args:[d,m.minzoom,m.maxzoom]}),p)p.hasOwnProperty(_)&&"layout"!==_&&"paint"!==_&&"filter"!==_&&"metadata"!==_&&"minzoom"!==_&&"maxzoom"!==_&&(0===_.indexOf("paint.")?Z(p[_],m[_],r,d,_.slice(6),U.setPaintProperty):t.deepEqual(p[_],m[_])||r.push({command:U.setLayerProperty,args:[d,_,m[_]]}));for(_ in m)m.hasOwnProperty(_)&&!p.hasOwnProperty(_)&&"layout"!==_&&"paint"!==_&&"filter"!==_&&"metadata"!==_&&"minzoom"!==_&&"maxzoom"!==_&&(0===_.indexOf("paint.")?Z(p[_],m[_],r,d,_.slice(6),U.setPaintProperty):t.deepEqual(p[_],m[_])||r.push({command:U.setLayerProperty,args:[d,_,m[_]]}))}else r.push({command:U.removeLayer,args:[d]}),f=l[l.lastIndexOf(d)+1],r.push({command:U.addLayer,args:[m,f]})}(o,i.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:U.setStyle,args:[i]}]}return r}(this.serialize(),e).filter(t=>!(t.command in Ot));if(0===i.length)return!1;const r=i.filter(t=>!(t.command in Ft));if(r.length>0)throw new Error(`Unimplemented: ${r.map(t=>t.command).join(", ")}.`);return i.forEach(t=>{"setTransition"!==t.command&&this[t.command].apply(this,t.args)}),this.stylesheet=e,!0}addImage(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,i),this._afterImageUpdated(e)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,i,r={}){if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,`sources.${e}`,i,null,r))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const n=A(e,i,this.dispatcher,this);n.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:n.serialize(),sourceId:e}));const s=i=>{const r=(i?"symbol:":"other:")+e,s=this._sourceCaches[r]=new t.SourceCache(r,n,i);(i?this._symbolSourceCaches:this._otherSourceCaches)[e]=s,s.style=this,s.onAdd(this.map)};s(!1),"vector"!==i.type&&"geojson"!==i.type||s(!0),n.onAdd&&n.onAdd(this.map),this._changed=!0}removeSource(e){this._checkLoaded();const i=this.getSource(e);if(void 0===i)throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${n}" is using it.`)));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while terrain is using it.`)));const r=this._getSourceCaches(e);for(const n of r)delete this._sourceCaches[n.id],delete this._updatedSources[n.id],n.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n.getSource().id})),n.setEventedParent(null),n.clearTiles();delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],i.setEventedParent(null),i.onRemove&&i.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){this._checkLoaded(),this.getSource(t).setData(e),this._changed=!0}getSource(t){const e=this._getSourceCache(t);return e&&e.getSource()}addLayer(e,i,r={}){this._checkLoaded();const n=e.id;if(this.getLayer(n))return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${n}" already exists on this map`)));let s;if("custom"===e.type){if(Bt(this,t.validateCustomStyleLayer(e)))return;s=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(n,e.source),e=t.clone$1(e),e=t.extend(e,{source:n})),this._validate(t.validateStyle.layer,`layers.${n}`,e,{arrayIndex:-1},r))return;s=t.createStyleLayer(e),this._validateLayer(s),s.setEventedParent(this,{layer:{id:n}}),this._serializedLayers[s.id]=s.serialize(),this._updateLayerCount(s,!0)}const o=i?this._order.indexOf(i):this._order.length;if(i&&-1===o)return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${i}" does not exist on this map.`)));this._order.splice(o,0,n),this._layerOrderChanged=!0,this._layers[n]=s;const a=this._getLayerSourceCache(s);if(this._removedLayers[n]&&s.source&&a&&"custom"!==s.type){const t=this._removedLayers[n];delete this._removedLayers[n],t.type!==s.type?this._updatedSources[s.source]="clear":(this._updatedSources[s.source]="reload",a.pause())}this._updateLayer(s),s.onAdd&&s.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(e,i){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===i)return;const r=this._order.indexOf(e);this._order.splice(r,1);const n=i?this._order.indexOf(i):this._order.length;i&&-1===n?this.fire(new t.ErrorEvent(new Error(`Layer with id "${i}" does not exist on this map.`))):(this._order.splice(n,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(e){this._checkLoaded();const i=this._layers[e];if(!i)return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be removed.`)));i.setEventedParent(null),this._updateLayerCount(i,!1);const r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const e in this._layers)if(this._layers[e].type===t)return!0;return!1}setLayerZoomRange(e,i,r){this._checkLoaded();const n=this.getLayer(e);n?n.minzoom===i&&n.maxzoom===r||(null!=i&&(n.minzoom=i),null!=r&&(n.maxzoom=r),this._updateLayer(n)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(e,i,r={}){this._checkLoaded();const n=this.getLayer(e);if(n){if(!t.deepEqual(n.filter,i))return null==i?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(t.validateStyle.filter,`layers.${n.id}.filter`,i,null,r)||(n.filter=t.clone$1(i),this._updateLayer(n)))}else this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be filtered.`)))}getFilter(e){return t.clone$1(this.getLayer(e).filter)}setLayoutProperty(e,i,r,n={}){this._checkLoaded();const s=this.getLayer(e);s?t.deepEqual(s.getLayoutProperty(i),r)||(s.setLayoutProperty(i,r,n),this._updateLayer(s)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(e,i){const r=this.getLayer(e);if(r)return r.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style.`)))}setPaintProperty(e,i,r,n={}){this._checkLoaded();const s=this.getLayer(e);s?t.deepEqual(s.getPaintProperty(i),r)||(s.setPaintProperty(i,r,n)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(e,i){this._checkLoaded();const r=e.source,n=e.sourceLayer,s=this.getSource(r);if(void 0===s)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=s.type;if("geojson"===o&&n)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===o&&!n)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const a=this._getSourceCaches(r);for(const t of a)t.setFeatureState(n,e.id,i)}removeFeatureState(e,i){this._checkLoaded();const r=e.source,n=this.getSource(r);if(void 0===n)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const s=n.type,o="vector"===s?e.sourceLayer:void 0;if("vector"===s&&!o)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(i&&"string"!=typeof e.id&&"number"!=typeof e.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const a=this._getSourceCaches(r);for(const t of a)t.removeFeatureState(o,e.id,i)}getFeatureState(e){this._checkLoaded();const i=e.source,r=e.sourceLayer,n=this.getSource(i);if(void 0!==n){if("vector"!==n.type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(i)[0].getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e={};for(const t in this._sourceCaches){const i=this._sourceCaches[t].getSource();e[i.id]||(e[i.id]=i.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e,layers:this._serializeLayers(this._order)},t=>void 0!==t)}_updateLayer(t){this._updatedLayers[t.id]=!0;const e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,i={},r=[];for(let s=this._order.length-1;s>=0;s--){const n=this._order[s];if(e(n)){i[n]=s;for(const e of t){const t=e[n];if(t)for(const e of t)r.push(e)}}}r.sort((t,e)=>e.intersectionZ-t.intersectionZ);const n=[];for(let s=this._order.length-1;s>=0;s--){const o=this._order[s];if(e(o))for(let t=r.length-1;t>=0;t--){const e=r[t].feature;if(i[e.layer.id]<s)break;n.push(e),r.pop()}else for(const e of t){const t=e[o];if(t)for(const e of t)n.push(e.feature)}}return n}queryRenderedFeatures(e,i,r){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);const n={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of i.layers){const i=this._layers[e];if(!i)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];n[i.source]=!0}}const s=[];i.availableImages=this._availableImages;const o=i&&i.layers?i.layers.some(t=>{const e=this.getLayer(t);return e&&e.is3D()}):this.has3DLayers(),a=x.createFromScreenPoints(e,r);for(const t in this._sourceCaches){const e=this._sourceCaches[t].getSource().id;i.layers&&!n[e]||s.push(M(this._sourceCaches[t],this._layers,this._serializedLayers,a,i,r,o,!!this.map._showQueryGeometry))}return this.placement&&s.push(function(t,e,i,r,n,s,o){const a={},l=s.queryRenderedSymbols(r),c=[];for(const h of Object.keys(l).map(Number))c.push(o[h]);c.sort(P);for(const h of c){const i=h.featureIndex.lookupSymbolFeatures(l[h.bucketInstanceId],e,h.bucketIndex,h.sourceLayerIndex,n.filter,n.layers,n.availableImages,t);for(const t in i){const e=a[t]=a[t]||[],r=i[t];r.sort((t,e)=>{const i=h.featureSortOrder;if(i){const r=i.indexOf(t.featureIndex);return i.indexOf(e.featureIndex)-r}return e.featureIndex-t.featureIndex});for(const t of r)e.push(t)}}for(const h in a)a[h].forEach(e=>{const r=e.feature,n=i(t[h]).getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=n});return a}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),a.screenGeometry,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(s)}querySourceFeatures(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);const r=this._getSourceCaches(e);let n=[];for(const t of r)n=n.concat(z(t,i));return n}addSourceType(t,e,i){return Nt.getSourceType(t)?i(new Error(`A source type called "${t}" already exists.`)):(Nt.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))}getLight(){return this.light.getLight()}setLight(e,i={}){this._checkLoaded();const r=this.light.getLight();let n=!1;for(const o in e)if(!t.deepEqual(e[o],r[o])){n=!0;break}if(!n)return;const s={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(s)}setTerrain(e){if(this._checkLoaded(),!e)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),void this._force3DLayerUpdate();if("object"==typeof e.source){const i="terrain-dem-src";this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})}if(!this._validate(t.validateStyle.terrain,"terrain",e)){if(this.terrain){const i=this.terrain,r=i.get();for(const n in e)if(!t.deepEqual(e[n],r[n])){i.set(e),this.stylesheet.terrain=e;const r={now:t.browser.now(),transition:t.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(r);break}}else this._createTerrain(e);this._updateDrapeFirstLayers()}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter(t=>this.isLayerDraped(this._layers[t])),e=this._order.filter(t=>!this.isLayerDraped(this._layers[t]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...e)}_createTerrain(e){const i=this.terrain=new f(e);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const r={now:t.browser.now(),transition:t.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(r)}_force3DLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}_validate(e,i,r,n,s={}){return(!s||!1!==s.validate)&&Bt(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:r,styleSpec:t.styleSpec},n)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const e=this._getSourceCaches(t);for(const i of e)i.clearTiles()}_reloadSource(t){const e=this._getSourceCaches(t);for(const i of e)i.resume(),i.reload()}_updateSources(t){for(const e in this._sourceCaches)this._sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const e=this._sourceCaches[t];e.resume(),e.reload()}}_updatePlacement(e,i,r,n,s=!1){let o=!1,a=!1;const l={};for(const t of this._order){const i=this._layers[t];if("symbol"!==i.type)continue;if(!l[i.source]){const t=this._getLayerSourceCache(i);if(!t)continue;l[i.source]=t.getRenderableIds(!0).map(e=>t.getTileByID(e)).sort((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1))}const r=this.crossTileSymbolIndex.addLayer(i,l[i.source],e.center.lng);o=o||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),s=s||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new zt(e,this._order,s,i,r,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();const r=t=>{t&&t.setDependencies(e.tileID.key,e.type,e.icons)};r(this._otherSourceCaches[e.source]),r(this._symbolSourceCaches[e.source])}getGlyphs(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)}getResource(e,i,r){return t.makeRequest(i,r)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}}Nt.getSourceType=function(t){return I[t]},Nt.setSourceType=function(t,e){I[t]=e},Nt.registerForPluginStateChange=t.registerForPluginStateChange;var $t="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let qt={};qt=be("","\n#define ELEVATION_SCALE 7.3\n#ifdef TERRAIN\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}float prevElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*word/ELEVATION_SCALE;}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0);const Zt=be("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nconst float PI=3.141592653589793;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const float PI=3.141592653589793;const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Gt=be("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),jt=be("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Xt=be("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Wt=be("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ht=be("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}"),Kt=be("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Yt=be("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Jt=be("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Qt=be("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),te=be("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ee=be("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ie=be("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),re=be("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ne=be("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,t > 0.0 ? height : base,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),se=be("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,z,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),oe=be("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ae=be("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),le=be("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),ce=be("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),he=be("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),ue=be("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),de=be("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),pe=be("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),me=be("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),fe=be("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),_e=be("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;const float skirtOffset=24575.0;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);}"),ge=be("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),ye=be("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",$t),xe=be("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform lowp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5))*u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",$t),ve=be("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}");function be(t,e,i){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),s=t.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g);let a=o?o.concat(s):s;i||(a=qt.staticUniforms.concat(a));const l={};return{fragmentSource:t=t.replace(r,(t,e,i,r,n)=>(l[n]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${n}\nvarying ${i} ${r} ${n};\n#else\nuniform ${i} ${r} u_${n};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${n}\n    ${i} ${r} ${n} = u_${n};\n#endif\n`)),vertexSource:e=e.replace(r,(t,e,i,r,n)=>{const s="float"===r?"vec2":"vec4",o=n.match(/color/)?"color":s;return l[n]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${n}\nuniform lowp float u_${n}_t;\nattribute ${i} ${s} a_${n};\nvarying ${i} ${r} ${n};\n#else\nuniform ${i} ${r} u_${n};\n#endif\n`:"vec4"===o?`\n#ifndef HAS_UNIFORM_u_${n}\n    ${n} = a_${n};\n#else\n    ${i} ${r} ${n} = u_${n};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${n}\n    ${n} = unpack_mix_${o}(a_${n}, u_${n}_t);\n#else\n    ${i} ${r} ${n} = u_${n};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${n}\nuniform lowp float u_${n}_t;\nattribute ${i} ${s} a_${n};\n#else\nuniform ${i} ${r} u_${n};\n#endif\n`:"vec4"===o?`\n#ifndef HAS_UNIFORM_u_${n}\n    ${i} ${r} ${n} = a_${n};\n#else\n    ${i} ${r} ${n} = u_${n};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${n}\n    ${i} ${r} ${n} = unpack_mix_${o}(a_${n}, u_${n}_t);\n#else\n    ${i} ${r} ${n} = u_${n};\n#endif\n`}),staticAttributes:n,staticUniforms:a}}var we=Object.freeze({__proto__:null,get preludeTerrain(){return qt},prelude:Zt,background:Gt,backgroundPattern:jt,circle:Xt,clippingMask:Wt,heatmap:Ht,heatmapTexture:Kt,collisionBox:Yt,collisionCircle:Jt,debug:Qt,fill:te,fillOutline:ee,fillOutlinePattern:ie,fillPattern:re,fillExtrusion:ne,fillExtrusionPattern:se,hillshadePrepare:oe,hillshade:ae,line:le,lineGradient:ce,linePattern:he,lineSDF:ue,raster:de,symbolIcon:pe,symbolSDF:me,symbolTextAndIcon:fe,terrainRaster:_e,terrainDepth:ge,skybox:ye,skyboxGradient:xe,skyboxCapture:ve});class Te{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,i,r,n,s,o,a){this.context=t;let l=this.boundPaintVertexBuffers.length!==r.length;for(let c=0;!l&&c<r.length;c++)this.boundPaintVertexBuffers[c]!==r[c]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===n&&this.boundVertexOffset===s&&this.boundDynamicVertexBuffer===o&&this.boundDynamicVertexBuffer2===a?(t.bindVertexArrayOES.set(this.vao),o&&o.bind(),n&&n.dynamicDraw&&n.bind(),a&&a.bind()):this.freshBind(e,i,r,n,s,o,a)}freshBind(t,e,i,r,n,s,o){let a;const l=t.numAttributes,c=this.context,h=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),a=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=s,this.boundDynamicVertexBuffer2=o;else{a=c.currentNumAttributes||0;for(let t=l;t<a;t++)h.disableVertexAttribArray(t)}e.enableAttributes(h,t);for(const u of i)u.enableAttributes(h,t);s&&s.enableAttributes(h,t),o&&o.enableAttributes(h,t),e.bind(),e.setVertexAttribPointers(h,t,n);for(const u of i)u.bind(),u.setVertexAttribPointers(h,t,n);s&&(s.bind(),s.setVertexAttribPointers(h,t,n)),r&&r.bind(),o&&(o.bind(),o.setVertexAttribPointers(h,t,n)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ee(e,i){const r=Math.pow(2,i.canonical.z),n=i.canonical.y;return[new t.MercatorCoordinate(0,n/r).toLngLat().lat,new t.MercatorCoordinate(0,(n+1)/r).toLngLat().lat]}function Se(e,i,r,n,s,o,a){const l=e.context,c=l.gl,h=r.fbo;if(!h)return;e.prepareDrawTile(i);const u=e.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,h.colorAttachment.get());const d=((t,e,i,r)=>{const n=i.paint.get("hillshade-shadow-color"),s=i.paint.get("hillshade-highlight-color"),o=i.paint.get("hillshade-accent-color");let a=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);const l=!t.options.moving;return{u_matrix:r||t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:Ee(0,e.tileID),u_light:[i.paint.get("hillshade-exaggeration"),a],u_shadow:n,u_highlight:s,u_accent:o}})(e,r,n,e.terrain?i.posMatrix:null);u.draw(l,c.TRIANGLES,s,o,a,t.CullFaceMode.disabled,d,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function Ie(e,i,r){if(!i.needsDEMTextureUpload)return;const n=e.context,s=n.gl;n.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(r.stride);const o=r.getPixels();i.demTexture?i.demTexture.update(o,{premultiply:!1}):i.demTexture=new t.Texture(n,o,s.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function Ae(e,i,r,n,s,o){const a=e.context,l=a.gl;if(!i.dem)return;const c=i.dem;if(a.activeTexture.set(l.TEXTURE1),Ie(e,i,c),!i.demTexture)return;i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const h=c.dim;a.activeTexture.set(l.TEXTURE0);let u=i.fbo;if(!u){const e=new t.Texture(a,{width:h,height:h,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),(u=i.fbo=a.createFramebuffer(h,h,!0)).colorAttachment.set(e.texture)}a.bindFramebuffer.set(u.framebuffer),a.viewport.set([0,0,h,h]),e.useProgram("hillshadePrepare").draw(a,l.TRIANGLES,n,s,o,t.CullFaceMode.disabled,((e,i)=>{const r=i.stride,n=t.create();return t.ortho(n,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(n,n,[0,-t.EXTENT,0]),{u_matrix:n,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:i.unpackVector}})(i.tileID,c),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}const Ce=(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image0:new t.Uniform1i(e,i.u_image0),u_skirt_height:new t.Uniform1f(e,i.u_skirt_height)}),Me=(t,e)=>({u_matrix:t,u_image0:0,u_skirt_height:e}),ze=new class{constructor(){this.operations={}}newMorphing(t,e,i,r,n){if(t in this.operations){const e=this.operations[t];e.to.tileID.key!==i.tileID.key&&(e.queued=i)}else this.operations[t]={startTime:r,phase:0,duration:n,from:e,to:i,queued:null}}getMorphValuesForProxy(t){if(!(t in this.operations))return null;const e=this.operations[t];return{from:e.from,to:e.to,phase:e.phase}}update(t){for(const e in this.operations){const i=this.operations[e];for(i.phase=(t-i.startTime)/i.duration;i.phase>=1||!this._validOp(i);)if(!this._nextOp(i,t)){delete this.operations[e];break}}}_nextOp(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}_validOp(t){return t.from.hasData()&&t.to.hasData()}},Pe={0:null,1:"TERRAIN_VERTEX_MORPHING"};function ke(e,i,r,n,s){const o=e.context,a=o.gl;let l=e.useProgram("terrainRaster"),c=0;const h=e.colorModeForRenderPass(),u=new t.DepthMode(a.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);ze.update(s);const d=e.transform,p=6*Math.pow(1.5,22-d.zoom)*i.exaggeration();var m,f,_;for(const g of n){const n=r.getTile(g),y=t.StencilMode.disabled,x=i.prevTerrainTileForTile[g.key],v=i.terrainTileForTile[g.key];_=v,null!=(f=x)&&null!=_&&f.hasData()&&_.hasData()&&null!=f.demTexture&&null!=_.demTexture&&f.tileID.key!==_.tileID.key&&ze.newMorphing(g.key,x,v,s,250),o.activeTexture.set(a.TEXTURE0),n.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);const b=ze.getMorphValuesForProxy(g.key),w=b?1:0;let T;b&&(T={morphing:{srcDemTile:b.from,dstDemTile:b.to,phase:t.easeCubicInOut(b.phase)}});const E=Me(g.posMatrix,De(g.canonical,d.renderWorldCopies)?p/10:p);c!==(m=w)&&(l=e.useProgram("terrainRaster",null,Pe[m]),c=m),i.setupElevationDraw(n,l,T),l.draw(o,a.TRIANGLES,u,y,h,t.CullFaceMode.backCCW,E,"terrain_raster",i.gridBuffer,i.gridIndexBuffer,i.gridSegments)}}function De(t,e){const i=1<<t.z;return!e&&(0===t.x||t.x===i-1)||0===t.y||t.y===i-1}const Le=t=>({u_matrix:t});function Re(e,i,r,n,s){if(s>0){const o=t.browser.now(),a=(o-e.timeAdded)/s,l=i?(o-i.timeAdded)/s:-1,c=r.getSource(),h=n.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),u=!i||Math.abs(i.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),d=u&&e.refreshedUponExpiration?1:t.clamp(u?a:1-l,0,1);return e.refreshedUponExpiration&&a>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class Be extends t.SourceCache{constructor(t){const e=A("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new g(B(),null),t.style);super("proxy",e,!1),e.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,i,r){if(e.freezeTileCoverage)return;this.transform=e;const n=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!0}).reduce((i,r)=>{if(i[r.key]="",!this._tiles[r.key]){const i=new t.Tile(r,this._source.tileSize*r.overscaleFactor(),e.tileZoom);i.state="loaded",this._tiles[r.key]=i}return i},{});for(const t in this._tiles)t in n||(this.freeFBO(t),this._tiles[t].state="unloaded",delete this._tiles[t])}freeFBO(t){const e=this.proxyCachedFBO[t];if(void 0!==e){const i=Object.values(e);this.renderCachePool.push(...i),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach(t=>t.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Fe extends t.OverscaledTileID{constructor(t,e,i){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=e,this.posMatrix=i}}class Oe extends t.Elevation{constructor(e,i){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[r,n,s]=function(e){const i=new t.StructArrayLayout4i8,r=new t.StructArrayLayout3ui6;i.reserve(17161),r.reserve(33800);const n=t.EXTENT/128,s=t.EXTENT+n/2,o=s+n;for(let l=-n;l<o;l+=n)for(let e=-n;e<o;e+=n){const r=e<0||e>s||l<0||l>s?24575:0,n=t.clamp(Math.round(e),0,t.EXTENT),o=t.clamp(Math.round(l),0,t.EXTENT);i.emplaceBack(n+r,o,n,o)}const a=(t,e)=>{const i=131*e+t;r.emplaceBack(i+1,i,i+131),r.emplaceBack(i+131,i+131+1,i+1)};for(let t=1;t<129;t++)for(let e=1;e<129;e++)a(e,t);return[0,129].forEach(t=>{for(let e=0;e<130;e++)a(e,t),a(t,e)}),[i,r,32768]}(),o=e.context;this.gridBuffer=o.createVertexBuffer(r,E.members),this.gridIndexBuffer=o.createIndexBuffer(n),this.gridSegments=t.SegmentVector.simpleSegment(0,0,r.length,n.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,r.length,s),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Be(i.map),this.orthoMatrix=t.create(),t.ortho(this.orthoMatrix,0,t.EXTENT,0,t.EXTENT,0,1);const a=o.gl;this._overlapStencilMode=new t.StencilMode({func:a.GEQUAL,mask:255},0,255,a.KEEP,a.KEEP,a.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=i,this._useVertexMorphing=!0}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency()}update(e,i,r){if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;const n=e.terrain.properties;this.sourceCache=e._getSourceCache(n.get("source")),this._exaggeration=n.get("exaggeration");const s=()=>{this.sourceCache.used&&t.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\n`+"This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.");const e=this.sourceCache.getSource().tileSize/128,r=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(i,e*r,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,s(),this._initializing=!0),s(),i.updateElevation(!r),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(i),this._emptyDEMTextureDirty=!0}else this._disable()}_checkRenderCacheEfficiency(){const e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==e.efficiency&&t.warnOnce(`Terrain render cache efficiency is not optimal (${e.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${e.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(t=>t.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const i=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPoint(t.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);const n=this.painter.options;this.renderCached=(n.zooming||n.moving||n.rotating||!!this.forceRenderCached)&&!this._invalidateRenderCache,this._invalidateRenderCache=!1;const s=this.proxyCoords=i.getIds().map(t=>{const e=i.getTileByID(t).tileID;return e.posMatrix=r.calculatePosMatrix(e.toUnwrapped()),e});!function(e,i){const r=i.transform.pointCoordinate(i.transform.getCameraPoint()),n=new t.Point(r.x,r.y);e.sort((e,i)=>{if(i.overscaledZ-e.overscaledZ)return i.overscaledZ-e.overscaledZ;const r=new t.Point(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),s=new t.Point(i.canonical.x+(1<<i.canonical.z)*i.wrap,i.canonical.y),o=n.mult(1<<e.canonical.z);return o.x-=.5,o.y-=.5,o.distSqr(r)-o.distSqr(s)})}(s,this.painter),this._previousZoom=r.zoom;const o=this.proxyToSource||{};this.proxyToSource={},s.forEach(t=>{this.proxyToSource[t.key]={}}),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const t in a){const i=a[t];if(!i.used)continue;if(i!==this.sourceCache&&(this._findCoveringTileCache[i.id]={}),this._setupProxiedCoordsForOrtho(i,e[t],o),i.usedForTerrain)continue;const r=e[t];i.getSource().reparseOverscaled&&this._assignTerrainTiles(r)}this.proxiedCoords[i.id]=s.map(t=>new Fe(t,t.key,this.orthoMatrix)),this._assignTerrainTiles(s),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._setupRenderCache(o),this.renderingToTexture=!1,this._initFBOPool(),this._updateTimestamp=t.browser.now();const l={};this._visibleDemTiles=[];for(const t of this.proxyCoords){const e=this.terrainTileForTile[t.key];if(!e)continue;const i=e.tileID.key;i in l||(this._visibleDemTiles.push(e),l[i]=i)}}_assignTerrainTiles(t){this._initializing||t.forEach(t=>{if(this.terrainTileForTile[t.key])return;const e=this._findTileCoveringTileID(t,this.sourceCache);e&&(this.terrainTileForTile[t.key]=e)})}_prepareDEMTextures(){const t=this.painter.context,e=t.gl;for(const i in this.terrainTileForTile){const r=this.terrainTileForTile[i],n=r.dem;!n||r.demTexture&&!r.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),Ie(this.painter,r,n))}}_prepareDemTileUniforms(t,e,i,r){if(!e||null==e.demTexture)return!1;const n=t.tileID.canonical,s=Math.pow(2,e.tileID.canonical.z-n.z),o=r||"";return i[`u_dem_tl${o}`]=[n.x*s%1,n.y*s%1],i[`u_dem_scale${o}`]=s,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let t=0;const e=this._visibleDemTiles.reduce((e,i)=>{if(!i.dem)return e;const r=i.dem.tree.minimums[0];return r>0&&t++,e+r},0);return t?e/t:0}_updateEmptyDEMTexture(){const e=this.painter.context,i=e.gl;e.activeTexture.set(i.TEXTURE2);const r=this._getLoadedAreaMinimum(),n={width:1,height:1,data:new Uint8Array(t.DEMData.pack(r,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let s=this._emptyDEMTexture;return s?s.update(n,{premultiply:!1}):s=this._emptyDEMTexture=new t.Texture(e,n,i.RGBA,{premultiply:!1}),s}setupElevationDraw(e,i,r){const n=this.painter.context,s=n.gl,o=(a=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(a),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var a;o.u_dem_size=this.sourceCache.getSource().tileSize,o.u_exaggeration=this.exaggeration();let l=null,c=null,h=1;if(r&&r.morphing&&this._useVertexMorphing){const t=r.morphing.srcDemTile,i=r.morphing.dstDemTile;h=r.morphing.phase,t&&i&&(this._prepareDemTileUniforms(e,t,o,"_prev")&&(c=t),this._prepareDemTileUniforms(e,i,o)&&(l=i))}if(c&&l?(n.activeTexture.set(s.TEXTURE2),l.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE,s.NEAREST),n.activeTexture.set(s.TEXTURE4),c.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE,s.NEAREST),o.u_dem_lerp=h):(l=this.terrainTileForTile[e.tileID.key],n.activeTexture.set(s.TEXTURE2),(this._prepareDemTileUniforms(e,l,o)?l.demTexture:this.emptyDEMTexture).bind(s.NEAREST,s.CLAMP_TO_EDGE,s.NEAREST)),r&&r.useDepthForOcclusion&&(n.activeTexture.set(s.TEXTURE3),this._depthTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE,s.NEAREST),o.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),r&&r.useMeterToDem&&l){const e=(1<<l.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;o.u_meter_to_dem=e}r&&r.labelPlaneMatrixInv&&(o.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),i.setTerrainUniformValues(n,o)}renderBatch(e){if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;const i=this.painter,r=this.painter.context,n=this.proxySourceCache,s=this.proxiedCoords[n.id],o=()=>{r.bindFramebuffer.set(null),r.viewport.set([0,0,i.width,i.height]),this.renderingToTexture=!1},a=this._drapedRenderBatches.shift();let l=[];const c=i.style.order;let h=0;for(let u=0;u<s.length;u++){const d=s[u],p=n.getTileByID(d.proxyTileKey),m=n.proxyCachedFBO[d.key]?n.proxyCachedFBO[d.key][e]:void 0;let f,_;if(f=this.currentFBO=void 0!==m?n.renderCache[m]:this.pool[h++],p.texture=f.tex,void 0===m||f.dirty){r.bindFramebuffer.set(f.fb.framebuffer),this.renderedToTile=!1,f.dirty&&(r.clear({color:t.Color.transparent}),f.dirty=!1);for(let t=a.start;t<=a.end;++t){const e=i.style._layers[c[t]];if(e.isHidden(i.transform.zoom))continue;const n=i.style._getLayerSourceCache(e),s=n?this.proxyToSource[d.key][n.id]:[d];if(!s)continue;const o=s;r.viewport.set([0,0,f.fb.width,f.fb.height]),_!==(n?n.id:null)&&(this._setupStencil(s,e,n),_=n?n.id:null),i.renderLayer(i,n,e,o)}f.dirty=this.renderedToTile,this.renderedToTile&&l.push(p.tileID),5===h&&(h=0,l.length>0&&(o(),ke(i,this,n,l,this._updateTimestamp),this.renderingToTexture=!0,l=[]))}else l.push(p.tileID)}return o(),l.length>0&&ke(i,this,n,l,this._updateTimestamp),a.end+1}postRender(){}renderCacheEfficiency(t){const e=t.order.length;if(0===e)return{efficiency:100};let i,r=0,n=0,s=!1;for(let o=0;o<e;++o){const e=t._layers[t.order[o]];this._style.isLayerDraped(e)?(s&&++r,++n):s||(s=!0,i=e.id)}return 0===n?{efficiency:100}:{efficiency:100*(1-r/n),firstUndrapedLayer:i}}raycast(t,e,i){if(!this._visibleDemTiles)return null;const r=this._visibleDemTiles.filter(t=>t.dem).map(r=>{const n=r.tileID,s=Math.pow(2,n.overscaledZ),{x:o,y:a}=n.canonical,l=o/s,c=(o+1)/s,h=a/s,u=(a+1)/s;return{minx:l,miny:h,maxx:c,maxy:u,t:r.dem.tree.raycastRoot(l,h,c,u,t,e,i),tile:r}});r.sort((t,e)=>(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE));for(const n of r){if(null==n.t)return null;const r=n.tile.dem.tree.raycast(n.minx,n.miny,n.maxx,n.maxy,t,e,i);if(null!=r)return r}return null}_createFBO(){const e=this.painter.context,i=e.gl,r=this.drapeBufferSize;e.activeTexture.set(i.TEXTURE0);const n=new t.Texture(e,{width:r[0],height:r[1],data:null},i.RGBA);n.bind(i.LINEAR,i.CLAMP_TO_EDGE);const s=e.createFramebuffer(r[0],r[1],!1);return s.colorAttachment.set(n.texture),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&i.texParameterf(i.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:s,tex:n,dirty:!1,ref:1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){return!this.renderCached||this._style.order.some(t=>{const e=this._style._layers[t],i=!e.isHidden(this.painter.transform.zoom),r=e.getCrossfadeParameters();return"custom"!==e.type&&!i&&!!r&&1!==r.t})}_clearRasterFadeFromRenderCache(){let t=!1;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e]._source instanceof T){t=!0;break}if(t)for(let e=0;e<this._style.order.length;++e){const t=this._style._layers[this._style.order[e]],i=t.isHidden(this.painter.transform.zoom),r=this._style._getLayerSourceCache(t);if("raster"!==t.type||i||!r)continue;const n=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][r.id];if(t)for(const e of t){const t=Re(r.getTile(e),r.findLoadedParent(e,0),r,this.painter.transform,n);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(r.id,e)}}}}_setupDrapedRenderBatches(){const t=this._style.order,e=t.length;if(0===e)return;const i=[];let r,n=0,s=this._style._layers[t[n]];for(;!this._style.isLayerDraped(s)&&s.isHidden(this.painter.transform.zoom)&&++n<e;)s=this._style._layers[t[n]];for(;n<e;++n){const e=this._style._layers[t[n]];e.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(e)?void 0===r&&(r=n):void 0!==r&&(i.push({start:r,end:n-1}),r=void 0))}void 0!==r&&i.push({start:r,end:n-1}),this._drapedRenderBatches=i}_setupRenderCache(t){const e=this.proxySourceCache;if(this._shouldDisableRenderCache()){if(e.renderCache.length>e.renderCachePool.length){const t=Object.values(e.proxyCachedFBO);e.proxyCachedFBO={};for(let i=0;i<t.length;++i){const r=Object.values(t[i]);e.renderCachePool.push(...r)}}return}this._clearRasterFadeFromRenderCache();const i=this.proxyCoords,r=this._tilesDirty;for(let n=i.length-1;n>=0;n--){const s=i[n];if(e.getTileByID(s.key),void 0!==e.proxyCachedFBO[s.key]){const i=t[s.key],n=this.proxyToSource[s.key];let o=0;for(const t in n){const e=n[t],s=i[t];if(!s||s.length!==e.length||e.some((e,i)=>e!==s[i]||r[t]&&r[t].hasOwnProperty(e.key))){o=-1;break}++o}for(const t in e.proxyCachedFBO[s.key])e.renderCache[e.proxyCachedFBO[s.key][t]].dirty=o<0||o!==Object.values(i).length}else for(let t=0;t<this._drapedRenderBatches.length;++t){const i=this._drapedRenderBatches[t];let r=e.renderCachePool.pop();void 0===r&&e.renderCache.length<50&&(r=e.renderCache.length,e.renderCache.push(this._createFBO())),void 0!==r&&(void 0===e.proxyCachedFBO[s.key]&&(e.proxyCachedFBO[s.key]={}),e.proxyCachedFBO[s.key][i.start]=r,e.renderCache[r].dirty=!0)}}this._tilesDirty={}}_setupStencil(e,i,r){if(!r||!this._sourceTilesOverlap[r.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const n=this.painter.context,s=n.gl;if(e.length<=1)return void(this._overlapStencilType=!1);const o=this.currentFBO,a=o.fb;let l;if(i.isTileClipped())l=e.length,this._overlapStencilMode.test={func:s.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);l=1,this._overlapStencilMode.test={func:s.GREATER,mask:255},this._overlapStencilType="Mask"}if(!a.depthAttachment){const e=n.createRenderbuffer(n.gl.DEPTH_STENCIL,a.width,a.height);a.depthAttachment=new t.DepthStencilAttachment(n,a.framebuffer),a.depthAttachment.set(e),n.clear({stencil:0})}o.ref+l>255&&(n.clear({stencil:0}),o.ref=0),o.ref+=l,this._overlapStencilMode.ref=o.ref,i.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(e,i){const r=this.painter,n=this.painter.context,s=n.gl;r._tileClippingMaskIDs={},n.setColorMode(t.ColorMode.disabled),n.setDepthMode(t.DepthMode.disabled);const o=r.useProgram("clippingMask");for(const a of e){const e=r._tileClippingMaskIDs[a.key]=--i;o.draw(n,s.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:s.ALWAYS,mask:0},e,255,s.KEEP,s.KEEP,s.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Le(a.posMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}pointCoordinate(e){const i=this.painter.transform;if(e.x<0||e.x>i.width||e.y<0||e.y>i.height)return null;const r=[e.x,e.y,1,1];t.transformMat4(r,r,i.pixelMatrixInverse),t.scale$1(r,r,1/r[3]),r[0]/=i.worldSize,r[1]/=i.worldSize;const n=i._camera.position,s=t.mercatorZfromAltitude(1,i.center.lat),o=[n[0],n[1],n[2]/s,0],a=t.subtract([],r.slice(0,3),o);t.normalize(a,a);const l=this.raycast(o,a,this._exaggeration);return null!==l&&l?(t.scaleAndAdd(o,o,a,l),o[3]=o[2],o[2]*=s,o):null}drawDepth(){const e=this.painter,i=e.context,r=this.proxySourceCache,n=Math.ceil(e.width),s=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===n&&this._depthFBO.height===s||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const e=i.gl,r=i.createFramebuffer(n,s,!0);i.activeTexture.set(e.TEXTURE0);const o=new t.Texture(i,{width:n,height:s,data:null},e.RGBA);o.bind(e.NEAREST,e.CLAMP_TO_EDGE),r.colorAttachment.set(o.texture);const a=i.createRenderbuffer(i.gl.DEPTH_COMPONENT16,n,s);r.depthAttachment.set(a),this._depthFBO=r,this._depthTexture=o}i.bindFramebuffer.set(this._depthFBO.framebuffer),i.viewport.set([0,0,n,s]),function(e,i,r,n){const s=e.context,o=s.gl;s.clear({depth:1});const a=e.useProgram("terrainDepth"),l=new t.DepthMode(o.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D);for(const c of n){const e=r.getTile(c),n=Me(c.posMatrix,0);i.setupElevationDraw(e,a),a.draw(s,o.TRIANGLES,l,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,n,"terrain_depth",i.gridBuffer,i.gridIndexBuffer,i.gridNoSkirtSegments)}}(e,this,r,this.proxyCoords)}_setupProxiedCoordsForOrtho(t,e,i){if(t.getSource()instanceof S)return this._setupProxiedCoordsForImageSource(t,e,i);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const r=this.proxiedCoords[t.id]=[],n=this.proxyCoords;for(let o=0;o<n.length;o++){const e=n[o],s=this._findTileCoveringTileID(e,t);if(s){const n=this._createProxiedId(e,s,i[e.key]&&i[e.key][t.id]);r.push(n),this.proxyToSource[e.key][t.id]=[n]}}let s=!1;for(let o=0;o<e.length;o++){const n=t.getTile(e[o]);if(!n||!n.hasData())continue;const a=this._findTileCoveringTileID(n.tileID,this.proxySourceCache);if(a&&a.tileID.canonical.z!==n.tileID.canonical.z){const e=this.proxyToSource[a.tileID.key][t.id],o=this._createProxiedId(a.tileID,n,i[a.tileID.key]&&i[a.tileID.key][t.id]);e?e.splice(e.length-1,0,o):this.proxyToSource[a.tileID.key][t.id]=[o],r.push(o),s=!0}}this._sourceTilesOverlap[t.id]=s}_setupProxiedCoordsForImageSource(e,i,r){if(!e.getSource().loaded())return;const n=this.proxiedCoords[e.id]=[],s=this.proxyCoords,o=e.getSource(),a=new t.Point(o.tileID.x,o.tileID.y)._div(1<<o.tileID.z),l=o.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce((t,e)=>(t.min.x=Math.min(t.min.x,e.x-a.x),t.min.y=Math.min(t.min.y,e.y-a.y),t.max.x=Math.max(t.max.x,e.x-a.x),t.max.y=Math.max(t.max.y,e.y-a.y),t),{min:new t.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(e,i)=>{const r=e.wrap+e.canonical.x/(1<<e.canonical.z),n=e.canonical.y/(1<<e.canonical.z),s=t.EXTENT/(1<<e.canonical.z),o=i.wrap+i.canonical.x/(1<<i.canonical.z),a=i.canonical.y/(1<<i.canonical.z);return r+s<o+l.min.x||r>o+l.max.x||n+s<a+l.min.y||n>a+l.max.y};for(let t=0;t<s.length;t++){const o=s[t];for(let t=0;t<i.length;t++){const s=e.getTile(i[t]);if(!s||!s.hasData())continue;if(c(o,s.tileID))continue;const a=this._createProxiedId(o,s,r[o.key]&&r[o.key][e.id]),l=this.proxyToSource[o.key][e.id];l?l.push(a):this.proxyToSource[o.key][e.id]=[a],n.push(a)}}}_createProxiedId(e,i,r){let n=this.orthoMatrix;if(r){const t=r.find(t=>t.key===i.tileID.key);if(t)return t}if(i.tileID.key!==e.key){const r=e.canonical.z-i.tileID.canonical.z;let s,o,a;n=t.create();const l=i.tileID.wrap-e.wrap<<e.overscaledZ;r>0?(o=(s=t.EXTENT>>r)*((i.tileID.canonical.x<<r)-e.canonical.x+l),a=s*((i.tileID.canonical.y<<r)-e.canonical.y)):(s=t.EXTENT<<-r,o=t.EXTENT*(i.tileID.canonical.x-(e.canonical.x+l<<-r)),a=t.EXTENT*(i.tileID.canonical.y-(e.canonical.y<<-r))),t.ortho(n,0,s,0,s,0,1),t.translate(n,n,[o,a,0])}return new Fe(i.tileID,e.key,n)}_findTileCoveringTileID(e,i){let r=i.getTile(e);if(r&&r.hasData())return r;const n=this._findCoveringTileCache[i.id],s=n[e.key];if((r=s?i.getTileByID(s):null)&&r.hasData()||null===s)return r;let o=r?r.tileID:e,a=o.overscaledZ;const l=i.getSource().minzoom,c=[];if(!s){const n=i.getSource().maxzoom;if(e.canonical.z>=n){const r=e.canonical.z-n;i.getSource().reparseOverscaled?(a=Math.max(e.canonical.z+2,i.transform.tileZoom),o=new t.OverscaledTileID(a,e.wrap,n,e.canonical.x>>r,e.canonical.y>>r)):0!==r&&(a=n,o=new t.OverscaledTileID(a,e.wrap,n,e.canonical.x>>r,e.canonical.y>>r))}o.key!==e.key&&(c.push(o.key),r=i.getTile(o))}const h=t=>{c.forEach(e=>{n[e]=t}),c.length=0};for(a-=1;a>=l&&(!r||!r.hasData());a--){r&&h(r.tileID.key);const t=o.calculateScaledKey(a);if((r=i.getTileByID(t))&&r.hasData())break;const e=n[t];if(null===e)break;void 0===e?c.push(t):r=i.getTileByID(e)}return h(r?r.tileID.key:null),r&&r.hasData()?r:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(t){this.renderedToTile||(this.renderedToTile=!0)}_clearRenderCacheForTile(t,e){let i=this._tilesDirty[t];i||(i=this._tilesDirty[t]={}),i[e.key]=!0}}function Ue(t){const e=[];for(let i=0;i<t.length;i++){if(null===t[i])continue;const r=t[i].split(" ");e.push(r.pop())}return e}class Ve{static cacheKey(t,e,i){let r=`${t}${i?i.cacheKey:""}`;for(const n of e)r+=`/${n}`;return r}constructor(e,i,r,n,s,o){const a=e.gl;this.program=a.createProgram();const l=Ue(r.staticAttributes),c=n?n.getBinderAttributes():[],h=l.concat(c),u=r.staticUniforms?Ue(r.staticUniforms):[],d=n?n.getBinderUniforms():[],p=u.concat(d),m=[];for(const t of p)m.indexOf(t)<0&&m.push(t);let f=n?n.defines():[];const _=(f=f.concat(o.map(t=>`#define ${t}`))).concat(Zt.fragmentSource,r.fragmentSource).join("\n"),g=f.concat(Zt.vertexSource,qt.vertexSource,r.vertexSource).join("\n"),y=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);a.shaderSource(y,_),a.compileShader(y),a.attachShader(this.program,y);const x=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);a.shaderSource(x,g),a.compileShader(x),a.attachShader(this.program,x),this.attributes={};const v={};this.numAttributes=h.length;for(let t=0;t<this.numAttributes;t++)h[t]&&(a.bindAttribLocation(this.program,t,h[t]),this.attributes[h[t]]=t);a.linkProgram(this.program),a.deleteShader(x),a.deleteShader(y);for(let t=0;t<m.length;t++){const e=m[t];if(e&&!v[e]){const t=a.getUniformLocation(this.program,e);t&&(v[e]=t)}}this.fixedUniforms=s(e,v),this.binderUniforms=n?n.getUniforms(e,v):[],-1!==o.indexOf("TERRAIN")&&(this.terrainUniforms=((e,i)=>({u_dem:new t.Uniform1i(e,i.u_dem),u_dem_prev:new t.Uniform1i(e,i.u_dem_prev),u_dem_unpack:new t.Uniform4f(e,i.u_dem_unpack),u_dem_tl:new t.Uniform2f(e,i.u_dem_tl),u_dem_scale:new t.Uniform1f(e,i.u_dem_scale),u_dem_tl_prev:new t.Uniform2f(e,i.u_dem_tl_prev),u_dem_scale_prev:new t.Uniform1f(e,i.u_dem_scale_prev),u_dem_size:new t.Uniform1f(e,i.u_dem_size),u_dem_lerp:new t.Uniform1f(e,i.u_dem_lerp),u_exaggeration:new t.Uniform1f(e,i.u_exaggeration),u_depth:new t.Uniform1i(e,i.u_depth),u_depth_size_inv:new t.Uniform2f(e,i.u_depth_size_inv),u_meter_to_dem:new t.Uniform1f(e,i.u_meter_to_dem),u_label_plane_matrix_inv:new t.UniformMatrix4f(e,i.u_label_plane_matrix_inv)}))(e,v))}setTerrainUniformValues(t,e){if(!this.terrainUniforms)return;const i=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)i[t].set(e[t])}}draw(t,e,i,r,n,s,o,a,l,c,h,u,d,p,m,f){const _=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(r),t.setColorMode(n),t.setCullFace(s);for(const y in this.fixedUniforms)this.fixedUniforms[y].set(o[y]);p&&p.setUniforms(t,this.binderUniforms,u,{zoom:d});const g={[_.LINES]:2,[_.TRIANGLES]:3,[_.LINE_STRIP]:1}[e];for(const y of h.get()){const i=y.vaos||(y.vaos={});(i[a]||(i[a]=new Te)).bind(t,this,l,p?p.getPaintVertexBuffers():[],c,y.vertexOffset,m,f),_.drawElements(e,y.primitiveLength*g,_.UNSIGNED_SHORT,y.primitiveOffset*g*2)}}}function Ne(t,e,i){const r=1/y(i,1,e.transform.tileZoom),n=Math.pow(2,i.tileID.overscaledZ),s=i.tileSize*Math.pow(2,e.transform.tileZoom)/n,o=s*(i.tileID.canonical.x+i.tileID.wrap*n),a=s*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[o>>16,a>>16],u_pixel_coord_lower:[65535&o,65535&a]}}const $e=(e,i,r,n)=>{const s=i.style.light,o=s.properties.get("position"),a=[o.x,o.y,o.z],l=t.create$1();"viewport"===s.properties.get("anchor")&&(t.fromRotation(l,-i.transform.angle),t.transformMat3(a,a,l));const c=s.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:s.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:n}},qe=(e,i,r,n,s,o,a)=>t.extend($e(e,i,r,n),Ne(o,i,a),{u_height_factor:-Math.pow(2,s.overscaledZ)/a.tileSize/8}),Ze=t=>({u_matrix:t}),Ge=(e,i,r,n)=>t.extend(Ze(e),Ne(r,i,n)),je=(t,e)=>({u_matrix:t,u_world:e}),Xe=(e,i,r,n,s)=>t.extend(Ge(e,i,r,n),{u_world:s}),We=(e,i,r,n)=>{const s=e.transform;let o;if("map"===n.paint.get("circle-pitch-alignment")){const t=y(r,1,s.zoom);o=[t,t]}else o=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_matrix:e.translatePosMatrix(i.posMatrix,r,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:o}},He=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},Ke=(e,i,r)=>{const n=t.EXTENT/r.tileSize;return{u_matrix:e,u_camera_to_center_distance:i.cameraToCenterDistance,u_extrude_scale:[i.pixelsToGLUnits[0]/n,i.pixelsToGLUnits[1]/n]}},Ye=(t,e,i=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}),Je=(t,e,i,r)=>({u_matrix:t,u_extrude_scale:y(e,1,i),u_intensity:r}),Qe=(e,i,r,n)=>{const s=e.transform;return{u_matrix:ni(e,i,r,n),u_ratio:1/y(i,1,s.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]]}},ti=(e,i,r,n,s)=>t.extend(Qe(e,i,r,n),{u_image:0,u_image_height:s}),ei=(e,i,r,n,s)=>{const o=e.transform,a=ri(i,o);return{u_matrix:ni(e,i,r,s),u_texsize:i.imageAtlasTexture.size,u_ratio:1/y(i,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[a,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},ii=(e,i,r,n,s,o)=>{const a=e.lineAtlas,l=ri(i,e.transform),c="round"===r.layout.get("line-cap"),h=a.getDash(n.from,c),u=a.getDash(n.to,c),d=h.width*s.fromScale,p=u.width*s.toScale;return t.extend(Qe(e,i,r,o),{u_patternscale_a:[l/d,-h.height/2],u_patternscale_b:[l/p,-u.height/2],u_sdfgamma:a.width/(256*Math.min(d,p)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:h.y,u_tex_y_b:u.y,u_mix:s.t})};function ri(t,e){return 1/y(t,1,e.tileZoom)}function ni(t,e,i,r){return t.translatePosMatrix(r||e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const si=(t,e,i,r,n)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(o=n.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(s=n.paint.get("raster-contrast"),s>0?1/(1-s):1+s),u_spin_weights:oi(n.paint.get("raster-hue-rotate"))};var s,o};function oi(t){t*=Math.PI/180;const e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}const ai=(t,e,i,r,n,s,o,a,l,c)=>{const h=n.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:h.cameraToCenterDistance,u_pitch:h.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:h.width/h.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:o,u_coord_matrix:a,u_is_text:+l,u_pitch_with_map:+r,u_texsize:c,u_texture:0}},li=(e,i,r,n,s,o,a,l,c,h,u)=>{const{cameraToCenterDistance:d,_pitch:p}=s.transform;return t.extend(ai(e,i,r,n,s,o,a,l,c,h),{u_gamma_scale:n?d*Math.cos(s.terrain?0:p):1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+u})},ci=(e,i,r,n,s,o,a,l,c,h)=>t.extend(li(e,i,r,n,s,o,a,l,!0,c,!0),{u_texsize_icon:h,u_texture_icon:1}),hi=(t,e,i)=>({u_matrix:t,u_opacity:e,u_color:i}),ui=(e,i,r,n,s,o)=>t.extend(function(t,e,i,r){const n=i.imageManager.getPattern(t.from.toString()),s=i.imageManager.getPattern(t.to.toString()),{width:o,height:a}=i.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,i.transform.tileZoom)/l,h=c*(r.tileID.canonical.x+r.tileID.wrap*l),u=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:s.tl,u_pattern_br_b:s.br,u_texsize:[o,a],u_mix:e.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:s.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/y(r,1,i.transform.tileZoom),u_pixel_coord_upper:[h>>16,u>>16],u_pixel_coord_lower:[65535&h,65535&u]}}(n,o,r,s),{u_matrix:e,u_opacity:i}),di={fillExtrusion:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_opacity:new t.Uniform1f(e,i.u_opacity)}),fillExtrusionPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade),u_opacity:new t.Uniform1f(e,i.u_opacity)}),fill:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),fillPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),fillOutline:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}),fillOutlinePattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),circle:(e,i)=>({u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),collisionBox:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale)}),collisionCircle:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,i.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,i.u_viewport_size)}),debug:(e,i)=>({u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_overlay:new t.Uniform1i(e,i.u_overlay),u_overlay_scale:new t.Uniform1f(e,i.u_overlay_scale)}),clippingMask:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),heatmap:(e,i)=>({u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),heatmapTexture:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}),hillshade:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}),hillshadePrepare:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_unpack:new t.Uniform4f(e,i.u_unpack)}),line:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels)}),lineGradient:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_image:new t.Uniform1i(e,i.u_image),u_image_height:new t.Uniform1f(e,i.u_image_height)}),linePattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_image:new t.Uniform1i(e,i.u_image),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),lineSDF:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,i.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,i.u_sdfgamma),u_image:new t.Uniform1i(e,i.u_image),u_tex_y_a:new t.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,i.u_tex_y_b),u_mix:new t.Uniform1f(e,i.u_mix)}),raster:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}),symbolIcon:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}),symbolSDF:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}),symbolTextAndIcon:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texsize_icon:new t.Uniform2f(e,i.u_texsize_icon),u_texture:new t.Uniform1i(e,i.u_texture),u_texture_icon:new t.Uniform1i(e,i.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}),background:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}),backgroundPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)}),terrainRaster:Ce,terrainDepth:Ce,skybox:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_sun_direction:new t.Uniform3f(e,i.u_sun_direction),u_cubemap:new t.Uniform1i(e,i.u_cubemap),u_opacity:new t.Uniform1f(e,i.u_opacity),u_temporal_offset:new t.Uniform1f(e,i.u_temporal_offset)}),skyboxGradient:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_center_direction:new t.Uniform3f(e,i.u_center_direction),u_radius:new t.Uniform1f(e,i.u_radius),u_opacity:new t.Uniform1f(e,i.u_opacity),u_temporal_offset:new t.Uniform1f(e,i.u_temporal_offset)}),skyboxCapture:(e,i)=>({u_matrix_3f:new t.UniformMatrix3f(e,i.u_matrix_3f),u_sun_direction:new t.Uniform3f(e,i.u_sun_direction),u_sun_intensity:new t.Uniform1f(e,i.u_sun_intensity),u_color_tint_r:new t.Uniform4f(e,i.u_color_tint_r),u_color_tint_m:new t.Uniform4f(e,i.u_color_tint_m),u_luminance:new t.Uniform1f(e,i.u_luminance)})};let pi;function mi(e,i,r,n,s,o,a){const l=e.context,c=l.gl,h=e.useProgram("collisionBox"),u=[];let d=0,p=0;for(let v=0;v<n.length;v++){const m=n[v],f=i.getTile(m),_=f.getBucket(r);if(!_)continue;let g=m.posMatrix;0===s[0]&&0===s[1]||(g=e.translatePosMatrix(m.posMatrix,f,s,o));const y=a?_.textCollisionBox:_.iconCollisionBox,x=_.collisionCircleArray;if(x.length>0){const i=t.create(),r=g;t.mul(i,_.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(i,i,_.placementViewportMatrix),u.push({circleArray:x,circleOffset:p,transform:r,invTransform:i}),p=d+=x.length/4}y&&(e.terrain&&e.terrain.setupElevationDraw(f,h),h.draw(l,c.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,Ke(g,e.transform,f),r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,null,e.transform.zoom,null,y.collisionVertexBuffer,y.collisionVertexBufferExt))}if(!a||!u.length)return;const m=e.useProgram("collisionCircle"),f=new t.StructArrayLayout2f1f2i16;f.resize(4*d),f._trim();let _=0;for(const t of u)for(let e=0;e<t.circleArray.length/4;e++){const i=4*e,r=t.circleArray[i+0],n=t.circleArray[i+1],s=t.circleArray[i+2],o=t.circleArray[i+3];f.emplace(_++,r,n,s,o,0),f.emplace(_++,r,n,s,o,1),f.emplace(_++,r,n,s,o,2),f.emplace(_++,r,n,s,o,3)}(!pi||pi.length<2*d)&&(pi=function(e){const i=2*d,r=new t.StructArrayLayout3ui6;r.resize(i),r._trim();for(let t=0;t<i;t++){const e=6*t;r.uint16[e+0]=4*t+0,r.uint16[e+1]=4*t+1,r.uint16[e+2]=4*t+2,r.uint16[e+3]=4*t+2,r.uint16[e+4]=4*t+3,r.uint16[e+5]=4*t+0}return r}());const g=l.createIndexBuffer(pi,!0),y=l.createVertexBuffer(f,t.collisionCircleLayout.members,!0);for(const v of u){const i={u_matrix:v.transform,u_inv_matrix:v.invTransform,u_camera_to_center_distance:(x=e.transform).cameraToCenterDistance,u_viewport_size:[x.width,x.height]};m.draw(l,c.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,i,r.id,y,g,t.SegmentVector.simpleSegment(0,2*v.circleOffset,v.circleArray.length,v.circleArray.length/2),null,e.transform.zoom,null,null,null)}var x;y.destroy(),g.destroy()}const fi=t.identity(new Float32Array(16));function _i(e,i,r,n,s,o){const{horizontalAlign:a,verticalAlign:l}=t.getAnchorAlignment(e),c=-(a-.5)*i,h=-(l-.5)*r,u=t.evaluateVariableOffset(e,n);return new t.Point((c/s+u[0])*o,(h/s+u[1])*o)}function gi(e,i,r,n,s,o,a,l,c,h,u,d){const p=e.text.placedSymbolArray,m=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,_={};m.clear();for(let g=0;g<p.length;g++){const f=p.get(g),y=e.allowVerticalPlacement&&!f.placedOrientation,x=f.hidden||!f.crossTileID||y?null:n[f.crossTileID];if(x){const n=new t.Point(f.anchorX,f.anchorY),p=d(n),g=Y(n,r?l:a,p),y=J(o.cameraToCenterDistance,g.signedDistanceFromCamera);let v=s.evaluateSizeForFeature(e.textSizeData,h,f)*y/t.ONE_EM;r&&(v*=e.tilePixelRatio/c);const{width:b,height:w,anchor:T,textOffset:E,textBoxScale:S}=x,I=_i(T,b,w,E,S,v),A=r?Y(n.add(I),a,p).point:g.point.add(i?I.rotate(-o.angle):I),C=e.allowVerticalPlacement&&f.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<f.numGlyphs;e++)t.addDynamicAttributes(m,A,C);u&&f.associatedIconIndex>=0&&(_[f.associatedIconIndex]={shiftedAnchor:A,angle:C})}else at(f.numGlyphs,m)}if(u){f.clear();const i=e.icon.placedSymbolArray;for(let e=0;e<i.length;e++){const r=i.get(e);if(r.hidden)at(r.numGlyphs,f);else{const i=_[e];if(i)for(let e=0;e<r.numGlyphs;e++)t.addDynamicAttributes(f,i.shiftedAnchor,i.angle);else at(r.numGlyphs,f)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(m)}function yi(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function xi(e,i,r,n,s,o,a,l,c,h,u,d){const p=e.context,m=p.gl,f=e.transform,_="map"===l,g="map"===c,x=_&&"point"!==r.layout.get("symbol-placement"),v=_&&!g&&!x,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1);let w=!1;const T=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),E=r.layout.get("text-variable-anchor"),S=[],I=e.terrain&&g?["PITCH_WITH_MAP_TERRAIN"]:null;for(const A of n){const n=i.getTile(A),l=n.getBucket(r);if(!l)continue;const c=s?l.text:l.icon;if(!c||!c.segments.get().length)continue;const u=c.programConfigurations.get(r.id),d=s||l.sdfIcons,p=s?l.textSizeData:l.iconSizeData,T=g||0!==f.pitch,C=e.useProgram(yi(d,s,l),u,I),M=t.evaluateSizeForZoom(p,f.zoom);let z,P,k,D,L=[0,0],R=null;if(s){if(P=n.glyphAtlasTexture,k=m.LINEAR,z=n.glyphAtlasTexture.size,l.iconsInText){L=n.imageAtlasTexture.size,R=n.imageAtlasTexture;const t="composite"===p.kind||"camera"===p.kind;D=T||e.options.rotating||e.options.zooming||t?m.LINEAR:m.NEAREST}}else{const t=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;P=n.imageAtlasTexture,k=d||e.options.rotating||e.options.zooming||t||T?m.LINEAR:m.NEAREST,z=n.imageAtlasTexture.size}const B=y(n,1,e.transform.zoom),F=H(A.posMatrix,g,_,e.transform,B),O=e.terrain&&g&&x?t.invert(new Float32Array(16),F):fi,U=K(A.posMatrix,g,_,e.transform,B),V=E&&l.hasTextData(),N="none"!==r.layout.get("icon-text-fit")&&V&&l.hasIconData();if(x){const t=f.elevation;tt(l,A.posMatrix,e,s,F,U,g,h,t?e=>t.getAtTileOffset(A,e.x,e.y):null)}const $=e.translatePosMatrix(A.posMatrix,n,o,a),q=x||s&&E||N?fi:F,Z=e.translatePosMatrix(U,n,o,a,!0),G=d&&0!==r.paint.get(s?"text-halo-width":"icon-halo-width").constantOr(1);let j;const X={program:C,buffers:c,uniformValues:j=d?l.iconsInText?ci(p.kind,M,v,g,e,$,q,Z,z,L):li(p.kind,M,v,g,e,$,q,Z,s,z,!0):ai(p.kind,M,v,g,e,$,q,Z,s,z),atlasTexture:P,atlasTextureIcon:R,atlasInterpolation:k,atlasInterpolationIcon:D,isSDF:d,hasHalo:G,tile:n,labelPlaneMatrixInv:O};if(b&&l.canOverlap){w=!0;const e=c.segments.get();for(const i of e)S.push({segments:new t.SegmentVector([i]),sortKey:i.sortKey,state:X})}else S.push({segments:c.segments,sortKey:0,state:X})}w&&S.sort((t,e)=>t.sortKey-e.sortKey);for(const t of S){const i=t.state;if(e.terrain&&e.terrain.setupElevationDraw(i.tile,i.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:i.labelPlaneMatrixInv}),p.activeTexture.set(m.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,m.CLAMP_TO_EDGE),i.atlasTextureIcon&&(p.activeTexture.set(m.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),i.isSDF){const n=i.uniformValues;i.hasHalo&&(n.u_is_halo=1,vi(i.buffers,t.segments,r,e,i.program,T,u,d,n)),n.u_is_halo=0}vi(i.buffers,t.segments,r,e,i.program,T,u,d,i.uniformValues)}}function vi(e,i,r,n,s,o,a,l,c){const h=n.context;s.draw(h,h.gl.TRIANGLES,o,a,l,t.CullFaceMode.disabled,c,r.id,e.layoutVertexBuffer,e.indexBuffer,i,r.paint,n.transform.zoom,e.programConfigurations.get(r.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function bi(e,i,r,n,s,o,a){const l=e.context.gl,c=r.paint.get("fill-pattern"),h=c&&c.constantOr(1),u=r.getCrossfadeParameters();let d,p,m,f,_;a?(p=h&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(p=h?"fillPattern":"fill",d=l.TRIANGLES);for(const g of n){const n=i.getTile(g);if(h&&!n.patternsLoaded())continue;const y=n.getBucket(r);if(!y)continue;e.prepareDrawTile(g);const x=y.programConfigurations.get(r.id),v=e.useProgram(p,x);h&&(e.context.activeTexture.set(l.TEXTURE0),n.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),x.updatePaintBuffers(u));const b=c.constantOr(null);if(b&&n.imageAtlas){const t=n.imageAtlas,e=t.patternPositions[b.to.toString()],i=t.patternPositions[b.from.toString()];e&&i&&x.setConstantPatternPositions(e,i)}const w=e.translatePosMatrix(g.posMatrix,n,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(a){f=y.indexBuffer2,_=y.segments2;const t=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];m="fillOutlinePattern"===p&&h?Xe(w,e,u,n,t):je(w,t)}else f=y.indexBuffer,_=y.segments,m=h?Ge(w,e,u,n):Ze(w);v.draw(e.context,d,s,e.stencilModeForClipping(g),o,t.CullFaceMode.disabled,m,r.id,y.layoutVertexBuffer,f,_,r.paint,e.transform.zoom,x)}}function wi(e,i,r,n,s,o,a){const l=e.context,c=l.gl,h=r.paint.get("fill-extrusion-pattern"),u=h.constantOr(1),d=r.getCrossfadeParameters(),p=r.paint.get("fill-extrusion-opacity");for(const m of n){const n=i.getTile(m),f=n.getBucket(r);if(!f)continue;const _=f.programConfigurations.get(r.id),g=e.useProgram(u?"fillExtrusionPattern":"fillExtrusion",_);if(e.terrain){const t=e.terrain;if(!f.enableTerrain)continue;if(t.setupElevationDraw(n,g,{useMeterToDem:!0}),Ti(l,i,m,f,r,t),!f.centroidVertexBuffer){const t=g.attributes.a_centroid_pos;void 0!==t&&c.vertexAttrib2f(t,0,0)}}u&&(e.context.activeTexture.set(c.TEXTURE0),n.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),_.updatePaintBuffers(d));const y=h.constantOr(null);if(y&&n.imageAtlas){const t=n.imageAtlas,e=t.patternPositions[y.to.toString()],i=t.patternPositions[y.from.toString()];e&&i&&_.setConstantPatternPositions(e,i)}const x=e.translatePosMatrix(m.posMatrix,n,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),v=r.paint.get("fill-extrusion-vertical-gradient"),b=u?qe(x,e,v,p,m,d,n):$e(x,e,v,p);g.draw(l,l.gl.TRIANGLES,s,o,a,t.CullFaceMode.backCCW,b,r.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,r.paint,e.transform.zoom,_,e.terrain?f.centroidVertexBuffer:null)}}function Ti(e,i,r,n,s,o){const a=[e=>{let i=e.canonical.x-1,r=e.wrap;return i<0&&(i=(1<<e.canonical.z)-1,r--),new t.OverscaledTileID(e.overscaledZ,r,e.canonical.z,i,e.canonical.y)},e=>{let i=e.canonical.x+1,r=e.wrap;return i===1<<e.canonical.z&&(i=0,r++),new t.OverscaledTileID(e.overscaledZ,r,e.canonical.z,i,e.canonical.y)},e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)],l=t=>{const e=i.getSource().maxzoom;for(const r of[0,-1,1]){if(t.overscaledZ+r<e)continue;if(r>0&&t.overscaledZ<e)continue;const n=i.getTileByID(t.calculateScaledKey(t.overscaledZ+r));if(n&&n.hasData()){const t=n.getBucket(s);if(t)return t}}},c=[0,0,0],h=(e,i)=>(c[0]=Math.min(e.min.y,i.min.y),c[1]=Math.max(e.max.y,i.max.y),c[2]=t.EXTENT-i.min.x>e.max.x?i.min.x-t.EXTENT:e.max.x,c),u=(e,i)=>(c[0]=Math.min(e.min.x,i.min.x),c[1]=Math.max(e.max.x,i.max.x),c[2]=t.EXTENT-i.min.y>e.max.y?i.min.y-t.EXTENT:e.max.y,c),d=[(t,e)=>h(t,e),(t,e)=>h(e,t),(t,e)=>u(t,e),(t,e)=>u(e,t)],p=new t.Point(0,0);let m,f,_;const g=(e,i,n,s,a)=>{const l=[[s?n:e,s?e:n,0],[s?n:i,s?i:n,0]],c=a<0?t.EXTENT+a:a,h=[s?c:(e+i)/2,s?(e+i)/2:c,0];return 0===n&&a<0||0!==n&&a>0?o.getForTilePoints(_,[h],!0,f):l.push(h),o.getForTilePoints(r,l,!0,m),Math.max(l[0][2],l[1][2],h[2])/o.exaggeration()};for(let y=0;y<4;y++){const e=n.borders[y];if(0===e.length&&(n.borderDone[y]=!0),n.borderDone[y])continue;const i=_=a[y](r),s=l(i);if(!s||!s.enableTerrain)continue;if(!(f=o.findDEMTileFor(i))||!f.dem)continue;if(!m){const t=o.findDEMTileFor(r);if(!t||!t.dem)return;m=t}const c=(y<2?1:5)-y,h=s.borders[c];let u=0;for(let r=0;r<e.length;r++){const i=n.featuresOnBorder[e[r]],o=i.borders[y];let a;for(;u<h.length&&!((a=s.featuresOnBorder[h[u]]).borders[c][1]>o[0]+3);)s.borderDone[c]||s.encodeCentroid(void 0,a,!1),u++;if(a&&u<h.length){const e=u;let r=0;for(;!(a.borders[c][0]>o[1]-3)&&(r++,++u!==h.length);)a=s.featuresOnBorder[h[u]];if(a=s.featuresOnBorder[h[e]],i.intersectsCount()>1||a.intersectsCount()>1||1!==r){1!==r&&(u=e),n.encodeCentroid(void 0,i,!1),s.borderDone[c]||s.encodeCentroid(void 0,a,!1);continue}const l=d[y](i,a),m=y%2?t.EXTENT-1:0;p.x=g(l[0],Math.min(t.EXTENT-1,l[1]),m,y<2,l[2]),p.y=0,n.encodeCentroid(p,i,!1),s.borderDone[c]||s.encodeCentroid(p,a,!1)}else n.encodeCentroid(void 0,i,!1)}n.borderDone[y]=n.needsCentroidUpdate=!0,s.borderDone[c]||(s.borderDone[c]=s.needsCentroidUpdate=!0)}(n.needsCentroidUpdate||!n.centroidVertexBuffer&&0!==n.centroidVertexArray.length)&&n.uploadCentroid(e)}const Ei=new t.Color(1,0,0,1),Si=new t.Color(0,1,0,1),Ii=new t.Color(0,0,1,1),Ai=new t.Color(1,0,1,1),Ci=new t.Color(0,1,1,1);function Mi(t,e,i,r){Pi(t,0,e+i/2,t.transform.width,i,r)}function zi(t,e,i,r){Pi(t,e-i/2,0,i,t.transform.height,r)}function Pi(e,i,r,n,s,o){const a=e.context,l=a.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,n*t.browser.devicePixelRatio,s*t.browser.devicePixelRatio),a.clear({color:o}),l.disable(l.SCISSOR_TEST)}function ki(e,i,r){const n=e.context,s=n.gl,o=r.posMatrix,a=e.useProgram("debug"),l=i.getTileByID(r.key);e.terrain&&e.terrain.setupElevationDraw(l,a);const c=t.DepthMode.disabled,h=t.StencilMode.disabled,u=e.colorModeForRenderPass();n.activeTexture.set(s.TEXTURE0),e.emptyTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),a.draw(n,s.LINE_STRIP,c,h,u,t.CullFaceMode.disabled,Ye(o,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);const d=l.latestRawTileData,p=Math.floor((d&&d.byteLength||0)/1024),m=i.getTile(r).tileSize,f=512/Math.min(m,512)*(r.overscaledZ/e.transform.zoom)*.5;let _=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(_+=` => ${r.overscaledZ}`),function(t,e){t.initDebugOverlayCanvas();const i=t.debugOverlayCanvas,r=t.context.gl,n=t.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,i.width,i.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(e,5,5),n.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,`${_} ${p}kb`),a.draw(n,s.TRIANGLES,c,h,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,Ye(o,t.Color.transparent,f),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}const Di=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Li}=Di;function Ri(t,e,i,r){t.emplaceBack(e,i,r)}class Bi{constructor(e){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,Ri(this.vertexArray,-1,-1,1),Ri(this.vertexArray,1,-1,1),Ri(this.vertexArray,-1,1,1),Ri(this.vertexArray,1,1,1),Ri(this.vertexArray,-1,-1,-1),Ri(this.vertexArray,1,-1,-1),Ri(this.vertexArray,-1,1,-1),Ri(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,Li),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function Fi(e,i,r,n,s,o){const a=e.gl,l=i.paint.get("sky-atmosphere-color"),c=i.paint.get("sky-atmosphere-halo-color"),h=i.paint.get("sky-atmosphere-sun-intensity"),u=((t,e,i,r,n)=>({u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:i,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[n.r,n.g,n.b,n.a],u_luminance:5e-5}))(t.fromMat4([],n),s,h,l,c);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+o,i.skyboxTexture,0),r.draw(e,a.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,u,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const Oi={symbol:function(e,i,r,n,s){if("translucent"!==e.renderPass)return;const o=t.StencilMode.disabled,a=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,i,r,n,s,o,a){const l=i.transform,c="map"===s,h="map"===o;for(const u of e){const e=n.getTile(u),s=e.getBucket(r);if(!s||!s.text||!s.text.segments.get().length)continue;const o=t.evaluateSizeForZoom(s.textSizeData,l.zoom),d=y(e,1,i.transform.zoom),p=H(u.posMatrix,h,c,i.transform,d),m="none"!==r.layout.get("icon-text-fit")&&s.hasIconData();if(o){const i=Math.pow(2,l.zoom-e.tileID.overscaledZ),r=l.elevation;gi(s,c,h,a,t.symbolSize,l,p,u.posMatrix,i,o,m,r?t=>r.getAtTileOffset(u,t.x,t.y):t=>0)}}}(n,e,r,i,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),s),0!==r.paint.get("icon-opacity").constantOr(1)&&xi(e,i,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,a),0!==r.paint.get("text-opacity").constantOr(1)&&xi(e,i,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,a),i.map.showCollisionBoxes&&(mi(e,i,r,n,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),mi(e,i,r,n,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(e,i,r,n){if("translucent"!==e.renderPass)return;const s=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),a=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0===s.constantOr(1)&&(0===o.constantOr(1)||0===a.constantOr(1)))return;const c=e.context,h=c.gl,u=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),d=t.StencilMode.disabled,p=e.colorModeForRenderPass(),m=[];for(let f=0;f<n.length;f++){const s=n[f],o=i.getTile(s),a=o.getBucket(r);if(!a)continue;const c=a.programConfigurations.get(r.id),h=He(r),u={programConfiguration:c,program:e.useProgram("circle",c,h),layoutVertexBuffer:a.layoutVertexBuffer,indexBuffer:a.indexBuffer,uniformValues:We(e,s,o,r),tile:o};if(l){const e=a.segments.get();for(const i of e)m.push({segments:new t.SegmentVector([i]),sortKey:i.sortKey,state:u})}else m.push({segments:a.segments,sortKey:0,state:u})}l&&m.sort((t,e)=>t.sortKey-e.sortKey);for(const f of m){const{programConfiguration:i,program:n,layoutVertexBuffer:s,indexBuffer:o,uniformValues:a,tile:l}=f.state,m=f.segments;e.terrain&&e.terrain.setupElevationDraw(l,n,{useDepthForOcclusion:!0}),n.draw(c,h.TRIANGLES,u,d,p,t.CullFaceMode.disabled,a,r.id,s,o,m,r.paint,e.transform.zoom,i)}},heatmap:function(e,i,r,n){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const s=e.context,o=s.gl,a=t.StencilMode.disabled,l=new t.ColorMode([o.ONE,o.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){const r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let n=i.heatmapFbo;if(n)r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),t.bindFramebuffer.set(n.framebuffer);else{const s=r.createTexture();r.bindTexture(r.TEXTURE_2D,s),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),n=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,i,r){const n=t.gl;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e.width/4,e.height/4,0,n.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:n.UNSIGNED_BYTE,null),r.colorAttachment.set(i)}(t,e,s,n)}}(s,e,r),s.clear({color:t.Color.transparent});for(let c=0;c<n.length;c++){const h=n[c];if(i.hasRenderableParent(h))continue;const u=i.getTile(h),d=u.getBucket(r);if(!d)continue;const p=d.programConfigurations.get(r.id),m=e.useProgram("heatmap",p),{zoom:f}=e.transform;e.terrain&&e.terrain.setupElevationDraw(u,m),m.draw(s,o.TRIANGLES,t.DepthMode.disabled,a,l,t.CullFaceMode.disabled,Je(h.posMatrix,u,f,r.paint.get("heatmap-intensity")),r.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,r.paint,e.transform.zoom,p)}s.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){const r=e.context,n=r.gl,s=i.heatmapFbo;if(!s)return;r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s.colorAttachment.get()),r.activeTexture.set(n.TEXTURE1);let o=i.colorRampTexture;o||(o=i.colorRampTexture=new t.Texture(r,i.colorRamp,n.RGBA)),o.bind(n.LINEAR,n.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,n.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,((e,i,r,n)=>{const s=t.create();t.ortho(s,0,e.width,e.height,0,0,1);const o=e.context.gl;return{u_matrix:s,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}})(e,i),i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}(e,r))},line:function(e,i,r,n){if("translucent"!==e.renderPass)return;const s=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0===s.constantOr(1)||0===o.constantOr(1))return;const a=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),h=r.paint.get("line-pattern"),u=h.constantOr(1),d=r.paint.get("line-gradient"),p=r.getCrossfadeParameters(),m=u?"linePattern":c?"lineSDF":d?"lineGradient":"line",f=e.context,_=f.gl;let g=!0;for(const y of n){const n=i.getTile(y);if(u&&!n.patternsLoaded())continue;const s=n.getBucket(r);if(!s)continue;e.prepareDrawTile(y);const o=s.programConfigurations.get(r.id),x=e.context.program.get(),v=e.useProgram(m,o),b=g||v.program!==x,w=h.constantOr(null);if(w&&n.imageAtlas){const t=n.imageAtlas,e=t.patternPositions[w.to.toString()],i=t.patternPositions[w.from.toString()];e&&i&&o.setConstantPatternPositions(e,i)}const T=e.terrain?y.posMatrix:null,E=u?ei(e,n,r,p,T):c?ii(e,n,r,c,p,T):d?ti(e,n,r,T,s.lineClipsArray.length):Qe(e,n,r,T);if(u)f.activeTexture.set(_.TEXTURE0),n.imageAtlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),o.updatePaintBuffers(p);else if(c&&(b||e.lineAtlas.dirty))f.activeTexture.set(_.TEXTURE0),e.lineAtlas.bind(f);else if(d){const n=s.gradients[r.id];let o=n.texture;if(r.gradientVersion!==n.version){let a=256;if(r.stepInterpolant){const r=i.getSource().maxzoom,n=y.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-y.canonical.z):1;a=t.clamp(t.nextPowerOfTwo(s.maxLineLength/t.EXTENT*1024*n),256,f.maxTextureSize)}n.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:a,image:n.gradient||void 0,clips:s.lineClipsArray}),n.texture?n.texture.update(n.gradient):n.texture=new t.Texture(f,n.gradient,_.RGBA),n.version=r.gradientVersion,o=n.texture}f.activeTexture.set(_.TEXTURE0),o.bind(r.stepInterpolant?_.NEAREST:_.LINEAR,_.CLAMP_TO_EDGE)}v.draw(f,_.TRIANGLES,a,e.stencilModeForClipping(y),l,t.CullFaceMode.disabled,E,r.id,s.layoutVertexBuffer,s.indexBuffer,s.segments,r.paint,e.transform.zoom,o,s.layoutVertexBuffer2),g=!1}},fill:function(e,i,r,n){const s=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0===o.constantOr(1))return;const a=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===s.constantOr(t.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const s=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);bi(e,i,r,n,s,a,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){const s=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);bi(e,i,r,n,s,a,!0)}},"fill-extrusion":function(e,i,r,n){const s=r.paint.get("fill-extrusion-opacity");if(0!==s&&"translucent"===e.renderPass){const o=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==s||r.paint.get("fill-extrusion-pattern").constantOr(1))wi(e,i,r,n,o,t.StencilMode.disabled,t.ColorMode.disabled),wi(e,i,r,n,o,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const s=e.colorModeForRenderPass();wi(e,i,r,n,o,t.StencilMode.disabled,s)}}},hillshade:function(e,i,r,n){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const s=e.context,o=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),a=e.colorModeForRenderPass(),l=e.terrain&&e.terrain.renderingToTexture,[c,h]="translucent"!==e.renderPass||l?[{},n]:e.stencilConfigForOverlap(n);for(const u of h){const n=i.getTile(u);if(n.needsHillshadePrepare&&"offscreen"===e.renderPass)Ae(e,n,r,o,t.StencilMode.disabled,a);else if("translucent"===e.renderPass){const t=l&&e.terrain?e.terrain.stencilModeForRTTOverlap(u):c[u.overscaledZ];Se(e,u,n,r,o,t,a)}}s.viewport.set([0,0,e.width,e.height])},raster:function(e,i,r,n,s,o){if("translucent"!==e.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!n.length)return;const a=e.context,l=a.gl,c=i.getSource(),h=e.useProgram("raster"),u=e.colorModeForRenderPass(),d=e.terrain&&e.terrain.renderingToTexture,[p,m]=c instanceof S||d?[{},n]:e.stencilConfigForOverlap(n),f=m[m.length-1].overscaledZ,_=!e.options.moving;for(const g of m){const n=d?t.DepthMode.disabled:e.depthModeForSublayer(g.overscaledZ-f,1===r.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,l.LESS),s=i.getTile(g);if(d&&(!s||!s.hasData()))continue;const m=d?g.posMatrix:e.transform.calculatePosMatrix(g.toUnwrapped(),_),y=e.terrain&&d?e.terrain.stencilModeForRTTOverlap(g):p[g.overscaledZ],x=o?0:r.paint.get("raster-fade-duration");s.registerFadeDuration(x);const v=i.findLoadedParent(g,0),b=Re(s,v,i,e.transform,x);let w,T;e.terrain&&e.terrain.prepareDrawTile(g);const E="nearest"===r.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;a.activeTexture.set(l.TEXTURE0),s.texture.bind(E,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(l.TEXTURE1),v?(v.texture.bind(E,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,v.tileID.overscaledZ-s.tileID.overscaledZ),T=[s.tileID.canonical.x*w%1,s.tileID.canonical.y*w%1]):s.texture.bind(E,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);const I=si(m,T||[0,0],w||1,b,r);c instanceof S?h.draw(a,l.TRIANGLES,n,t.StencilMode.disabled,u,t.CullFaceMode.disabled,I,r.id,c.boundsBuffer,e.quadTriangleIndexBuffer,c.boundsSegments):h.draw(a,l.TRIANGLES,n,y,u,t.CullFaceMode.disabled,I,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,i,r,n){const s=r.paint.get("background-color"),o=r.paint.get("background-opacity");if(0===o)return;const a=e.context,l=a.gl,c=e.transform,h=c.tileSize,u=r.paint.get("background-pattern");if(e.isPatternMissing(u))return;const d=!u&&1===s.a&&1===o&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==d)return;const p=t.StencilMode.disabled,m=e.depthModeForSublayer(0,"opaque"===d?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),f=e.colorModeForRenderPass(),_=e.useProgram(u?"backgroundPattern":"background"),g=n||c.coveringTiles({tileSize:h});u&&(a.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));const y=r.getCrossfadeParameters();for(const x of g){const i=n?x.posMatrix:e.transform.calculatePosMatrix(x.toUnwrapped());e.prepareDrawTile(x);const c=u?ui(i,o,e,u,{tileID:x,tileSize:h},y):hi(i,o,s);_.draw(a,l.TRIANGLES,m,p,f,t.CullFaceMode.disabled,c,r.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}},sky:function(e,i,r){const n=r.paint.get("sky-opacity");if(0===n)return;const s=e.context,o=r.paint.get("sky-type"),a=new t.DepthMode(s.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),l=e.frameCounter/1e3%1;"atmosphere"===o?"offscreen"===e.renderPass?r.needsSkyboxCapture(e)&&(function(e,i,r,n){const s=e.context,o=s.gl;let a=i.skyboxFbo;if(!a){a=i.skyboxFbo=s.createFramebuffer(32,32,!1),i.skyboxGeometry=new Bi(s),i.skyboxTexture=s.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,i.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(let t=0;t<6;++t)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}s.bindFramebuffer.set(a.framebuffer),s.viewport.set([0,0,32,32]);const l=i.getCenter(e,!0),c=e.useProgram("skyboxCapture"),h=new Float64Array(16);t.identity(h),t.rotateY(h,h,.5*-Math.PI),Fi(s,i,c,h,l,0),t.identity(h),t.rotateY(h,h,.5*Math.PI),Fi(s,i,c,h,l,1),t.identity(h),t.rotateX(h,h,.5*-Math.PI),Fi(s,i,c,h,l,2),t.identity(h),t.rotateX(h,h,.5*Math.PI),Fi(s,i,c,h,l,3),t.identity(h),Fi(s,i,c,h,l,4),t.identity(h),t.rotateY(h,h,Math.PI),Fi(s,i,c,h,l,5),s.viewport.set([0,0,e.width,e.height])}(e,r),r.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,i,r,n,s){const o=e.context,a=o.gl,l=e.transform,c=e.useProgram("skybox");o.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_CUBE_MAP,i.skyboxTexture);const h=((t,e,i,r,n)=>({u_matrix:t,u_sun_direction:e,u_cubemap:0,u_opacity:r,u_temporal_offset:n}))(l.skyboxMatrix,i.getCenter(e,!1),0,n,s);c.draw(o,a.TRIANGLES,r,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,h,"skybox",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(e,r,a,n,l):"gradient"===o&&"sky"===e.renderPass&&function(e,i,r,n,s){const o=e.context,a=o.gl,l=e.transform,c=e.useProgram("skyboxGradient");i.skyboxGeometry||(i.skyboxGeometry=new Bi(o)),o.activeTexture.set(a.TEXTURE0);let h=i.colorRampTexture;h||(h=i.colorRampTexture=new t.Texture(o,i.colorRamp,a.RGBA)),h.bind(a.LINEAR,a.CLAMP_TO_EDGE);const u=((e,i,r,n,s)=>({u_matrix:e,u_color_ramp:0,u_center_direction:i,u_radius:t.degToRad(r),u_opacity:n,u_temporal_offset:s}))(l.skyboxMatrix,i.getCenter(e,!1),i.paint.get("sky-gradient-radius"),n,s);c.draw(o,a.TRIANGLES,r,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,u,"skyboxGradient",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(e,r,a,n,l)},debug:function(t,e,i){for(let r=0;r<i.length;r++)ki(t,e,i[r])},custom:function(e,i,r){const n=e.context,s=r.implementation;if("offscreen"===e.renderPass){const t=s.prerender;t&&(e.setCustomLayerDefaults(),n.setColorMode(e.colorModeForRenderPass()),t.call(s,n.gl,e.transform.customLayerMatrix()),n.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),n.setColorMode(e.colorModeForRenderPass()),n.setStencilMode(t.StencilMode.disabled);const i="3d"===s.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);n.setDepthMode(i),s.render(n.gl,e.transform.customLayerMatrix()),n.setDirty(),e.setBaseState(),n.bindFramebuffer.set(null)}}};class Ui{constructor(e,i){this.context=new t.Context(e),this.transform=i,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Rt,this.gpuTimers={},this.frameCounter=0}updateTerrain(t,e){const i=!!t&&!!t.terrain;if(!(i||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Oe(this,t));const r=this._terrain;this.transform.elevation=i?r:null,r.update(t,this.transform,e)}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(e,i){if(this.width=e*t.browser.devicePixelRatio,this.height=i*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style.order)this.style._layers[t].resize()}setup(){const e=this.context,i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const n=new t.StructArrayLayout4i8;n.emplaceBack(0,0,0,0),n.emplaceBack(t.EXTENT,0,t.EXTENT,0),n.emplaceBack(0,t.EXTENT,0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(n,E.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const s=new t.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(1,0),s.emplaceBack(0,1),s.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(s,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(o);const a=new t.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(a),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);const l=this.context.gl;this.stencilClearMode=new t.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(t.window.performance.now())}clearStencil(){const e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,i.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,Le(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,i,r){if(!(i&&this.currentStencilSource!==i.id&&e.isTileClipped()&&r&&r.length))return;this.currentStencilSource=i.id;const n=this.context,s=n.gl;this.nextStencilID+r.length>256&&this.clearStencil(),n.setColorMode(t.ColorMode.disabled),n.setDepthMode(t.DepthMode.disabled);const o=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const a of r){const e=this._tileClippingMaskIDs[a.key]=this.nextStencilID++;o.draw(n,s.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:s.ALWAYS,mask:0},e,255,s.KEEP,s.KEEP,s.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Le(a.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,i=this.context.gl;return new t.StencilMode({func:i.NOTEQUAL,mask:255},e,255,i.KEEP,i.KEEP,i.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const i=this.context.gl;return new t.StencilMode({func:i.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,i.KEEP,i.KEEP,i.REPLACE)}stencilConfigForOverlap(e){const i=this.context.gl,r=e.sort((t,e)=>e.overscaledZ-t.overscaledZ),n=r[r.length-1].overscaledZ,s=r[0].overscaledZ-n+1;if(s>1){this.currentStencilSource=void 0,this.nextStencilID+s>256&&this.clearStencil();const e={};for(let r=0;r<s;r++)e[r+n]=new t.StencilMode({func:i.GEQUAL,mask:255},r+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=s,[e,r]}return[{[n]:t.StencilMode.disabled},r]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(e,i,r){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const n=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(r||this.context.gl.LEQUAL,i,[n,n])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,i){this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();const r=this.style.order,n=this.style._sourceCaches;for(const t in n){const e=n[t];e.used&&e.prepare(this.context)}const s={},o={},a={};for(const t in n){const e=n[t];s[t]=e.getVisibleCoordinates(),o[t]=s[t].slice().reverse(),a[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<r.length;t++)if(this.style._layers[r[t]].is3D()){this.opaquePassCutoff=t;break}this.terrain&&(this.terrain.updateTileBinding(a),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const t of r){const i=this.style._layers[t],r=e._getLayerSourceCache(i);if(!i.hasOffscreenPass()||i.isHidden(this.transform.zoom))continue;const n=r?o[r.id]:void 0;("custom"===i.type||i.isSky()||n&&n.length)&&this.renderLayer(this,r,i,n)}if(this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:i.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[r[this.currentLayer]],i=e._getLayerSourceCache(t);if(t.isSky())continue;const n=i?o[i.id]:void 0;this._renderTileClippingMasks(t,i,n),this.renderLayer(this,i,t,n)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const t=this.style._layers[r[this.currentLayer]],i=e._getLayerSourceCache(t);t.isSky()&&this.renderLayer(this,i,t,i?o[i.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){const t=this.style._layers[r[this.currentLayer]],i=e._getLayerSourceCache(t);if(t.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(t)){if(t.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const n=i?("symbol"===t.type?a:o)[i.id]:void 0;this._renderTileClippingMasks(t,i,i?s[i.id]:void 0),this.renderLayer(this,i,t,n),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let i=null;t.values(this.style._layers).forEach(t=>{const r=e._getLayerSourceCache(t);r&&!t.isHidden(this.transform.zoom)&&(!i||i.getSource().maxzoom<r.getSource().maxzoom)&&(i=r)}),i&&this.options.showTileBoundaries&&Oi.debug(this,i,i.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;Mi(t,t.transform.height-(e.top||0),3,Ei),Mi(t,e.bottom||0,3,Si),zi(t,e.left||0,3,Ii),zi(t,t.transform.width-(e.right||0),3,Ai);const i=t.transform.centerPoint;!function(t,e,i,r){Pi(t,e-1,i-10,2,20,r),Pi(t,e-10,i-1,20,2,r)}(t,i.x,t.transform.height-i.y,Ci)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%t.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,e,i,r){i.isHidden(this.transform.zoom)||("background"===i.type||"sky"===i.type||"custom"===i.type||r&&r.length)&&(this.id=i.id,this.gpuTimingStart(i),Oi[i.type](t,e,i,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const e={};for(const i in t){const r=t[i],n=this.context.extTimerQuery,s=n.getQueryObjectEXT(r.query,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r.query),e[i]=s}return e}translatePosMatrix(e,i,r,n,s){if(!r[0]&&!r[1])return e;const o=s?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(o){const t=Math.sin(o),e=Math.cos(o);r=[r[0]*e-r[1]*t,r[0]*t+r[1]*e]}const a=[s?r[0]:y(i,r[0],this.transform.zoom),s?r[1]:y(i,r[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,a),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,e=[];return this.terrain&&!this.terrain.renderingToTexture&&e.push("TERRAIN"),t&&e.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&e.push("OVERDRAW_INSPECTOR"),e}useProgram(t,e,i){this.cache=this.cache||{};const r=i||[],n=this.currentGlobalDefines().concat(r),s=Ve.cacheKey(t,n,e);return this.cache[s]||(this.cache[s]=new Ve(this.context,t,we[t],e,di[t],n)),this.cache[s]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(t){this.terrain&&this.terrain.prepareDrawTile(t)}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}}class Vi{constructor(t=0,e=0,i=0,r=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=r}interpolate(e,i,r){return null!=i.top&&null!=e.top&&(this.top=t.number(e.top,i.top,r)),null!=i.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,i.bottom,r)),null!=i.left&&null!=e.left&&(this.left=t.number(e.left,i.left,r)),null!=i.right&&null!=e.right&&(this.right=t.number(e.right,i.right,r)),this}getCenter(e,i){const r=t.clamp((this.left+e-this.right)/2,0,e),n=t.clamp((this.top+i-this.bottom)/2,0,i);return new t.Point(r,n)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Vi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ni(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}function $i(t,e,i){t[4*e+0]=i[0],t[4*e+1]=i[1],t[4*e+2]=i[2],t[4*e+3]=i[3]}function qi(e,i){const r=Ni(e,3);t.fromQuat(e,i),$i(e,3,r)}function Zi(t,e){$i(t,3,[e[0],e[1],e[2],1])}function Gi(e,i){const r=t.identity$1([]);return t.rotateZ$1(r,r,-i),t.rotateX$1(r,r,-e),r}function ji(e,i){const r=[e[0],e[1],0],n=[i[0],i[1],0];if(t.length(r)>=1e-15){const e=t.normalize([],r);t.scale$2(n,e,t.dot(n,e)),i[0]=n[0],i[1]=n[1]}const s=t.cross([],i,e);if(t.len(s)<1e-15)return null;const o=Math.atan2(-s[1],s[0]);return Gi(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),o)}class Xi{constructor(t,e){this.position=t,this.orientation=e}get position(){return this._position}set position(e){this._position=this._renderWorldCopies?function(e){if(!e)return;const i=Array.isArray(e)?new t.MercatorCoordinate(e[0],e[1],e[2]):e;return i.x=t.wrap(i.x,0,1),i}(e):e}lookAtPoint(e,i){if(this.orientation=null,!this.position)return;const r=this._elevation?this._elevation.getAtPoint(t.MercatorCoordinate.fromLngLat(e)):0,n=this.position,s=t.MercatorCoordinate.fromLngLat(e,r),o=[s.x-n.x,s.y-n.y,s.z-n.z];i||(i=[0,0,1]),i[2]=Math.abs(i[2]),this.orientation=ji(o,i)}setPitchBearing(e,i){this.orientation=Gi(t.degToRad(e),t.degToRad(-i))}}class Wi{constructor(e,i){this._transform=t.identity([]),this._orientation=t.identity$1([]),i&&(this._orientation=i,qi(this._transform,this._orientation)),e&&Zi(this._transform,e)}get mercatorPosition(){const e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}get position(){const t=Ni(this._transform,3);return[t[0],t[1],t[2]]}set position(t){Zi(this._transform,t)}get orientation(){return this._orientation}set orientation(t){this._orientation=t,qi(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,e){this._orientation=Gi(t,e),qi(this._transform,this._orientation)}forward(){const t=Ni(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=Ni(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=Ni(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(e,i){const r=new Float64Array(16);return t.invert(r,this.getWorldToCamera(e,i)),r}getWorldToCamera(e,i){const r=new Float64Array(16),n=new Float64Array(4),s=this.position;return t.conjugate(n,this._orientation),t.scale$2(s,s,-e),t.fromQuat(r,n),t.translate(r,r,s),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=i,r[9]*=i,r[10]*=i,r[11]*=i,r}getCameraToClipPerspective(e,i,r,n){const s=new Float64Array(16);return t.perspective(s,e,i,r,n),s}clone(){return new Wi([...this.position],[...this.orientation])}}class Hi{constructor(e,i,r,n,s){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===s||s,this._minZoom=e||0,this._maxZoom=i||22,this._minPitch=null==r?0:r,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Vi,this._posMatrixCache={},this._alignedPosMatrixCache={},this._camera=new Wi,this._centerAltitude=0,this.cameraElevationReference="ground",this._horizonShift=.1}clone(){const t=new Hi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._cameraZoom=this._cameraZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,t?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(t){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),t&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const i=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const i=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const e=this._elevation.getAtPoint(t.MercatorCoordinate.fromLngLat(this.center),-1);return-1===e?(this._cameraZoom=null,!1):(this._centerAltitude=e,!0)}_updateCameraOnTerrain(){const e=this.cameraToCenterDistance/this.worldSize,i=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(i+e)}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const e=this._cameraZoom,i=this._elevation.getAtPoint(t.MercatorCoordinate.fromLngLat(this.center)),r=t.mercatorZfromAltitude(i,this.center.lat),n=this._mercatorZfromZoom(e),s=this._mercatorZfromZoom(this._maxZoom),o=Math.max(n-r,s);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(e){const i=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let r;r=e.z<this._camera.position[2]?[i.x,i.y,i.z]:[e.x,e.y,e.z];const n=t.length(t.sub([],this._camera.position,r));return t.clamp(this._zoomFromMercatorZ(n),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height)return;if(!e.position&&!e.orientation)return;this._updateCameraState();let i=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(i=this._setCameraOrientation(e.orientation)),e.position){const r=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),i=!0)}i&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,i=new Xi;return i.position=new t.MercatorCoordinate(e[0],e[1],e[2]),i.orientation=this._camera.orientation,i._elevation=this.elevation,i._renderWorldCopies=this._renderWorldCopies,i}_setCameraOrientation(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);const i=t.transformQuat([],[0,0,-1],e),r=t.transformQuat([],[0,-1,0],e);if(r[2]<0)return!1;const n=ji(i,r);return!!n&&(this._camera.orientation=n,!0)}_setCameraPosition(e){const i=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,n=this.cameraToCenterDistance;e[2]=t.clamp(e[2],n/r,n/i),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies){const r=this.pointCoordinate(new t.Point(0,0)),n=this.pointCoordinate(new t.Point(this.width,0)),s=this.pointCoordinate(new t.Point(this.width,this.height)),o=this.pointCoordinate(new t.Point(0,this.height)),a=Math.floor(Math.min(r.x,n.x,s.x,o.x)),l=Math.floor(Math.max(r.x,n.x,s.x,o.x)),c=1;for(let h=a-c;h<=l+c;h++)0!==h&&i.push(new t.UnwrappedTileID(h,e))}return i}coveringTiles(e){let i=this.coveringZoomLevel(e);const r=i,n=!!e.useElevationData;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);const s=t.MercatorCoordinate.fromLngLat(this.center),o=1<<i,a=[o*s.x,o*s.y,0],l=t.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),c=this.pointCoordinate(this.getCameraPoint()),h=o*t.mercatorZfromAltitude(1,this.center.lat),u=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),d=[o*c.x,o*c.y,u],p=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),m=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?i:0,f=this.elevation?1e4*this.elevation.exaggeration():0,_=e=>({aabb:new t.Aabb([e*o,0,-f],[(e+1)*o,o,f]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),g=[],y=[],x=i,v=e.reparseOverscaled?r:i,b=(t,e)=>{if(!this._elevation)return;const i=this._elevation.getMinMaxForTile(e);i&&(t.min[2]=i.min,t.max[2]=i.max,t.center[2]=(t.min[2]+t.max[2])/2)},w=t=>t*t,T=w((u-this._centerAltitude)*h),E=(t,e)=>{if(e*w(.707)<t)return 1;const i=Math.sqrt(e/t);return i/(1/.707+(Math.pow(1.1,i-1/.707+1)-1)/(1.1-1)-1)};if(this._renderWorldCopies)for(let t=1;t<=3;t++)g.push(_(-t)),g.push(_(t));for(g.push(_(0));g.length>0;){const r=g.pop(),s=r.x,o=r.y;let c=r.fullyVisible;if(!c){const t=r.aabb.intersects(l);if(0===t)continue;c=2===t}let u=!0;if(m<=r.zoom&&r.zoom<x){const t=r.aabb.distanceX(d),e=r.aabb.distanceY(d);let i=T;n&&(i=w(r.aabb.distanceZ(d)*h));const s=t*t+e*e+i;u=s<w((1<<x-r.zoom)*p*E(Math.max(i,T),s))}if(r.zoom!==x&&u)for(let e=0;e<4;e++){const i=(s<<1)+e%2,a=(o<<1)+(e>>1),l=r.aabb.quadrant(e);let h=null;n&&r.zoom>x-6&&b(l,h=new t.OverscaledTileID(r.zoom+1===x?v:r.zoom+1,r.wrap,r.zoom+1,i,a)),g.push({aabb:l,zoom:r.zoom+1,x:i,y:a,wrap:r.wrap,fullyVisible:c,tileID:h})}else{const n=r.zoom===x?v:r.zoom;if(e.minzoom&&e.minzoom>n)continue;const l=a[0]-(.5+s+(r.wrap<<r.zoom))*(1<<i-r.zoom),c=a[1]-.5-o,h=r.tileID?r.tileID:new t.OverscaledTileID(n,r.wrap,r.zoom,s,o);y.push({tileID:h,distanceSq:l*l+c*c})}}return y.sort((t,e)=>t.distanceSq-e.distanceSq).map(t=>t.tileID)}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)}unproject(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(e,i){const r=this.pointCoordinate(i),n=this.pointCoordinate(this.centerPoint),s=this.locationCoordinate(e),o=new t.MercatorCoordinate(s.x-(r.x-n.x),s.y-(r.y-n.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(t){this.center=this.coordinateLocation(t),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t){return this._coordinatePoint(this.locationCoordinate(t),!1)}locationPoint3D(t){return this._coordinatePoint(this.locationCoordinate(t),!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(e){return t.MercatorCoordinate.fromLngLat(e)}coordinateLocation(t){return t.toLngLat()}pointRayIntersection(e,i){const r=null!=i?i:this._centerAltitude,n=[e.x,e.y,0,1],s=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(s,s,this.pixelMatrixInverse);const o=s[3];t.scale$1(n,n,1/n[3]),t.scale$1(s,s,1/o);const a=n[2],l=s[2];return{p0:n,p1:s,t:a===l?0:(r-a)/(l-a)}}screenPointToMercatorRay(e){const i=[e.x,e.y,0,1],r=[e.x,e.y,1,1];return t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse),t.scale$1(i,i,1/i[3]),t.scale$1(r,r,1/r[3]),i[2]=t.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,r[2]=t.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,t.scale$1(i,i,1/this.worldSize),t.scale$1(r,r,1/this.worldSize),new t.Ray([i[0],i[1],i[2]],t.normalize([],t.sub([],r,i)))}rayIntersectionCoordinate(e){const{p0:i,p1:r,t:n}=e,s=t.mercatorZfromAltitude(i[2],this._center.lat),o=t.mercatorZfromAltitude(r[2],this._center.lat);return new t.MercatorCoordinate(t.number(i[0],r[0],n)/this.worldSize,t.number(i[1],r[1],n)/this.worldSize,t.number(s,o,n))}pointCoordinate(e){const i=this.horizonLineFromTop(!1),r=new t.Point(e.x,Math.max(i,e.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(r))}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);const i=this.elevation;let r=this.elevation.pointCoordinate(e);if(r)return new t.MercatorCoordinate(r[0],r[1],r[2]);let n=0,s=this.horizonLineFromTop();if(e.y>s)return this.pointCoordinate(e);const o=.02*s,a=e.clone();for(let l=0;l<10&&s-n>o;l++){a.y=t.number(n,s,.66);const e=i.pointCoordinate(a);e?(s=a.y,r=e):n=a.y}return r?new t.MercatorCoordinate(r[0],r[1],r[2]):this.pointCoordinate(e)}isPointAboveHorizon(t){if(this.elevation)return!this.elevation.pointCoordinate(t);{const e=this.horizonLineFromTop();return t.y<e}}_coordinatePoint(e,i){const r=i&&this.elevation?this.elevation.getAtPoint(e,this._centerAltitude):this._centerAltitude,n=[e.x*this.worldSize,e.y*this.worldSize,r+e.toAltitude(),1];return t.transformMat4(n,n,this.pixelMatrix),n[3]>0?new t.Point(n[0]/n[3],n[1]/n[3]):new t.Point(Number.MAX_VALUE,Number.MAX_VALUE)}getBounds(){return this._terrainEnabled()?this._getBounds3D():(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))}_getBounds3D(){const e=this.elevation,i=e.visibleDemTiles.reduce((t,e)=>{if(e.dem){const i=e.dem.tree;t.min=Math.min(t.min,i.minimums[0]),t.max=Math.max(t.max,i.maximums[0])}return t},{min:Number.MAX_VALUE,max:0});i.min*=e.exaggeration(),i.max*=e.exaggeration();const r=this.horizonLineFromTop();return[new t.Point(0,r),new t.Point(this.width,r),new t.Point(this.width,this.height),new t.Point(0,this.height)].reduce((t,e)=>t.extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(e,i.min)))).extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(e,i.max)))),new t.LngLatBounds)}horizonLineFromTop(t=!0){const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,i=this.height/2-.97*e;return t?Math.max(0,i):i}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(e,i=!1){const r=e.key,n=i?this._alignedPosMatrixCache:this._posMatrixCache;if(n[r])return n[r];const s=e.canonical,o=this.worldSize/this.zoomScale(s.z),a=s.x+Math.pow(2,s.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[a*o,s.y*o,0]),t.scale(l,l,[o/t.EXTENT,o/t.EXTENT,1]),t.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),n[r]=new Float32Array(l),n[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const i=this._camera.position,r=this._camera.forward();if(i.z<=0||r[2]>=0)return;const n=t.mercatorZfromAltitude(1,this._center.lat);i[2]/=n,r[2]/=n,t.normalize(r,r);const s=e.raycast(i,r,e.exaggeration());if(s){const e=t.scaleAndAdd([],i,r,s),n=new t.MercatorCoordinate(e[0],e[1],t.mercatorZfromAltitude(e[2],t.latFromMercatorY(e[1]))),o=this._camera.position,a=n.z+t.length([n.x-o[0],n.y-o[1],n.z-o[2]]);this._cameraZoom=this._zoomFromMercatorZ(a),this._centerAltitude=n.toAltitude(),this._center=n.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const i=e.getAtPoint(this._camera.mercatorPosition),r=this._minimumHeightOverTerrain()*Math.cos(t.degToRad(this._maxPitch)),n=t.mercatorZfromAltitude(i,this._center.lat),s=this._camera.position[2]-n;if(s<r){const e=t.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),i=this._camera.mercatorPosition,n=[e.x-i.x,e.y-i.y,e.z-i.z],o=t.length(n);n[2]-=r-s;const a=t.length(n);if(0===a)return;t.scale$2(n,n,o/a),this._camera.position=[e.x-n[0],e.y-n[1],e.z-n[2]],this._camera.orientation=ji(n,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let e,i,r,n,s=-90,o=90,a=-180,l=180;const c=this.size,h=this._unmodified;if(this.latRange){const i=this.latRange;s=t.mercatorYfromLat(i[1])*this.worldSize,e=(o=t.mercatorYfromLat(i[0])*this.worldSize)-s<c.y?c.y/(o-s):0}if(this.lngRange){const e=this.lngRange;a=t.mercatorXfromLng(e[0])*this.worldSize,i=(l=t.mercatorXfromLng(e[1])*this.worldSize)-a<c.x?c.x/(l-a):0}const u=this.point,d=Math.max(i||0,e||0);if(d)return this.center=this.unproject(new t.Point(i?(l+a)/2:u.x,e?(o+s)/2:u.y)),this.zoom+=this.scaleZoom(d),this._unmodified=h,void(this._constraining=!1);if(this.latRange){const t=u.y,e=c.y/2;t-e<s&&(n=s+e),t+e>o&&(n=o-e)}if(this.lngRange){const t=u.x,e=c.x/2;t-e<a&&(r=a+e),t+e>l&&(r=l-e)}void 0===r&&void 0===n||(this.center=this.unproject(new t.Point(void 0!==r?r:u.x,void 0!==n?n:u.y))),this._constrainCameraAltitude(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){const e=(t,e)=>Math.log2(t/(this.tileSize*Math.abs(e[1]-e[0])));let i=0;if(this.latRange){const r=this.latRange;i=e(this.height,[t.mercatorYfromLat(r[0]),t.mercatorYfromLat(r[1])])}let r=0;if(this.lngRange){const i=this.lngRange;r=e(this.width,[t.mercatorXfromLng(i[0]),t.mercatorXfromLng(i[1])])}return Math.max(i,r)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const i=t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;this._updateCameraState();const r=Math.PI/2+this._pitch,n=this.fovAboveCenter,s=this._camera.position[2]*this.worldSize/Math.cos(this._pitch),o=Math.sin(n)*s/Math.sin(t.clamp(Math.PI-r-n,.01,Math.PI-.01)),a=this.point,l=a.x,c=a.y,h=Math.cos(Math.PI/2-this._pitch)*o+s,u=Math.min(1.01*h,s*(1/this._horizonShift)),d=this.height/50,p=this._camera.getWorldToCamera(this.worldSize,i),m=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,d,u);m[8]=2*-e.x/this.width,m[9]=2*e.y/this.height;let f=t.mul([],m,p);this.mercatorMatrix=t.scale([],f,[this.worldSize,this.worldSize,this.worldSize/i]),this.projMatrix=f,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const _=new Float32Array(16);t.identity(_),t.scale(_,_,[1,-1,1]),t.rotateX(_,_,this._pitch),t.rotateZ(_,_,this.angle);const g=t.perspective(new Float32Array(16),this._fov,this.width/this.height,d,u),y=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;g[8]=2*-e.x/this.width,g[9]=2*(e.y+y)/this.height,this.skyboxMatrix=t.multiply(_,g,_);const x=this.width%2/2,v=this.height%2/2,b=Math.cos(this.angle),w=Math.sin(this.angle),T=l-Math.round(l)+b*x+w*v,E=c-Math.round(c)+b*v+w*x,S=new Float64Array(f);if(t.translate(S,S,[T>.5?T-1:T,E>.5?E-1:E,0]),this.alignedProjMatrix=S,f=t.create(),t.scale(f,f,[this.width/2,-this.height/2,1]),t.translate(f,f,[1,-1,0]),this.labelPlaneMatrix=f,f=t.create(),t.scale(f,f,[1,-1,1]),t.translate(f,f,[-1,-1,0]),t.scale(f,f,[2/this.width,2/this.height,1]),this.glCoordMatrix=f,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(f=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=f,this._posMatrixCache={},this._alignedPosMatrixCache={}}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const e=this._camera.forward(),i=this.cameraToCenterDistance,r=this.point,n=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),s=this.cameraToCenterDistance/n;this._camera.position=[r.x/this.worldSize-e[0]*i/s,r.y/this.worldSize-e[1]*i/s,t.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-e[2]*i/s]}_translateCameraConstrained(e){const i=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=e[2];let n=1;r>0&&(n=Math.min((i-this._camera.position[2])/r,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,n),this._updateStateFromCamera()}_updateStateFromCamera(){const e=this._camera.position,i=this._camera.forward(),{pitch:r,bearing:n}=this._camera.getPitchBearing(),s=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),o=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),a=Math.max((e[2]-s)/Math.cos(r),o),l=this._zoomFromMercatorZ(a);t.scaleAndAdd(e,e,i,a),this._pitch=t.clamp(r,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(n,-Math.PI,Math.PI),this._setZoom(t.clamp(l,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new t.MercatorCoordinate(e[0],e[1],e[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}_terrainEnabled(){return!!this._elevation}isHorizonVisibleForPoints(e,i){const r=Math.min(e.x,i.x),n=Math.max(e.x,i.x),s=Math.min(e.y,i.y),o=Math.max(e.y,i.y),a=[new t.Point(r,s),new t.Point(n,o),new t.Point(r,o),new t.Point(n,s)],l=this._renderWorldCopies?-3:0,c=this._renderWorldCopies?4:1;for(const t of a){const e=this.pointRayIntersection(t);if(e.t<0)return!0;const i=this.rayIntersectionCoordinate(e);if(i.x<l||i.y<0||i.x>c||i.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new t.Point(0,0),new t.Point(this.width,this.height))}zoomDeltaToMovement(e,i){const r=t.length(t.sub([],this._camera.position,e)),n=this._zoomFromMercatorZ(r)+i;return r-this._mercatorZfromZoom(n)}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))}}class Ki{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(t,e){let i=!1,r=null;const n=()=>{r=null,i&&(t(),r=setTimeout(n,300),i=!1)};return()=>(i=!0,r||n(),r)}(this._updateHashUnthrottled.bind(this))}addTo(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(e){const i=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,n=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),s=Math.pow(10,n),o=Math.round(i.lng*s)/s,a=Math.round(i.lat*s)/s,l=this._map.getBearing(),c=this._map.getPitch();let h="";if(h+=e?`/${o}/${a}/${r}`:`${r}/${a}/${o}`,(l||c)&&(h+=`/${Math.round(10*l)/10}`),c&&(h+=`/${Math.round(c)}`),this._hashName){const e=this._hashName;let i=!1;const r=t.window.location.hash.slice(1).split("&").map(t=>{const r=t.split("=")[0];return r===e?(i=!0,`${r}=${h}`):t}).filter(t=>t);return i||r.push(`${e}=${h}`),`#${r.join("&")}`}return`#${h}`}_getCurrentHash(){const e=t.window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map(t=>t.split("=")).forEach(e=>{e[0]===this._hashName&&(t=e)}),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some(t=>isNaN(t))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,e)}}const Yi={linearity:.3,easing:t.bezier(0,0,.3,1)},Ji=t.extend({deceleration:2500,maxSpeed:1400},Yi),Qi=t.extend({deceleration:20,maxSpeed:1400},Yi),tr=t.extend({deceleration:1e3,maxSpeed:360},Yi),er=t.extend({deceleration:1e3,maxSpeed:90},Yi);class ir{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,i=t.browser.now();for(;e.length>0&&i-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)i.zoom+=t.zoomDelta||0,i.bearing+=t.bearingDelta||0,i.pitch+=t.pitchDelta||0,t.panDelta&&i.pan._add(t.panDelta),t.around&&(i.around=t.around),t.pinchAround&&(i.pinchAround=t.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,n={};if(i.pan.mag()){const s=nr(i.pan.mag(),r,t.extend({},Ji,e||{}));n.offset=i.pan.mult(s.amount/i.pan.mag()),n.center=this._map.transform.center,rr(n,s)}if(i.zoom){const t=nr(i.zoom,r,Qi);n.zoom=this._map.transform.zoom+t.amount,rr(n,t)}if(i.bearing){const e=nr(i.bearing,r,tr);n.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),rr(n,e)}if(i.pitch){const t=nr(i.pitch,r,er);n.pitch=this._map.transform.pitch+t.amount,rr(n,t)}if(n.zoom||n.bearing){const t=void 0===i.pinchAround?i.around:i.pinchAround;n.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),t.extend(n,{noMoveStart:!0})}}function rr(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function nr(e,i,r){const{maxSpeed:n,linearity:s,deceleration:o}=r,a=t.clamp(e*s/(i/1e3),-n,n),l=Math.abs(a)/(o*s);return{easing:r.easing,duration:1e3*l,amount:a*(l/2)}}class sr extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,i,r,s={}){const o=n.mousePos(i.getCanvasContainer(),r),a=i.unproject(o);super(e,t.extend({point:o,lngLat:a,originalEvent:r},s)),this._defaultPrevented=!1,this.target=i}}class or extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,i,r){const s="touchend"===e?r.changedTouches:r.touches,o=n.touchPos(i.getCanvasContainer(),s),a=o.map(t=>i.unproject(t)),l=o.reduce((t,e,i,r)=>t.add(e.div(r.length)),new t.Point(0,0));super(e,{points:o,point:l,lngLats:a,lngLat:i.unproject(l),originalEvent:r}),this._defaultPrevented=!1}}class ar extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,i){super(t,{originalEvent:i}),this._defaultPrevented=!1}}class lr{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new ar(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new sr(t.type,this._map,t))}mouseup(t){this._map.fire(new sr(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new sr(t.type,this._map,t))}dblclick(t){return this._firePreventable(new sr(t.type,this._map,t))}mouseover(t){this._map.fire(new sr(t.type,this._map,t))}mouseout(t){this._map.fire(new sr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new or(t.type,this._map,t))}touchmove(t){this._map.fire(new or(t.type,this._map,t))}touchend(t){this._map.fire(new or(t.type,this._map,t))}touchcancel(t){this._map.fire(new or(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class cr{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(t){this._map.fire(new sr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new sr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new sr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hr{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(n.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const i=e;if(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=i,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const s=Math.min(r.x,i.x),o=Math.max(r.x,i.x),a=Math.min(r.y,i.y),l=Math.max(r.y,i.y);n.setTransform(this._box,`translate(${s}px,${a}px)`),this._box.style.width=`${o-s}px`,this._box.style.height=`${l-a}px`}mouseupWindow(e,i){if(!this._active)return;if(0!==e.button)return;const r=this._startPos,s=i;if(this.reset(),n.suppressClick(),r.x!==s.x||r.y!==s.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(r,s,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))}}function ur(t,e){const i={};for(let r=0;r<t.length;r++)i[t[r].identifier]=e[r];return i}class dr{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,i,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){const i=new t.Point(0,0);for(const t of e)i._add(t);return i.div(e.length)}(i),this.touches=ur(r,i)))}touchmove(t,e,i){if(this.aborted||!this.centroid)return;const r=ur(i,e);for(const n in this.touches){const t=this.touches[n],e=r[n];(!e||e.dist(t)>30)&&(this.aborted=!0)}}touchend(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class pr{constructor(t){this.singleTap=new dr(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,i){this.singleTap.touchstart(t,e,i)}touchmove(t,e,i){this.singleTap.touchmove(t,e,i)}touchend(t,e,i){const r=this.singleTap.touchend(t,e,i);if(r){const e=t.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(r)<30;if(e&&i||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class mr{constructor(){this._zoomIn=new pr({numTouches:1,numTaps:2}),this._zoomOut=new pr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)}touchmove(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)}touchend(t,e,i){const r=this._zoomIn.touchend(t,e,i),n=this._zoomOut.touchend(t,e,i);return r?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}):n?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(n)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const fr={0:1,2:2};class _r{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const i=n.mouseButton(t);this._correctButton(t,i)&&(this._lastPoint=e,this._eventButton=i)}mousemoveWindow(t,e){const i=this._lastPoint;if(i)if(t.preventDefault(),function(t,e){const i=fr[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(i,e)}mouseupWindow(t){this._lastPoint&&n.mouseButton(t)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gr extends _r{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class yr extends _r{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}}contextmenu(t){t.preventDefault()}}class xr extends _r{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}}contextmenu(t){t.preventDefault()}}class vr{constructor(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)}touchstart(t,e,i){return this._calculateTransform(t,e,i)}touchmove(t,e,i){if(this._active&&!(i.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,i)}touchend(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,i,r){r.length>0&&(this._active=!0);const n=ur(r,i),s=new t.Point(0,0),o=new t.Point(0,0);let a=0;for(const t in n){const e=n[t],i=this._touches[t];i&&(s._add(e),o._add(e.sub(i)),a++,n[t]=e)}if(this._touches=n,a<this._minTouches||!o.mag())return;const l=o.div(a);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:s.div(a),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class br{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,e,i){return{}}touchstart(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,i){if(!this._firstTwoTouches)return;t.preventDefault();const[r,n]=this._firstTwoTouches,s=wr(i,e,r),o=wr(i,e,n);if(!s||!o)return;const a=this._aroundCenter?null:s.add(o).div(2);return this._move([s,o],a,t)}touchend(t,e,i){if(!this._firstTwoTouches)return;const[r,s]=this._firstTwoTouches,o=wr(i,e,r),a=wr(i,e,s);o&&a||(this._active&&n.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function wr(t,e,i){for(let r=0;r<t.length;r++)if(t[r].identifier===i)return e[r]}function Tr(t,e){return Math.log(t/e)/Math.LN2}class Er extends br{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Tr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Tr(this._distance,i),pinchAround:e}}}function Sr(t,e){return 180*t.angleWith(e)/Math.PI}class Ir extends br{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Sr(this._vector,i),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,i=Sr(t,this._startVector);return Math.abs(i)<e}}function Ar(t){return Math.abs(t.y)>Math.abs(t.x)}class Cr extends br{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(t){this._lastPoints=t,Ar(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,i){const r=t[0].sub(this._lastPoints[0]),n=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,n,i.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+n.y)/2*-.5}}gestureBeginsVertically(t,e,i){if(void 0!==this._valid)return this._valid;const r=t.mag()>=2,n=e.mag()>=2;if(!r&&!n)return;if(!r||!n)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const s=t.y>0==e.y>0;return Ar(t)&&Ar(e)&&s}}const Mr={panStep:100,bearingStep:15,pitchStep:10};class zr{constructor(){const t=Mr;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,i=0,r=0,n=0,s=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),n=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),n=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),s=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),s=1);break;default:return}return this._rotationDisabled&&(i=0,r=0),{cameraAnimation:o=>{const a=o.getZoom();o.easeTo({duration:300,easeId:"keyboardHandler",easing:Pr,zoom:e?Math.round(a)+e*(t.shiftKey?2:1):a,bearing:o.getBearing()+i*this._bearingStep,pitch:o.getPitch()+r*this._pitchStep,offset:[-n*this._panStep,-s*this._panStep],center:o.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Pr(t){return t*(2-t)}class kr{constructor(e,i){this._map=e,this._el=e.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;let i=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const r=t.browser.now(),n=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(n*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const e=n.mousePos(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform,i=()=>e._terrainEnabled()?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==r&&(r=1/r);const n=i(),s=Math.pow(2,n),o="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(o*r))),"wheel"===this._type&&(this._startZoom=i(),this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:i(),n=this._startZoom,s=this._easing;let o,a=!1;if("wheel"===this._type&&n&&s){const e=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),i=s(e);o=t.number(n,r,i),e<1?this._frameId||(this._frameId=!0):a=!0}else o=r,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:o-i(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let i=t.ease;if(this._prevEase){const e=this._prevEase,r=(t.browser.now()-e.start)/e.duration,n=e.easing(r+.01)-e.easing(r),s=.27/Math.sqrt(n*n+1e-4)*.01,o=Math.sqrt(.0729-s*s);i=t.bezier(s,o,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:i},i}reset(){this._active=!1}}class Dr{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Lr{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rr{constructor(){this._tap=new pr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,e,i){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))}touchmove(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const r=e[0],n=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(t,e,i)}touchend(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Br{constructor(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Fr{constructor(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Or{constructor(t,e,i,r){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ur=t=>t.zoom||t.drag||t.pitch||t.rotate;class Vr extends t.Event{}class Nr{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,i){const r=t.sub([],i,e);this.radius=t.length(r[2]<0?t.div([],r,this.constants):[r[0],r[1],0])}projectRay(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$1(e,e,this.constants);const i=t.scale$2([],e,this.radius);if(i[2]>0){const e=t.scale$2([],[0,0,1],t.dot(i,[0,0,1])),r=t.scale$2([],t.normalize([],[i[0],i[1],0]),this.radius),n=t.add([],i,t.scale$2([],t.sub([],t.add([],r,e),i),2));i[0]=n[0],i[1]=n[1]}return i}}function $r(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class qr{constructor(e,i){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ir(e),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Nr,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(i),t.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[s,o,a]of this._listeners)n.addEventListener(s,o,s===t.window.document?this.handleWindowEvent:this.handleEvent,a)}destroy(){for(const[e,i,r]of this._listeners)n.removeEventListener(e,i,e===t.window.document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(t){const e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new lr(e,t));const r=e.boxZoom=new hr(e,t);this._add("boxZoom",r);const n=new mr,s=new Lr;e.doubleClickZoom=new Dr(s,n),this._add("tapZoom",n),this._add("clickZoom",s);const o=new Rr;this._add("tapDragZoom",o);const a=e.touchPitch=new Cr;this._add("touchPitch",a);const l=new yr(t),c=new xr(t);e.dragRotate=new Fr(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const h=new gr(t),u=new vr(t);e.dragPan=new Br(i,h,u),this._add("mousePan",h),this._add("touchPan",u,["touchZoom","touchRotate"]);const d=new Ir,p=new Er;e.touchZoomRotate=new Or(i,p,d,o),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new cr(e));const m=e.scrollZoom=new kr(e,this);this._add("scrollZoom",m,["mousePan"]);const f=e.keyboard=new zr;this._add("keyboard",f);for(const _ of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[_]&&e[_].enable(t[_])}_add(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ur(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,i){for(const r in t)if(r!==i&&(!e||e.indexOf(r)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const i of t)this._el.contains(i.target)&&e.push(i);return e}handleEvent(t,e){if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const i="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},s={},o={},a=t.touches?this._getMapTouches(t.touches):void 0,l=a?n.touchPos(this._el,a):n.mousePos(this._el,t);for(const{handlerName:n,handler:u,allowed:d}of this._handlers){if(!u.isEnabled())continue;let c;this._blockedByActive(o,d,n)?u.reset():u[e||t.type]&&(c=u[e||t.type](t,l,a),this.mergeHandlerResult(r,s,c,n,i),c&&c.needsRenderFrame&&this._triggerRenderFrame()),(c||u.isActive())&&(o[n]=u)}const c={};for(const n in this._previousActiveHandlers)o[n]||(c[n]=i);this._previousActiveHandlers=o,(Object.keys(c).length||$r(r))&&(this._changes.push([r,s,c]),this._triggerRenderFrame()),(Object.keys(o).length||$r(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=r;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))}mergeHandlerResult(e,i,r,n,s){if(!r)return;t.extend(e,r);const o={handlerName:n,originalEvent:r.originalEvent||s};void 0!==r.zoomDelta&&(i.zoom=o),void 0!==r.panDelta&&(i.drag=o),void 0!==r.pitchDelta&&(i.pitch=o),void 0!==r.bearingDelta&&(i.rotate=o)}_applyChanges(){const e={},i={},r={};for(const[n,s,o]of this._changes)n.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(n.panDelta)),n.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+n.zoomDelta),n.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+n.bearingDelta),n.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+n.pitchDelta),void 0!==n.around&&(e.around=n.around),void 0!==n.aroundCoord&&(e.aroundCoord=n.aroundCoord),void 0!==n.pinchAround&&(e.pinchAround=n.pinchAround),n.noInertia&&(e.noInertia=n.noInertia),t.extend(i,s),t.extend(r,o);this._updateMapTransform(e,i,r),this._changes=[]}_updateMapTransform(e,i,r){const n=this._map,s=n.transform,o=t=>[t.x,t.y,t.z];if((t=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!$r(e)){const t=s.zoom;s.cameraElevationReference="sea",s.recenterOnTerrain(),s.cameraElevationReference="ground",t!==s.zoom&&this._map._update(!0)}if(!$r(e))return this._fireEvents(i,r,!0);let{panDelta:a,zoomDelta:l,bearingDelta:c,pitchDelta:h,around:u,aroundCoord:d,pinchAround:p}=e;void 0!==p&&(u=p),(t=>i.drag&&!this._eventsInProgress.drag)()&&u&&(this._dragOrigin=o(s.pointCoordinate3D(u)),this._trackingEllipsoid.setup(s._camera.position,this._dragOrigin)),s.cameraElevationReference="sea",n._stop(!0),u=u||n.transform.centerPoint,c&&(s.bearing+=c),h&&(s.pitch+=h),s._updateCameraState();const m=[0,0,0];if(a){const t=s.screenPointToMercatorRay(u),e=s.screenPointToMercatorRay(u.sub(a)),i=this._trackingEllipsoid.projectRay(t.dir),r=this._trackingEllipsoid.projectRay(e.dir);m[0]=r[0]-i[0],m[1]=r[1]-i[1]}const f=s.zoom,_=[0,0,0];if(l){const e=o(d||s.pointCoordinate3D(u)),i={dir:t.normalize([],t.sub([],e,s._camera.position))},r=s.screenPointToMercatorRay(s.centerPoint);if(i.dir[2]<0){const n=t.altitudeFromMercatorZ(e[2],e[1]),a=s.rayIntersectionCoordinate(s.pointRayIntersection(s.centerPoint,n)),c=s.zoomDeltaToMovement(o(a),l)*(r.dir[2]/i.dir[2]);t.scale$2(_,i.dir,c)}else if(s._terrainEnabled()){const r=s.zoomDeltaToMovement(e,l);t.scale$2(_,i.dir,r)}}const g=t.add(m,m,_);s._translateCameraConstrained(g),l&&Math.abs(s.zoom-f)>1e-4&&s.recenterOnTerrain(),s.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(i,r,!0)}_fireEvents(e,i,r){const n=Ur(this._eventsInProgress),s=Ur(e),o={};for(const t in e){const{originalEvent:i}=e[t];this._eventsInProgress[t]||(o[`${t}start`]=i),this._eventsInProgress[t]=e[t]}!n&&s&&this._fireEvent("movestart",s.originalEvent);for(const t in o)this._fireEvent(t,o[t]);s&&this._fireEvent("move",s.originalEvent);for(const t in e){const{originalEvent:i}=e[t];this._fireEvent(t,i)}const a={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:r}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=i[e]||r,a[`${t}end`]=l)}for(const t in a)this._fireEvent(t,a[t]);const c=Ur(this._eventsInProgress);if(r&&(n||s)&&!c){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(i(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),i(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,i){this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new Vr("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Zr extends t.Evented{constructor(e,i){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,i,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),r)}panTo(e,i,r){return this.easeTo(t.extend({center:e},i),r)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,i,r){return this.easeTo(t.extend({zoom:e},i),r)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,i,r){return this.easeTo(t.extend({bearing:e},i),r)}resetNorth(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this}resetNorthPitch(e,i){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),i),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,i){e=t.LngLatBounds.convert(e);const r=i&&i.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,i)}_extendCameraOptions(e){const i={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}return e.padding=t.extend(i,e.padding),e}_cameraForBoxAndBearing(e,i,r,n){const s=this._extendCameraOptions(n),o=this.transform,a=o.padding,l=o.project(t.LngLat.convert(e)),c=o.project(t.LngLat.convert(i)),h=l.rotate(-t.degToRad(r)),u=c.rotate(-t.degToRad(r)),d=new t.Point(Math.max(h.x,u.x),Math.max(h.y,u.y)),p=new t.Point(Math.min(h.x,u.x),Math.min(h.y,u.y)),m=d.sub(p),f=(o.width-(a.left+a.right+s.padding.left+s.padding.right))/m.x,_=(o.height-(a.top+a.bottom+s.padding.top+s.padding.bottom))/m.y;if(_<0||f<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const g=Math.min(o.scaleZoom(o.scale*Math.min(f,_)),s.maxZoom),y="number"==typeof s.offset.x?new t.Point(s.offset.x,s.offset.y):t.Point.convert(s.offset),x=new t.Point((s.padding.left-s.padding.right)/2,(s.padding.top-s.padding.bottom)/2).rotate(r*Math.PI/180),v=y.add(x).mult(o.scale/o.zoomScale(g));return{center:o.unproject(l.add(c).div(2).sub(v)),zoom:g,bearing:r}}_cameraForBox(e,i,r,n,s){const o=this._extendCameraOptions(s);r=r||0,n=n||0,e=t.LngLat.convert(e),i=t.LngLat.convert(i);const a=this.transform.clone();a.padding=o.padding;const l=this.getFreeCameraOptions(),c=new t.LngLat(.5*(e.lng+i.lng),.5*(e.lat+i.lat)),h=.5*(r+n);if(a._camera.position[2]<t.mercatorZfromAltitude(h,c.lat))return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(c),a.setFreeCameraOptions(l);const u=t.MercatorCoordinate.fromLngLat(e),d=t.MercatorCoordinate.fromLngLat(i),p=a.pointRayIntersection(a.centerPoint,h),m=[(f=a.rayIntersectionCoordinate(p)).x,f.y,f.z];var f;const _=a.screenPointToMercatorRay(a.centerPoint);let g,y=0;do{const i=Math.floor(a.zoom),s=1<<i,o=Math.min(s*u.x,s*d.x),l=Math.min(s*u.y,s*d.y),c=Math.max(s*u.x,s*d.x),h=Math.max(s*u.y,s*d.y),p=new t.Aabb([o,l,r],[c,h,n]),f=t.Frustum.fromInvProjectionMatrix(a.invProjMatrix,a.worldSize,i);if(2!==p.intersects(f)){g&&(a._camera.position=t.scaleAndAdd([],a._camera.position,_.dir,-g),a._updateStateFromCamera());break}const y=t.sub([],a._camera.position,m);g=.5*t.length(y),a._camera.position=t.scaleAndAdd([],a._camera.position,_.dir,g);try{a._updateStateFromCamera()}catch(e){return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++y<10);return{center:a.center,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch}}fitBounds(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)}_raycastElevationBox(e,i){const r=this.transform.elevation;if(!r)return;const n=new t.Point(e.x,i.y),s=new t.Point(i.x,e.y),o=r.pointCoordinate(e);if(!o)return;const a=r.pointCoordinate(i);if(!a)return;const l=r.pointCoordinate(n);if(!l)return;const c=r.pointCoordinate(s);if(!c)return;const h=new t.MercatorCoordinate(o[0],o[1]).toLngLat(),u=new t.MercatorCoordinate(a[0],a[1]).toLngLat(),d=new t.MercatorCoordinate(l[0],l[1]).toLngLat(),p=new t.MercatorCoordinate(c[0],c[1]).toLngLat(),m=Math.min(h.lng,Math.min(u.lng,Math.min(d.lng,p.lng))),f=Math.min(h.lat,Math.min(u.lat,Math.min(d.lat,p.lat))),_=Math.max(h.lng,Math.max(u.lng,Math.max(d.lng,p.lng))),g=Math.max(h.lat,Math.max(u.lat,Math.max(d.lat,p.lat))),y=Math.min(o[3],Math.min(a[3],Math.min(l[3],c[3]))),x=Math.max(o[3],Math.max(a[3],Math.max(l[3],c[3])));return{minLngLat:new t.LngLat(m,f),maxLngLat:new t.LngLat(_,g),minAltitude:y,maxAltitude:x}}fitScreenCoordinates(e,i,r,n,s){let o,a,l,c;const h=t.Point.convert(e),u=t.Point.convert(i),d=this._raycastElevationBox(h,u);if(d)o=d.minLngLat,a=d.maxLngLat,l=d.minAltitude,c=d.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(h,u))return this;o=this.transform.pointLocation(h),a=this.transform.pointLocation(u)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(i)),r,n):this._cameraForBox(o,a,l,c,n),n,s)}_fitInternal(e,i,r){return e?(delete(i=t.extend(e,i)).padding,i.linear?this.easeTo(i,r):this.flyTo(i,r)):this}jumpTo(e,i){this.stop();const r=this.transform;let n=!1,s=!1,o=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(n=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(s=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(o=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),n&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),s&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),o&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,i){this.stop();const r=this.transform,n=r.zoom,s=r.pitch,o=r.bearing;r.setFreeCameraOptions(e);const a=n!==r.zoom,l=s!==r.pitch,c=o!==r.bearing;return this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),a&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),c&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),l&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i)),this}easeTo(e,i){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);const r=this.transform,n=this.getZoom(),s=this.getBearing(),o=this.getPitch(),a=this.getPadding(),l="zoom"in e?+e.zoom:n,c="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:o,u="padding"in e?e.padding:r.padding,d=t.Point.convert(e.offset);let p=r.centerPoint.add(d);const m=r.pointLocation(p),f=t.LngLat.convert(e.center||m);this._normalizeCenter(f);const _=r.project(m),g=r.project(f).sub(_),y=r.zoomScale(l-n);let x,v;e.around&&(x=t.LngLat.convert(e.around),v=r.locationPoint(x));const b={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==n,this._rotating=this._rotating||s!==c,this._pitching=this._pitching||h!==o,this._padding=!r.isPaddingEqual(u),this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,b),this._ease(e=>{if(this._zooming&&(r.zoom=t.number(n,l,e)),this._rotating&&(r.bearing=t.number(s,c,e)),this._pitching&&(r.pitch=t.number(o,h,e)),this._padding&&(r.interpolatePadding(a,u,e),p=r.centerPoint.add(d)),x)r.setLocationAtPoint(x,v);else{const t=r.zoomScale(r.zoom-n),i=l>n?Math.min(2,y):Math.max(.5,y),s=Math.pow(i,1-e),o=r.unproject(_.add(g.mult(e*s)).mult(t));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,p)}this._fireMoveEvents(i)},t=>{r.recenterOnTerrain(),this._afterEase(i,t)},e),this}_prepareEase(e,i,r={}){this._moving=!0,this.transform.cameraElevationReference="sea",i||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,i){if(this._easeId&&i&&this._easeId===i)return;delete this._easeId,this.transform.cameraElevationReference="ground";const r=this._zooming,n=this._rotating,s=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),n&&this.fire(new t.Event("rotateend",e)),s&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,i){if(!e.essential&&t.browser.prefersReducedMotion){const r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,i)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const r=this.transform,n=this.getZoom(),s=this.getBearing(),o=this.getPitch(),a=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,r.minZoom,r.maxZoom):n,c="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:o,u="padding"in e?e.padding:r.padding,d=r.zoomScale(l-n),p=t.Point.convert(e.offset);let m=r.centerPoint.add(p);const f=r.pointLocation(m),_=t.LngLat.convert(e.center||f);this._normalizeCenter(_);const g=r.project(f),y=r.project(_).sub(g);let x=e.curve;const v=Math.max(r.width,r.height),b=v/d,w=y.mag();if("minZoom"in e){const i=t.clamp(Math.min(e.minZoom,n,l),r.minZoom,r.maxZoom),s=v/r.zoomScale(i-n);x=Math.sqrt(s/w*2)}const T=x*x;function E(t){const e=(b*b-v*v+(t?-1:1)*T*T*w*w)/(2*(t?b:v)*T*w);return Math.log(Math.sqrt(e*e+1)-e)}function S(t){return(Math.exp(t)-Math.exp(-t))/2}function I(t){return(Math.exp(t)+Math.exp(-t))/2}const A=E(0);let C=function(t){return I(A)/I(A+x*t)},M=function(t){return v*((I(A)*(S(e=A+x*t)/I(e))-S(A))/T)/w;var e},z=(E(1)-A)/x;if(Math.abs(w)<1e-6||!isFinite(z)){if(Math.abs(v-b)<1e-6)return this.easeTo(e,i);const t=b<v?-1:1;z=Math.abs(Math.log(b/v))/x,M=function(){return 0},C=function(e){return Math.exp(t*x*e)}}return e.duration="duration"in e?+e.duration:1e3*z/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==c,this._pitching=h!==o,this._padding=!r.isPaddingEqual(u),this._prepareEase(i,!1),this._ease(e=>{const d=e*z,f=1/C(d);r.zoom=1===e?l:n+r.scaleZoom(f),this._rotating&&(r.bearing=t.number(s,c,e)),this._pitching&&(r.pitch=t.number(o,h,e)),this._padding&&(r.interpolatePadding(a,u,e),m=r.centerPoint.add(p));const x=1===e?_:r.unproject(g.add(y.mult(M(d))).mult(f));r.setLocationAtPoint(r.renderWorldCopies?x.wrap():x,m),r._updateCenterElevation(),this._fireMoveEvents(i)},()=>this._afterEase(i),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,i,r){!1===r.animate||0===r.duration?(e(1),i()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,i){e=t.wrap(e,-180,180);const r=Math.abs(e-i);return Math.abs(e-360-i)<r&&(e-=360),Math.abs(e+360-i)<r&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.lngRange)return;const i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}}class Gr{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const e=this.options&&this.options.compact;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=n.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const i=this._map._getUIString(`AttributionControl.${e}`);t.title=i,t.setAttribute("aria-label",i)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){const r=i.reduce((t,e,r)=>(e.value&&(t+=`${e.key}=${e.value}${r<i.length-1?"&":""}`),t),"?");e.href=`${t.config.FEEDBACK_URL}/${r}${this._map._hash?this._map._hash.getHashString(!0):""}`,e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(t=>"string"!=typeof t?"":t)):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style._sourceCaches;for(const r in e){const i=e[r];if(i.used){const e=i.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t.sort((t,e)=>t.length-e.length);const i=(t=t.filter((e,i)=>{for(let r=i+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})).join(" | ");i!==this._attribHTML&&(this._attribHTML=i,t.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class jr{constructor(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)}onAdd(t){this._map=t,this._container=n.create("div","mapboxgl-ctrl");const e=n.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const e in t){const i=t[e].getSource();if(i.hasOwnProperty("mapbox_logo")&&!i.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}class Xr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,i=e?this._queue.concat(e):this._queue;for(const r of i)if(r.id===t)return void(r.cancelled=!0)}run(t=0){const e=this._currentlyRunning=this._queue;this._queue=[];for(const i of e)if(!i.cancelled&&(i.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Wr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:Hr,HTMLElement:Kr,ImageBitmap:Yr}=t.window,Jr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Qr(t){t.parentNode&&t.parentNode.removeChild(t)}const tn={showCompass:!0,showZoom:!0,visualizePitch:!1};class en{constructor(e,i,r=!1){this._clickTolerance=10,this.element=i,this.mouseRotate=new yr({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new xr({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(i,"mousedown",this.mousedown),n.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(i,"touchmove",this.touchmove),n.addEventListener(i,"touchend",this.touchend),n.addEventListener(i,"touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),n.disableDrag()}move(t,e){const i=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&i.setBearing(i.getBearing()+r.bearingDelta),this.mousePitch){const r=this.mousePitch.mousemoveWindow(t,e);r&&r.pitchDelta&&i.setPitch(i.getPitch()+r.pitchDelta)}}off(){const t=this.element;n.removeEventListener(t,"mousedown",this.mousedown),n.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(t,"touchmove",this.touchmove),n.removeEventListener(t,"touchend",this.touchend),n.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){n.enableDrag(),n.removeEventListener(t.window,"mousemove",this.mousemove),n.removeEventListener(t.window,"mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),n.mousePos(this.element,e)),n.addEventListener(t.window,"mousemove",this.mousemove),n.addEventListener(t.window,"mouseup",this.mouseup)}mousemove(t){this.move(t,n.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function rn(e,i,r){if(e=new t.LngLat(e.lng,e.lat),i){const n=new t.LngLat(e.lng-360,e.lat),s=new t.LngLat(e.lng+360,e.lat),o=360*Math.ceil(Math.abs(e.lng-r.center.lng)/360),a=r.locationPoint(e).distSqr(i),l=i.x<0||i.y<0||i.x>r.width||i.y>r.height;r.locationPoint(n).distSqr(i)<a&&(l||Math.abs(n.lng-r.center.lng)<o)?e=n:r.locationPoint(s).distSqr(i)<a&&(l||Math.abs(s.lng-r.center.lng)<o)&&(e=s)}for(;Math.abs(e.lng-r.center.lng)>180;){const t=r.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=r.width&&t.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}const nn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function sn(t,e,i){const r=t.classList;for(const n in nn)r.remove(`mapboxgl-${i}-anchor-${n}`);r.add(`mapboxgl-${i}-anchor-${e}`)}class on extends t.Evented{constructor(e,i){if(super(),(e instanceof t.window.HTMLElement||i)&&(e=t.extend({element:e},i)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.Point.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");const i=n.createNS("http://www.w3.org/2000/svg","svg"),r=41,s=27;i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height",`${r}px`),i.setAttributeNS(null,"width",`${s}px`),i.setAttributeNS(null,"viewBox",`0 0 ${s} ${r}`);const o=n.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");const a=n.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");const l=n.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of c){const e=n.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const h=n.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill",this._color);const u=n.createNS("http://www.w3.org/2000/svg","path");u.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),h.appendChild(u);const d=n.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const p=n.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(p);const m=n.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(6.0, 7.0)"),m.setAttributeNS(null,"fill","#FFFFFF");const f=n.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(8.0, 8.0)");const _=n.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");const g=n.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#FFFFFF"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962"),f.appendChild(_),f.appendChild(g),a.appendChild(l),a.appendChild(h),a.appendChild(d),a.appendChild(m),a.appendChild(f),i.appendChild(a),i.setAttributeNS(null,"height",`${r*this._scale}px`),i.setAttributeNS(null,"width",`${s*this._scale}px`),this._element.appendChild(i),this._offset=t.Point.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",t=>{t.preventDefault()}),this._element.addEventListener("mousedown",t=>{t.preventDefault()}),sn(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,i=13.5,r=Math.sqrt(Math.pow(i,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-i+r)],"bottom-right":[-r,-1*(e-i+r)],left:[i,-1*(e-i)],right:[-i,-1*(e-i)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_updateOcclusion(){this._occlusionTimer||(this._occlusionTimer=setTimeout(this._onOcclusionTimer.bind(this),60))}_onOcclusionTimer(){const t=this._map.transform,e=this._pos?this._pos.sub(this._transformedOffset()):null;if(e&&e.x>=0&&e.x<t.width&&e.y>=0&&e.y<t.height){const t=this._map.unproject(e),i=this._map.getFreeCameraOptions();if(i.position){const e=i.position.toLngLat(),r=e.distanceTo(t),n=e.distanceTo(this._lngLat);this._element.classList.toggle("mapboxgl-marker-occluded",r<.9*n)}}this._occlusionTimer=null}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=rn(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset()),this._map.transform.elevation&&this._updateOcclusion();let e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),n.setTransform(this._element,`${nn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${i} ${e}`)}_transformedOffset(){if(!this._defaultMarker)return this._offset;const t=this._map.transform,e=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&e._rotate(t.angle),"map"===this._pitchAlignment&&(e.y*=Math.cos(t._pitch)),e}getOffset(){return this._offset}setOffset(e){return this._offset=t.Point.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const an={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ln,cn=0,hn=!1;const un={maxWidth:100,unit:"metric"};function dn(t,e,i){const r=i&&i.maxWidth||100,n=t._container.clientHeight/2,s=t.unproject([0,n]),o=t.unproject([r,n]),a=s.distanceTo(o);if(i&&"imperial"===i.unit){const i=3.2808*a;i>5280?pn(e,r,i/5280,t._getUIString("ScaleControl.Miles")):pn(e,r,i,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?pn(e,r,a/1852,t._getUIString("ScaleControl.NauticalMiles")):a>=1e3?pn(e,r,a/1e3,t._getUIString("ScaleControl.Kilometers")):pn(e,r,a,t._getUIString("ScaleControl.Meters"))}function pn(t,e,i,r){const n=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(i))}(i);t.style.width=`${e*(n/i)}px`,t.innerHTML=`${n}&nbsp;${r}`}const mn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},fn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),_n={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Zr{constructor(e){if(null!=(e=t.extend({},Jr,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Hi(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._optimizeForTerrain=e.optimizeForTerrain,this._renderTaskQueue=new Xr,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Wr,e.locale),this._clickTolerance=e.clickTolerance,this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof Kr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new qr(this,e),this._hash=e.hash&&new Ki("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localFontFamily=e.localFontFamily,this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),e.attributionControl&&this.addControl(new Gr({customAttribution:e.customAttribution})),this._logoControl=new jr,this.addControl(this._logoControl,e.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))}),this.on("dataloading",e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))})}_getMapId(){return this._mapId}addControl(e,i){if(void 0===i&&(i=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=e.onAdd(this);this._controls.push(e);const n=this._controlPositions[i];return-1!==i.indexOf("bottom")?n.insertBefore(r,n.firstChild):n.appendChild(r),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}resize(e){const i=this._containerDimensions(),r=i[0],n=i[1];this._resizeCanvas(r,n),this.transform.resize(r,n),this.painter.resize(r,n);const s=!this._moving;return s&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),s&&this.fire(new t.Event("moveend",e)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation3D(t.Point.convert(e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(t,e,i){if("mouseenter"===t||"mouseover"===t){let r=!1;const n=n=>{const s=this.getLayer(e)?this.queryRenderedFeatures(n.point,{layers:[e]}):[];s.length?r||(r=!0,i.call(this,new sr(t,this,n.originalEvent,{features:s}))):r=!1};return{layer:e,listener:i,delegates:{mousemove:n,mouseout:()=>{r=!1}}}}if("mouseleave"===t||"mouseout"===t){let r=!1;const n=n=>{(this.getLayer(e)?this.queryRenderedFeatures(n.point,{layers:[e]}):[]).length?r=!0:r&&(r=!1,i.call(this,new sr(t,this,n.originalEvent)))},s=e=>{r&&(r=!1,i.call(this,new sr(t,this,e.originalEvent)))};return{layer:e,listener:i,delegates:{mousemove:n,mouseout:s}}}{const r=t=>{const r=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,i.call(this,t),delete t.features)};return{layer:e,listener:i,delegates:{[t]:r}}}}on(t,e,i){if(void 0===i)return super.on(t,e);const r=this._createDelegatedListener(t,e,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r);for(const n in r.delegates)this.on(n,r.delegates[n]);return this}once(t,e,i){if(void 0===i)return super.once(t,e);const r=this._createDelegatedListener(t,e,i);for(const n in r.delegates)this.once(n,r.delegates[n]);return this}off(t,e,i){return void 0===i?super.off(t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&(r=>{const n=this._delegatedListeners[t];for(let t=0;t<n.length;t++){const r=n[t];if(r.layer===e&&r.listener===i){for(const t in r.delegates)this.off(t,r.delegates[t]);return n.splice(t,1),this}}})(),this)}queryRenderedFeatures(e,i){return this.style?(void 0!==i||void 0===e||e instanceof t.Point||Array.isArray(e)||(i=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}setStyle(e,i){return!1!==(i=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(e,i))}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),t&&(this.style=new Nt(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Nt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,i){if("string"==typeof e){const r=this._requestManager.normalizeStyleURL(e),n=this._requestManager.transformRequest(r,t.ResourceType.Style);t.getJSON(n,(e,r)=>{e?this.fire(new t.ErrorEvent(e)):r&&this._updateDiff(r,i)})}else"object"==typeof e&&this._updateDiff(e,i)}_updateDiff(e,i){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(e,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(e){const i=this.style&&this.style._getSourceCaches(e);if(0!==i.length)return i.every(t=>t.loaded());this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`)))}areTilesLoaded(){const t=this.style&&this.style._sourceCaches;for(const e in t){const i=t[e]._tiles;for(const t in i){const e=i[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)}removeSource(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,i,{pixelRatio:r=1,sdf:n=!1,stretchX:s,stretchY:o,content:a}={}){if(this._lazyInitEmptyStyle(),i instanceof Hr||Yr&&i instanceof Yr){const{width:l,height:c,data:h}=t.browser.getImageData(i);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},h),pixelRatio:r,stretchX:s,stretchY:o,content:a,sdf:n,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:h}=i,u=i;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},new Uint8Array(h)),pixelRatio:r,stretchX:s,stretchY:o,content:a,sdf:n,version:0,userImage:u}),u.onAdd&&u.onAdd(this,e)}}}updateImage(e,i){const r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const n=i instanceof Hr||Yr&&i instanceof Yr?t.browser.getImageData(i):i,{width:s,height:o,data:a}=n;return void 0===s||void 0===o?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):s!==r.data.width||o!==r.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(a,!(i instanceof Hr||Yr&&i instanceof Yr)),void this.style.updateImage(e,r))}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,i){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)}setFilter(t,e,i={}){return this.style.setFilter(t,e,i),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,i,r={}){return this.style.setPaintProperty(t,e,i,r),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,i,r={}){return this.style.setLayoutProperty(t,e,i,r),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(t){return this._lazyInitEmptyStyle(),this.style.setTerrain(t),this._update(!0)}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=n.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);const r=this._controlContainer=n.create("div","mapboxgl-control-container",t),s=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(t=>{s[t]=n.create("div",`mapboxgl-ctrl-${t}`,r)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,i){const r=t.browser.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*i,this._canvas.style.width=`${e}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const i=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);r?(this.painter=new Ui(r,this.transform),this.on("data",t=>{"source"===t.dataType&&this.painter.setTileLoadedFlag(!0)}),t.webpSupported.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_render(e){let i,r=0;const n=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,i),r=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let s=!1;const o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,i=t.browser.now();this.style.zoomHistory.update(e,i);const r=new t.EvaluationParameters(e,{now:i,fadeDuration:o,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),n=r.crossFadingFactor();1===n&&n===this._crossFadingFactor||(s=!0,this._crossFadingFactor=n),this.style.update(r)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||s)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const e=t.browser.now()-r;n.endQueryEXT(n.TIME_ELAPSED_EXT,i),setTimeout(()=>{const r=n.getQueryObjectEXT(i,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(i),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:r}))},50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout(()=>{const i=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:i}))},50)}const a=this._sourcesDirty||this._styleDirty||this._placementDirty;if(a||this._repaint)this.triggerRepaint();else if(this._triggerFrame(!1),!this.isMoving()&&this.loaded()&&(this.fire(new t.Event("idle")),this._isInitialLoad&&this._authenticate(),this._isInitialLoad=!1,this.speedIndexTiming)){const e=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:e})),this.speedIndexTiming=!1}return!this._loaded||this._fullyLoaded||a||(this._fullyLoaded=!0),this}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,e=>{if(e&&(e.message===t.AUTH_ERR_MSG||401===e.status)){console.error("Error: A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/"),t.browser.setErrorState();const e=this.painter.context.gl;this._logoControl instanceof jr&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}}),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const i=this.painter.context.gl,r=i.createFramebuffer();function n(t){i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0);const e=new Uint8Array(i.drawingBufferWidth*i.drawingBufferHeight*4);return i.readPixels(0,0,i.drawingBufferWidth,i.drawingBufferHeight,i.RGBA,i.UNSIGNED_BYTE,e),e}return i.bindFramebuffer(i.FRAMEBUFFER,r),this._canvasPixelComparison(n(t),e.canvasCopies.map(n),e.timeStamps)}_canvasPixelComparison(t,e,i){let r=i[1]-i[0];const n=t.length/4;for(let s=0;s<e.length;s++){const o=e[s];let a=0;for(let e=0;e<o.length;e+=4)o[e]===t[e]&&o[e+1]===t[e+1]&&o[e+2]===t[e+2]&&o[e+3]===t[e+3]&&(a+=1);r+=(i[s+2]-i[s+1])*(1-a/n)}return r}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),Qr(this._canvasContainer),Qr(this._controlContainer),Qr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(e){this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.browser.frame(t=>{const e=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,e&&this._render(t)}))}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,i){t.setCacheLimits(e,i)}get version(){return t.version}},NavigationControl:class{constructor(e){this.options=t.extend({},tn,e),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),i=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new en(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const i=n.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i}_setButtonTitle(t,e){const i=this._map._getUIString(`NavigationControl.${e}`);t.title=i,t.setAttribute("aria-label",i)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({},an,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(e){var i;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,void 0!==ln?i(ln):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(t=>{ln="denied"!==t.state,i(ln)}):(ln=!!t.window.navigator.geolocation,i(ln)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,cn=0,hn=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const i=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,n=this._map.getBearing(),s=t.extend({bearing:n},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(r),s,{geolocateSource:!0})}_updateMarker(e){if(e){const i=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),r=e.distanceTo(i),n=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=`${n}px`,this._circleElement.style.height=`${n}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&hn)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new on(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new on({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":cn--,hn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++cn>1?(e={maximumAge:6e5,timeout:0},hn=!0):(e=this.options.positionOptions,hn=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Gr,ScaleControl:class{constructor(e){this.options=t.extend({},un,e),t.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){dn(this._map,this._container,this.options)}onAdd(t){return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(t){this.options.unit=t,dn(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(mn),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(t.window.document.createTextNode(e))}setHTML(e){const i=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");let n;for(r.innerHTML=e;n=r.firstChild;)i.appendChild(n);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=n.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){this._container&&this._container.classList.add(t)}removeClassName(t){this._container&&this._container.classList.remove(t)}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}_createCloseButton(){this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(t){this._update(t.point)}_onMouseMove(t){this._update(t.point)}_onDrag(t){this._update(t.point)}_update(e){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(t=>this._container.classList.add(t)),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=rn(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!e)return;const i=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);let r=this.options.anchor;const s=function e(i){if(i){if("number"==typeof i){const e=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new t.Point(0,0),top:new t.Point(0,i),"top-left":new t.Point(e,e),"top-right":new t.Point(-e,e),bottom:new t.Point(0,-i),"bottom-left":new t.Point(e,-e),"bottom-right":new t.Point(-e,-e),left:new t.Point(i,0),right:new t.Point(-i,0)}}if(i instanceof t.Point||Array.isArray(i)){const e=t.Point.convert(i);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:t.Point.convert(i.center||[0,0]),top:t.Point.convert(i.top||[0,0]),"top-left":t.Point.convert(i["top-left"]||[0,0]),"top-right":t.Point.convert(i["top-right"]||[0,0]),bottom:t.Point.convert(i.bottom||[0,0]),"bottom-left":t.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(i["bottom-right"]||[0,0]),left:t.Point.convert(i.left||[0,0]),right:t.Point.convert(i.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!r){const t=this._container.offsetWidth,e=this._container.offsetHeight;let n;n=i.y+s.bottom.y<e?["top"]:i.y>this._map.transform.height-e?["bottom"]:[],i.x<t/2?n.push("left"):i.x>this._map.transform.width-t/2&&n.push("right"),r=0===n.length?"bottom":n.join("-")}const o=i.add(s[r]).round();n.setTransform(this._container,`${nn[r]} translate(${o.x}px,${o.y}px)`),sn(this._container,r,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(fn);t&&t.focus()}_onClose(){this.remove()}},Marker:on,Style:Nt,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:Xi,Evented:t.Evented,config:t.config,prewarm:function(){B().acquire(D)},clearPrewarmedResources:function(){const t=R;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(D),R=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return L.workerCount},set workerCount(t){L.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",workerClass:null,setNow:t.browser.setNow,restoreNow:t.browser.restoreNow};return _n}),i});
},{}],"NWI1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.feature=n,exports.geometry=i,exports.point=s,exports.points=a,exports.polygon=u,exports.polygons=l,exports.lineString=c,exports.lineStrings=m,exports.featureCollection=d,exports.multiLineString=f,exports.multiPoint=p,exports.multiPolygon=h,exports.geometryCollection=v,exports.round=g,exports.radiansToLength=x,exports.lengthToRadians=w,exports.lengthToDegrees=b,exports.bearingToAzimuth=y,exports.radiansToDegrees=E,exports.degreesToRadians=P,exports.convertLength=M,exports.convertArea=k,exports.isNumber=A,exports.isObject=L,exports.validateBBox=F,exports.validateId=S,exports.areaFactors=exports.unitsFactors=exports.factors=exports.earthRadius=void 0;var r=6371008.8;exports.earthRadius=r;var e={centimeters:100*r,centimetres:100*r,degrees:r/111325,feet:3.28084*r,inches:39.37*r,kilometers:r/1e3,kilometres:r/1e3,meters:r,metres:r,miles:r/1609.344,millimeters:1e3*r,millimetres:1e3*r,nauticalmiles:r/1852,radians:1,yards:r/1.0936};exports.factors=e;var t={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r,yards:1/1.0936};exports.unitsFactors=t;var o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function n(r,e,t){void 0===t&&(t={});var o={type:"Feature"};return(0===t.id||t.id)&&(o.id=t.id),t.bbox&&(o.bbox=t.bbox),o.properties=e||{},o.geometry=r,o}function i(r,e,t){switch(void 0===t&&(t={}),r){case"Point":return s(e).geometry;case"LineString":return c(e).geometry;case"Polygon":return u(e).geometry;case"MultiPoint":return p(e).geometry;case"MultiLineString":return f(e).geometry;case"MultiPolygon":return h(e).geometry;default:throw new Error(r+" is invalid")}}function s(r,e,t){if(void 0===t&&(t={}),!r)throw new Error("coordinates is required");if(!Array.isArray(r))throw new Error("coordinates must be an Array");if(r.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(r[0])||!A(r[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:r},e,t)}function a(r,e,t){return void 0===t&&(t={}),d(r.map(function(r){return s(r,e)}),t)}function u(r,e,t){void 0===t&&(t={});for(var o=0,i=r;o<i.length;o++){var s=i[o];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:r},e,t)}function l(r,e,t){return void 0===t&&(t={}),d(r.map(function(r){return u(r,e)}),t)}function c(r,e,t){if(void 0===t&&(t={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:r},e,t)}function m(r,e,t){return void 0===t&&(t={}),d(r.map(function(r){return c(r,e)}),t)}function d(r,e){void 0===e&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=r,t}function f(r,e,t){return void 0===t&&(t={}),n({type:"MultiLineString",coordinates:r},e,t)}function p(r,e,t){return void 0===t&&(t={}),n({type:"MultiPoint",coordinates:r},e,t)}function h(r,e,t){return void 0===t&&(t={}),n({type:"MultiPolygon",coordinates:r},e,t)}function v(r,e,t){return void 0===t&&(t={}),n({type:"GeometryCollection",geometries:r},e,t)}function g(r,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(r*t)/t}function x(r,t){void 0===t&&(t="kilometers");var o=e[t];if(!o)throw new Error(t+" units is invalid");return r*o}function w(r,t){void 0===t&&(t="kilometers");var o=e[t];if(!o)throw new Error(t+" units is invalid");return r/o}function b(r,e){return E(w(r,e))}function y(r){var e=r%360;return e<0&&(e+=360),e}function E(r){return 180*(r%(2*Math.PI))/Math.PI}function P(r){return r%360*Math.PI/180}function M(r,e,t){if(void 0===e&&(e="kilometers"),void 0===t&&(t="kilometers"),!(r>=0))throw new Error("length must be a positive number");return x(w(r,e),t)}function k(r,e,t){if(void 0===e&&(e="meters"),void 0===t&&(t="kilometers"),!(r>=0))throw new Error("area must be a positive number");var n=o[e];if(!n)throw new Error("invalid original units");var i=o[t];if(!i)throw new Error("invalid final units");return r/n*i}function A(r){return!isNaN(r)&&null!==r&&!Array.isArray(r)}function L(r){return!!r&&r.constructor===Object}function F(r){if(!r)throw new Error("bbox is required");if(!Array.isArray(r))throw new Error("bbox must be an Array");if(4!==r.length&&6!==r.length)throw new Error("bbox must be an Array of 4 or 6 numbers");r.forEach(function(r){if(!A(r))throw new Error("bbox must only contain numbers")})}function S(r){if(!r)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof r))throw new Error("id must be a number or a string")}exports.areaFactors=o;
},{}],"QASF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCoord=r,exports.getCoords=t,exports.containsNumber=o,exports.geojsonType=n,exports.featureOf=i,exports.collectionOf=u,exports.getGeom=a,exports.getType=y;var e=require("@turf/helpers");function r(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function t(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function o(r){if(r.length>1&&(0,e.isNumber)(r[0])&&(0,e.isNumber)(r[1]))return!0;if(Array.isArray(r[0])&&r[0].length)return o(r[0]);throw new Error("coordinates must only contain numbers")}function n(e,r,t){if(!r||!t)throw new Error("type and name required");if(!e||e.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+e.type)}function i(e,r,t){if(!e)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!e.geometry||e.geometry.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+e.geometry.type)}function u(e,r,t){if(!e)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+t+", FeatureCollection required");for(var o=0,n=e.features;o<n.length;o++){var i=n[o];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!i.geometry||i.geometry.type!==r)throw new Error("Invalid input to "+t+": must be a "+r+", given "+i.geometry.type)}}function a(e){return"Feature"===e.type?e.geometry:e}function y(e,r){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}
},{"@turf/helpers":"NWI1"}],"YJsm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@turf/invariant"),t=require("@turf/helpers");function a(a,r,s){void 0===s&&(s={});var o=(0,e.getCoord)(a),d=(0,e.getCoord)(r),i=(0,t.degreesToRadians)(d[1]-o[1]),n=(0,t.degreesToRadians)(d[0]-o[0]),u=(0,t.degreesToRadians)(o[1]),h=(0,t.degreesToRadians)(d[1]),M=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(n/2),2)*Math.cos(u)*Math.cos(h);return(0,t.radiansToLength)(2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M)),s.units)}var r=a;exports.default=r;
},{"@turf/invariant":"QASF","@turf/helpers":"NWI1"}],"UTMB":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(){"use strict";var n=function(){this.init()};n.prototype={init:function(){var e=this||o;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||l(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||l(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},stop:function(){for(var e=this||o,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,l()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(t){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(a){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||o;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var o=new Audio;o._unlocked=!0,e._releaseHtml5Audio(o)}catch(n){e.noAudio=!0;break}for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var i=e._howls[r]._getSoundIds(),a=0;a<i.length;a++){var s=e._howls[r]._soundById(i[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var u=e.ctx.createBufferSource();u.buffer=e._scratchBuffer,u.connect(e.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),u.onended=function(){u.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||o;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||o;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&o.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&o.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var o=new n,r=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};r.prototype={init:function(e){var t=this;return o.ctx||l(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,r;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(r=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new i(this),this._webAudio&&s(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var i=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(i++,r=n._sounds[a]._id);1===i?e=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var u=s._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(r&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&o._autoResume();var d=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),_=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-d),l=1e3*_/Math.abs(s._rate),c=n._sprite[e][0]/1e3,p=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var f=function(){s._paused=!1,s._seek=d,s._start=c,s._stop=p,s._loop=!(!s._loop&&!n._sprite[e][2])};if(!(d>=p)){var h=s._node;if(n._webAudio){var m=function(){n._playLock=!1,f(),n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;h.gain.setValueAtTime(e,o.ctx.currentTime),s._playStart=o.ctx.currentTime,void 0===h.bufferSource.start?s._loop?h.bufferSource.noteGrainOn(0,d,86400):h.bufferSource.noteGrainOn(0,d,_):s._loop?h.bufferSource.start(0,d,86400):h.bufferSource.start(0,d,_),l!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),l)),t||setTimeout(function(){n._emit("play",s._id),n._loadQueue()},0)};"running"===o.state&&"interrupted"!==o.ctx.state?m():(n._playLock=!0,n.once("resume",m),n._clearTimer(s._id))}else{var v=function(){h.currentTime=d,h.muted=s._muted||n._muted||o._muted||h.muted,h.volume=s._volume*o.volume(),h.playbackRate=s._rate;try{var r=h.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,f(),r.then(function(){n._playLock=!1,h._unlocked=!0,t||(n._emit("play",s._id),n._loadQueue())}).catch(function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0})):t||(n._playLock=!1,f(),n._emit("play",s._id),n._loadQueue()),h.playbackRate=s._rate,h.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),l):(n._endTimers[s._id]=function(){n._ended(s),h.removeEventListener("ended",n._endTimers[s._id],!1)},h.addEventListener("ended",n._endTimers[s._id],!1))}catch(i){n._emit("playerror",s._id,i)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===h.src&&(h.src=n._src,h.load());var A=window&&window.ejecta||!h.readyState&&o._navigator.isCocoonJS;if(h.readyState>=3||A)v();else{n._playLock=!0;var y=function(){v(),h.removeEventListener(o._canPlayEvent,y,!1)};h.addEventListener(o._canPlayEvent,y,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),o=0;o<n.length;o++){t._clearTimer(n[o]);var r=t._soundById(n[o]);if(r&&!r._paused&&(r._seek=t.seek(n[o]),r._rateSeek=0,r._paused=!0,t._stopFade(n[o]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var o=n._getSoundIds(e),r=0;r<o.length;r++){n._clearTimer(o[r]);var i=n._soundById(o[r]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(o[r]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&n._clearSound(i._node))),t||n._emit("stop",i._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),i=0;i<r.length;i++){var a=n._soundById(r[i]);a&&(a._muted=e,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,o.ctx.currentTime):a._node&&(a._node.muted=!!o._muted||e),n._emit("mute",a._id))}return n},volume:function(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]?r._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):e=parseFloat(i[0]):i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10)),!(void 0!==e&&e>=0&&e<=1))return(n=t?r._soundById(t):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var a=0;a<t.length;a++)(n=r._soundById(t[a]))&&(n._volume=e,i[2]||r._stopFade(t[a]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*o.volume()),r._emit("volume",n._id));return r},fade:function(e,t,n,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(e,t,n,r)}}),i;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),i.volume(e,r);for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if(r||i._stopFade(a[s]),i._webAudio&&!u._muted){var d=o.ctx.currentTime,_=d+n/1e3;u._volume=e,u._node.gain.setValueAtTime(e,d),u._node.gain.linearRampToValueAtTime(t,_)}i._startFadeInterval(u,e,t,n,a[s],void 0===r)}}return i},_startFadeInterval:function(e,t,n,o,r,i){var a=this,s=t,u=n-t,d=Math.abs(u/.01),_=Math.max(4,d>0?o/d:o),l=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var r=(Date.now()-l)/o;l=Date.now(),s+=u*r,s=Math.round(100*s)/100,s=u<0?Math.max(n,s):Math.min(n,s),a._webAudio?e._volume=s:a.volume(s,e._id,!0),i&&(a._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))},_)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,o=arguments;if(0===o.length)return this._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=this._soundById(parseInt(o[0],10)))&&n._loop;e=o[0],this._loop=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var r=this._getSoundIds(t),i=0;i<r.length;i++)(n=this._soundById(r[i]))&&(n._loop=e,this._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return this},rate:function(){var e,t,n,r=this,i=arguments;if(0===i.length)t=r._sounds[0]._id;else if(1===i.length){r._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if("number"!=typeof e)return(n=r._soundById(t))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var a=0;a<t.length;a++)if(n=r._soundById(t[a])){r.playing(t[a])&&(n._rateSeek=r.seek(t[a]),n._playStart=r._webAudio?o.ctx.currentTime:n._playStart),n._rate=e,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,o.ctx.currentTime):n._node&&(n._node.playbackRate=e);var s=r.seek(t[a]),u=1e3*((r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-s)/Math.abs(n._rate);!r._endTimers[t[a]]&&n._paused||(r._clearTimer(t[a]),r._endTimers[t[a]]=setTimeout(r._ended.bind(r,n),u)),r._emit("rate",n._id)}return r},seek:function(){var e,t,n=this,r=arguments;if(0===r.length)t=n._sounds[0]._id;else if(1===r.length){n._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(void 0===t)return n;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var i=n._soundById(t);if(i){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var a=n.playing(t)?o.ctx.currentTime-i._playStart:0,s=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(s+a*Math.abs(i._rate))}return i._node.currentTime}var u=n.playing(t);u&&n.pause(t,!0),i._seek=e,i._ended=!1,n._clearTimer(t),n._webAudio||!i._node||isNaN(i._node.duration)||(i._node.currentTime=e);var d=function(){n._emit("seek",t),u&&n.play(t,!0)};if(u&&!n._webAudio){var _=function(){n._playLock?setTimeout(_,0):d()};setTimeout(_,0)}else d()}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(o._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),o._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var r=o._howls.indexOf(e);r>=0&&o._howls.splice(r,1);var i=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===e._src||e._src.indexOf(o._howls[n]._src)>=0){i=!1;break}return a&&i&&delete a[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,o){var r=this["_on"+e];return"function"==typeof t&&r.push(o?{id:n,fn:t,once:o}:{id:n,fn:t}),this},off:function(e,t,n){var o=this["_on"+e],r=0;if("number"==typeof t&&(n=t,t=null),t||n)for(r=0;r<o.length;r++){var i=n===o[r].id;if(t===o[r].fn&&i||!t&&i){o.splice(r,1);break}}else if(e)this["_on"+e]=[];else{var a=Object.keys(this);for(r=0;r<a.length;r++)0===a[r].indexOf("_on")&&Array.isArray(this[a[r]])&&(this[a[r]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var o=this["_on"+e],r=o.length-1;r>=0;r--)o[r].id&&o[r].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,o[r].fn),0),o[r].once&&this.off(e,o[r].fn,o[r].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),r)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),o._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new i(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=a[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),this},_cleanBuffer:function(e){var t=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=o._scratchBuffer}catch(n){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(e){this._parent=e,this.init()};i.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=o._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(t,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):o.noAudio||(this._node=o._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=e._src,this._node.preload=!0===e._preload?"auto":e._preload,this._node.volume=t*o.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)},_endListener:function(){var e=this._parent;e._duration===1/0&&(e._duration=Math.ceil(10*this._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(this)),this._node.removeEventListener("ended",this._endFn,!1)}};var a={},s=function(e){var t=e._src;if(a[t])return e._duration=a[t].duration,void _(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),o=new Uint8Array(n.length),r=0;r<n.length;++r)o[r]=n.charCodeAt(r);d(o.buffer,e)}else{var i=new XMLHttpRequest;i.open(e._xhr.method,t,!0),i.withCredentials=e._xhr.withCredentials,i.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(t){i.setRequestHeader(t,e._xhr.headers[t])}),i.onload=function(){var t=(i.status+"")[0];"0"===t||"2"===t||"3"===t?d(i.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".")},i.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete a[t],e.load())},u(i)}},u=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&t._sounds.length>0?(a[t._src]=e,_(t,e)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(e).then(r).catch(n):o.ctx.decodeAudioData(e,r,n)},_=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},l=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(i){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!r&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};"function"==typeof e&&e.amd&&e([],function(){return{Howler:o,Howl:r}}),"undefined"!=typeof exports&&(exports.Howler=o,exports.Howl=r),void 0!==t?(t.HowlerGlobal=n,t.Howler=o,t.Howl=r,t.Sound=i):"undefined"!=typeof window&&(window.HowlerGlobal=n,window.Howler=o,window.Howl=r,window.Sound=i)}(),function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,o,r,i){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return t="number"!=typeof t?a[1]:t,n="number"!=typeof n?a[2]:n,o="number"!=typeof o?a[3]:o,r="number"!=typeof r?a[4]:r,i="number"!=typeof i?a[5]:i,"number"!=typeof e?a:(this._orientation=[e,t,n,o,r,i],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,o,r,i),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(e,n)}}),o;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return o._stereo;o._stereo=e,o._pos=[e,0,0]}for(var i=o._getSoundIds(n),a=0;a<i.length;a++){var s=o._soundById(i[a]);if(s){if("number"!=typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||t(s,r),"spatial"===r?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),o._emit("stereo",s._id)}}return o},Howl.prototype.pos=function(e,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,n,o,r)}}),i;if(n="number"!=typeof n?0:n,o="number"!=typeof o?-.5:o,void 0===r){if("number"!=typeof e)return i._pos;i._pos=[e,n,o]}for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof e)return u._pos;u._pos=[e,n,o],u._node&&(u._panner&&!u._panner.pan||t(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):u._panner.setPosition(e,n,o)),i._emit("pos",u._id)}}return i},Howl.prototype.orientation=function(e,n,o,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,n,o,r)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,o="number"!=typeof o?i._orientation[2]:o,void 0===r){if("number"!=typeof e)return i._orientation;i._orientation=[e,n,o]}for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof e)return u._orientation;u._orientation=[e,n,o],u._node&&(u._panner||(u._pos||(u._pos=i._pos||[0,0,-.5]),t(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):u._panner.setOrientation(e,n,o)),i._emit("orientation",u._id)}}return i},Howl.prototype.pannerAttr=function(){var e,n,o,r=arguments;if(!this._webAudio)return this;if(0===r.length)return this._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(o=this._soundById(parseInt(r[0],10)))?o._pannerAttr:this._pannerAttr;e=r[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),this._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:this._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:this._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:this._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:this._panningModel})}else 2===r.length&&(e=r[0],n=parseInt(r[1],10));for(var i=this._getSoundIds(n),a=0;a<i.length;a++)if(o=this._soundById(i[a])){var s=o._pannerAttr;s={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:s.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:s.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:s.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:s.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:s.panningModel};var u=o._panner;u?(u.coneInnerAngle=s.coneInnerAngle,u.coneOuterAngle=s.coneOuterAngle,u.coneOuterGain=s.coneOuterGain,u.distanceModel=s.distanceModel,u.maxDistance=s.maxDistance,u.refDistance=s.refDistance,u.rolloffFactor=s.rolloffFactor,u.panningModel=s.panningModel):(o._pos||(o._pos=this._pos||[0,0,-.5]),t(o,"spatial"))}return this},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}();
},{}],"NH1O":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}function n(e){return i(e)||a(e)||r(e)||l()}function i(e){if(Array.isArray(e))return s(e)}function a(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function r(e,t){if(e){if("string"==typeof e)return s(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var c=function(){var t=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],i=function(){function i(t){var o=t.targetModal,a=t.triggers,r=void 0===a?[]:a,s=t.onShow,l=void 0===s?function(){}:s,c=t.onClose,d=void 0===c?function(){}:c,u=t.openTrigger,f=void 0===u?"data-micromodal-trigger":u,h=t.closeTrigger,v=void 0===h?"data-micromodal-close":h,m=t.openClass,g=void 0===m?"is-open":m,b=t.disableScroll,y=void 0!==b&&b,p=t.disableFocus,w=void 0!==p&&p,E=t.awaitCloseAnimation,k=void 0!==E&&E,M=t.awaitOpenAnimation,C=void 0!==M&&M,A=t.debugMode,L=void 0!==A&&A;e(this,i),this.modal=document.getElementById(o),this.config={debugMode:L,disableScroll:y,openTrigger:f,closeTrigger:v,openClass:g,onShow:l,onClose:d,awaitCloseAnimation:k,awaitOpenAnimation:C,disableFocus:w},r.length>0&&this.registerTriggers.apply(this,n(r)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}return o(i,[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];o.filter(Boolean).forEach(function(t){t.addEventListener("click",function(t){return e.showModal(t)})})}},{key:"showModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){this.modal.addEventListener("animationend",function t(){e.modal.removeEventListener("animationend",t,!1),e.setFocusToFirstNode()},!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,t)}},{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var o=this.config.openClass;this.modal.addEventListener("animationend",function e(){t.classList.remove(o),t.removeEventListener("animationend",e,!1)},!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:""});break;case"disable":Object.assign(t.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){e.target.hasAttribute(this.config.closeTrigger)&&this.closeModal(e)}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(t);return Array.apply(void 0,n(e))}},{key:"setFocusToFirstNode",value:function(){var e=this;if(!this.config.disableFocus){var t=this.getFocusableNodes();if(0!==t.length){var o=t.filter(function(t){return!t.hasAttribute(e.config.closeTrigger)});o.length>0&&o[0].focus(),0===o.length&&t[0].focus()}}}},{key:"retainFocus",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter(function(e){return null!==e.offsetParent}),this.modal.contains(document.activeElement)){var o=t.indexOf(document.activeElement);e.shiftKey&&0===o&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&o===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}]),i}(),a=null,r=function(e){if(!document.getElementById(e))return console.warn("MicroModal: Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},s=function(e,t){if(function(e){if(e.length<=0)console.warn("MicroModal: Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>')}(e),!t)return!0;for(var o in t)r(o);return!0};return{init:function(e){var t=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),o=n(document.querySelectorAll("[".concat(t.openTrigger,"]"))),r=function(e,t){var o=[];return e.forEach(function(e){var n=e.attributes[t].value;void 0===o[n]&&(o[n]=[]),o[n].push(e)}),o}(o,t.openTrigger);if(!0!==t.debugMode||!1!==s(o,r))for(var l in r){var c=r[l];t.targetModal=l,t.triggers=n(c),a=new i(t)}},show:function(e,t){var o=t||{};o.targetModal=e,!0===o.debugMode&&!1===r(e)||(a&&a.removeEventListeners(),(a=new i(o)).showModal())},close:function(e){e?a.closeModalById(e):a.closeModal()}}}();window.MicroModal=c;var d=c;exports.default=d;
},{}],"EQRj":[function(require,module,exports) {
var define;
var e;!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof e&&e.amd?e("WaveSurfer",[],r):"object"==typeof exports?exports.WaveSurfer=r():t.WaveSurfer=r()}(this,function(){return(()=>{var e={"./src/drawer.canvasentry.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r("./src/util/style.js")),i=a(r("./src/util/get-id.js"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,i.default)(void 0!==this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}var t,r,a;return t=e,(r=[{key:"initWave",value:function(e){this.wave=e,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(e){this.progress=e,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(e,t,r,i){this.start=this.wave.offsetLeft/t||0,this.end=this.start+e/t,this.wave.width=r,this.wave.height=i;var a={width:e+"px"};(0,n.default)(this.wave,a),this.hasProgressCanvas&&(this.progress.width=r,this.progress.height=i,(0,n.default)(this.progress,a))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(e,t){this.waveCtx.fillStyle=e,this.hasProgressCanvas&&(this.progressCtx.fillStyle=t)}},{key:"fillRects",value:function(e,t,r,n,i){this.fillRectToContext(this.waveCtx,e,t,r,n,i),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,e,t,r,n,i)}},{key:"fillRectToContext",value:function(e,t,r,n,i,a){e&&(a?this.drawRoundedRect(e,t,r,n,i,a):e.fillRect(t,r,n,i))}},{key:"drawRoundedRect",value:function(e,t,r,n,i,a){0!==i&&(i<0&&(r-=i*=-1),e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+n-a,r),e.quadraticCurveTo(t+n,r,t+n,r+a),e.lineTo(t+n,r+i-a),e.quadraticCurveTo(t+n,r+i,t+n-a,r+i),e.lineTo(t+a,r+i),e.quadraticCurveTo(t,r+i,t,r+i-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath(),e.fill())}},{key:"drawLines",value:function(e,t,r,n,i,a){this.drawLineToContext(this.waveCtx,e,t,r,n,i,a),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,e,t,r,n,i,a)}},{key:"drawLineToContext",value:function(e,t,r,n,i,a,s){if(e){var o,u,l,c=t.length/2,f=Math.round(c*this.start),h=f,d=Math.round(c*this.end)+1,p=this.wave.width/(d-h-1),v=n+i,y=r/n;for(e.beginPath(),e.moveTo((h-f)*p,v),e.lineTo((h-f)*p,v-Math.round((t[2*h]||0)/y)),o=h;o<d;o++)u=t[2*o]||0,l=Math.round(u/y),e.lineTo((o-f)*p+this.halfPixel,v-l);for(var m=d-1;m>=h;m--)u=t[2*m+1]||0,l=Math.round(u/y),e.lineTo((m-f)*p+this.halfPixel,v-l);e.lineTo((h-f)*p,v-Math.round((t[2*h+1]||0)/y)),e.closePath(),e.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(e,t,r){var n=this;return"blob"===r?new Promise(function(r){n.wave.toBlob(r,e,t)}):"dataURL"===r?this.wave.toDataURL(e,t):void 0}}])&&s(t.prototype,r),a&&s(t,a),e}();t.default=o,e.exports=t.default},"./src/drawer.js":(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}r.default=e,t&&t.set(e,r);return r}(r("./src/util/index.js"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,i.Observer);var t,r,n,a=u(l);function l(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=a.call(this)).container=e,r.params=t,r.width=0,r.height=t.height*r.params.pixelRatio,r.lastPos=0,r.wrapper=null,r}return t=l,(r=[{key:"style",value:function(e,t){return i.style(e,t)}},{key:"createWrapper",value:function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(e,t){!t&&e.preventDefault();var r,n=e.targetTouches?e.targetTouches[0].clientX:e.clientX,a=this.wrapper.getBoundingClientRect(),s=this.width,o=this.getWidth();return r=!this.params.fillParent&&s<o?(this.params.rtl?a.right-n:n-a.left)*(this.params.pixelRatio/s)||0:((this.params.rtl?a.right-n:n-a.left)+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,i.clamp(r,0,1)}},{key:"setupWrapperEvents",value:function(){var e=this;this.wrapper.addEventListener("click",function(t){var r=e.wrapper.offsetHeight-e.wrapper.clientHeight;if(0!==r){var n=e.wrapper.getBoundingClientRect();if(t.clientY>=n.bottom-r)return}e.params.interact&&e.fireEvent("click",t,e.handleEvent(t))}),this.wrapper.addEventListener("dblclick",function(t){e.params.interact&&e.fireEvent("dblclick",t,e.handleEvent(t))}),this.wrapper.addEventListener("scroll",function(t){return e.fireEvent("scroll",t)})}},{key:"drawPeaks",value:function(e,t,r,n){this.setWidth(t)||this.clearWave(),this.params.barWidth?this.drawBars(e,0,r,n):this.drawWave(e,0,r,n)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(e){var t=this.wrapper.scrollWidth*e;this.recenterOnPosition(t,!0)}},{key:"recenterOnPosition",value:function(e,t){var r=this.wrapper.scrollLeft,n=~~(this.wrapper.clientWidth/2),i=this.wrapper.scrollWidth-this.wrapper.clientWidth,a=e-n,s=a-r;if(0!=i){if(!t&&-n<=s&&s<n){var o=this.params.autoCenterRate;o/=n,o*=i,a=r+(s=Math.max(-o,Math.min(o,s)))}(a=Math.max(0,Math.min(i,a)))!=r&&(this.wrapper.scrollLeft=a)}}},{key:"getScrollX",value:function(){var e=0;if(this.wrapper){var t=this.params.pixelRatio;if(e=Math.round(this.wrapper.scrollLeft*t),this.params.scrollParent){var r=~~(this.wrapper.scrollWidth*t-this.getWidth());e=Math.min(r,Math.max(0,e))}}return e}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(e){return this.width!=e&&(this.width=e,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"setHeight",value:function(e){return e!=this.height&&(this.height=e,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(e){var t=1/this.params.pixelRatio,r=Math.round(e*this.width)*t;if(r<this.lastPos||r-this.lastPos>=t){if(this.lastPos=r,this.params.scrollParent&&this.params.autoCenter){var n=~~(this.wrapper.scrollWidth*e);this.recenterOnPosition(n,this.params.autoCenterImmediately)}this.updateProgress(r)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container&&this.container.removeChild(this.wrapper),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(e,t,r,n){}},{key:"drawWave",value:function(e,t,r,n){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(e){}}])&&s(t.prototype,r),n&&s(t,n),l}();t.default=c,e.exports=t.default},"./src/drawer.multicanvas.js":(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r("./src/drawer.js")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r("./src/util/index.js")),s=u(r("./src/drawer.canvasentry.js"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=h(e);if(t){var a=h(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(u,i.default);var t,r,n,o=f(u);function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=o.call(this,e,t)).maxCanvasWidth=t.maxCanvasWidth,r.maxCanvasElementWidth=Math.round(t.maxCanvasWidth/t.pixelRatio),r.hasProgressCanvas=t.waveColor!=t.progressColor,r.halfPixel=.5/t.pixelRatio,r.canvases=[],r.progressWave=null,r.EntryClass=s.default,r.canvasContextAttributes=t.drawingContextAttributes,r.overlap=2*Math.ceil(t.pixelRatio/2),r.barRadius=t.barRadius||0,r}return t=u,(r=[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"})),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var e=this,t=Math.round(this.width/this.params.pixelRatio),r=Math.ceil(t/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<r;)this.addCanvas();for(;this.canvases.length>r;)this.removeCanvas();var n=this.maxCanvasWidth+this.overlap,i=this.canvases.length-1;this.canvases.forEach(function(t,r){r==i&&(n=e.width-e.maxCanvasWidth*i),e.updateDimensions(t,n,e.height),t.clearWave()})}},{key:"addCanvas",value:function(){var e=new this.EntryClass;e.canvasContextAttributes=this.canvasContextAttributes,e.hasProgressCanvas=this.hasProgressCanvas,e.halfPixel=this.halfPixel;var t=this.maxCanvasElementWidth*this.canvases.length;e.initWave(this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:2,left:t+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}))),this.hasProgressCanvas&&e.initProgress(this.progressWave.appendChild(this.style(document.createElement("canvas"),{position:"absolute",left:t+"px",top:0,bottom:0,height:"100%"}))),this.canvases.push(e)}},{key:"removeCanvas",value:function(){var e=this.canvases[this.canvases.length-1];e.wave.parentElement.removeChild(e.wave),this.hasProgressCanvas&&e.progress.parentElement.removeChild(e.progress),e&&(e.destroy(),e=null),this.canvases.pop()}},{key:"updateDimensions",value:function(e,t,r){var n=Math.round(t/this.params.pixelRatio),i=Math.round(this.width/this.params.pixelRatio);e.updateDimensions(n,i,t,r),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var e=this;a.frame(function(){e.canvases.forEach(function(e){return e.clearWave()})})()}},{key:"drawBars",value:function(e,t,r,n){var i=this;return this.prepareDraw(e,t,r,n,function(e){var t=e.absmax,a=e.hasMinVals,s=(e.height,e.offsetY),o=e.halfH,u=e.peaks,l=e.channelIndex;if(void 0!==r)for(var c=a?2:1,f=u.length/c,h=i.params.barWidth*i.params.pixelRatio,d=h+(null===i.params.barGap?Math.max(i.params.pixelRatio,~~(h/2)):Math.max(i.params.pixelRatio,i.params.barGap*i.params.pixelRatio)),p=f/i.width,v=n,y=r;y<v;y+=d){var m=u[Math.floor(y*p*c)]||0,b=Math.round(m/t*o);0==b&&i.params.barMinHeight&&(b=i.params.barMinHeight),i.fillRect(y+i.halfPixel,o-b+s,h+i.halfPixel,2*b,i.barRadius,l)}})}},{key:"drawWave",value:function(e,t,r,n){var i=this;return this.prepareDraw(e,t,r,n,function(e){var t=e.absmax,a=e.hasMinVals,s=(e.height,e.offsetY),o=e.halfH,u=e.peaks,l=e.channelIndex;if(!a){for(var c=[],f=u.length,h=0;h<f;h++)c[2*h]=u[h],c[2*h+1]=-u[h];u=c}void 0!==r&&i.drawLine(u,t,o,s,r,n,l),i.fillRect(0,o+s-i.halfPixel,i.width,i.halfPixel,i.barRadius,l)})}},{key:"drawLine",value:function(e,t,r,n,i,a,s){var o=this,u=this.params.splitChannelsOptions.channelColors[s]||{},l=u.waveColor,c=u.progressColor;this.canvases.forEach(function(s,u){o.setFillStyles(s,l,c),s.drawLines(e,t,r,n,i,a)})}},{key:"fillRect",value:function(e,t,r,n,i,a){for(var s=Math.floor(e/this.maxCanvasWidth),o=Math.min(Math.ceil((e+r)/this.maxCanvasWidth)+1,this.canvases.length),u=s;u<o;u++){var l=this.canvases[u],c=u*this.maxCanvasWidth,f={x1:Math.max(e,u*this.maxCanvasWidth),y1:t,x2:Math.min(e+r,u*this.maxCanvasWidth+l.wave.width),y2:t+n};if(f.x1<f.x2){var h=this.params.splitChannelsOptions.channelColors[a]||{},d=h.waveColor,p=h.progressColor;this.setFillStyles(l,d,p),l.fillRects(f.x1-c,f.y1,f.x2-f.x1,f.y2-f.y1,i)}}}},{key:"hideChannel",value:function(e){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(e)}},{key:"prepareDraw",value:function(e,t,r,n,i,s,o){var u=this;return a.frame(function(){if(e[0]instanceof Array){var l=e;if(u.params.splitChannels){var c,f=l.filter(function(e,t){return!u.hideChannel(t)});return u.params.splitChannelsOptions.overlay||u.setHeight(Math.max(f.length,1)*u.params.height*u.params.pixelRatio),u.params.splitChannelsOptions&&u.params.splitChannelsOptions.relativeNormalization&&(c=a.max(l.map(function(e){return a.absMax(e)}))),l.forEach(function(e,t){return u.prepareDraw(e,t,r,n,i,f.indexOf(e),c)})}e=l[0]}if(!u.hideChannel(t)){var h=1/u.params.barHeight;u.params.normalize&&(h=void 0===o?a.absMax(e):o);var d=[].some.call(e,function(e){return e<0}),p=u.params.height*u.params.pixelRatio,v=p/2,y=p*s||0;return u.params.splitChannelsOptions&&u.params.splitChannelsOptions.overlay&&(y=0),i({absmax:h,hasMinVals:d,height:p,offsetY:y,halfH:v,peaks:e,channelIndex:t})}})()}},{key:"setFillStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;e.setFillStyles(t,r)}},{key:"getImage",value:function(e,t,r){if("blob"===r)return Promise.all(this.canvases.map(function(n){return n.getImage(e,t,r)}));if("dataURL"===r){var n=this.canvases.map(function(n){return n.getImage(e,t,r)});return n.length>1?n:n[0]}}},{key:"updateProgress",value:function(e){this.style(this.progressWave,{width:e+"px"})}}])&&l(t.prototype,r),n&&l(t,n),u}();t.default=d,e.exports=t.default},"./src/mediaelement-webaudio.js":(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(r("./src/mediaelement.js"));function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,i.default);var t,r,n,c=u(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=c.call(this,e)).params=e,t.sourceMediaElement=null,t}return t=f,(r=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(e,t,r){s(l(f.prototype),"_load",this).call(this,e,t,r),this.createMediaElementSource(e)}},{key:"createMediaElementSource",value:function(e){this.sourceMediaElement=this.ac.createMediaElementSource(e),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(e,t){return this.resumeAudioContext(),s(l(f.prototype),"play",this).call(this,e,t)}},{key:"destroy",value:function(){s(l(f.prototype),"destroy",this).call(this),this.destroyWebAudio()}}])&&a(t.prototype,r),n&&a(t,n),f}();t.default=c,e.exports=t.default},"./src/mediaelement.js":(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(r("./src/webaudio.js")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r("./src/util/index.js"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=f(e);if(t){var a=f(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(h,i.default);var t,r,n,s=c(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=s.call(this,e)).params=e,t.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},t.mediaType=e.mediaType.toLowerCase(),t.elementPosition=e.elementPosition,t.peaks=null,t.playbackRate=1,t.volume=1,t.isMuted=!1,t.buffer=null,t.onPlayEnd=null,t.mediaListeners={},t}return t=h,(r=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var e=this;this.mediaListeners.error=function(){e.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){e.fireEvent("canplay")},this.mediaListeners.ended=function(){e.fireEvent("finish")},this.mediaListeners.play=function(){e.fireEvent("play")},this.mediaListeners.pause=function(){e.fireEvent("pause")},this.mediaListeners.seeked=function(t){e.fireEvent("seek")},this.mediaListeners.volumechange=function(t){e.isMuted=e.media.muted,e.isMuted?e.volume=0:e.volume=e.media.volume,e.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(t){e.media.removeEventListener(t,e.mediaListeners[t]),e.media.addEventListener(t,e.mediaListeners[t])})}},{key:"createTimer",value:function(){var e=this;this.on("play",function t(){e.isPaused()||(e.fireEvent("audioprocess",e.getCurrentTime()),a.frame(t)())}),this.on("pause",function(){e.fireEvent("audioprocess",e.getCurrentTime())})}},{key:"load",value:function(e,t,r,n){var i=document.createElement(this.mediaType);i.controls=this.params.mediaControls,i.autoplay=this.params.autoplay||!1,i.preload=null==n?"auto":n,i.src=e,i.style.width="100%";var a=t.querySelector(this.mediaType);a&&t.removeChild(a),t.appendChild(i),this._load(i,r,n)}},{key:"loadElt",value:function(e,t){e.controls=this.params.mediaControls,e.autoplay=this.params.autoplay||!1,this._load(e,t,e.preload)}},{key:"_load",value:function(e,t,r){if(!(e instanceof HTMLMediaElement)||void 0===e.addEventListener)throw new Error("media parameter is not a valid media element");"function"!=typeof e.load||t&&"none"==r||e.load(),this.media=e,this._setupMediaListeners(),this.peaks=t,this.onPlayEnd=null,this.buffer=null,this.isMuted=e.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var e=(this.buffer||this.media).duration;return e>=1/0&&(e=this.media.seekable.end(0)),e}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(e){null!=e&&(this.media.currentTime=e),this.clearPlayEnd()}},{key:"play",value:function(e,t){this.seekTo(e);var r=this.media.play();return t&&this.setPlayEnd(t),r}},{key:"pause",value:function(){var e;return this.media&&(e=this.media.pause()),this.clearPlayEnd(),e}},{key:"setPlayEnd",value:function(e){var t=this;this.clearPlayEnd(),this._onPlayEnd=function(r){r>=e&&(t.pause(),t.seekTo(e))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(e,t,r){return this.buffer?u(f(h.prototype),"getPeaks",this).call(this,e,t,r):this.peaks||[]}},{key:"setSinkId",value:function(e){return e?this.media.setSinkId?this.media.setSinkId(e):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){this.volume=e,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(e){this.isMuted=this.media.muted=e}},{key:"destroy",value:function(){var e=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(t){e.media&&e.media.removeEventListener(t,e.mediaListeners[t])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}])&&o(t.prototype,r),n&&o(t,n),h}();t.default=h,e.exports=t.default},"./src/peakcache.js":(e,t)=>{"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clearPeakCache()}var t,n,i;return t=e,(n=[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(e,t,r){e!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=e);for(var n=[],i=0;i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<t;)i++;for(i%2==0&&n.push(t);i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<=r;)n.push(this.peakCacheRanges[i]),i++;i%2==0&&n.push(r),n=n.filter(function(e,t,r){return 0==t?e!=r[t+1]:t==r.length-1?e!=r[t-1]:e!=r[t-1]&&e!=r[t+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(n),this.peakCacheRanges=this.peakCacheRanges.sort(function(e,t){return e-t}).filter(function(e,t,r){return 0==t?e!=r[t+1]:t==r.length-1?e!=r[t-1]:e!=r[t-1]&&e!=r[t+1]});var a=[];for(i=0;i<n.length;i+=2)a.push([n[i],n[i+1]]);return a}},{key:"getCacheRanges",value:function(){var e,t=[];for(e=0;e<this.peakCacheRanges.length;e+=2)t.push([this.peakCacheRanges[e],this.peakCacheRanges[e+1]]);return t}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=n,e.exports=t.default},"./src/util/absMax.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.default)(e),r=(0,i.default)(e);return-r>t?-r:t};var n=a(r("./src/util/max.js")),i=a(r("./src/util/min.js"));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},"./src/util/clamp.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return Math.min(Math.max(t,e),r)},e.exports=t.default},"./src/util/fetch.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)throw new Error("fetch options missing");if(!e.url)throw new Error("fetch url missing");var t=new n.default,r=new Headers,i=new Request(e.url);t.controller=new AbortController,e&&e.requestHeaders&&e.requestHeaders.forEach(function(e){r.append(e.key,e.value)});var s=e.responseType||"json",o={method:e.method||"GET",headers:r,mode:e.mode||"cors",credentials:e.credentials||"same-origin",cache:e.cache||"default",redirect:e.redirect||"follow",referrer:e.referrer||"client",signal:t.controller.signal};return fetch(i,o).then(function(e){t.response=e;var r=!0;e.body||(r=!1);var n=e.headers.get("content-length");return null===n&&(r=!1),r?(t.onProgress=function(e){t.fireEvent("progress",e)},new Response(new ReadableStream(new a(t,n,e)),o)):e}).then(function(e){var t;if(e.ok)switch(s){case"arraybuffer":return e.arrayBuffer();case"json":return e.json();case"blob":return e.blob();case"text":return e.text();default:t="Unknown responseType: "+s}throw t||(t="HTTP error status: "+e.status),new Error(t)}).then(function(e){t.fireEvent("success",e)}).catch(function(e){t.fireEvent("error",e)}),t.fetchRequest=i,t};var n=function(e){return e&&e.__esModule?e:{default:e}}(r("./src/util/observer.js"));function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=t,this.instance._reader=n.body.getReader(),this.total=parseInt(r,10),this.loaded=0}var t,r,n;return t=e,(r=[{key:"start",value:function(e){var t=this;!function r(){t.instance._reader.read().then(function(n){var i=n.done,a=n.value;if(i)return 0===t.total&&t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!1}),void e.close();t.loaded+=a.byteLength,t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!(0===t.total)}),e.enqueue(a),r()}).catch(function(t){e.error(t)})}()}}])&&i(t.prototype,r),n&&i(t,n),e}();e.exports=t.default},"./src/util/frame.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(0,n.default)(function(){return e.apply(void 0,r)})}};var n=function(e){return e&&e.__esModule?e:{default:e}}(r("./src/util/request-animation-frame.js"));e.exports=t.default},"./src/util/get-id.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){void 0===e&&(e="wavesurfer_");return e+Math.random().toString(32).substring(2)},e.exports=t.default},"./src/util/index.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getId",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"max",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"min",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"absMax",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Observer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"style",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"frame",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"preventClick",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"fetchFile",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return p.default}});var n=v(r("./src/util/get-id.js")),i=v(r("./src/util/max.js")),a=v(r("./src/util/min.js")),s=v(r("./src/util/absMax.js")),o=v(r("./src/util/observer.js")),u=v(r("./src/util/style.js")),l=v(r("./src/util/request-animation-frame.js")),c=v(r("./src/util/frame.js")),f=v(r("./node_modules/debounce/index.js")),h=v(r("./src/util/prevent-click.js")),d=v(r("./src/util/fetch.js")),p=v(r("./src/util/clamp.js"));function v(e){return e&&e.__esModule?e:{default:e}}},"./src/util/max.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=-1/0;return Object.keys(e).forEach(function(r){e[r]>t&&(t=e[r])}),t},e.exports=t.default},"./src/util/min.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Number(1/0);return Object.keys(e).forEach(function(r){e[r]<t&&(t=e[r])}),t},e.exports=t.default},"./src/util/observer.js":(e,t)=>{"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._disabledEventEmissions=[],this.handlers=null}var t,n,i;return t=e,(n=[{key:"on",value:function(e,t){var r=this;this.handlers||(this.handlers={});var n=this.handlers[e];return n||(n=this.handlers[e]=[]),n.push(t),{name:e,callback:t,un:function(e,t){return r.un(e,t)}}}},{key:"un",value:function(e,t){if(this.handlers){var r,n=this.handlers[e];if(n)if(t)for(r=n.length-1;r>=0;r--)n[r]==t&&n.splice(r,1);else n.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(e,t){var r=this;return this.on(e,function n(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];t.apply(r,a),setTimeout(function(){r.un(e,n)},0)})}},{key:"setDisabledEventEmissions",value:function(e){this._disabledEventEmissions=e}},{key:"_isDisabledEventEmission",value:function(e){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(e)}},{key:"fireEvent",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(this.handlers&&!this._isDisabledEventEmission(e)){var i=this.handlers[e];i&&i.forEach(function(e){e.apply(void 0,r)})}}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=n,e.exports=t.default},"./src/util/prevent-click.js":(e,t)=>{"use strict";function r(e){e.stopPropagation(),document.body.removeEventListener("click",r,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){document.body.addEventListener("click",r,!0)},e.exports=t.default},"./src/util/request-animation-frame.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return setTimeout(e,1e3/60)}).bind(window);t.default=r,e.exports=t.default},"./src/util/style.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Object.keys(t).forEach(function(r){e.style[r]!==t[r]&&(e.style[r]=t[r])}),e},e.exports=t.default},"./src/wavesurfer.js":(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r("./src/util/index.js")),a=c(r("./src/drawer.multicanvas.js")),s=c(r("./src/webaudio.js")),o=c(r("./src/mediaelement.js")),u=c(r("./src/peakcache.js")),l=c(r("./src/mediaelement-webaudio.js"));function c(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,i.Observer);var t=d(r);function r(e){var n;if(m(this,r),(n=t.call(this)).defaultParams={audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:a.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1},waveColor:"#999",xhr:{}},n.backends={MediaElement:o.default,WebAudio:s.default,MediaElementWebAudio:l.default},n.util=i,n.params=Object.assign({},n.defaultParams,e),n.params.splitChannelsOptions=Object.assign({},n.defaultParams.splitChannelsOptions,e.splitChannelsOptions),n.container="string"==typeof e.container?document.querySelector(n.params.container):n.params.container,!n.container)throw new Error("Container element not found");if(null==n.params.mediaContainer?n.mediaContainer=n.container:"string"==typeof n.params.mediaContainer?n.mediaContainer=document.querySelector(n.params.mediaContainer):n.mediaContainer=n.params.mediaContainer,!n.mediaContainer)throw new Error("Media Container element not found");if(n.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(n.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(!0===n.params.rtl&&i.style(n.container,{transform:"rotateY(180deg)"}),n.params.backgroundColor&&n.setBackgroundColor(n.params.backgroundColor),n.savedVolume=0,n.isMuted=!1,n.tmpEvents=[],n.currentRequest=null,n.arraybuffer=null,n.drawer=null,n.backend=null,n.peakCache=null,"function"!=typeof n.params.renderer)throw new Error("Renderer parameter is invalid");n.Drawer=n.params.renderer,"AudioElement"==n.params.backend&&(n.params.backend="MediaElement"),"WebAudio"!=n.params.backend&&"MediaElementWebAudio"!==n.params.backend||s.default.prototype.supportsWebAudio.call(null)||(n.params.backend="MediaElement"),n.Backend=n.backends[n.params.backend],n.initialisedPluginList={},n.isDestroyed=!1,n.isReady=!1;var u=0;return n._onResize=i.debounce(function(){u==n.drawer.wrapper.clientWidth||n.params.scrollParent||(u=n.drawer.wrapper.clientWidth,n.drawer.fireEvent("redraw"))},"number"==typeof n.params.responsive?n.params.responsive:100),p(n,v(n))}return g(r,null,[{key:"create",value:function(e){return new r(e).init()}}]),g(r,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(e){var t=this;return e.forEach(function(e){return t.addPlugin(e)}),e.forEach(function(e){e.deferInit||t.initPlugin(e.name)}),this.fireEvent("plugins-registered",e),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(e){var t=this;if(!e.name)throw new Error("Plugin does not have a name!");if(!e.instance)throw new Error("Plugin ".concat(e.name," does not have an instance property!"));e.staticProps&&Object.keys(e.staticProps).forEach(function(r){t[r]=e.staticProps[r]});var r=e.instance;return Object.getOwnPropertyNames(i.Observer.prototype).forEach(function(e){r.prototype[e]=i.Observer.prototype[e]}),this[e.name]=new r(e.params||{},this),this.fireEvent("plugin-added",e.name),this}},{key:"initPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet!"));return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent("plugin-initialised",e),this}},{key:"destroyPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[e])throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"));if("function"!=typeof this[e].destroy)throw new Error("Plugin ".concat(e," does not have a destroy function!"));return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent("plugin-destroyed",e),this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach(function(t){return e.destroyPlugin(t)})}},{key:"createDrawer",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())}),this.drawer.on("click",function(t,r){setTimeout(function(){return e.seekTo(r)},0)}),this.drawer.on("scroll",function(t){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",t)})}},{key:"createBackend",value:function(){var e=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("finish")}),this.backend.on("play",function(){return e.fireEvent("play")}),this.backend.on("pause",function(){return e.fireEvent("pause")}),this.backend.on("audioprocess",function(t){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",t)}),"MediaElement"!==this.params.backend&&"MediaElementWebAudio"!==this.params.backend||(this.backend.on("seek",function(){e.drawer.progress(e.backend.getPlayedPercents())}),this.backend.on("volume",function(){var t=e.getVolume();e.fireEvent("volume",t),e.backend.isMuted!==e.isMuted&&(e.isMuted=e.backend.isMuted,e.fireEvent("mute",e.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new u.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:"play",value:function(e,t){var r=this;return this.fireEvent("interaction",function(){return r.play(e,t)}),this.backend.play(e,t)}},{key:"setPlayEnd",value:function(e){this.backend.setPlayEnd(e)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var t=this.getDuration()||1,r=this.getCurrentTime()||0;r=Math.max(0,Math.min(t,r+(e||0))),this.seekAndCenter(r/t)}},{key:"seekAndCenter",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var t=this;if("number"!=typeof e||!isFinite(e)||e<0||e>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return t.seekTo(e)});var r="WebAudio"===this.params.backend,n=this.backend.isPaused();r&&!n&&this.backend.pause();var i=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),r&&!n&&this.backend.play(),this.params.scrollParent=i,this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){this.backend.setVolume(e),this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){e!==this.isMuted?(this.backend.setMute?(this.backend.setMute(e),this.isMuted=e):e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)):this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){return this.params.waveColor}},{key:"setWaveColor",value:function(e){this.params.waveColor=e,this.drawBuffer()}},{key:"getProgressColor",value:function(){return this.params.progressColor}},{key:"setProgressColor",value:function(e){this.params.progressColor=e,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e,i.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(e){this.params.splitChannelsOptions.filterChannels=e,this.drawBuffer()}},{key:"drawBuffer",value:function(){var e,t=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),r=this.drawer.getWidth(),n=t,i=0,a=Math.max(i+r,n);if(this.params.fillParent&&(!this.params.scrollParent||t<r)&&(i=0,a=n=r),this.params.partialRender){var s,o=this.peakCache.addRangeToPeakCache(n,i,a);for(s=0;s<o.length;s++)e=this.backend.getPeaks(n,o[s][0],o[s][1]),this.drawer.drawPeaks(e,n,o[s][0],o[s][1])}else e=this.backend.getPeaks(n,i,a),this.drawer.drawPeaks(e,n,i,a);this.fireEvent("redraw",e,n)}},{key:"zoom",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var t=this;this.decodeArrayBuffer(e,function(e){t.isDestroyed||t.loadDecodedBuffer(e)})}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(e){var t=this,r=new FileReader;r.addEventListener("progress",function(e){return t.onProgress(e)}),r.addEventListener("load",function(e){return t.loadArrayBuffer(e.target.result)}),r.addEventListener("error",function(){return t.fireEvent("error","Error reading file")}),r.readAsArrayBuffer(e),this.empty()}},{key:"load",value:function(e,t,r,n){if(!e)throw new Error("url parameter cannot be empty");if(this.empty(),r){var i={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(r),"Peaks are not provided":!t,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof e},a=Object.keys(i).filter(function(e){return i[e]});a.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+a.join("\n\t- ")),r=null)}switch("WebAudio"===this.params.backend&&e instanceof HTMLMediaElement&&(e=e.src),this.params.backend){case"WebAudio":return this.loadBuffer(e,t,n);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(e,t,r,n)}}},{key:"loadBuffer",value:function(e,t,r){var n=this,i=function(t){return t&&n.tmpEvents.push(n.once("ready",t)),n.getArrayBuffer(e,function(e){return n.loadArrayBuffer(e)})};if(!t)return i();this.backend.setPeaks(t,r),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",i))}},{key:"loadMediaElement",value:function(e,t,r,n){var i=this,a=e;if("string"==typeof e)this.backend.load(a,this.mediaContainer,t,r);else{var s=e;this.backend.loadElt(s,t),a=s.src}this.tmpEvents.push(this.backend.once("canplay",function(){i.backend.destroyed||(i.drawBuffer(),i.isReady=!0,i.fireEvent("ready"))}),this.backend.once("error",function(e){return i.fireEvent("error",e)})),t&&(this.backend.setPeaks(t,n),this.drawBuffer(),this.fireEvent("waveform-ready")),t&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(a,function(e){i.decodeArrayBuffer(e,function(e){i.backend.buffer=e,i.backend.setPeaks(null),i.drawBuffer(),i.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(e,t){var r=this;this.arraybuffer=e,this.backend.decodeArrayBuffer(e,function(n){r.isDestroyed||r.arraybuffer!=e||(t(n),r.arraybuffer=null)},function(){return r.fireEvent("error","Error decoding audiobuffer")})}},{key:"getArrayBuffer",value:function(e,t){var r=this,n=Object.assign({url:e,responseType:"arraybuffer"},this.params.xhr),a=i.fetchFile(n);return this.currentRequest=a,this.tmpEvents.push(a.on("progress",function(e){r.onProgress(e)}),a.on("success",function(e){t(e),r.currentRequest=null}),a.on("error",function(e){r.fireEvent("error",e),r.currentRequest=null})),a}},{key:"onProgress",value:function(e){var t;t=e.lengthComputable?e.loaded/e.total:e.loaded/(e.loaded+1e6),this.fireEvent("loading",Math.round(100*t),e.target)}},{key:"exportPCM",value:function(e,t,r,n,i){e=e||1024,n=n||0,t=t||1e4,r=r||!1;var a=this.backend.getPeaks(e,n,i),s=[].map.call(a,function(e){return Math.round(e*t)/t});return new Promise(function(e,t){var n=JSON.stringify(s);r||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(n)),e(n)})}},{key:"exportImage",value:function(e,t,r){return e||(e="image/png"),t||(t=1),r||(r="dataURL"),this.drawer.getImage(e,t,r)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(e){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(e){return e.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}]),r}();t.default=k,k.VERSION="4.5.0",k.util=i,e.exports=t.default},"./src/webaudio.js":(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}r.default=e,t&&t.set(e,r);return r}(r("./src/util/index.js"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=f(e);if(t){var a=f(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h="playing",d="paused",p="finished",v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(r,i.Observer);var t=c(r);function r(e){var n,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(a=t.call(this)).audioContext=null,a.offlineAudioContext=null,a.stateBehaviors=(s(n={},h,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),s(n,d,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}}),s(n,p,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),n),a.params=e,a.ac=e.audioContext||(a.supportsWebAudio()?a.getAudioContext():{}),a.lastPlay=a.ac.currentTime,a.startPosition=0,a.scheduledPause=null,a.states=(s(i={},h,Object.create(a.stateBehaviors[h])),s(i,d,Object.create(a.stateBehaviors[d])),s(i,p,Object.create(a.stateBehaviors[p])),i),a.buffer=null,a.filters=[],a.gainNode=null,a.mergedPeaks=null,a.offlineAc=null,a.peaks=null,a.playbackRate=1,a.analyser=null,a.scriptNode=null,a.source=null,a.splitPeaks=[],a.state=null,a.explicitDuration=e.duration,a.destroyed=!1,a}return u(r,[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(e){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,e)),window.WaveSurferOfflineAudioContext}}]),u(r,[{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(d),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(e){e&&e.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(e){this.state!==this.states[e]&&(this.state=this.states[e],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.setFilters(t)}},{key:"setFilters",value:function(e){this.disconnectFilters(),e&&e.length&&(this.filters=e,this.analyser.disconnect(),e.reduce(function(e,t){return e.connect(t),t},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(r.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(r.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var e=this;this.scriptNode.onaudioprocess=function(){var t=e.getCurrentTime();t>=e.getDuration()?(e.setState(p),e.fireEvent("pause")):t>=e.scheduledPause?e.pause():e.state===e.states[h]&&e.fireEvent("audioprocess",t)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=function(){}}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(e){if(e){var t=new window.Audio;if(!t.setSinkId)return Promise.reject(new Error("setSinkId is not supported in your browser"));t.autoplay=!0;var r=this.ac.createMediaStreamDestination();return this.gainNode.disconnect(),this.gainNode.connect(r),t.srcObject=r.stream,t.setSinkId(e)}return Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"setVolume",value:function(e){this.gainNode.gain.setValueAtTime(e,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(e,t,r){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"AudioContext"in window?this.offlineAc.decodeAudioData(e).then(function(e){return t(e)}).catch(function(e){return r(e)}):this.offlineAc.decodeAudioData(e,function(e){return t(e)},r)}},{key:"setPeaks",value:function(e,t){null!=t&&(this.explicitDuration=t),this.peaks=e}},{key:"setLength",value:function(e){if(!this.mergedPeaks||e!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var t,r=this.buffer?this.buffer.numberOfChannels:1;for(t=0;t<r;t++)this.splitPeaks[t]=[],this.splitPeaks[t][2*(e-1)]=0,this.splitPeaks[t][2*(e-1)+1]=0;this.mergedPeaks[2*(e-1)]=0,this.mergedPeaks[2*(e-1)+1]=0}}},{key:"getPeaks",value:function(e,t,r){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(t=t||0,r=r||e-1,this.setLength(e),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var n=this.createBuffer(1,4096,this.sampleRate);this.buffer=n.buffer}var i,a=this.buffer.length/e,s=~~(a/10)||1,o=this.buffer.numberOfChannels;for(i=0;i<o;i++){var u=this.splitPeaks[i],l=this.buffer.getChannelData(i),c=void 0;for(c=t;c<=r;c++){var f=~~(c*a),h=~~(f+a),d=l[f],p=d,v=void 0;for(v=f;v<h;v+=s){var y=l[v];y>p&&(p=y),y<d&&(d=y)}u[2*c]=p,u[2*c+1]=d,(0==i||p>this.mergedPeaks[2*c])&&(this.mergedPeaks[2*c]=p),(0==i||d<this.mergedPeaks[2*c+1])&&(this.mergedPeaks[2*c+1]=d)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(e){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=e,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[h]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(e,t){if(this.buffer)return this.scheduledPause=null,null==e&&(e=this.getCurrentTime())>=this.getDuration()&&(e=0),null==t&&(t=this.getDuration()),this.startPosition=e,this.lastPlay=this.ac.currentTime,this.state===this.states[p]&&this.setState(d),{start:e,end:t}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(e,t){if(this.buffer){this.createSource();var r=this.seekTo(e,t);e=r.start,t=r.end,this.scheduledPause=t,this.source.start(0,e),this.resumeAudioContext(),this.setState(h),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(d),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(e){this.scheduledPause=e}}]),r}();t.default=v,v.scriptBufferSize=256,e.exports=t.default},"./node_modules/debounce/index.js":e=>{function t(e,t,r){var n,i,a,s,o;function u(){var l=Date.now()-s;l<t&&l>=0?n=setTimeout(u,t-l):(n=null,r||(o=e.apply(a,i),a=i=null))}null==t&&(t=100);var l=function(){a=this,i=arguments,s=Date.now();var l=r&&!n;return n||(n=setTimeout(u,t)),l&&(o=e.apply(a,i),a=i=null),o};return l.clear=function(){n&&(clearTimeout(n),n=null)},l.flush=function(){n&&(o=e.apply(a,i),a=i=null,clearTimeout(n),n=null)},l}t.debounce=t,e.exports=t}},t={};return function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}("./src/wavesurfer.js")})()});
},{}],"ewKB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class e{static create(t){return{name:"microphone",deferInit:!(!t||!t.deferInit)&&t.deferInit,params:t,instance:e}}constructor(e,t){this.params=e,this.wavesurfer=t,this.active=!1,this.paused=!1,this.browser=this.detectBrowser(),this.reloadBufferFunction=(e=>this.reloadBuffer(e));const i=(e,t,i)=>{const r=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return r?new Promise((t,i)=>{r.call(navigator,e,t,i)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))};void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=i),this.constraints=this.params.constraints||{video:!1,audio:!0},this.bufferSize=this.params.bufferSize||4096,this.numberOfInputChannels=this.params.numberOfInputChannels||1,this.numberOfOutputChannels=this.params.numberOfOutputChannels||1,this._onBackendCreated=(()=>{this.micContext=this.wavesurfer.backend.getAudioContext()})}init(){this.wavesurfer.on("backend-created",this._onBackendCreated),this.wavesurfer.backend&&this._onBackendCreated()}destroy(){this.paused=!0,this.wavesurfer.un("backend-created",this._onBackendCreated),this.stop()}start(){navigator.mediaDevices.getUserMedia(this.constraints).then(e=>this.gotStream(e)).catch(e=>this.deviceError(e))}togglePlay(){this.active?(this.paused=!this.paused,this.paused?this.pause():this.play()):this.start()}play(){this.paused=!1,this.connect()}pause(){this.paused=!0,this.disconnect()}stop(){this.active&&(this.stopDevice(),this.wavesurfer.empty())}stopDevice(){this.active=!1,this.disconnect(),this.stream&&this.stream.getTracks&&this.stream.getTracks().forEach(e=>e.stop())}connect(){void 0!==this.stream&&("edge"===this.browser.browser&&(this.localAudioBuffer=this.micContext.createBuffer(this.numberOfInputChannels,this.bufferSize,this.micContext.sampleRate)),this.mediaStreamSource=this.micContext.createMediaStreamSource(this.stream),this.levelChecker=this.micContext.createScriptProcessor(this.bufferSize,this.numberOfInputChannels,this.numberOfOutputChannels),this.mediaStreamSource.connect(this.levelChecker),this.levelChecker.connect(this.micContext.destination),this.levelChecker.onaudioprocess=this.reloadBufferFunction)}disconnect(){void 0!==this.mediaStreamSource&&this.mediaStreamSource.disconnect(),void 0!==this.levelChecker&&(this.levelChecker.disconnect(),this.levelChecker.onaudioprocess=void 0),void 0!==this.localAudioBuffer&&(this.localAudioBuffer=void 0)}reloadBuffer(e){if(!this.paused)if(this.wavesurfer.empty(),"edge"===this.browser.browser){let t,i;for(t=0,i=Math.min(this.localAudioBuffer.numberOfChannels,e.inputBuffer.numberOfChannels);t<i;t++)this.localAudioBuffer.getChannelData(t).set(e.inputBuffer.getChannelData(t));this.wavesurfer.loadDecodedBuffer(this.localAudioBuffer)}else this.wavesurfer.loadDecodedBuffer(e.inputBuffer)}gotStream(e){this.stream=e,this.active=!0,this.play(),this.fireEvent("deviceReady",e)}deviceError(e){this.fireEvent("deviceError",e)}extractVersion(e,t,i){const r=e.match(t);return r&&r.length>=i&&parseInt(r[i],10)}detectBrowser(){const e={browser:null,version:null,minVersion:null};return"undefined"!=typeof window&&window.navigator?navigator.mozGetUserMedia?(e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/(\d+)\./,1),e.minVersion=31,e):navigator.webkitGetUserMedia?(e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2),e.minVersion=38,e):navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),e.minVersion=10547,e):window.RTCPeerConnection&&navigator.userAgent.match(/AppleWebKit\/(\d+)\./)?(e.browser="safari",e.minVersion=11,e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/(\d+)\./,1),e):(e.browser="Not a supported browser.",e):(e.browser="Not a supported browser.",e)}}exports.default=e;
},{}],"CvJj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__extends=e,exports.__rest=n,exports.__decorate=o,exports.__param=a,exports.__metadata=i,exports.__awaiter=c,exports.__generator=u,exports.__exportStar=l,exports.__values=s,exports.__read=p,exports.__spread=y,exports.__spreadArrays=_,exports.__spreadArray=h,exports.__await=d,exports.__asyncGenerator=v,exports.__asyncDelegator=b,exports.__asyncValues=w,exports.__makeTemplateObject=x,exports.__importStar=O,exports.__importDefault=g,exports.__classPrivateFieldGet=j,exports.__classPrivateFieldSet=P,exports.__createBinding=exports.__assign=void 0;var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};function e(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return exports.__assign=r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function n(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function o(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function a(t,e){return function(r,n){e(r,n,t)}}function i(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{u(n.next(t))}catch(e){a(e)}}function c(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,c)}u((n=n.apply(t,e||[])).next())})}function u(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(c){a=[6,c],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}exports.__assign=r;var f=Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]};function l(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||f(e,t,r)}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function _(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var a=arguments[e],i=0,c=a.length;i<c;i++,o++)n[o]=a[i];return n}function h(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t}function d(t){return this instanceof d?(this.v=t,this):new d(t)}function v(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){a.push([t,e,r,n])>1||c(t,e)})})}function c(t,e){try{(r=o[t](e)).value instanceof d?Promise.resolve(r.value.v).then(u,f):l(a[0][2],r)}catch(n){l(a[0][3],n)}var r}function u(t){c("next",t)}function f(t){c("throw",t)}function l(t,e){t(e),a.shift(),a.length&&c(a[0][0],a[0][1])}}function b(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:d(t[n](e)),done:"return"===n}:o?o(e):e}:o}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof s?s(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}exports.__createBinding=f;var m=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&f(e,t,r);return m(e,t),e}function g(t){return t&&t.__esModule?t:{default:t}}function j(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function P(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}
},{}],"fhVr":[function(require,module,exports) {
module.exports={name:"@aws-sdk/client-cognito-identity",description:"AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native",version:"3.7.0",scripts:{clean:"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./",prepublishOnly:"yarn build",pretest:"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js","test:e2e":"mocha **/cjs/**/*.ispec.js && karma start karma.conf.js",test:"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json",build:"yarn build:cjs && yarn build:es",postbuild:"downlevel-dts types types/ts3.4"},main:"./dist/cjs/index.js",types:"./types/index.d.ts",module:"./dist/es/index.js",browser:{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.7.0","@aws-sdk/credential-provider-node":"3.7.0","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.7.0","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.7.0","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.7.0","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1",tslib:"^2.0.0"},devDependencies:{"@aws-sdk/client-documentation-generator":"3.6.1","@aws-sdk/client-iam":"3.7.0","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","downlevel-dts":"0.7.0",jest:"^26.1.0",rimraf:"^3.0.0",typedoc:"^0.19.2",typescript:"~4.1.2"},engines:{node:">=10.0.0"},typesVersions:{"<4.0":{"types/*":["types/ts3.4/*"]}},author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cognito-identity"}};
},{}],"G5GG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__extends=e,exports.__rest=n,exports.__decorate=o,exports.__param=a,exports.__metadata=i,exports.__awaiter=u,exports.__generator=c,exports.__createBinding=f,exports.__exportStar=l,exports.__values=s,exports.__read=p,exports.__spread=y,exports.__spreadArrays=_,exports.__await=h,exports.__asyncGenerator=v,exports.__asyncDelegator=d,exports.__asyncValues=b,exports.__makeTemplateObject=w,exports.__importStar=x,exports.__importDefault=m,exports.__classPrivateFieldGet=O,exports.__classPrivateFieldSet=g,exports.__assign=void 0;var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};function e(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return exports.__assign=r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function n(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function o(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function a(t,e){return function(r,n){e(r,n,t)}}function i(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{c(n.next(t))}catch(e){a(e)}}function u(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,u)}c((n=n.apply(t,e||[])).next())})}function c(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(u){a=[6,u],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function f(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function l(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||(e[r]=t[r])}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function _(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var a=arguments[e],i=0,u=a.length;i<u;i++,o++)n[o]=a[i];return n}function h(t){return this instanceof h?(this.v=t,this):new h(t)}function v(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){a.push([t,e,r,n])>1||u(t,e)})})}function u(t,e){try{(r=o[t](e)).value instanceof h?Promise.resolve(r.value.v).then(c,f):l(a[0][2],r)}catch(n){l(a[0][3],n)}var r}function c(t){u("next",t)}function f(t){u("throw",t)}function l(t,e){t(e),a.shift(),a.length&&u(a[0][0],a[0][1])}}function d(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:h(t[n](e)),done:"return"===n}:o?o(e):e}:o}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof s?s(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function x(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function m(t){return t&&t.__esModule?t:{default:t}}function O(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function g(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}exports.__assign=r;
},{}],"GAH7":[function(require,module,exports) {
"use strict";function t(t){return"string"==typeof t?0===t.length:0===t.byteLength}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEmptyData=void 0,exports.isEmptyData=t;
},{}],"Q6lB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EMPTY_DATA_SHA_256=exports.SHA_256_HMAC_ALGO=exports.SHA_256_HASH=void 0,exports.SHA_256_HASH={name:"SHA-256"},exports.SHA_256_HMAC_ALGO={name:"HMAC",hash:exports.SHA_256_HASH},exports.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);
},{}],"o6Mx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toUtf8=exports.fromUtf8=void 0;var r=function(r){for(var e=[],t=0,o=r.length;t<o;t++){var f=r.charCodeAt(t);if(f<128)e.push(f);else if(f<2048)e.push(f>>6|192,63&f|128);else if(t+1<r.length&&55296==(64512&f)&&56320==(64512&r.charCodeAt(t+1))){var n=65536+((1023&f)<<10)+(1023&r.charCodeAt(++t));e.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else e.push(f>>12|224,f>>6&63|128,63&f|128)}return Uint8Array.from(e)};exports.fromUtf8=r;var e=function(r){for(var e="",t=0,o=r.length;t<o;t++){var f=r[t];if(f<128)e+=String.fromCharCode(f);else if(192<=f&&f<224){var n=r[++t];e+=String.fromCharCode((31&f)<<6|63&n)}else if(240<=f&&f<365){var a="%"+[f,r[++t],r[++t],r[++t]].map(function(r){return r.toString(16)}).join("%");e+=decodeURIComponent(a)}else e+=String.fromCharCode((15&f)<<12|(63&r[++t])<<6|63&r[++t])}return e};exports.toUtf8=e;
},{}],"YE3c":[function(require,module,exports) {
"use strict";function e(e){return(new TextEncoder).encode(e)}function t(e){return new TextDecoder("utf-8").decode(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromUtf8=e,exports.toUtf8=t;
},{}],"SHh0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toUtf8=exports.fromUtf8=void 0;var t=require("./pureJs"),e=require("./whatwgEncodingApi"),o=function(o){return"function"==typeof TextEncoder?(0,e.fromUtf8)(o):(0,t.fromUtf8)(o)};exports.fromUtf8=o;var r=function(o){return"function"==typeof TextDecoder?(0,e.toUtf8)(o):(0,t.toUtf8)(o)};exports.toUtf8=r;
},{"./pureJs":"o6Mx","./whatwgEncodingApi":"YE3c"}],"YkuC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.locateWindow=n;var e={};function n(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:e}
},{}],"FmRa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha256=void 0;var t=require("./isEmptyData"),e=require("./constants"),r=require("@aws-sdk/util-utf8-browser"),n=require("@aws-sdk/util-locate-window"),o=function(){function r(t){t?(this.operation=i(t).then(function(t){return n.locateWindow().msCrypto.subtle.sign(e.SHA_256_HMAC_ALGO,t)}),this.operation.catch(function(){})):this.operation=Promise.resolve(n.locateWindow().msCrypto.subtle.digest("SHA-256"))}return r.prototype.update=function(e){var r=this;t.isEmptyData(e)||(this.operation=this.operation.then(function(t){return t.onerror=function(){r.operation=Promise.reject(new Error("Error encountered updating hash"))},t.process(s(e)),t}),this.operation.catch(function(){}))},r.prototype.digest=function(){return this.operation.then(function(t){return new Promise(function(e,r){t.onerror=function(){r("Error encountered finalizing hash")},t.oncomplete=function(){t.result&&e(new Uint8Array(t.result)),r("Error encountered finalizing hash")},t.finish()})})},r}();function i(t){return new Promise(function(r,o){var i=n.locateWindow().msCrypto.subtle.importKey("raw",s(t),e.SHA_256_HMAC_ALGO,!1,["sign"]);i.oncomplete=function(){i.result&&r(i.result),o("ImportKey completed without importing key.")},i.onerror=function(){o("ImportKey failed to import key.")}})}function s(t){return"string"==typeof t?r.fromUtf8(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}exports.Sha256=o;
},{"./isEmptyData":"GAH7","./constants":"Q6lB","@aws-sdk/util-utf8-browser":"SHh0","@aws-sdk/util-locate-window":"YkuC"}],"DCA6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha256=void 0;var t=require("@aws-sdk/util-utf8-browser"),e=require("./isEmptyData"),r=require("./constants"),n=require("@aws-sdk/util-locate-window"),i=function(){function t(t){this.toHash=new Uint8Array(0),void 0!==t&&(this.key=new Promise(function(e,i){n.locateWindow().crypto.subtle.importKey("raw",s(t),r.SHA_256_HMAC_ALGO,!1,["sign"]).then(e,i)}),this.key.catch(function(){}))}return t.prototype.update=function(t){if(!e.isEmptyData(t)){var r=s(t),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},t.prototype.digest=function(){var t=this;return this.key?this.key.then(function(e){return n.locateWindow().crypto.subtle.sign(r.SHA_256_HMAC_ALGO,e,t.toHash).then(function(t){return new Uint8Array(t)})}):e.isEmptyData(this.toHash)?Promise.resolve(r.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return n.locateWindow().crypto.subtle.digest(r.SHA_256_HASH,t.toHash)}).then(function(t){return Promise.resolve(new Uint8Array(t))})},t}();function s(e){return"string"==typeof e?t.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}exports.Sha256=i;
},{"@aws-sdk/util-utf8-browser":"SHh0","./isEmptyData":"GAH7","./constants":"Q6lB","@aws-sdk/util-locate-window":"YkuC"}],"zmxf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAX_HASHABLE_LENGTH=exports.INIT=exports.KEY=exports.DIGEST_LENGTH=exports.BLOCK_SIZE=void 0,exports.BLOCK_SIZE=64,exports.DIGEST_LENGTH=32,exports.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),exports.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],exports.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1;
},{}],"fyAK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RawSha256=void 0;var t=require("./constants"),e=function(){function e(){this.state=Int32Array.from(t.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var s=0,h=e.byteLength;if(this.bytesHashed+=h,8*this.bytesHashed>t.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;h>0;)this.buffer[this.bufferLength++]=e[s++],h--,this.bufferLength===t.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,s=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),h=this.bufferLength;if(s.setUint8(this.bufferLength++,128),h%t.BLOCK_SIZE>=t.BLOCK_SIZE-8){for(var i=this.bufferLength;i<t.BLOCK_SIZE;i++)s.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<t.BLOCK_SIZE-8;i++)s.setUint8(i,0);s.setUint32(t.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),s.setUint32(t.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var r=new Uint8Array(t.DIGEST_LENGTH);for(i=0;i<8;i++)r[4*i]=this.state[i]>>>24&255,r[4*i+1]=this.state[i]>>>16&255,r[4*i+2]=this.state[i]>>>8&255,r[4*i+3]=this.state[i]>>>0&255;return r},e.prototype.hashBuffer=function(){for(var e=this.buffer,s=this.state,h=s[0],i=s[1],r=s[2],f=s[3],n=s[4],a=s[5],o=s[6],u=s[7],b=0;b<t.BLOCK_SIZE;b++){if(b<16)this.temp[b]=(255&e[4*b])<<24|(255&e[4*b+1])<<16|(255&e[4*b+2])<<8|255&e[4*b+3];else{var L=this.temp[b-2],p=(L>>>17|L<<15)^(L>>>19|L<<13)^L>>>10,d=((L=this.temp[b-15])>>>7|L<<25)^(L>>>18|L<<14)^L>>>3;this.temp[b]=(p+this.temp[b-7]|0)+(d+this.temp[b-16]|0)}var y=(((n>>>6|n<<26)^(n>>>11|n<<21)^(n>>>25|n<<7))+(n&a^~n&o)|0)+(u+(t.KEY[b]+this.temp[b]|0)|0)|0,E=((h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10))+(h&i^h&r^i&r)|0;u=o,o=a,a=n,n=f+y|0,f=r,r=i,i=h,h=y+E|0}s[0]+=h,s[1]+=i,s[2]+=r,s[3]+=f,s[4]+=n,s[5]+=a,s[6]+=o,s[7]+=u},e}();exports.RawSha256=e;
},{"./constants":"zmxf"}],"VBH6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha256=void 0;var t=require("tslib"),e=require("./constants"),r=require("./RawSha256"),i=require("@aws-sdk/util-utf8-browser"),n=function(){function i(t){if(this.hash=new r.RawSha256,t){this.outer=new r.RawSha256;var i=s(t),n=new Uint8Array(e.BLOCK_SIZE);n.set(i);for(var o=0;o<e.BLOCK_SIZE;o++)i[o]^=54,n[o]^=92;this.hash.update(i),this.outer.update(n);for(o=0;o<i.byteLength;o++)i[o]=0}}return i.prototype.update=function(t){if(!o(t)&&!this.error)try{this.hash.update(h(t))}catch(e){this.error=e}},i.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},i.prototype.digest=function(){return t.__awaiter(this,void 0,void 0,function(){return t.__generator(this,function(t){return[2,this.digestSync()]})})},i}();function s(t){var i=h(t);if(i.byteLength>e.BLOCK_SIZE){var n=new r.RawSha256;n.update(i),i=n.digest()}var s=new Uint8Array(e.BLOCK_SIZE);return s.set(i),s}function o(t){return"string"==typeof t?0===t.length:0===t.byteLength}function h(t){return"string"==typeof t?i.fromUtf8(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}exports.Sha256=n;
},{"tslib":"G5GG","./constants":"zmxf","./RawSha256":"fyAK","@aws-sdk/util-utf8-browser":"SHh0"}],"YCaC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib");e.__exportStar(require("./jsSha256"),exports);
},{"tslib":"G5GG","./jsSha256":"VBH6"}],"WQNc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.supportsZeroByteGCM=exports.supportsSubtleCrypto=exports.supportsSecureRandom=exports.supportsWebCrypto=void 0;var e=require("tslib"),t=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function r(e){return!(!n(e)||"object"!=typeof e.crypto.subtle)&&o(e.crypto.subtle)}function n(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function o(e){return e&&t.every(function(t){return"function"==typeof e[t]})}function s(t){return e.__awaiter(this,void 0,void 0,function(){var r;return e.__generator(this,function(e){switch(e.label){case 0:if(!o(t))return[2,!1];e.label=1;case 1:return e.trys.push([1,4,,5]),[4,t.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return r=e.sent(),[4,t.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},r,new Uint8Array(0))];case 3:return[2,16===e.sent().byteLength];case 4:return e.sent(),[2,!1];case 5:return[2]}})})}exports.supportsWebCrypto=r,exports.supportsSecureRandom=n,exports.supportsSubtleCrypto=o,exports.supportsZeroByteGCM=s;
},{"tslib":"G5GG"}],"ABT2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib");e.__exportStar(require("./supportsWebCrypto"),exports);
},{"tslib":"G5GG","./supportsWebCrypto":"WQNc"}],"YyWV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"qo7Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMsWindow=void 0;var e=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function t(e){return"MSInputMethodContext"in e&&"msCrypto"in e}function r(r){if(t(r)&&void 0!==r.msCrypto.subtle){var n=r.msCrypto,o=n.getRandomValues,i=n.subtle;return e.map(function(e){return i[e]}).concat(o).every(function(e){return"function"==typeof e})}return!1}exports.isMsWindow=r;
},{}],"lepk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib");e.__exportStar(require("./CryptoOperation"),exports),e.__exportStar(require("./Key"),exports),e.__exportStar(require("./KeyOperation"),exports),e.__exportStar(require("./MsSubtleCrypto"),exports),e.__exportStar(require("./MsWindow"),exports);
},{"tslib":"G5GG","./CryptoOperation":"YyWV","./Key":"YyWV","./KeyOperation":"YyWV","./MsSubtleCrypto":"YyWV","./MsWindow":"qo7Y"}],"FDtm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha256=void 0;var e=require("./ie11Sha256"),t=require("./webCryptoSha256"),r=require("@aws-crypto/sha256-js"),s=require("@aws-crypto/supports-web-crypto"),o=require("@aws-crypto/ie11-detection"),i=require("@aws-sdk/util-locate-window"),a=function(){function a(a){s.supportsWebCrypto(i.locateWindow())?this.hash=new t.Sha256(a):o.isMsWindow(i.locateWindow())?this.hash=new e.Sha256(a):this.hash=new r.Sha256(a)}return a.prototype.update=function(e,t){this.hash.update(e,t)},a.prototype.digest=function(){return this.hash.digest()},a}();exports.Sha256=a;
},{"./ie11Sha256":"FmRa","./webCryptoSha256":"DCA6","@aws-crypto/sha256-js":"YCaC","@aws-crypto/supports-web-crypto":"ABT2","@aws-crypto/ie11-detection":"lepk","@aws-sdk/util-locate-window":"YkuC"}],"zTbm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebCryptoSha256=exports.Ie11Sha256=void 0;var e=require("tslib");e.__exportStar(require("./crossPlatformSha256"),exports);var r=require("./ie11Sha256");Object.defineProperty(exports,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var t=require("./webCryptoSha256");Object.defineProperty(exports,"WebCryptoSha256",{enumerable:!0,get:function(){return t.Sha256}});
},{"tslib":"G5GG","./crossPlatformSha256":"FDtm","./ie11Sha256":"FmRa","./webCryptoSha256":"DCA6"}],"CwTk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HttpResponse=void 0;var e=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}();exports.HttpResponse=e;
},{}],"Vxbb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HttpRequest=void 0;var t=require("tslib"),e=function(){function e(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?":"!==t.protocol.substr(-1)?t.protocol+":":t.protocol:"https:",this.path=t.path?"/"!==t.path.charAt(0)?"/"+t.path:t.path:"/"}return e.isInstance=function(t){if(!t)return!1;var e=t;return"method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers},e.prototype.clone=function(){var o=new e((0,t.__assign)((0,t.__assign)({},this),{headers:(0,t.__assign)({},this.headers)}));return o.query&&(o.query=r(o.query)),o},e}();function r(e){return Object.keys(e).reduce(function(r,o){var s,n=e[o];return(0,t.__assign)((0,t.__assign)({},r),((s={})[o]=Array.isArray(n)?(0,t.__spread)(n):n,s))},{})}exports.HttpRequest=e;
},{"tslib":"G5GG"}],"XWiR":[function(require,module,exports) {
"use strict";function e(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isValidHostname=e;
},{}],"V5Hv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./httpResponse");Object.keys(e).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})});var t=require("./httpRequest");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var r=require("./httpHandler");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var n=require("./isValidHostname");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});
},{"./httpResponse":"CwTk","./httpRequest":"Vxbb","./httpHandler":"YyWV","./isValidHostname":"XWiR"}],"lCvL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.escapeUri=void 0;var e=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,r)};exports.escapeUri=e;var r=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};
},{}],"CBem":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.escapeUriPath=void 0;var e=require("./escape-uri"),r=function(r){return r.split("/").map(e.escapeUri).join("/")};exports.escapeUriPath=r;
},{"./escape-uri":"lCvL"}],"pDKB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./escape-uri");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./escape-uri-path");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});
},{"./escape-uri":"lCvL","./escape-uri-path":"CBem"}],"qZ7e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildQueryString=t;var r=require("tslib"),e=require("@aws-sdk/util-uri-escape");function t(t){var a,i,s=[];try{for(var u=(0,r.__values)(Object.keys(t).sort()),l=u.next();!l.done;l=u.next()){var n=l.value,o=t[n];if(n=(0,e.escapeUri)(n),Array.isArray(o))for(var c=0,p=o.length;c<p;c++)s.push(n+"="+(0,e.escapeUri)(o[c]));else{var y=n;(o||"string"==typeof o)&&(y+="="+(0,e.escapeUri)(o)),s.push(y)}}}catch(f){a={error:f}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}return s.join("&")}
},{"tslib":"G5GG","@aws-sdk/util-uri-escape":"pDKB"}],"GUrC":[function(require,module,exports) {
"use strict";function e(e){return void 0===e&&(e=0),new Promise(function(t,o){e&&setTimeout(function(){var t=new Error("Request did not complete within "+e+" ms");t.name="TimeoutError",o(t)},e)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.requestTimeout=e;
},{}],"zlni":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FetchHttpHandler=void 0;var e=require("tslib"),r=require("@aws-sdk/protocol-http"),t=require("@aws-sdk/querystring-builder"),o=require("./request-timeout"),n=function(){function n(e){var r=(void 0===e?{}:e).requestTimeout;this.requestTimeout=r}return n.prototype.destroy=function(){},n.prototype.handle=function(n,s){var u=(void 0===s?{}:s).abortSignal,a=this.requestTimeout;if(null==u?void 0:u.aborted){var i=new Error("Request aborted");return i.name="AbortError",Promise.reject(i)}var d=n.path;if(n.query){var l=(0,t.buildQueryString)(n.query);l&&(d+="?"+l)}var p=n.port,h=n.method,v=n.protocol+"//"+n.hostname+(p?":"+p:"")+d,b={body:"GET"===h||"HEAD"===h?void 0:n.body,headers:new Headers(n.headers),method:h};"undefined"!=typeof AbortController&&(b.signal=u);var c=new Request(v,b),y=[fetch(c).then(function(t){var o,n,s=t.headers,u={};try{for(var a=(0,e.__values)(s.entries()),i=a.next();!i.done;i=a.next()){var d=i.value;u[d[0]]=d[1]}}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return void 0!==t.body?{response:new r.HttpResponse({headers:u,statusCode:t.status,body:t.body})}:t.blob().then(function(e){return{response:new r.HttpResponse({headers:u,statusCode:t.status,body:e})}})}),(0,o.requestTimeout)(a)];return u&&y.push(new Promise(function(e,r){u.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",r(e)}})),Promise.race(y)},n}();exports.FetchHttpHandler=n;
},{"tslib":"G5GG","@aws-sdk/protocol-http":"V5Hv","@aws-sdk/querystring-builder":"qZ7e","./request-timeout":"GUrC"}],"aNuR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromBase64=h,exports.toBase64=c;for(var r={},t=new Array(64),e=0,a="A".charCodeAt(0),o="Z".charCodeAt(0);e+a<=o;e++){var n=String.fromCharCode(e+a);r[n]=e,t[e]=n}for(e=0,a="a".charCodeAt(0),o="z".charCodeAt(0);e+a<=o;e++){n=String.fromCharCode(e+a);var f=e+26;r[n]=f,t[f]=n}for(e=0;e<10;e++){r[e.toString(10)]=e+52;n=e.toString(10),f=e+52;r[n]=f,t[f]=n}r["+"]=62,t[62]="+",r["/"]=63,t[63]="/";var v=6,i=8,s=63;function h(t){var e=t.length/4*3;"=="===t.substr(-2)?e-=2:"="===t.substr(-1)&&e--;for(var a=new ArrayBuffer(e),o=new DataView(a),n=0;n<t.length;n+=4){for(var f=0,s=0,h=n,c=n+3;h<=c;h++)"="!==t[h]?(f|=r[t[h]]<<(c-h)*v,s+=v):f>>=v;var u=n/4*3;f>>=s%i;for(var l=Math.floor(s/i),d=0;d<l;d++){var g=(l-d-1)*i;o.setUint8(u+d,(f&255<<g)>>g)}}return new Uint8Array(a)}function c(r){for(var e="",a=0;a<r.length;a+=3){for(var o=0,n=0,f=a,h=Math.min(a+3,r.length);f<h;f++)o|=r[f]<<(h-f-1)*i,n+=i;var c=Math.ceil(n/v);o<<=c*v-n;for(var u=1;u<=c;u++){var l=(c-u)*v;e+=t[(o&s<<l)>>l]}e+="==".slice(0,4-c)}return e}
},{}],"u7Pp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.streamCollector=void 0;var e=require("tslib"),r=require("@aws-sdk/util-base64-browser"),t=function(e){return"function"==typeof Blob&&e instanceof Blob?n(e):o(e)};function n(t){return(0,e.__awaiter)(this,void 0,void 0,function(){var n,o;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,a(t)];case 1:return n=e.sent(),o=(0,r.fromBase64)(n),[2,new Uint8Array(o)]}})})}function o(r){return(0,e.__awaiter)(this,void 0,void 0,function(){var t,n,o,a,i,u,s;return(0,e.__generator)(this,function(e){switch(e.label){case 0:t=new Uint8Array(0),n=r.getReader(),o=!1,e.label=1;case 1:return o?[3,3]:[4,n.read()];case 2:return a=e.sent(),i=a.done,(u=a.value)&&(s=t,(t=new Uint8Array(s.length+u.length)).set(s),t.set(u,s.length)),o=i,[3,1];case 3:return[2,t]}})})}function a(e){return new Promise(function(r,t){var n=new FileReader;n.onloadend=function(){var e;if(2!==n.readyState)return t(new Error("Reader aborted too early"));var o=null!==(e=n.result)&&void 0!==e?e:"",a=o.indexOf(","),i=a>-1?a+1:o.length;r(o.substring(i))},n.onabort=function(){return t(new Error("Read aborted"))},n.onerror=function(){return t(n.error)},n.readAsDataURL(e)})}exports.streamCollector=t;
},{"tslib":"G5GG","@aws-sdk/util-base64-browser":"aNuR"}],"FVoP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./fetch-http-handler");Object.keys(e).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})});var t=require("./stream-collector");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});
},{"./fetch-http-handler":"zlni","./stream-collector":"u7Pp"}],"ND1w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.invalidFunction=void 0;var e=function(e){return function(){throw new Error(e)}};exports.invalidFunction=e;
},{}],"yH8z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.invalidProvider=void 0;var e=function(e){return function(){return Promise.reject(e)}};exports.invalidProvider=e;
},{}],"lkxb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./invalidFunction");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./invalidProvider");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});
},{"./invalidFunction":"ND1w","./invalidProvider":"yH8z"}],"CXD2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRetryPlugin=exports.retryMiddlewareOptions=exports.retryMiddleware=void 0;var e=require("tslib"),r=function(r){return function(t,i){return function(n){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var o;return(0,e.__generator)(this,function(d){return(null===(o=null==r?void 0:r.retryStrategy)||void 0===o?void 0:o.mode)&&(i.userAgent=(0,e.__spread)(i.userAgent||[],[["cfg/retry-mode",r.retryStrategy.mode]])),[2,r.retryStrategy.retry(t,n)]})})}}};exports.retryMiddleware=r;var t={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0};exports.retryMiddlewareOptions=t;var i=function(e){return{applyToStack:function(i){i.add(r(e),t)}}};exports.getRetryPlugin=i;
},{"tslib":"G5GG"}],"rIdU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.REQUEST_HEADER=exports.INVOCATION_ID_HEADER=exports.NO_RETRY_INCREMENT=exports.TIMEOUT_RETRY_COST=exports.RETRY_COST=exports.INITIAL_RETRY_TOKENS=exports.THROTTLING_RETRY_DELAY_BASE=exports.MAXIMUM_RETRY_DELAY=exports.DEFAULT_RETRY_DELAY_BASE=void 0;var E=100;exports.DEFAULT_RETRY_DELAY_BASE=E;var T=2e4;exports.MAXIMUM_RETRY_DELAY=T;var R=500;exports.THROTTLING_RETRY_DELAY_BASE=R;var _=500;exports.INITIAL_RETRY_TOKENS=_;var r=5;exports.RETRY_COST=r;var e=10;exports.TIMEOUT_RETRY_COST=e;var s=1;exports.NO_RETRY_INCREMENT=s;var t="amz-sdk-invocation-id";exports.INVOCATION_ID_HEADER=t;var o="amz-sdk-request";exports.REQUEST_HEADER=o;
},{}],"Zwpp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOmitRetryHeadersPlugin=exports.omitRetryHeadersMiddlewareOptions=exports.omitRetryHeadersMiddleware=void 0;var e=require("tslib"),r=require("@aws-sdk/protocol-http"),t=require("./constants"),i=function(){return function(i){return function(o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a;return(0,e.__generator)(this,function(e){return a=o.request,r.HttpRequest.isInstance(a)&&(delete a.headers[t.INVOCATION_ID_HEADER],delete a.headers[t.REQUEST_HEADER]),[2,i(o)]})})}}};exports.omitRetryHeadersMiddleware=i;var o={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0};exports.omitRetryHeadersMiddlewareOptions=o;var a=function(e){return{applyToStack:function(e){e.addRelativeTo(i(),o)}}};exports.getOmitRetryHeadersPlugin=a;
},{"tslib":"G5GG","@aws-sdk/protocol-http":"V5Hv","./constants":"rIdU"}],"EDru":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TRANSIENT_ERROR_STATUS_CODES=exports.TRANSIENT_ERROR_CODES=exports.THROTTLING_ERROR_CODES=exports.CLOCK_SKEW_ERROR_CODES=void 0;var e=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"];exports.CLOCK_SKEW_ERROR_CODES=e;var t=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"];exports.THROTTLING_ERROR_CODES=t;var o=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"];exports.TRANSIENT_ERROR_CODES=o;var r=[500,502,503,504];exports.TRANSIENT_ERROR_STATUS_CODES=r;
},{}],"jrUC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isTransientError=exports.isThrottlingError=exports.isClockSkewError=exports.isRetryableByTrait=void 0;var r=require("./constants"),t=function(r){return void 0!==r.$retryable};exports.isRetryableByTrait=t;var e=function(t){return r.CLOCK_SKEW_ERROR_CODES.includes(t.name)};exports.isClockSkewError=e;var o=function(t){var e,o;return 429===(null===(e=t.$metadata)||void 0===e?void 0:e.httpStatusCode)||r.THROTTLING_ERROR_CODES.includes(t.name)||1==(null===(o=t.$retryable)||void 0===o?void 0:o.throttling)};exports.isThrottlingError=o;var i=function(t){var e;return r.TRANSIENT_ERROR_CODES.includes(t.name)||r.TRANSIENT_ERROR_STATUS_CODES.includes((null===(e=t.$metadata)||void 0===e?void 0:e.httpStatusCode)||0)};exports.isTransientError=i;
},{"./constants":"EDru"}],"ogM3":[function(require,module,exports) {
var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var o=new Uint8Array(16);module.exports=function(){return e(o),o}}else{var r=new Array(16);module.exports=function(){for(var e,o=0;o<16;o++)0==(3&o)&&(e=4294967296*Math.random()),r[o]=e>>>((3&o)<<3)&255;return r}}
},{}],"O4sp":[function(require,module,exports) {
for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);function t(o,t){var n=t||0,u=r;return[u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],"-",u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]],u[o[n++]]].join("")}module.exports=t;
},{}],"acME":[function(require,module,exports) {
var e,r,o=require("./lib/rng"),s=require("./lib/bytesToUuid"),i=0,n=0;function c(c,l,u){var v=l&&u||0,a=l||[],d=(c=c||{}).node||e,t=void 0!==c.clockseq?c.clockseq:r;if(null==d||null==t){var m=o();null==d&&(d=e=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==t&&(t=r=16383&(m[6]<<8|m[7]))}var q=void 0!==c.msecs?c.msecs:(new Date).getTime(),f=void 0!==c.nsecs?c.nsecs:n+1,b=q-i+(f-n)/1e4;if(b<0&&void 0===c.clockseq&&(t=t+1&16383),(b<0||q>i)&&void 0===c.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=q,n=f,r=t;var k=(1e4*(268435455&(q+=122192928e5))+f)%4294967296;a[v++]=k>>>24&255,a[v++]=k>>>16&255,a[v++]=k>>>8&255,a[v++]=255&k;var w=q/4294967296*1e4&268435455;a[v++]=w>>>8&255,a[v++]=255&w,a[v++]=w>>>24&15|16,a[v++]=w>>>16&255,a[v++]=t>>>8|128,a[v++]=255&t;for(var g=0;g<6;++g)a[v+g]=d[g];return l||s(a)}module.exports=c;
},{"./lib/rng":"ogM3","./lib/bytesToUuid":"O4sp"}],"UOdq":[function(require,module,exports) {
var r=require("./lib/rng"),n=require("./lib/bytesToUuid");function e(e,i,u){var a=i&&u||0;"string"==typeof e&&(i="binary"===e?new Array(16):null,e=null);var l=(e=e||{}).random||(e.rng||r)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,i)for(var o=0;o<16;++o)i[a+o]=l[o];return i||n(l)}module.exports=e;
},{"./lib/rng":"ogM3","./lib/bytesToUuid":"O4sp"}],"gV9a":[function(require,module,exports) {
var e=require("./v1"),r=require("./v4"),v=r;v.v1=e,v.v4=r,module.exports=v;
},{"./v1":"acME","./v4":"UOdq"}],"VgbI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDefaultRetryQuota=void 0;var e=require("./constants"),r=function(r){var t=r,n=r,o=function(r){return"TimeoutError"===r.name?e.TIMEOUT_RETRY_COST:e.RETRY_COST},u=function(e){return o(e)<=n};return Object.freeze({hasRetryTokens:u,retrieveRetryTokens:function(e){if(!u(e))throw new Error("No retry token available");var r=o(e);return n-=r,r},releaseRetryTokens:function(r){n+=null!=r?r:e.NO_RETRY_INCREMENT,n=Math.min(n,t)}})};exports.getDefaultRetryQuota=r;
},{"./constants":"rIdU"}],"XZbD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultDelayDecider=void 0;var e=require("./constants"),t=function(t,r){return Math.floor(Math.min(e.MAXIMUM_RETRY_DELAY,Math.random()*Math.pow(2,r)*t))};exports.defaultDelayDecider=t;
},{"./constants":"rIdU"}],"mhaK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultRetryDecider=void 0;var r=require("@aws-sdk/service-error-classification"),e=function(e){return!!e&&((0,r.isRetryableByTrait)(e)||(0,r.isClockSkewError)(e)||(0,r.isThrottlingError)(e)||(0,r.isTransientError)(e))};exports.defaultRetryDecider=e;
},{"@aws-sdk/service-error-classification":"jrUC"}],"iKNl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StandardRetryStrategy=exports.DEFAULT_RETRY_MODE=exports.DEFAULT_MAX_ATTEMPTS=void 0;var e=require("tslib"),t=require("@aws-sdk/protocol-http"),r=require("@aws-sdk/service-error-classification"),a=require("uuid"),s=require("./constants"),n=require("./defaultRetryQuota"),i=require("./delayDecider"),u=require("./retryDecider"),o=3;exports.DEFAULT_MAX_ATTEMPTS=o;var d="standard";exports.DEFAULT_RETRY_MODE=d;var c=function(){function c(e,t){var r,a,o;this.maxAttemptsProvider=e,this.mode=d,this.retryDecider=null!==(r=null==t?void 0:t.retryDecider)&&void 0!==r?r:u.defaultRetryDecider,this.delayDecider=null!==(a=null==t?void 0:t.delayDecider)&&void 0!==a?a:i.defaultDelayDecider,this.retryQuota=null!==(o=null==t?void 0:t.retryQuota)&&void 0!==o?o:(0,n.getDefaultRetryQuota)(s.INITIAL_RETRY_TOKENS)}return c.prototype.shouldRetry=function(e,t,r){return t<r&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},c.prototype.getMaxAttempts=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var t;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return t=e.sent(),[3,3];case 2:return e.sent(),t=o,[3,3];case 3:return[2,t]}})})},c.prototype.retry=function(n,i){return(0,e.__awaiter)(this,void 0,void 0,function(){var u,o,d,c,l,y,p,_;return(0,e.__generator)(this,function(h){switch(h.label){case 0:return o=0,d=0,[4,this.getMaxAttempts()];case 1:c=h.sent(),l=i.request,t.HttpRequest.isInstance(l)&&(l.headers[s.INVOCATION_ID_HEADER]=(0,a.v4)()),y=function(){var a,y,_,h,R;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,5]),t.HttpRequest.isInstance(l)&&(l.headers[s.REQUEST_HEADER]="attempt="+(o+1)+"; max="+c),[4,n(i)];case 1:return a=e.sent(),y=a.response,_=a.output,p.retryQuota.releaseRetryTokens(u),_.$metadata.attempts=o+1,_.$metadata.totalRetryDelay=d,[2,{value:{response:y,output:_}}];case 2:return h=e.sent(),o++,p.shouldRetry(h,o,c)?(u=p.retryQuota.retrieveRetryTokens(h),R=p.delayDecider((0,r.isThrottlingError)(h)?s.THROTTLING_RETRY_DELAY_BASE:s.DEFAULT_RETRY_DELAY_BASE,o),d+=R,[4,new Promise(function(e){return setTimeout(e,R)})]):[3,4];case 3:return e.sent(),[2,"continue"];case 4:throw h.$metadata||(h.$metadata={}),h.$metadata.attempts=o,h.$metadata.totalRetryDelay=d,h;case 5:return[2]}})},p=this,h.label=2;case 2:return[5,y()];case 3:return"object"==typeof(_=h.sent())?[2,_.value]:[3,2];case 4:return[2]}})})},c}();exports.StandardRetryStrategy=c;
},{"tslib":"G5GG","@aws-sdk/protocol-http":"V5Hv","@aws-sdk/service-error-classification":"jrUC","uuid":"gV9a","./constants":"rIdU","./defaultRetryQuota":"VgbI","./delayDecider":"XZbD","./retryDecider":"mhaK"}],"Naup":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NODE_RETRY_MODE_CONFIG_OPTIONS=exports.CONFIG_RETRY_MODE=exports.ENV_RETRY_MODE=exports.resolveRetryConfig=exports.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=exports.CONFIG_MAX_ATTEMPTS=exports.ENV_MAX_ATTEMPTS=void 0;var r=require("tslib"),e=require("./defaultStrategy"),t="AWS_MAX_ATTEMPTS";exports.ENV_MAX_ATTEMPTS=t;var o="max_attempts";exports.CONFIG_MAX_ATTEMPTS=o;var _={environmentVariableSelector:function(r){var e=r[t];if(e){var o=parseInt(e);if(Number.isNaN(o))throw new Error("Environment variable "+t+' mast be a number, got "'+e+'"');return o}},configFileSelector:function(r){var e=r[o];if(e){var t=parseInt(e);if(Number.isNaN(t))throw new Error("Shared config file entry "+o+' mast be a number, got "'+e+'"');return t}},default:e.DEFAULT_MAX_ATTEMPTS};exports.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=_;var n=function(t){var o=a(t.maxAttempts);return(0,r.__assign)((0,r.__assign)({},t),{maxAttempts:o,retryStrategy:t.retryStrategy||new e.StandardRetryStrategy(o)})};exports.resolveRetryConfig=n;var a=function(r){if(void 0===r&&(r=e.DEFAULT_MAX_ATTEMPTS),"number"==typeof r){var t=Promise.resolve(r);return function(){return t}}return r},T="AWS_RETRY_MODE";exports.ENV_RETRY_MODE=T;var E="retry_mode";exports.CONFIG_RETRY_MODE=E;var i={environmentVariableSelector:function(r){return r[T]},configFileSelector:function(r){return r[E]},default:e.DEFAULT_RETRY_MODE};exports.NODE_RETRY_MODE_CONFIG_OPTIONS=i;
},{"tslib":"G5GG","./defaultStrategy":"iKNl"}],"yjfw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./retryMiddleware");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./omitRetryHeadersMiddleware");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./defaultStrategy");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var u=require("./configurations");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var n=require("./delayDecider");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var o=require("./retryDecider");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});
},{"./retryMiddleware":"CXD2","./omitRetryHeadersMiddleware":"Zwpp","./defaultStrategy":"iKNl","./configurations":"Naup","./delayDecider":"XZbD","./retryDecider":"mhaK"}],"JNXH":[function(require,module,exports) {
"use strict";function e(e){if("string"==typeof e){for(var t=e.length,r=t-1;r>=0;r--){var n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateBodyLength=e;
},{}],"JSid":[function(require,module,exports) {
var define;
var e;!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof e&&e.amd?e([],r):"object"==typeof exports?exports.bowser=r():t.bowser=r()}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var i=e.getVersionPrecision(t),s=e.getVersionPrecision(r),o=Math.max(i,s),a=0,u=e.map([t,r],function(t){var r=o-e.getVersionPrecision(t),n=t+new Array(r+1).join(".0");return e.map(n.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});for(n&&(a=o-Math.min(i,s)),o-=1;o>=a;){if(u[0][o]>u[1][o])return 1;if(u[0][o]===u[1][o]){if(o===a)return 0;o-=1}else if(u[0][o]<u[1][o])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var i=e[r];if(t(i,r))return i}},e.assign=function(e){for(var t,r,n=e,i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[e].concat(s));var a=function(){var e=s[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach(function(t){n[t]=e[t]})};for(t=0,r=s.length;t<r;t+=1)a();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(91))&&n.__esModule?n:{default:n},s=r(18);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){}var t,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,r=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],null&&o(t.prototype,null),r&&o(t,r),e}();t.default=a,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=u(r(92)),i=u(r(93)),s=u(r(94)),o=u(r(95)),a=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(n.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(i.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(s.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(o.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,i={},s=0;if(Object.keys(e).forEach(function(t){var o=e[t];"string"==typeof o?(i[t]=o,s+=1):"object"==typeof o&&(r[t]=o,n+=1)}),n>0){var o=Object.keys(r),u=a.default.find(o,function(e){return t.isOS(e)});if(u){var d=this.satisfies(r[u]);if(void 0!==d)return d}var c=a.default.find(o,function(e){return t.isPlatform(e)});if(c){var f=this.satisfies(r[c]);if(void 0!==f)return f}}if(s>0){var l=Object.keys(i),h=a.default.find(l,function(e){return t.isBrowser(e,!0)});if(void 0!==h)return this.compareVersion(i[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),i=a.default.getBrowserTypeByAlias(n);return t&&i&&(n=i.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(a.default.compareVersions(i,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e}();t.default=d,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=i.default.getFirstMatch(s,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=i.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),o=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=i.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:s.OS_MAP.iOS},r=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=i.default.getMacOSVersionName(t),n={name:s.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=i.default.getAndroidVersionName(t),n={name:s.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:s.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},s=r(18),o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},r=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},r=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},r=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},r=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=o,e.exports=t.default}})});
},{}],"VksY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultUserAgent=void 0;var o=require("tslib"),n=e(require("bowser"));function e(o){return o&&o.__esModule?o:{default:o}}var i=function(e){var i=e.serviceId,r=e.clientVersion;return function(){return(0,o.__awaiter)(void 0,void 0,void 0,function(){var e,d,u,l,t,v,s,a,w;return(0,o.__generator)(this,function(o){return e=(null===(u=null===window||void 0===window?void 0:window.navigator)||void 0===u?void 0:u.userAgent)?n.default.parse(window.navigator.userAgent):void 0,d=[["aws-sdk-js",r],["os/"+((null===(l=null==e?void 0:e.os)||void 0===l?void 0:l.name)||"other"),null===(t=null==e?void 0:e.os)||void 0===t?void 0:t.version],["lang/js"],["md/browser",(null!==(s=null===(v=null==e?void 0:e.browser)||void 0===v?void 0:v.name)&&void 0!==s?s:"unknown")+"_"+(null!==(w=null===(a=null==e?void 0:e.browser)||void 0===a?void 0:a.version)&&void 0!==w?w:"unknown")]],i&&d.push(["api/"+i,r]),[2,d]})})}};exports.defaultUserAgent=i;
},{"tslib":"G5GG","bowser":"JSid"}],"aZRT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultRegionInfoProvider=void 0;var a=require("tslib"),t="cognito-identity.{region}.amazonaws.com",s="cognito-identity.{region}.amazonaws.com.cn",e="cognito-identity.{region}.c2s.ic.gov",o="cognito-identity.{region}.sc2s.sgov.gov",n="cognito-identity.{region}.amazonaws.com",i=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),c=new Set(["cn-north-1","cn-northwest-1"]),r=new Set(["us-iso-east-1"]),w=new Set(["us-isob-east-1"]),m=new Set(["us-gov-east-1","us-gov-west-1"]),u=function(u,g){var p=void 0;switch(u){case"ap-northeast-1":p={hostname:"cognito-identity.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":p={hostname:"cognito-identity.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":p={hostname:"cognito-identity.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":p={hostname:"cognito-identity.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":p={hostname:"cognito-identity.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"ca-central-1":p={hostname:"cognito-identity.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":p={hostname:"cognito-identity.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":p={hostname:"cognito-identity.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":p={hostname:"cognito-identity.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":p={hostname:"cognito-identity.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":p={hostname:"cognito-identity.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":p={hostname:"cognito-identity.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-east-1":p={hostname:"cognito-identity-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-east-2":p={hostname:"cognito-identity-fips.us-east-2.amazonaws.com",partition:"aws",signingRegion:"us-east-2"};break;case"fips-us-gov-west-1":p={hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":p={hostname:"cognito-identity-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"sa-east-1":p={hostname:"cognito-identity.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":p={hostname:"cognito-identity.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":p={hostname:"cognito-identity.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-west-1":p={hostname:"cognito-identity.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-west-1":p={hostname:"cognito-identity.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":p={hostname:"cognito-identity.us-west-2.amazonaws.com",partition:"aws"};break;default:i.has(u)&&(p={hostname:t.replace("{region}",u),partition:"aws"}),c.has(u)&&(p={hostname:s.replace("{region}",u),partition:"aws-cn"}),r.has(u)&&(p={hostname:e.replace("{region}",u),partition:"aws-iso"}),w.has(u)&&(p={hostname:o.replace("{region}",u),partition:"aws-iso-b"}),m.has(u)&&(p={hostname:n.replace("{region}",u),partition:"aws-us-gov"}),void 0===p&&(p={hostname:t.replace("{region}",u),partition:"aws"})}return Promise.resolve((0,a.__assign)({signingService:"cognito-identity"},p))};exports.defaultRegionInfoProvider=u;
},{"tslib":"CvJj"}],"EaXq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseQueryString=e;var r=require("tslib");function e(e){var t,n,o={};if(e=e.replace(/^\?/,""))try{for(var a=(0,r.__values)(e.split("&")),l=a.next();!l.done;l=a.next()){var i=l.value,s=(0,r.__read)(i.split("="),2),u=s[0],d=s[1],p=void 0===d?null:d;u=decodeURIComponent(u),p&&(p=decodeURIComponent(p)),u in o?Array.isArray(o[u])?o[u].push(p):o[u]=[o[u],p]:o[u]=p}}catch(c){t={error:c}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}
},{"tslib":"G5GG"}],"fEUY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseUrl=void 0;var r=require("@aws-sdk/querystring-parser"),e=function(e){var t,o=new URL(e),s=o.hostname,a=o.pathname,p=o.port,n=o.protocol,u=o.search;return u&&(t=(0,r.parseQueryString)(u)),{hostname:s,port:p?parseInt(p):void 0,protocol:n,path:a,query:t}};exports.parseUrl=e;
},{"@aws-sdk/querystring-parser":"EaXq"}],"rBc7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClientSharedValues=void 0;var e=require("./endpoints"),r=require("@aws-sdk/url-parser"),i={apiVersion:"2014-06-30",disableHostPrefix:!1,logger:{},regionInfoProvider:e.defaultRegionInfoProvider,serviceId:"Cognito Identity",urlParser:r.parseUrl};exports.ClientSharedValues=i;
},{"./endpoints":"aZRT","@aws-sdk/url-parser":"fEUY"}],"NlF7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClientDefaultValues=void 0;var e=require("tslib"),r=c(require("./package.json")),t=require("@aws-crypto/sha256-browser"),s=require("@aws-sdk/fetch-http-handler"),i=require("@aws-sdk/invalid-dependency"),a=require("@aws-sdk/middleware-retry"),n=require("@aws-sdk/util-base64-browser"),u=require("@aws-sdk/util-body-length-browser"),o=require("@aws-sdk/util-user-agent-browser"),d=require("@aws-sdk/util-utf8-browser"),l=require("./runtimeConfig.shared");function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,e.__assign)((0,e.__assign)({},l.ClientSharedValues),{runtime:"browser",base64Decoder:n.fromBase64,base64Encoder:n.toBase64,bodyLengthChecker:u.calculateBodyLength,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:(0,o.defaultUserAgent)({serviceId:l.ClientSharedValues.serviceId,clientVersion:r.default.version}),maxAttempts:a.DEFAULT_MAX_ATTEMPTS,region:(0,i.invalidProvider)("Region is missing"),requestHandler:new s.FetchHttpHandler,sha256:t.Sha256,streamCollector:s.streamCollector,utf8Decoder:d.fromUtf8,utf8Encoder:d.toUtf8});exports.ClientDefaultValues=f;
},{"tslib":"CvJj","./package.json":"fhVr","@aws-crypto/sha256-browser":"zTbm","@aws-sdk/fetch-http-handler":"FVoP","@aws-sdk/invalid-dependency":"lkxb","@aws-sdk/middleware-retry":"yjfw","@aws-sdk/util-base64-browser":"aNuR","@aws-sdk/util-body-length-browser":"JNXH","@aws-sdk/util-user-agent-browser":"VksY","@aws-sdk/util-utf8-browser":"SHh0","./runtimeConfig.shared":"rBc7"}],"q0Sk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveEndpointsConfig=void 0;var n=require("tslib"),r=function(r){var o;return(0,n.__assign)((0,n.__assign)({},r),{tls:null===(o=r.tls)||void 0===o||o,endpoint:r.endpoint?e(r):function(){return t(r)},isCustomEndpoint:!!r.endpoint})};exports.resolveEndpointsConfig=r;var e=function(n){var r=n.endpoint,e=n.urlParser;if("string"==typeof r){var t=Promise.resolve(e(r));return function(){return t}}if("object"==typeof r){var o=Promise.resolve(r);return function(){return o}}return r},t=function(r){return(0,n.__awaiter)(void 0,void 0,void 0,function(){var e,t,o,i,s;return(0,n.__generator)(this,function(n){switch(n.label){case 0:return e=r.tls,t=void 0===e||e,[4,r.region()];case 1:if(o=n.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(o))throw new Error("Invalid region in client config");return[4,r.regionInfoProvider(o)];case 2:if(!(i=(null!==(s=n.sent())&&void 0!==s?s:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,r.urlParser((t?"https:":"http:")+"//"+i)]}})})};
},{"tslib":"G5GG"}],"C4an":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveRegionConfig=exports.NODE_REGION_CONFIG_FILE_OPTIONS=exports.NODE_REGION_CONFIG_OPTIONS=exports.REGION_INI_NAME=exports.REGION_ENV_NAME=void 0;var e=require("tslib"),r="AWS_REGION";exports.REGION_ENV_NAME=r;var o="region";exports.REGION_INI_NAME=o;var n={environmentVariableSelector:function(e){return e[r]},configFileSelector:function(e){return e[o]},default:function(){throw new Error("Region is missing")}};exports.NODE_REGION_CONFIG_OPTIONS=n;var i={preferredFile:"credentials"};exports.NODE_REGION_CONFIG_FILE_OPTIONS=i;var t=function(r){if(!r.region)throw new Error("Region is missing");return(0,e.__assign)((0,e.__assign)({},r),{region:s(r.region)})};exports.resolveRegionConfig=t;var s=function(e){if("string"==typeof e){var r=Promise.resolve(e);return function(){return r}}return e};
},{"tslib":"G5GG"}],"wCq5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./EndpointsConfig");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./RegionConfig");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});
},{"./EndpointsConfig":"q0Sk","./RegionConfig":"C4an"}],"tA3Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.contentLengthMiddleware=r,exports.getContentLengthPlugin=exports.contentLengthMiddlewareOptions=void 0;var e=require("tslib"),t=require("@aws-sdk/protocol-http"),n="content-length";function r(r){var o=this;return function(i){return function(s){return(0,e.__awaiter)(o,void 0,void 0,function(){var o,a,u,d,c;return(0,e.__generator)(this,function(g){return o=s.request,t.HttpRequest.isInstance(o)&&(a=o.body,u=o.headers,a&&-1===Object.keys(u).map(function(e){return e.toLowerCase()}).indexOf(n)&&void 0!==(d=r(a))&&(o.headers=(0,e.__assign)((0,e.__assign)({},o.headers),((c={})[n]=String(d),c)))),[2,i((0,e.__assign)((0,e.__assign)({},s),{request:o}))]})})}}}var o={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0};exports.contentLengthMiddlewareOptions=o;var i=function(e){return{applyToStack:function(t){t.add(r(e.bodyLengthChecker),o)}}};exports.getContentLengthPlugin=i;
},{"tslib":"G5GG","@aws-sdk/protocol-http":"V5Hv"}],"o4Pa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveHostHeaderConfig=t,exports.getHostHeaderPlugin=exports.hostHeaderMiddlewareOptions=exports.hostHeaderMiddleware=void 0;var e=require("tslib"),r=require("@aws-sdk/protocol-http");function t(e){return e}var o=function(t){return function(o){return function(s){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,d;return(0,e.__generator)(this,function(e){return r.HttpRequest.isInstance(s.request)?(a=s.request,d=(t.requestHandler.metadata||{}).handlerProtocol,(void 0===d?"":d).indexOf("h2")>=0&&!a.headers[":authority"]?(delete a.headers.host,a.headers[":authority"]=""):a.headers.host||(a.headers.host=a.hostname),[2,o(s)]):[2,o(s)]})})}}};exports.hostHeaderMiddleware=o;var s={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0};exports.hostHeaderMiddlewareOptions=s;var a=function(e){return{applyToStack:function(r){r.add(o(e),s)}}};exports.getHostHeaderPlugin=a;
},{"tslib":"G5GG","@aws-sdk/protocol-http":"V5Hv"}],"XWB7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLoggerPlugin=exports.loggerMiddlewareOptions=exports.loggerMiddleware=void 0;var e=require("tslib"),t=function(){return function(t,r){return function(i){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var o,n,a,u,d,g,l,s,p;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return o=r.clientName,n=r.commandName,a=r.inputFilterSensitiveLog,u=r.logger,d=r.outputFilterSensitiveLog,[4,t(i)];case 1:return g=c.sent(),u?("function"==typeof u.info&&(l=g.output,s=l.$metadata,p=(0,e.__rest)(l,["$metadata"]),u.info({clientName:o,commandName:n,input:a(i.input),output:d(p),metadata:s})),[2,g]):[2,g]}})})}}};exports.loggerMiddleware=t;var r={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0};exports.loggerMiddlewareOptions=r;var i=function(e){return{applyToStack:function(e){e.add(t(),r)}}};exports.getLoggerPlugin=i;
},{"tslib":"G5GG"}],"jfCX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./loggerMiddleware");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});
},{"./loggerMiddleware":"XWB7"}],"S3iC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromHex=o,exports.toHex=a;for(var e={},r={},t=0;t<256;t++){var n=t.toString(16).toLowerCase();1===n.length&&(n="0"+n),e[t]=n,r[n]=t}function o(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var o=e.substr(n,2).toLowerCase();if(!(o in r))throw new Error("Cannot decode unrecognized sequence "+o+" as hexadecimal");t[n/2]=r[o]}return t}function a(r){for(var t="",n=0;n<r.byteLength;n++)t+=e[r[n]];return t}
},{}],"eeWj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAX_PRESIGNED_TTL=exports.KEY_TYPE_IDENTIFIER=exports.MAX_CACHE_SIZE=exports.UNSIGNED_PAYLOAD=exports.EVENT_ALGORITHM_IDENTIFIER=exports.ALGORITHM_IDENTIFIER=exports.UNSIGNABLE_PATTERNS=exports.SEC_HEADER_PATTERN=exports.PROXY_HEADER_PATTERN=exports.ALWAYS_UNSIGNABLE_HEADERS=exports.HOST_HEADER=exports.TOKEN_HEADER=exports.SHA256_HEADER=exports.SIGNATURE_HEADER=exports.GENERATED_HEADERS=exports.DATE_HEADER=exports.AMZ_DATE_HEADER=exports.AUTH_HEADER=exports.TOKEN_QUERY_PARAM=exports.SIGNATURE_QUERY_PARAM=exports.EXPIRES_QUERY_PARAM=exports.SIGNED_HEADERS_QUERY_PARAM=exports.AMZ_DATE_QUERY_PARAM=exports.CREDENTIAL_QUERY_PARAM=exports.ALGORITHM_QUERY_PARAM=void 0;var E="X-Amz-Algorithm";exports.ALGORITHM_QUERY_PARAM=E;var A="X-Amz-Credential";exports.CREDENTIAL_QUERY_PARAM=A;var r="X-Amz-Date";exports.AMZ_DATE_QUERY_PARAM=r;var e="X-Amz-SignedHeaders";exports.SIGNED_HEADERS_QUERY_PARAM=e;var _="X-Amz-Expires";exports.EXPIRES_QUERY_PARAM=_;var R="X-Amz-Signature";exports.SIGNATURE_QUERY_PARAM=R;var t="X-Amz-Security-Token";exports.TOKEN_QUERY_PARAM=t;var o="authorization";exports.AUTH_HEADER=o;var s=r.toLowerCase();exports.AMZ_DATE_HEADER=s;var p="date";exports.DATE_HEADER=p;var x=[o,s,p];exports.GENERATED_HEADERS=x;var T=R.toLowerCase();exports.SIGNATURE_HEADER=T;var a="x-amz-content-sha256";exports.SHA256_HEADER=a;var D=t.toLowerCase();exports.TOKEN_HEADER=D;var I="host";exports.HOST_HEADER=I;var N={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0};exports.ALWAYS_UNSIGNABLE_HEADERS=N;var H=/^proxy-/;exports.PROXY_HEADER_PATTERN=H;var S=/^sec-/;exports.SEC_HEADER_PATTERN=S;var P=[/^proxy-/i,/^sec-/i];exports.UNSIGNABLE_PATTERNS=P;var M="AWS4-HMAC-SHA256";exports.ALGORITHM_IDENTIFIER=M;var v="AWS4-HMAC-SHA256-PAYLOAD";exports.EVENT_ALGORITHM_IDENTIFIER=v;var U="UNSIGNED-PAYLOAD";exports.UNSIGNED_PAYLOAD=U;var Y=50;exports.MAX_CACHE_SIZE=Y;var G="aws4_request";exports.KEY_TYPE_IDENTIFIER=G;var L=604800;exports.MAX_PRESIGNED_TTL=L;
},{}],"cQ4V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createScope=c,exports.clearCredentialCache=i,exports.getSigningKey=void 0;var e=require("tslib"),r=require("@aws-sdk/util-hex-encoding"),t=require("./constants"),n={},s=[];function c(e,r,n){return e+"/"+r+"/"+n+"/"+t.KEY_TYPE_IDENTIFIER}var a=function(c,a,i,u,l){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var d,f,_,g,h,v,E,p,y;return(0,e.__generator)(this,function(x){switch(x.label){case 0:return[4,o(c,a.secretAccessKey,a.accessKeyId)];case 1:if(d=x.sent(),(f=i+":"+u+":"+l+":"+(0,r.toHex)(d)+":"+a.sessionToken)in n)return[2,n[f]];for(s.push(f);s.length>t.MAX_CACHE_SIZE;)delete n[s.shift()];_="AWS4"+a.secretAccessKey,x.label=2;case 2:x.trys.push([2,7,8,9]),g=(0,e.__values)([i,u,l,t.KEY_TYPE_IDENTIFIER]),h=g.next(),x.label=3;case 3:return h.done?[3,6]:(v=h.value,[4,o(c,_,v)]);case 4:_=x.sent(),x.label=5;case 5:return h=g.next(),[3,3];case 6:return[3,9];case 7:return E=x.sent(),p={error:E},[3,9];case 8:try{h&&!h.done&&(y=g.return)&&y.call(g)}finally{if(p)throw p.error}return[7];case 9:return[2,n[f]=_]}})})};function i(){s.length=0,Object.keys(n).forEach(function(e){delete n[e]})}function o(e,r,t){var n=new e(r);return n.update(t),n.digest()}exports.getSigningKey=a;
},{"tslib":"G5GG","@aws-sdk/util-hex-encoding":"S3iC","./constants":"eeWj"}],"v4Bl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCanonicalHeaders=t;var e=require("tslib"),r=require("./constants");function t(t,a,s){var n,o,l=t.headers,i={};try{for(var u=(0,e.__values)(Object.keys(l).sort()),c=u.next();!c.done;c=u.next()){var E=c.value,_=E.toLowerCase();(_ in r.ALWAYS_UNSIGNABLE_HEADERS||(null==a?void 0:a.has(_))||r.PROXY_HEADER_PATTERN.test(_)||r.SEC_HEADER_PATTERN.test(_))&&(!s||s&&!s.has(_))||(i[_]=l[E].trim().replace(/\s+/g," "))}}catch(v){n={error:v}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return i}
},{"tslib":"G5GG","./constants":"eeWj"}],"M9yx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCanonicalQuery=n;var r=require("tslib"),e=require("@aws-sdk/util-uri-escape"),t=require("./constants");function n(n){var i,o,u=n.query,a=void 0===u?{}:u,s=[],c={},l=function(r){if(r.toLowerCase()===t.SIGNATURE_HEADER)return"continue";s.push(r);var n=a[r];"string"==typeof n?c[r]=(0,e.escapeUri)(r)+"="+(0,e.escapeUri)(n):Array.isArray(n)&&(c[r]=n.slice(0).sort().reduce(function(t,n){return t.concat([(0,e.escapeUri)(r)+"="+(0,e.escapeUri)(n)])},[]).join("&"))};try{for(var f=(0,r.__values)(Object.keys(a).sort()),p=f.next();!p.done;p=f.next()){l(p.value)}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}return s.map(function(r){return c[r]}).filter(function(r){return r}).join("&")}
},{"tslib":"G5GG","@aws-sdk/util-uri-escape":"pDKB","./constants":"eeWj"}],"mtty":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isArrayBuffer=void 0;var r=function(r){return"function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(r)};exports.isArrayBuffer=r;
},{}],"dkeJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPayloadHash=n;var e=require("tslib"),r=require("@aws-sdk/is-array-buffer"),t=require("@aws-sdk/util-hex-encoding"),a=require("./constants");function n(n,s){var i=n.headers,u=n.body;return(0,e.__awaiter)(this,void 0,void 0,function(){var n,o,c,f,l,d,y;return(0,e.__generator)(this,function(b){switch(b.label){case 0:try{for(n=(0,e.__values)(Object.keys(i)),o=n.next();!o.done;o=n.next())if((c=o.value).toLowerCase()===a.SHA256_HEADER)return[2,i[c]]}catch(_){d={error:_}}finally{try{o&&!o.done&&(y=n.return)&&y.call(n)}finally{if(d)throw d.error}}return null!=u?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof u||ArrayBuffer.isView(u)||(0,r.isArrayBuffer)(u)?((f=new s).update(u),l=t.toHex,[4,f.digest()]):[3,3];case 2:return[2,l.apply(void 0,[b.sent()])];case 3:return[2,a.UNSIGNED_PAYLOAD]}})})}
},{"tslib":"G5GG","@aws-sdk/is-array-buffer":"mtty","@aws-sdk/util-hex-encoding":"S3iC","./constants":"eeWj"}],"sDAw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasHeader=r;var e=require("tslib");function r(r,t){var o,a;r=r.toLowerCase();try{for(var n=(0,e.__values)(Object.keys(t)),l=n.next();!l.done;l=n.next()){if(r===l.value.toLowerCase())return!0}}catch(s){o={error:s}}finally{try{l&&!l.done&&(a=n.return)&&a.call(n)}finally{if(o)throw o.error}}return!1}
},{"tslib":"G5GG"}],"cLFd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneRequest=r;var e=require("tslib");function r(r){var n=r.headers,t=r.query,_=(0,e.__rest)(r,["headers","query"]);return(0,e.__assign)((0,e.__assign)({},_),{headers:(0,e.__assign)({},n),query:t?s(t):void 0})}function s(r){return Object.keys(r).reduce(function(s,n){var t,_=r[n];return(0,e.__assign)((0,e.__assign)({},s),((t={})[n]=Array.isArray(_)?(0,e.__spread)(_):_,t))},{})}
},{"tslib":"G5GG"}],"cbOy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.moveHeadersToQuery=o;var e=require("tslib"),r=require("./cloneRequest");function o(o,t){var s,a,n;void 0===t&&(t={});var l="function"==typeof o.clone?o.clone():(0,r.cloneRequest)(o),u=l.headers,i=l.query,d=void 0===i?{}:i;try{for(var v=(0,e.__values)(Object.keys(u)),c=v.next();!c.done;c=v.next()){var y=c.value,f=y.toLowerCase();"x-amz-"!==f.substr(0,6)||(null===(n=t.unhoistableHeaders)||void 0===n?void 0:n.has(f))||(d[y]=u[y],delete u[y])}}catch(_){s={error:_}}finally{try{c&&!c.done&&(a=v.return)&&a.call(v)}finally{if(s)throw s.error}}return(0,e.__assign)((0,e.__assign)({},o),{headers:u,query:d})}
},{"tslib":"G5GG","./cloneRequest":"cLFd"}],"wX7v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareRequest=n;var e=require("tslib"),r=require("./cloneRequest"),t=require("./constants");function n(n){var o,a;n="function"==typeof n.clone?n.clone():(0,r.cloneRequest)(n);try{for(var l=(0,e.__values)(Object.keys(n.headers)),s=l.next();!s.done;s=l.next()){var u=s.value;t.GENERATED_HEADERS.indexOf(u.toLowerCase())>-1&&delete n.headers[u]}}catch(c){o={error:c}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return n}
},{"tslib":"G5GG","./cloneRequest":"cLFd","./constants":"eeWj"}],"Dl3t":[function(require,module,exports) {
"use strict";function e(e){return t(e).toISOString().replace(/\.\d{3}Z$/,"Z")}function t(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.iso8601=e,exports.toDate=t;
},{}],"dr6L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SignatureV4=void 0;var e=require("tslib"),t=require("@aws-sdk/util-hex-encoding"),n=require("./constants"),r=require("./credentialDerivation"),i=require("./getCanonicalHeaders"),s=require("./getCanonicalQuery"),a=require("./getPayloadHash"),o=require("./hasHeader"),u=require("./moveHeadersToQuery"),c=require("./prepareRequest"),g=require("./utilDate"),h=function(){function g(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,s=e.sha256,a=e.uriEscapePath,o=void 0===a||a;this.service=i,this.sha256=s,this.uriEscapePath=o,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=p(r),this.credentialProvider=v(n)}return g.prototype.presign=function(t,s){return void 0===s&&(s={}),(0,e.__awaiter)(this,void 0,void 0,function(){var o,g,h,p,v,_,y,R,E,f,S,H,A,D,P,T,b,q,I,w,C,M,m,k;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return o=s.signingDate,g=void 0===o?new Date:o,h=s.expiresIn,p=void 0===h?3600:h,v=s.unsignableHeaders,_=s.unhoistableHeaders,y=s.signableHeaders,R=s.signingRegion,E=s.signingService,[4,this.credentialProvider()];case 1:return f=e.sent(),null==R?[3,2]:(H=R,[3,4]);case 2:return[4,this.regionProvider()];case 3:H=e.sent(),e.label=4;case 4:return S=H,A=d(g),D=A.longDate,P=A.shortDate,p>n.MAX_PRESIGNED_TTL?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(T=(0,r.createScope)(P,S,null!=E?E:this.service),b=(0,u.moveHeadersToQuery)((0,c.prepareRequest)(t),{unhoistableHeaders:_}),f.sessionToken&&(b.query[n.TOKEN_QUERY_PARAM]=f.sessionToken),b.query[n.ALGORITHM_QUERY_PARAM]=n.ALGORITHM_IDENTIFIER,b.query[n.CREDENTIAL_QUERY_PARAM]=f.accessKeyId+"/"+T,b.query[n.AMZ_DATE_QUERY_PARAM]=D,b.query[n.EXPIRES_QUERY_PARAM]=p.toString(10),q=(0,i.getCanonicalHeaders)(b,v,y),b.query[n.SIGNED_HEADERS_QUERY_PARAM]=l(q),I=b.query,w=n.SIGNATURE_QUERY_PARAM,C=this.getSignature,M=[D,T,this.getSigningKey(f,S,P,E)],m=this.createCanonicalRequest,k=[b,q],[4,(0,a.getPayloadHash)(t,this.sha256)]);case 5:return[4,C.apply(this,M.concat([m.apply(this,k.concat([e.sent()]))]))];case 6:return I[w]=e.sent(),[2,b]}})})},g.prototype.sign=function(t,n){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},g.prototype.signEvent=function(i,s){var o=i.headers,u=i.payload,c=s.signingDate,g=void 0===c?new Date:c,h=s.priorSignature,l=s.signingRegion,p=s.signingService;return(0,e.__awaiter)(this,void 0,void 0,function(){var i,s,c,v,_,y,R,E,f,S,H;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return null==l?[3,1]:(s=l,[3,3]);case 1:return[4,this.regionProvider()];case 2:s=e.sent(),e.label=3;case 3:return i=s,c=d(g),v=c.shortDate,_=c.longDate,y=(0,r.createScope)(v,i,null!=p?p:this.service),[4,(0,a.getPayloadHash)({headers:{},body:u},this.sha256)];case 4:return R=e.sent(),(E=new this.sha256).update(o),S=t.toHex,[4,E.digest()];case 5:return f=S.apply(void 0,[e.sent()]),H=[n.EVENT_ALGORITHM_IDENTIFIER,_,y,h,f,R].join("\n"),[2,this.signString(H,{signingDate:g,signingRegion:i,signingService:p})]}})})},g.prototype.signString=function(n,r){var i=void 0===r?{}:r,s=i.signingDate,a=void 0===s?new Date:s,o=i.signingRegion,u=i.signingService;return(0,e.__awaiter)(this,void 0,void 0,function(){var r,i,s,c,g,h,l,p;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return r=e.sent(),null==o?[3,2]:(s=o,[3,4]);case 2:return[4,this.regionProvider()];case 3:s=e.sent(),e.label=4;case 4:return i=s,c=d(a).shortDate,l=(h=this.sha256).bind,[4,this.getSigningKey(r,i,c,u)];case 5:return(g=new(l.apply(h,[void 0,e.sent()]))).update(n),p=t.toHex,[4,g.digest()];case 6:return[2,p.apply(void 0,[e.sent()])]}})})},g.prototype.signRequest=function(t,s){var u=void 0===s?{}:s,g=u.signingDate,h=void 0===g?new Date:g,p=u.signableHeaders,v=u.unsignableHeaders,_=u.signingRegion,y=u.signingService;return(0,e.__awaiter)(this,void 0,void 0,function(){var s,u,g,R,E,f,S,H,A,D,P;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return s=e.sent(),null==_?[3,2]:(g=_,[3,4]);case 2:return[4,this.regionProvider()];case 3:g=e.sent(),e.label=4;case 4:return u=g,R=(0,c.prepareRequest)(t),E=d(h),f=E.longDate,S=E.shortDate,H=(0,r.createScope)(S,u,null!=y?y:this.service),R.headers[n.AMZ_DATE_HEADER]=f,s.sessionToken&&(R.headers[n.TOKEN_HEADER]=s.sessionToken),[4,(0,a.getPayloadHash)(R,this.sha256)];case 5:return A=e.sent(),!(0,o.hasHeader)(n.SHA256_HEADER,R.headers)&&this.applyChecksum&&(R.headers[n.SHA256_HEADER]=A),D=(0,i.getCanonicalHeaders)(R,v,p),[4,this.getSignature(f,H,this.getSigningKey(s,u,S,y),this.createCanonicalRequest(R,D,A))];case 6:return P=e.sent(),R.headers[n.AUTH_HEADER]=n.ALGORITHM_IDENTIFIER+" Credential="+s.accessKeyId+"/"+H+", SignedHeaders="+l(D)+", Signature="+P,[2,R]}})})},g.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+(0,s.getCanonicalQuery)(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},g.prototype.createStringToSign=function(r,i,s){return(0,e.__awaiter)(this,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return(a=new this.sha256).update(s),[4,a.digest()];case 1:return o=e.sent(),[2,n.ALGORITHM_IDENTIFIER+"\n"+r+"\n"+i+"\n"+(0,t.toHex)(o)]}})})},g.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},g.prototype.getSignature=function(n,r,i,s){return(0,e.__awaiter)(this,void 0,void 0,function(){var a,o,u,c,g;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.createStringToSign(n,r,s)];case 1:return a=e.sent(),c=(u=this.sha256).bind,[4,i];case 2:return(o=new(c.apply(u,[void 0,e.sent()]))).update(a),g=t.toHex,[4,o.digest()];case 3:return[2,g.apply(void 0,[e.sent()])]}})})},g.prototype.getSigningKey=function(e,t,n,i){return(0,r.getSigningKey)(this.sha256,e,n,t,i||this.service)},g}();exports.SignatureV4=h;var d=function(e){var t=(0,g.iso8601)(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},l=function(e){return Object.keys(e).sort().join(";")},p=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},v=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};
},{"tslib":"G5GG","@aws-sdk/util-hex-encoding":"S3iC","./constants":"eeWj","./credentialDerivation":"cQ4V","./getCanonicalHeaders":"v4Bl","./getCanonicalQuery":"M9yx","./getPayloadHash":"dkeJ","./hasHeader":"sDAw","./moveHeadersToQuery":"cbOy","./prepareRequest":"wX7v","./utilDate":"Dl3t"}],"YKXB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./credentialDerivation");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./SignatureV4");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});
},{"./credentialDerivation":"cQ4V","./SignatureV4":"dr6L"}],"kQIO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveAwsAuthConfig=i;var e=require("tslib"),n=require("@aws-sdk/signature-v4");function i(i){var s,t=this,g=r(i.credentials||i.credentialDefaultProvider(i)),o=i.signingEscapePath,a=void 0===o||o,u=i.systemClockOffset,c=void 0===u?i.systemClockOffset||0:u,f=i.sha256;return s=i.signer?r(i.signer):function(){return r(i.region)().then(function(n){return(0,e.__awaiter)(t,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,i.regionInfoProvider(n)];case 1:return[2,[e.sent()||{},n]]}})})}).then(function(r){var s=(0,e.__read)(r,2),t=s[0],o=s[1],u=t.signingRegion,c=t.signingService;return i.signingRegion=i.signingRegion||u||o,i.signingName=i.signingName||c||i.serviceId,new n.SignatureV4({credentials:g,region:i.signingRegion,service:i.signingName,sha256:f,uriEscapePath:a})})},(0,e.__assign)((0,e.__assign)({},i),{systemClockOffset:c,signingEscapePath:a,credentials:g,signer:s})}function r(e){if("object"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}
},{"tslib":"G5GG","@aws-sdk/signature-v4":"YKXB"}],"r6PK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.awsAuthMiddleware=s,exports.getAwsAuthPlugin=exports.awsAuthMiddlewareOptions=void 0;var e=require("tslib"),t=require("@aws-sdk/protocol-http"),n=function(e,t){return Math.abs(r(t).getTime()-e)>=3e5},r=function(e){return new Date(Date.now()+e)};function s(r){return function(s,i){return function(a){return(0,e.__awaiter)(this,void 0,void 0,function(){var o,u,c,d,g,l,p,w,f;return(0,e.__generator)(this,function(v){switch(v.label){case 0:return t.HttpRequest.isInstance(a.request)?"function"!=typeof r.signer?[3,2]:[4,r.signer()]:[2,s(a)];case 1:return u=v.sent(),[3,3];case 2:u=r.signer,v.label=3;case 3:return o=u,d=s,g=[(0,e.__assign)({},a)],f={},[4,o.sign(a.request,{signingDate:new Date(Date.now()+r.systemClockOffset),signingRegion:i.signing_region,signingService:i.signing_service})];case 4:return[4,d.apply(void 0,[e.__assign.apply(void 0,g.concat([(f.request=v.sent(),f)]))])];case 5:return c=v.sent(),l=c.response.headers,(p=l&&(l.date||l.Date))&&(w=Date.parse(p),n(w,r.systemClockOffset)&&(r.systemClockOffset=w-Date.now())),[2,c]}})})}}}var i={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};exports.awsAuthMiddlewareOptions=i;var a=function(e){return{applyToStack:function(t){t.addRelativeTo(s(e),i)}}};exports.getAwsAuthPlugin=a;
},{"tslib":"G5GG","@aws-sdk/protocol-http":"V5Hv"}],"WKBl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./configurations");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./middleware");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});
},{"./configurations":"kQIO","./middleware":"r6PK"}],"kHvP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveUserAgentConfig=s;var e=require("tslib");function s(s){return(0,e.__assign)((0,e.__assign)({},s),{customUserAgent:"string"==typeof s.customUserAgent?[[s.customUserAgent]]:s.customUserAgent})}
},{"tslib":"G5GG"}],"ItEb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UA_ESCAPE_REGEX=exports.SPACE=exports.X_AMZ_USER_AGENT=exports.USER_AGENT=void 0;var e="user-agent";exports.USER_AGENT=e;var r="x-amz-user-agent";exports.X_AMZ_USER_AGENT=r;var E=" ";exports.SPACE=E;var t=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g;exports.UA_ESCAPE_REGEX=t;
},{}],"HVIH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUserAgentPlugin=exports.getUserAgentMiddlewareOptions=exports.userAgentMiddleware=void 0;var e=require("tslib"),r=require("@aws-sdk/protocol-http"),t=require("./constants"),n=function(n){return function(s,o){return function(u){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,d,l,_,p,g,c,A;return(0,e.__generator)(this,function(v){switch(v.label){case 0:return a=u.request,r.HttpRequest.isInstance(a)?(d=a.headers,l=(null===(c=null==o?void 0:o.userAgent)||void 0===c?void 0:c.map(i))||[],[4,n.defaultUserAgentProvider()]):[2,s(u)];case 1:return _=v.sent().map(i),p=(null===(A=null==n?void 0:n.customUserAgent)||void 0===A?void 0:A.map(i))||[],d[t.X_AMZ_USER_AGENT]=(0,e.__spread)(_,l,p).join(t.SPACE),g=(0,e.__spread)(_.filter(function(e){return e.startsWith("aws-sdk-")}),p).join(t.SPACE),"browser"!==n.runtime&&g&&(d[t.USER_AGENT]=d[t.USER_AGENT]?d[t.USER_AGENT]+" "+g:g),[2,s((0,e.__assign)((0,e.__assign)({},u),{request:a}))]}})})}}};exports.userAgentMiddleware=n;var i=function(r){var n=(0,e.__read)(r,2),i=n[0],s=n[1],o=i.indexOf("/"),u=i.substring(0,o),a=i.substring(o+1);return"api"===u&&(a=a.toLowerCase()),[u,a,s].filter(function(e){return e&&e.length>0}).map(function(e){return null==e?void 0:e.replace(t.UA_ESCAPE_REGEX,"_")}).join("/")},s={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0};exports.getUserAgentMiddlewareOptions=s;var o=function(e){return{applyToStack:function(r){r.add(n(e),s)}}};exports.getUserAgentPlugin=o;
},{"tslib":"G5GG","@aws-sdk/protocol-http":"V5Hv","./constants":"ItEb"}],"O3h5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./configurations");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./user-agent-middleware");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});
},{"./configurations":"kHvP","./user-agent-middleware":"HVIH"}],"EfP3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.constructStack=void 0;var e=require("tslib"),r=function(){var t=[],a=[],o=new Set,d=function(r){return t.forEach(function(n){r.add(n.middleware,(0,e.__assign)({},n))}),a.forEach(function(n){r.addRelativeTo(n.middleware,(0,e.__assign)({},n))}),r},l=function(r){var n=[];return r.before.forEach(function(r){0===r.before.length&&0===r.after.length?n.push(r):n.push.apply(n,(0,e.__spread)(l(r)))}),n.push(r),r.after.reverse().forEach(function(r){0===r.before.length&&0===r.after.length?n.push(r):n.push.apply(n,(0,e.__spread)(l(r)))}),n},u=function(){var r,o=[],d=[],u={};return t.forEach(function(r){var n=(0,e.__assign)((0,e.__assign)({},r),{before:[],after:[]});n.name&&(u[n.name]=n),o.push(n)}),a.forEach(function(r){var n=(0,e.__assign)((0,e.__assign)({},r),{before:[],after:[]});n.name&&(u[n.name]=n),d.push(n)}),d.forEach(function(e){if(e.toMiddleware){var r=u[e.toMiddleware];if(void 0===r)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&r.after.push(e),"before"===e.relation&&r.before.push(e)}}),(r=o,r.sort(function(e,r){return n[r.step]-n[e.step]||i[r.priority||"normal"]-i[e.priority||"normal"]})).map(l).reduce(function(r,n){return r.push.apply(r,(0,e.__spread)(n)),r},[]).map(function(e){return e.middleware})},f={add:function(r,n){void 0===n&&(n={});var i=n.name,a=n.override,d=(0,e.__assign)({step:"initialize",priority:"normal",middleware:r},n);if(i){if(o.has(i)){if(!a)throw new Error("Duplicate middleware name '"+i+"'");var l=t.findIndex(function(e){return e.name===i}),u=t[l];if(u.step!==d.step||u.priority!==d.priority)throw new Error('"'+i+'" middleware with '+u.priority+" priority in "+u.step+" step cannot be overridden by same-name middleware with "+d.priority+" priority in "+d.step+" step.");t.splice(l,1)}o.add(i)}t.push(d)},addRelativeTo:function(r,n){var i=n.name,t=n.override,d=(0,e.__assign)({middleware:r},n);if(i){if(o.has(i)){if(!t)throw new Error("Duplicate middleware name '"+i+"'");var l=a.findIndex(function(e){return e.name===i}),u=a[l];if(u.toMiddleware!==d.toMiddleware||u.relation!==d.relation)throw new Error('"'+i+'" middleware '+u.relation+' "'+u.toMiddleware+'" middleware cannot be overridden by same-name middleware '+d.relation+' "'+d.toMiddleware+'" middleware.');a.splice(l,1)}o.add(i)}a.push(d)},clone:function(){return d(r())},use:function(e){e.applyToStack(f)},remove:function(e){return"string"==typeof e?function(e){var r=!1,n=function(n){return!n.name||n.name!==e||(r=!0,o.delete(e),!1)};return t=t.filter(n),a=a.filter(n),r}(e):function(e){var r=!1,n=function(n){return n.middleware!==e||(r=!0,n.name&&o.delete(n.name),!1)};return t=t.filter(n),a=a.filter(n),r}(e)},removeByTag:function(e){var r=!1,n=function(n){var i=n.tags,t=n.name;return!i||!i.includes(e)||(t&&o.delete(t),r=!0,!1)};return t=t.filter(n),a=a.filter(n),r},concat:function(e){var n=d(r());return n.use(e),n},applyToStack:d,resolve:function(r,n){var i,t;try{for(var a=(0,e.__values)(u().reverse()),o=a.next();!o.done;o=a.next()){r=(0,o.value)(r,n)}}catch(d){i={error:d}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return r}};return f};exports.constructStack=r;var n={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},i={high:3,normal:2,low:1};
},{"tslib":"G5GG"}],"vJO0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./MiddlewareStack");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});
},{"./MiddlewareStack":"EfP3"}],"yIwV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Client=void 0;var t=require("@aws-sdk/middleware-stack"),e=function(){function e(e){this.middlewareStack=(0,t.constructStack)(),this.config=e}return e.prototype.send=function(t,e,n){var r="function"!=typeof e?e:void 0,o="function"==typeof e?e:n,i=t.resolveMiddleware(this.middlewareStack,this.config,r);if(!o)return i(t).then(function(t){return t.output});i(t).then(function(t){return o(null,t.output)},function(t){return o(t)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}();exports.Client=e;
},{"@aws-sdk/middleware-stack":"vJO0"}],"jM7a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Command=void 0;var e=require("@aws-sdk/middleware-stack"),t=function(){return function(){this.middlewareStack=(0,e.constructStack)()}}();exports.Command=t;
},{"@aws-sdk/middleware-stack":"vJO0"}],"TCQB":[function(require,module,exports) {
"use strict";function e(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.extendedEncodeURIComponent=e;
},{}],"mK01":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getArrayIfSingleItem=void 0;var e=function(e){return Array.isArray(e)?e:[e]};exports.getArrayIfSingleItem=e;
},{}],"smBZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getValueFromTextNode=void 0;var e=function(t){for(var o in t)t.hasOwnProperty(o)&&void 0!==t[o]["#text"]?t[o]=t[o]["#text"]:"object"==typeof t[o]&&null!==t[o]&&(t[o]=e(t[o]));return t};exports.getValueFromTextNode=e;
},{}],"TQ8G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LazyJsonString=exports.StringWrapper=void 0;var t=require("tslib"),r=function(){var r=Object.getPrototypeOf(this).constructor,e=new(Function.bind.apply(String,(0,t.__spread)([null],arguments)));return Object.setPrototypeOf(e,r.prototype),e};exports.StringWrapper=r,r.prototype=Object.create(String.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(r,String);var e=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return(0,t.__extends)(e,r),e.prototype.deserializeJSON=function(){return JSON.parse(r.prototype.toString.call(this))},e.prototype.toJSON=function(){return r.prototype.toString.call(this)},e.fromObject=function(t){return t instanceof e?t:t instanceof String||"string"==typeof t?new e(t):new e(JSON.stringify(t))},e}(r);exports.LazyJsonString=e;
},{"tslib":"G5GG"}],"VydC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dateToUtcString=r;var e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function r(r){var u=r.getUTCFullYear(),n=r.getUTCMonth(),a=r.getUTCDay(),o=r.getUTCDate(),T=r.getUTCHours(),g=r.getUTCMinutes(),s=r.getUTCSeconds(),U=o<10?"0"+o:""+o,c=T<10?"0"+T:""+T,C=g<10?"0"+g:""+g,M=s<10?"0"+s:""+s;return e[a]+", "+U+" "+t[n]+" "+u+" "+c+":"+C+":"+M+" GMT"}
},{}],"AOL1":[function(require,module,exports) {
"use strict";function r(r,e,t){if(t<=0||!Number.isInteger(t))throw new Error("Invalid number of delimiters ("+t+") for splitEvery.");var i=r.split(e);if(1===t)return i;for(var s=[],n="",o=0;o<i.length;o++)""===n?n=i[o]:n+=e+i[o],(o+1)%t==0&&(s.push(n),n="");return""!==n&&s.push(n),s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitEvery=r;
},{}],"D06u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SENSITIVE_STRING=void 0;var e="***SensitiveInformation***";exports.SENSITIVE_STRING=e;
},{}],"pooH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./client");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./command");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./document-type");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var n=require("./exception");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var u=require("./extended-encode-uri-component");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var o=require("./get-array-if-single-item");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var c=require("./get-value-from-text-node");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}})});var f=require("./lazy-json");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}})});var i=require("./date-utils");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})});var a=require("./split-every");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}})});var s=require("./constants");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}})});var d=require("./retryable-trait");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}})});var l=require("./sdk-error");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}})});
},{"./client":"yIwV","./command":"jM7a","./document-type":"YyWV","./exception":"YyWV","./extended-encode-uri-component":"TCQB","./get-array-if-single-item":"mK01","./get-value-from-text-node":"smBZ","./lazy-json":"TQ8G","./date-utils":"VydC","./split-every":"AOL1","./constants":"D06u","./retryable-trait":"YyWV","./sdk-error":"YyWV"}],"SKFp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CognitoIdentityClient=void 0;var e=require("tslib"),i=require("./runtimeConfig"),r=require("@aws-sdk/config-resolver"),t=require("@aws-sdk/middleware-content-length"),s=require("@aws-sdk/middleware-host-header"),n=require("@aws-sdk/middleware-logger"),o=require("@aws-sdk/middleware-retry"),d=require("@aws-sdk/middleware-signing"),g=require("@aws-sdk/middleware-user-agent"),l=require("@aws-sdk/smithy-client"),a=function(l){function a(a){var u=this,c=(0,e.__assign)((0,e.__assign)({},i.ClientDefaultValues),a),w=(0,r.resolveRegionConfig)(c),f=(0,r.resolveEndpointsConfig)(w),C=(0,o.resolveRetryConfig)(f),k=(0,s.resolveHostHeaderConfig)(C),m=(0,d.resolveAwsAuthConfig)(k),v=(0,g.resolveUserAgentConfig)(m);return(u=l.call(this,v)||this).config=v,u.middlewareStack.use((0,o.getRetryPlugin)(u.config)),u.middlewareStack.use((0,t.getContentLengthPlugin)(u.config)),u.middlewareStack.use((0,s.getHostHeaderPlugin)(u.config)),u.middlewareStack.use((0,n.getLoggerPlugin)(u.config)),u.middlewareStack.use((0,g.getUserAgentPlugin)(u.config)),u}return(0,e.__extends)(a,l),a.prototype.destroy=function(){l.prototype.destroy.call(this)},a}(l.Client);exports.CognitoIdentityClient=a;
},{"tslib":"CvJj","./runtimeConfig":"NlF7","@aws-sdk/config-resolver":"wCq5","@aws-sdk/middleware-content-length":"tA3Y","@aws-sdk/middleware-host-header":"o4Pa","@aws-sdk/middleware-logger":"jfCX","@aws-sdk/middleware-retry":"yjfw","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/middleware-user-agent":"O3h5","@aws-sdk/smithy-client":"pooH"}],"M1EB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UntagResourceResponse=exports.UntagResourceInput=exports.UnlinkIdentityInput=exports.UnlinkDeveloperIdentityInput=exports.TagResourceResponse=exports.TagResourceInput=exports.SetIdentityPoolRolesInput=exports.ConcurrentModificationException=exports.MergeDeveloperIdentitiesResponse=exports.MergeDeveloperIdentitiesInput=exports.LookupDeveloperIdentityResponse=exports.LookupDeveloperIdentityInput=exports.ListTagsForResourceResponse=exports.ListTagsForResourceInput=exports.ListIdentityPoolsResponse=exports.IdentityPoolShortDescription=exports.ListIdentityPoolsInput=exports.ListIdentitiesResponse=exports.ListIdentitiesInput=exports.GetOpenIdTokenForDeveloperIdentityResponse=exports.GetOpenIdTokenForDeveloperIdentityInput=exports.DeveloperUserAlreadyRegisteredException=exports.GetOpenIdTokenResponse=exports.GetOpenIdTokenInput=exports.GetIdentityPoolRolesResponse=exports.RoleMapping=exports.RoleMappingType=exports.RulesConfigurationType=exports.MappingRule=exports.MappingRuleMatchType=exports.GetIdentityPoolRolesInput=exports.GetIdResponse=exports.GetIdInput=exports.InvalidIdentityPoolConfigurationException=exports.GetCredentialsForIdentityResponse=exports.Credentials=exports.GetCredentialsForIdentityInput=exports.ExternalServiceException=exports.DescribeIdentityPoolInput=exports.IdentityDescription=exports.DescribeIdentityInput=exports.ResourceNotFoundException=exports.DeleteIdentityPoolInput=exports.DeleteIdentitiesResponse=exports.UnprocessedIdentityId=exports.ErrorCode=exports.DeleteIdentitiesInput=exports.TooManyRequestsException=exports.ResourceConflictException=exports.NotAuthorizedException=exports.LimitExceededException=exports.InvalidParameterException=exports.InternalErrorException=exports.IdentityPool=exports.CreateIdentityPoolInput=exports.CognitoIdentityProvider=exports.AmbiguousRoleResolutionType=void 0;var e,t,n,o,i,s,r,p,u,x,c,l,I,f,d,g,a,_,R,v,y,L,S,E,D,T,P,C,G,M,k,U,F,A,O,N,b,h,m,q,z,H,Q,W,j,K,V,Y,w,B,J,X,Z,$,ee,te,ne,oe=require("tslib");exports.AmbiguousRoleResolutionType=e,function(e){e.AUTHENTICATED_ROLE="AuthenticatedRole",e.DENY="Deny"}(e||(exports.AmbiguousRoleResolutionType=e={})),exports.CognitoIdentityProvider=t,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(t||(exports.CognitoIdentityProvider=t={})),exports.CreateIdentityPoolInput=n,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(n||(exports.CreateIdentityPoolInput=n={})),exports.IdentityPool=o,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(o||(exports.IdentityPool=o={})),exports.InternalErrorException=i,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(i||(exports.InternalErrorException=i={})),exports.InvalidParameterException=s,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(s||(exports.InvalidParameterException=s={})),exports.LimitExceededException=r,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(r||(exports.LimitExceededException=r={})),exports.NotAuthorizedException=p,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(p||(exports.NotAuthorizedException=p={})),exports.ResourceConflictException=u,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(u||(exports.ResourceConflictException=u={})),exports.TooManyRequestsException=x,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(x||(exports.TooManyRequestsException=x={})),exports.DeleteIdentitiesInput=c,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(c||(exports.DeleteIdentitiesInput=c={})),exports.ErrorCode=l,function(e){e.ACCESS_DENIED="AccessDenied",e.INTERNAL_SERVER_ERROR="InternalServerError"}(l||(exports.ErrorCode=l={})),exports.UnprocessedIdentityId=I,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(I||(exports.UnprocessedIdentityId=I={})),exports.DeleteIdentitiesResponse=f,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(f||(exports.DeleteIdentitiesResponse=f={})),exports.DeleteIdentityPoolInput=d,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(d||(exports.DeleteIdentityPoolInput=d={})),exports.ResourceNotFoundException=g,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(g||(exports.ResourceNotFoundException=g={})),exports.DescribeIdentityInput=a,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(a||(exports.DescribeIdentityInput=a={})),exports.IdentityDescription=_,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(_||(exports.IdentityDescription=_={})),exports.DescribeIdentityPoolInput=R,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(R||(exports.DescribeIdentityPoolInput=R={})),exports.ExternalServiceException=v,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(v||(exports.ExternalServiceException=v={})),exports.GetCredentialsForIdentityInput=y,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(y||(exports.GetCredentialsForIdentityInput=y={})),exports.Credentials=L,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(L||(exports.Credentials=L={})),exports.GetCredentialsForIdentityResponse=S,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(S||(exports.GetCredentialsForIdentityResponse=S={})),exports.InvalidIdentityPoolConfigurationException=E,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(E||(exports.InvalidIdentityPoolConfigurationException=E={})),exports.GetIdInput=D,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(D||(exports.GetIdInput=D={})),exports.GetIdResponse=T,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(T||(exports.GetIdResponse=T={})),exports.GetIdentityPoolRolesInput=P,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(P||(exports.GetIdentityPoolRolesInput=P={})),exports.MappingRuleMatchType=C,function(e){e.CONTAINS="Contains",e.EQUALS="Equals",e.NOT_EQUAL="NotEqual",e.STARTS_WITH="StartsWith"}(C||(exports.MappingRuleMatchType=C={})),exports.MappingRule=G,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(G||(exports.MappingRule=G={})),exports.RulesConfigurationType=M,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(M||(exports.RulesConfigurationType=M={})),exports.RoleMappingType=k,function(e){e.RULES="Rules",e.TOKEN="Token"}(k||(exports.RoleMappingType=k={})),exports.RoleMapping=U,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(U||(exports.RoleMapping=U={})),exports.GetIdentityPoolRolesResponse=F,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(F||(exports.GetIdentityPoolRolesResponse=F={})),exports.GetOpenIdTokenInput=A,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(A||(exports.GetOpenIdTokenInput=A={})),exports.GetOpenIdTokenResponse=O,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(O||(exports.GetOpenIdTokenResponse=O={})),exports.DeveloperUserAlreadyRegisteredException=N,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(N||(exports.DeveloperUserAlreadyRegisteredException=N={})),exports.GetOpenIdTokenForDeveloperIdentityInput=b,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(b||(exports.GetOpenIdTokenForDeveloperIdentityInput=b={})),exports.GetOpenIdTokenForDeveloperIdentityResponse=h,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(h||(exports.GetOpenIdTokenForDeveloperIdentityResponse=h={})),exports.ListIdentitiesInput=m,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(m||(exports.ListIdentitiesInput=m={})),exports.ListIdentitiesResponse=q,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(q||(exports.ListIdentitiesResponse=q={})),exports.ListIdentityPoolsInput=z,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(z||(exports.ListIdentityPoolsInput=z={})),exports.IdentityPoolShortDescription=H,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(H||(exports.IdentityPoolShortDescription=H={})),exports.ListIdentityPoolsResponse=Q,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(Q||(exports.ListIdentityPoolsResponse=Q={})),exports.ListTagsForResourceInput=W,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(W||(exports.ListTagsForResourceInput=W={})),exports.ListTagsForResourceResponse=j,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(j||(exports.ListTagsForResourceResponse=j={})),exports.LookupDeveloperIdentityInput=K,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(K||(exports.LookupDeveloperIdentityInput=K={})),exports.LookupDeveloperIdentityResponse=V,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(V||(exports.LookupDeveloperIdentityResponse=V={})),exports.MergeDeveloperIdentitiesInput=Y,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(Y||(exports.MergeDeveloperIdentitiesInput=Y={})),exports.MergeDeveloperIdentitiesResponse=w,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(w||(exports.MergeDeveloperIdentitiesResponse=w={})),exports.ConcurrentModificationException=B,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(B||(exports.ConcurrentModificationException=B={})),exports.SetIdentityPoolRolesInput=J,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(J||(exports.SetIdentityPoolRolesInput=J={})),exports.TagResourceInput=X,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(X||(exports.TagResourceInput=X={})),exports.TagResourceResponse=Z,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(Z||(exports.TagResourceResponse=Z={})),exports.UnlinkDeveloperIdentityInput=$,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}($||(exports.UnlinkDeveloperIdentityInput=$={})),exports.UnlinkIdentityInput=ee,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(ee||(exports.UnlinkIdentityInput=ee={})),exports.UntagResourceInput=te,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(te||(exports.UntagResourceInput=te={})),exports.UntagResourceResponse=ne,function(e){e.filterSensitiveLog=function(e){return(0,oe.__assign)({},e)}}(ne||(exports.UntagResourceResponse=ne={}));
},{"tslib":"CvJj"}],"zBEK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deserializeAws_json1_1UpdateIdentityPoolCommand=exports.deserializeAws_json1_1UntagResourceCommand=exports.deserializeAws_json1_1UnlinkIdentityCommand=exports.deserializeAws_json1_1UnlinkDeveloperIdentityCommand=exports.deserializeAws_json1_1TagResourceCommand=exports.deserializeAws_json1_1SetIdentityPoolRolesCommand=exports.deserializeAws_json1_1MergeDeveloperIdentitiesCommand=exports.deserializeAws_json1_1LookupDeveloperIdentityCommand=exports.deserializeAws_json1_1ListTagsForResourceCommand=exports.deserializeAws_json1_1ListIdentityPoolsCommand=exports.deserializeAws_json1_1ListIdentitiesCommand=exports.deserializeAws_json1_1GetOpenIdTokenForDeveloperIdentityCommand=exports.deserializeAws_json1_1GetOpenIdTokenCommand=exports.deserializeAws_json1_1GetIdentityPoolRolesCommand=exports.deserializeAws_json1_1GetIdCommand=exports.deserializeAws_json1_1GetCredentialsForIdentityCommand=exports.deserializeAws_json1_1DescribeIdentityPoolCommand=exports.deserializeAws_json1_1DescribeIdentityCommand=exports.deserializeAws_json1_1DeleteIdentityPoolCommand=exports.deserializeAws_json1_1DeleteIdentitiesCommand=exports.deserializeAws_json1_1CreateIdentityPoolCommand=exports.serializeAws_json1_1UpdateIdentityPoolCommand=exports.serializeAws_json1_1UntagResourceCommand=exports.serializeAws_json1_1UnlinkIdentityCommand=exports.serializeAws_json1_1UnlinkDeveloperIdentityCommand=exports.serializeAws_json1_1TagResourceCommand=exports.serializeAws_json1_1SetIdentityPoolRolesCommand=exports.serializeAws_json1_1MergeDeveloperIdentitiesCommand=exports.serializeAws_json1_1LookupDeveloperIdentityCommand=exports.serializeAws_json1_1ListTagsForResourceCommand=exports.serializeAws_json1_1ListIdentityPoolsCommand=exports.serializeAws_json1_1ListIdentitiesCommand=exports.serializeAws_json1_1GetOpenIdTokenForDeveloperIdentityCommand=exports.serializeAws_json1_1GetOpenIdTokenCommand=exports.serializeAws_json1_1GetIdentityPoolRolesCommand=exports.serializeAws_json1_1GetIdCommand=exports.serializeAws_json1_1GetCredentialsForIdentityCommand=exports.serializeAws_json1_1DescribeIdentityPoolCommand=exports.serializeAws_json1_1DescribeIdentityCommand=exports.serializeAws_json1_1DeleteIdentityPoolCommand=exports.serializeAws_json1_1DeleteIdentitiesCommand=exports.serializeAws_json1_1CreateIdentityPoolCommand=void 0;var e=require("tslib"),n=require("@aws-sdk/protocol-http"),t=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.CreateIdentityPool"},o=JSON.stringify(Pe(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1CreateIdentityPoolCommand=t;var a=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.DeleteIdentities"},o=JSON.stringify(Ce(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1DeleteIdentitiesCommand=a;var o=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.DeleteIdentityPool"},o=JSON.stringify(Re(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1DeleteIdentityPoolCommand=o;var i=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.DescribeIdentity"},o=JSON.stringify(Ae(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1DescribeIdentityCommand=i;var s=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.DescribeIdentityPool"},o=JSON.stringify(be(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1DescribeIdentityPoolCommand=s;var r=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},o=JSON.stringify(he(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1GetCredentialsForIdentityCommand=r;var c=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},o=JSON.stringify(Ne(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1GetIdCommand=c;var d=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetIdentityPoolRoles"},o=JSON.stringify($e(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1GetIdentityPoolRolesCommand=d;var u=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetOpenIdToken"},o=JSON.stringify(je(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1GetOpenIdTokenCommand=u;var l=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetOpenIdTokenForDeveloperIdentity"},o=JSON.stringify(Te(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1GetOpenIdTokenForDeveloperIdentityCommand=l;var _=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.ListIdentities"},o=JSON.stringify(Oe(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1ListIdentitiesCommand=_;var p=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.ListIdentityPools"},o=JSON.stringify(Le(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1ListIdentityPoolsCommand=p;var m=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.ListTagsForResource"},o=JSON.stringify(Fe(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1ListTagsForResourceCommand=m;var v=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.LookupDeveloperIdentity"},o=JSON.stringify(Je(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1LookupDeveloperIdentityCommand=v;var g=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.MergeDeveloperIdentities"},o=JSON.stringify(Ve(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1MergeDeveloperIdentitiesCommand=g;var y=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.SetIdentityPoolRoles"},o=JSON.stringify(en(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1SetIdentityPoolRolesCommand=y;var I=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.TagResource"},o=JSON.stringify(nn(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1TagResourceCommand=I;var f=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.UnlinkDeveloperIdentity"},o=JSON.stringify(tn(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1UnlinkDeveloperIdentityCommand=f;var x=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.UnlinkIdentity"},o=JSON.stringify(an(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1UnlinkIdentityCommand=x;var w=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.UntagResource"},o=JSON.stringify(on(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1UntagResourceCommand=w;var E=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(e){return a={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.UpdateIdentityPool"},o=JSON.stringify(Se(n,t)),[2,nt(t,a,"/",void 0,o)]})})};exports.serializeAws_json1_1UpdateIdentityPoolCommand=E;var z=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,P(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=wn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1CreateIdentityPoolCommand=z;var P=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m,v;return(0,e.__generator)(this,function(g){switch(g.label){case 0:return o=[(0,e.__assign)({},n)],v={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(v.body=g.sent(),v)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,6];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,8];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,12]}return[3,14];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 6:return d=[{}],[4,ye(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 8:return u=[{}],[4,Ie(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 10:return l=[{}],[4,fe(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 12:return _=[{}],[4,we(a,t)];case 13:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,_.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 14:p=a.body,s=p.code||p.Code||s,i=(0,e.__assign)((0,e.__assign)({},p),{name:""+s,message:p.message||p.Message||s,$fault:"client",$metadata:Yn(n)}),g.label=15;case 15:return m=i.message||i.Message||s,i.message=m,delete i.Message,[2,Promise.reject(Object.assign(new Error(m),i))]}})})},C=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,R(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=un(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1DeleteIdentitiesCommand=C;var R=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_;return(0,e.__generator)(this,function(p){switch(p.label){case 0:return o=[(0,e.__assign)({},n)],_={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(_.body=p.sent(),_)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,6]}return[3,8];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([p.sent()])),{name:s,$metadata:Yn(n)}]),[3,9];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([p.sent()])),{name:s,$metadata:Yn(n)}]),[3,9];case 6:return d=[{}],[4,we(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([p.sent()])),{name:s,$metadata:Yn(n)}]),[3,9];case 8:u=a.body,s=u.code||u.Code||s,i=(0,e.__assign)((0,e.__assign)({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:Yn(n)}),p.label=9;case 9:return l=i.message||i.Message||s,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}})})},A=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return n.statusCode>=300?[2,b(n,t)]:[4,Zn(n.body,t)];case 1:return e.sent(),a={$metadata:Yn(n)},[2,Promise.resolve(a)]}})})};exports.deserializeAws_json1_1DeleteIdentityPoolCommand=A;var b=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m;return(0,e.__generator)(this,function(v){switch(v.label){case 0:return o=[(0,e.__assign)({},n)],m={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(m.body=v.sent(),m)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,8];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,10]}return[3,12];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 6:return d=[{}],[4,Ie(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 8:return u=[{}],[4,xe(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 10:return l=[{}],[4,we(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 12:_=a.body,s=_.code||_.Code||s,i=(0,e.__assign)((0,e.__assign)({},_),{name:""+s,message:_.message||_.Message||s,$fault:"client",$metadata:Yn(n)}),v.label=13;case 13:return p=i.message||i.Message||s,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}})})},h=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,$(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=xn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1DescribeIdentityCommand=h;var $=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m;return(0,e.__generator)(this,function(v){switch(v.label){case 0:return o=[(0,e.__assign)({},n)],m={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(m.body=v.sent(),m)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,8];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,10]}return[3,12];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 6:return d=[{}],[4,Ie(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 8:return u=[{}],[4,xe(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 10:return l=[{}],[4,we(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 12:_=a.body,s=_.code||_.Code||s,i=(0,e.__assign)((0,e.__assign)({},_),{name:""+s,message:_.message||_.Message||s,$fault:"client",$metadata:Yn(n)}),v.label=13;case 13:return p=i.message||i.Message||s,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}})})},N=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,T(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=wn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1DescribeIdentityPoolCommand=N;var T=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m;return(0,e.__generator)(this,function(v){switch(v.label){case 0:return o=[(0,e.__assign)({},n)],m={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(m.body=v.sent(),m)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,8];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,10]}return[3,12];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 6:return d=[{}],[4,Ie(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 8:return u=[{}],[4,xe(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 10:return l=[{}],[4,we(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 12:_=a.body,s=_.code||_.Code||s,i=(0,e.__assign)((0,e.__assign)({},_),{name:""+s,message:_.message||_.Message||s,$fault:"client",$metadata:Yn(n)}),v.label=13;case 13:return p=i.message||i.Message||s,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}})})},j=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,M(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=mn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1GetCredentialsForIdentityCommand=j;var M=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m,v,g,y;return(0,e.__generator)(this,function(I){switch(I.label){case 0:return o=[(0,e.__assign)({},n)],y={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(y.body=I.sent(),y)])),s="UnknownError",s=at(n,a.body),s){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return r=[{}],[4,pe(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 4:return c=[{}],[4,me(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 6:return d=[{}],[4,ve(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 8:return u=[{}],[4,ge(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 10:return l=[{}],[4,Ie(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 12:return _=[{}],[4,fe(a,t)];case 13:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,_.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 14:return p=[{}],[4,xe(a,t)];case 15:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,p.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 16:return m=[{}],[4,we(a,t)];case 17:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,m.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 18:v=a.body,s=v.code||v.Code||s,i=(0,e.__assign)((0,e.__assign)({},v),{name:""+s,message:v.message||v.Message||s,$fault:"client",$metadata:Yn(n)}),I.label=19;case 19:return g=i.message||i.Message||s,i.message=g,delete i.Message,[2,Promise.reject(Object.assign(new Error(g),i))]}})})},S=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,k(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=gn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1GetIdCommand=S;var k=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m,v,g,y;return(0,e.__generator)(this,function(I){switch(I.label){case 0:return o=[(0,e.__assign)({},n)],y={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(y.body=I.sent(),y)])),s="UnknownError",s=at(n,a.body),s){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return r=[{}],[4,pe(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 4:return c=[{}],[4,me(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 6:return d=[{}],[4,ge(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 8:return u=[{}],[4,ye(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 10:return l=[{}],[4,Ie(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 12:return _=[{}],[4,fe(a,t)];case 13:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,_.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 14:return p=[{}],[4,xe(a,t)];case 15:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,p.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 16:return m=[{}],[4,we(a,t)];case 17:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,m.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 18:v=a.body,s=v.code||v.Code||s,i=(0,e.__assign)((0,e.__assign)({},v),{name:""+s,message:v.message||v.Message||s,$fault:"client",$metadata:Yn(n)}),I.label=19;case 19:return g=i.message||i.Message||s,i.message=g,delete i.Message,[2,Promise.reject(Object.assign(new Error(g),i))]}})})},D=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,U(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=vn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1GetIdentityPoolRolesCommand=D;var U=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m,v;return(0,e.__generator)(this,function(g){switch(g.label){case 0:return o=[(0,e.__assign)({},n)],v={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(v.body=g.sent(),v)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,6];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,8];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,12]}return[3,14];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 6:return d=[{}],[4,Ie(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 8:return u=[{}],[4,fe(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 10:return l=[{}],[4,xe(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 12:return _=[{}],[4,we(a,t)];case 13:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,_.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 14:p=a.body,s=p.code||p.Code||s,i=(0,e.__assign)((0,e.__assign)({},p),{name:""+s,message:p.message||p.Message||s,$fault:"client",$metadata:Yn(n)}),g.label=15;case 15:return m=i.message||i.Message||s,i.message=m,delete i.Message,[2,Promise.reject(Object.assign(new Error(m),i))]}})})},O=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,L(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=In(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1GetOpenIdTokenCommand=O;var L=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m,v,g;return(0,e.__generator)(this,function(y){switch(y.label){case 0:return o=[(0,e.__assign)({},n)],g={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(g.body=y.sent(),g)])),s="UnknownError",s=at(n,a.body),s){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,8];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,10];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,pe(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 4:return c=[{}],[4,me(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 6:return d=[{}],[4,ge(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 8:return u=[{}],[4,Ie(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 10:return l=[{}],[4,fe(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 12:return _=[{}],[4,xe(a,t)];case 13:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,_.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 14:return p=[{}],[4,we(a,t)];case 15:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,p.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 16:m=a.body,s=m.code||m.Code||s,i=(0,e.__assign)((0,e.__assign)({},m),{name:""+s,message:m.message||m.Message||s,$fault:"client",$metadata:Yn(n)}),y.label=17;case 17:return v=i.message||i.Message||s,i.message=v,delete i.Message,[2,Promise.reject(Object.assign(new Error(v),i))]}})})},F=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,q(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=yn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1GetOpenIdTokenForDeveloperIdentityCommand=F;var q=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m,v,g;return(0,e.__generator)(this,function(y){switch(y.label){case 0:return o=[(0,e.__assign)({},n)],g={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(g.body=y.sent(),g)])),s="UnknownError",s=at(n,a.body),s){case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,8];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,10];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,_e(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 4:return c=[{}],[4,me(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 6:return d=[{}],[4,ge(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 8:return u=[{}],[4,Ie(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 10:return l=[{}],[4,fe(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 12:return _=[{}],[4,xe(a,t)];case 13:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,_.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 14:return p=[{}],[4,we(a,t)];case 15:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,p.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 16:m=a.body,s=m.code||m.Code||s,i=(0,e.__assign)((0,e.__assign)({},m),{name:""+s,message:m.message||m.Message||s,$fault:"client",$metadata:Yn(n)}),y.label=17;case 17:return v=i.message||i.Message||s,i.message=v,delete i.Message,[2,Promise.reject(Object.assign(new Error(v),i))]}})})},G=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,J(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=$n(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1ListIdentitiesCommand=G;var J=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m;return(0,e.__generator)(this,function(v){switch(v.label){case 0:return o=[(0,e.__assign)({},n)],m={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(m.body=v.sent(),m)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,8];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,10]}return[3,12];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 6:return d=[{}],[4,Ie(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 8:return u=[{}],[4,xe(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 10:return l=[{}],[4,we(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 12:_=a.body,s=_.code||_.Code||s,i=(0,e.__assign)((0,e.__assign)({},_),{name:""+s,message:_.message||_.Message||s,$fault:"client",$metadata:Yn(n)}),v.label=13;case 13:return p=i.message||i.Message||s,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}})})},W=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,K(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=Nn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1ListIdentityPoolsCommand=W;var K=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m;return(0,e.__generator)(this,function(v){switch(v.label){case 0:return o=[(0,e.__assign)({},n)],m={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(m.body=v.sent(),m)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,8];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,10]}return[3,12];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 6:return d=[{}],[4,Ie(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 8:return u=[{}],[4,xe(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 10:return l=[{}],[4,we(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 12:_=a.body,s=_.code||_.Code||s,i=(0,e.__assign)((0,e.__assign)({},_),{name:""+s,message:_.message||_.Message||s,$fault:"client",$metadata:Yn(n)}),v.label=13;case 13:return p=i.message||i.Message||s,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}})})},V=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,H(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=Tn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1ListTagsForResourceCommand=V;var H=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m;return(0,e.__generator)(this,function(v){switch(v.label){case 0:return o=[(0,e.__assign)({},n)],m={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(m.body=v.sent(),m)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,8];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,10]}return[3,12];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 6:return d=[{}],[4,Ie(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 8:return u=[{}],[4,xe(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 10:return l=[{}],[4,we(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 12:_=a.body,s=_.code||_.Code||s,i=(0,e.__assign)((0,e.__assign)({},_),{name:""+s,message:_.message||_.Message||s,$fault:"client",$metadata:Yn(n)}),v.label=13;case 13:return p=i.message||i.Message||s,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}})})},B=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,Q(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=Mn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1LookupDeveloperIdentityCommand=B;var Q=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m,v;return(0,e.__generator)(this,function(g){switch(g.label){case 0:return o=[(0,e.__assign)({},n)],v={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(v.body=g.sent(),v)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,6];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,8];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,12]}return[3,14];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 6:return d=[{}],[4,Ie(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 8:return u=[{}],[4,fe(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 10:return l=[{}],[4,xe(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 12:return _=[{}],[4,we(a,t)];case 13:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,_.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 14:p=a.body,s=p.code||p.Code||s,i=(0,e.__assign)((0,e.__assign)({},p),{name:""+s,message:p.message||p.Message||s,$fault:"client",$metadata:Yn(n)}),g.label=15;case 15:return m=i.message||i.Message||s,i.message=m,delete i.Message,[2,Promise.reject(Object.assign(new Error(m),i))]}})})},X=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,Y(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=Dn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1MergeDeveloperIdentitiesCommand=X;var Y=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m,v;return(0,e.__generator)(this,function(g){switch(g.label){case 0:return o=[(0,e.__assign)({},n)],v={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(v.body=g.sent(),v)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,6];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,8];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,12]}return[3,14];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 6:return d=[{}],[4,Ie(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 8:return u=[{}],[4,fe(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 10:return l=[{}],[4,xe(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 12:return _=[{}],[4,we(a,t)];case 13:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,_.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 14:p=a.body,s=p.code||p.Code||s,i=(0,e.__assign)((0,e.__assign)({},p),{name:""+s,message:p.message||p.Message||s,$fault:"client",$metadata:Yn(n)}),g.label=15;case 15:return m=i.message||i.Message||s,i.message=m,delete i.Message,[2,Promise.reject(Object.assign(new Error(m),i))]}})})},Z=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return n.statusCode>=300?[2,ee(n,t)]:[4,Zn(n.body,t)];case 1:return e.sent(),a={$metadata:Yn(n)},[2,Promise.resolve(a)]}})})};exports.deserializeAws_json1_1SetIdentityPoolRolesCommand=Z;var ee=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m,v,g;return(0,e.__generator)(this,function(y){switch(y.label){case 0:return o=[(0,e.__assign)({},n)],g={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(g.body=y.sent(),g)])),s="UnknownError",s=at(n,a.body),s){case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,8];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,10];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,le(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 4:return c=[{}],[4,me(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 6:return d=[{}],[4,ge(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 8:return u=[{}],[4,Ie(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 10:return l=[{}],[4,fe(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 12:return _=[{}],[4,xe(a,t)];case 13:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,_.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 14:return p=[{}],[4,we(a,t)];case 15:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,p.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 16:m=a.body,s=m.code||m.Code||s,i=(0,e.__assign)((0,e.__assign)({},m),{name:""+s,message:m.message||m.Message||s,$fault:"client",$metadata:Yn(n)}),y.label=17;case 17:return v=i.message||i.Message||s,i.message=v,delete i.Message,[2,Promise.reject(Object.assign(new Error(v),i))]}})})},ne=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,te(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=Vn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1TagResourceCommand=ne;var te=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m;return(0,e.__generator)(this,function(v){switch(v.label){case 0:return o=[(0,e.__assign)({},n)],m={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(m.body=v.sent(),m)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,8];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,10]}return[3,12];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 6:return d=[{}],[4,Ie(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 8:return u=[{}],[4,xe(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 10:return l=[{}],[4,we(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 12:_=a.body,s=_.code||_.Code||s,i=(0,e.__assign)((0,e.__assign)({},_),{name:""+s,message:_.message||_.Message||s,$fault:"client",$metadata:Yn(n)}),v.label=13;case 13:return p=i.message||i.Message||s,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}})})},ae=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return n.statusCode>=300?[2,oe(n,t)]:[4,Zn(n.body,t)];case 1:return e.sent(),a={$metadata:Yn(n)},[2,Promise.resolve(a)]}})})};exports.deserializeAws_json1_1UnlinkDeveloperIdentityCommand=ae;var oe=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m,v;return(0,e.__generator)(this,function(g){switch(g.label){case 0:return o=[(0,e.__assign)({},n)],v={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(v.body=g.sent(),v)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,6];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,8];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,12]}return[3,14];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 6:return d=[{}],[4,Ie(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 8:return u=[{}],[4,fe(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 10:return l=[{}],[4,xe(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 12:return _=[{}],[4,we(a,t)];case 13:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,_.concat([g.sent()])),{name:s,$metadata:Yn(n)}]),[3,15];case 14:p=a.body,s=p.code||p.Code||s,i=(0,e.__assign)((0,e.__assign)({},p),{name:""+s,message:p.message||p.Message||s,$fault:"client",$metadata:Yn(n)}),g.label=15;case 15:return m=i.message||i.Message||s,i.message=m,delete i.Message,[2,Promise.reject(Object.assign(new Error(m),i))]}})})},ie=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return n.statusCode>=300?[2,se(n,t)]:[4,Zn(n.body,t)];case 1:return e.sent(),a={$metadata:Yn(n)},[2,Promise.resolve(a)]}})})};exports.deserializeAws_json1_1UnlinkIdentityCommand=ie;var se=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m,v,g;return(0,e.__generator)(this,function(y){switch(y.label){case 0:return o=[(0,e.__assign)({},n)],g={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(g.body=y.sent(),g)])),s="UnknownError",s=at(n,a.body),s){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,8];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,10];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,pe(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 4:return c=[{}],[4,me(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 6:return d=[{}],[4,ge(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 8:return u=[{}],[4,Ie(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 10:return l=[{}],[4,fe(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 12:return _=[{}],[4,xe(a,t)];case 13:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,_.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 14:return p=[{}],[4,we(a,t)];case 15:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,p.concat([y.sent()])),{name:s,$metadata:Yn(n)}]),[3,17];case 16:m=a.body,s=m.code||m.Code||s,i=(0,e.__assign)((0,e.__assign)({},m),{name:""+s,message:m.message||m.Message||s,$fault:"client",$metadata:Yn(n)}),y.label=17;case 17:return v=i.message||i.Message||s,i.message=v,delete i.Message,[2,Promise.reject(Object.assign(new Error(v),i))]}})})},re=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,ce(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=Xn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1UntagResourceCommand=re;var ce=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m;return(0,e.__generator)(this,function(v){switch(v.label){case 0:return o=[(0,e.__assign)({},n)],m={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(m.body=v.sent(),m)])),s="UnknownError",s=at(n,a.body),s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,2];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,4];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,6];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,8];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,10]}return[3,12];case 2:return r=[{}],[4,me(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 4:return c=[{}],[4,ge(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 6:return d=[{}],[4,Ie(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 8:return u=[{}],[4,xe(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 10:return l=[{}],[4,we(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([v.sent()])),{name:s,$metadata:Yn(n)}]),[3,13];case 12:_=a.body,s=_.code||_.Code||s,i=(0,e.__assign)((0,e.__assign)({},_),{name:""+s,message:_.message||_.Message||s,$fault:"client",$metadata:Yn(n)}),v.label=13;case 13:return p=i.message||i.Message||s,i.message=p,delete i.Message,[2,Promise.reject(Object.assign(new Error(p),i))]}})})},de=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i;return(0,e.__generator)(this,function(s){switch(s.label){case 0:return n.statusCode>=300?[2,ue(n,t)]:[4,tt(n.body,t)];case 1:return a=s.sent(),{},o=wn(a,t),i=(0,e.__assign)({$metadata:Yn(n)},o),[2,Promise.resolve(i)]}})})};exports.deserializeAws_json1_1UpdateIdentityPoolCommand=de;var ue=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o,i,s,r,c,d,u,l,_,p,m,v,g,y;return(0,e.__generator)(this,function(I){switch(I.label){case 0:return o=[(0,e.__assign)({},n)],y={},[4,tt(n.body,t)];case 1:switch(a=e.__assign.apply(void 0,o.concat([(y.body=I.sent(),y)])),s="UnknownError",s=at(n,a.body),s){case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return r=[{}],[4,le(a,t)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,r.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 4:return c=[{}],[4,me(a,t)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,c.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 6:return d=[{}],[4,ge(a,t)];case 7:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 8:return u=[{}],[4,ye(a,t)];case 9:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,u.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 10:return l=[{}],[4,Ie(a,t)];case 11:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,l.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 12:return _=[{}],[4,fe(a,t)];case 13:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,_.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 14:return p=[{}],[4,xe(a,t)];case 15:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,p.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 16:return m=[{}],[4,we(a,t)];case 17:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,m.concat([I.sent()])),{name:s,$metadata:Yn(n)}]),[3,19];case 18:v=a.body,s=v.code||v.Code||s,i=(0,e.__assign)((0,e.__assign)({},v),{name:""+s,message:v.message||v.Message||s,$fault:"client",$metadata:Yn(n)}),I.label=19;case 19:return g=i.message||i.Message||s,i.message=g,delete i.Message,[2,Promise.reject(Object.assign(new Error(g),i))]}})})},le=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(i){return a=n.body,o=cn(a,t),[2,(0,e.__assign)({name:"ConcurrentModificationException",$fault:"client",$metadata:Yn(n)},o)]})})},_e=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(i){return a=n.body,o=ln(a,t),[2,(0,e.__assign)({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",$metadata:Yn(n)},o)]})})},pe=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(i){return a=n.body,o=pn(a,t),[2,(0,e.__assign)({name:"ExternalServiceException",$fault:"client",$metadata:Yn(n)},o)]})})},me=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(i){return a=n.body,o=Rn(a,t),[2,(0,e.__assign)({name:"InternalErrorException",$fault:"server",$metadata:Yn(n)},o)]})})},ve=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(i){return a=n.body,o=An(a,t),[2,(0,e.__assign)({name:"InvalidIdentityPoolConfigurationException",$fault:"client",$metadata:Yn(n)},o)]})})},ge=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(i){return a=n.body,o=bn(a,t),[2,(0,e.__assign)({name:"InvalidParameterException",$fault:"client",$metadata:Yn(n)},o)]})})},ye=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(i){return a=n.body,o=hn(a,t),[2,(0,e.__assign)({name:"LimitExceededException",$fault:"client",$metadata:Yn(n)},o)]})})},Ie=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(i){return a=n.body,o=Un(a,t),[2,(0,e.__assign)({name:"NotAuthorizedException",$fault:"client",$metadata:Yn(n)},o)]})})},fe=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(i){return a=n.body,o=Ln(a,t),[2,(0,e.__assign)({name:"ResourceConflictException",$fault:"client",$metadata:Yn(n)},o)]})})},xe=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(i){return a=n.body,o=Fn(a,t),[2,(0,e.__assign)({name:"ResourceNotFoundException",$fault:"client",$metadata:Yn(n)},o)]})})},we=function(n,t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,o;return(0,e.__generator)(this,function(i){return a=n.body,o=Hn(a,t),[2,(0,e.__assign)({name:"TooManyRequestsException",$fault:"client",$metadata:Yn(n)},o)]})})},Ee=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.ClientId&&null!==n.ClientId&&{ClientId:n.ClientId}),void 0!==n.ProviderName&&null!==n.ProviderName&&{ProviderName:n.ProviderName}),void 0!==n.ServerSideTokenCheck&&null!==n.ServerSideTokenCheck&&{ServerSideTokenCheck:n.ServerSideTokenCheck})},ze=function(e,n){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:Ee(e,n)})},Pe=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.AllowClassicFlow&&null!==n.AllowClassicFlow&&{AllowClassicFlow:n.AllowClassicFlow}),void 0!==n.AllowUnauthenticatedIdentities&&null!==n.AllowUnauthenticatedIdentities&&{AllowUnauthenticatedIdentities:n.AllowUnauthenticatedIdentities}),void 0!==n.CognitoIdentityProviders&&null!==n.CognitoIdentityProviders&&{CognitoIdentityProviders:ze(n.CognitoIdentityProviders,t)}),void 0!==n.DeveloperProviderName&&null!==n.DeveloperProviderName&&{DeveloperProviderName:n.DeveloperProviderName}),void 0!==n.IdentityPoolName&&null!==n.IdentityPoolName&&{IdentityPoolName:n.IdentityPoolName}),void 0!==n.IdentityPoolTags&&null!==n.IdentityPoolTags&&{IdentityPoolTags:De(n.IdentityPoolTags,t)}),void 0!==n.OpenIdConnectProviderARNs&&null!==n.OpenIdConnectProviderARNs&&{OpenIdConnectProviderARNs:He(n.OpenIdConnectProviderARNs,t)}),void 0!==n.SamlProviderARNs&&null!==n.SamlProviderARNs&&{SamlProviderARNs:Ze(n.SamlProviderARNs,t)}),void 0!==n.SupportedLoginProviders&&null!==n.SupportedLoginProviders&&{SupportedLoginProviders:Ue(n.SupportedLoginProviders,t)})},Ce=function(n,t){return(0,e.__assign)({},void 0!==n.IdentityIdsToDelete&&null!==n.IdentityIdsToDelete&&{IdentityIdsToDelete:Me(n.IdentityIdsToDelete,t)})},Re=function(n,t){return(0,e.__assign)({},void 0!==n.IdentityPoolId&&null!==n.IdentityPoolId&&{IdentityPoolId:n.IdentityPoolId})},Ae=function(n,t){return(0,e.__assign)({},void 0!==n.IdentityId&&null!==n.IdentityId&&{IdentityId:n.IdentityId})},be=function(n,t){return(0,e.__assign)({},void 0!==n.IdentityPoolId&&null!==n.IdentityPoolId&&{IdentityPoolId:n.IdentityPoolId})},he=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.CustomRoleArn&&null!==n.CustomRoleArn&&{CustomRoleArn:n.CustomRoleArn}),void 0!==n.IdentityId&&null!==n.IdentityId&&{IdentityId:n.IdentityId}),void 0!==n.Logins&&null!==n.Logins&&{Logins:Ge(n.Logins,t)})},$e=function(n,t){return(0,e.__assign)({},void 0!==n.IdentityPoolId&&null!==n.IdentityPoolId&&{IdentityPoolId:n.IdentityPoolId})},Ne=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.AccountId&&null!==n.AccountId&&{AccountId:n.AccountId}),void 0!==n.IdentityPoolId&&null!==n.IdentityPoolId&&{IdentityPoolId:n.IdentityPoolId}),void 0!==n.Logins&&null!==n.Logins&&{Logins:Ge(n.Logins,t)})},Te=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.IdentityId&&null!==n.IdentityId&&{IdentityId:n.IdentityId}),void 0!==n.IdentityPoolId&&null!==n.IdentityPoolId&&{IdentityPoolId:n.IdentityPoolId}),void 0!==n.Logins&&null!==n.Logins&&{Logins:Ge(n.Logins,t)}),void 0!==n.TokenDuration&&null!==n.TokenDuration&&{TokenDuration:n.TokenDuration})},je=function(n,t){return(0,e.__assign)((0,e.__assign)({},void 0!==n.IdentityId&&null!==n.IdentityId&&{IdentityId:n.IdentityId}),void 0!==n.Logins&&null!==n.Logins&&{Logins:Ge(n.Logins,t)})},Me=function(e,n){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},Se=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.AllowClassicFlow&&null!==n.AllowClassicFlow&&{AllowClassicFlow:n.AllowClassicFlow}),void 0!==n.AllowUnauthenticatedIdentities&&null!==n.AllowUnauthenticatedIdentities&&{AllowUnauthenticatedIdentities:n.AllowUnauthenticatedIdentities}),void 0!==n.CognitoIdentityProviders&&null!==n.CognitoIdentityProviders&&{CognitoIdentityProviders:ze(n.CognitoIdentityProviders,t)}),void 0!==n.DeveloperProviderName&&null!==n.DeveloperProviderName&&{DeveloperProviderName:n.DeveloperProviderName}),void 0!==n.IdentityPoolId&&null!==n.IdentityPoolId&&{IdentityPoolId:n.IdentityPoolId}),void 0!==n.IdentityPoolName&&null!==n.IdentityPoolName&&{IdentityPoolName:n.IdentityPoolName}),void 0!==n.IdentityPoolTags&&null!==n.IdentityPoolTags&&{IdentityPoolTags:De(n.IdentityPoolTags,t)}),void 0!==n.OpenIdConnectProviderARNs&&null!==n.OpenIdConnectProviderARNs&&{OpenIdConnectProviderARNs:He(n.OpenIdConnectProviderARNs,t)}),void 0!==n.SamlProviderARNs&&null!==n.SamlProviderARNs&&{SamlProviderARNs:Ze(n.SamlProviderARNs,t)}),void 0!==n.SupportedLoginProviders&&null!==n.SupportedLoginProviders&&{SupportedLoginProviders:Ue(n.SupportedLoginProviders,t)})},ke=function(e,n){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},De=function(n,t){return Object.entries(n).reduce(function(n,t){var a,o=(0,e.__read)(t,2),i=o[0],s=o[1];return null===s?n:(0,e.__assign)((0,e.__assign)({},n),((a={})[i]=s,a))},{})},Ue=function(n,t){return Object.entries(n).reduce(function(n,t){var a,o=(0,e.__read)(t,2),i=o[0],s=o[1];return null===s?n:(0,e.__assign)((0,e.__assign)({},n),((a={})[i]=s,a))},{})},Oe=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.HideDisabled&&null!==n.HideDisabled&&{HideDisabled:n.HideDisabled}),void 0!==n.IdentityPoolId&&null!==n.IdentityPoolId&&{IdentityPoolId:n.IdentityPoolId}),void 0!==n.MaxResults&&null!==n.MaxResults&&{MaxResults:n.MaxResults}),void 0!==n.NextToken&&null!==n.NextToken&&{NextToken:n.NextToken})},Le=function(n,t){return(0,e.__assign)((0,e.__assign)({},void 0!==n.MaxResults&&null!==n.MaxResults&&{MaxResults:n.MaxResults}),void 0!==n.NextToken&&null!==n.NextToken&&{NextToken:n.NextToken})},Fe=function(n,t){return(0,e.__assign)({},void 0!==n.ResourceArn&&null!==n.ResourceArn&&{ResourceArn:n.ResourceArn})},qe=function(e,n){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},Ge=function(n,t){return Object.entries(n).reduce(function(n,t){var a,o=(0,e.__read)(t,2),i=o[0],s=o[1];return null===s?n:(0,e.__assign)((0,e.__assign)({},n),((a={})[i]=s,a))},{})},Je=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.DeveloperUserIdentifier&&null!==n.DeveloperUserIdentifier&&{DeveloperUserIdentifier:n.DeveloperUserIdentifier}),void 0!==n.IdentityId&&null!==n.IdentityId&&{IdentityId:n.IdentityId}),void 0!==n.IdentityPoolId&&null!==n.IdentityPoolId&&{IdentityPoolId:n.IdentityPoolId}),void 0!==n.MaxResults&&null!==n.MaxResults&&{MaxResults:n.MaxResults}),void 0!==n.NextToken&&null!==n.NextToken&&{NextToken:n.NextToken})},We=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.Claim&&null!==n.Claim&&{Claim:n.Claim}),void 0!==n.MatchType&&null!==n.MatchType&&{MatchType:n.MatchType}),void 0!==n.RoleARN&&null!==n.RoleARN&&{RoleARN:n.RoleARN}),void 0!==n.Value&&null!==n.Value&&{Value:n.Value})},Ke=function(e,n){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:We(e,n)})},Ve=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.DestinationUserIdentifier&&null!==n.DestinationUserIdentifier&&{DestinationUserIdentifier:n.DestinationUserIdentifier}),void 0!==n.DeveloperProviderName&&null!==n.DeveloperProviderName&&{DeveloperProviderName:n.DeveloperProviderName}),void 0!==n.IdentityPoolId&&null!==n.IdentityPoolId&&{IdentityPoolId:n.IdentityPoolId}),void 0!==n.SourceUserIdentifier&&null!==n.SourceUserIdentifier&&{SourceUserIdentifier:n.SourceUserIdentifier})},He=function(e,n){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},Be=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.AmbiguousRoleResolution&&null!==n.AmbiguousRoleResolution&&{AmbiguousRoleResolution:n.AmbiguousRoleResolution}),void 0!==n.RulesConfiguration&&null!==n.RulesConfiguration&&{RulesConfiguration:Ye(n.RulesConfiguration,t)}),void 0!==n.Type&&null!==n.Type&&{Type:n.Type})},Qe=function(n,t){return Object.entries(n).reduce(function(n,a){var o,i=(0,e.__read)(a,2),s=i[0],r=i[1];return null===r?n:(0,e.__assign)((0,e.__assign)({},n),((o={})[s]=Be(r,t),o))},{})},Xe=function(n,t){return Object.entries(n).reduce(function(n,t){var a,o=(0,e.__read)(t,2),i=o[0],s=o[1];return null===s?n:(0,e.__assign)((0,e.__assign)({},n),((a={})[i]=s,a))},{})},Ye=function(n,t){return(0,e.__assign)({},void 0!==n.Rules&&null!==n.Rules&&{Rules:Ke(n.Rules,t)})},Ze=function(e,n){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},en=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.IdentityPoolId&&null!==n.IdentityPoolId&&{IdentityPoolId:n.IdentityPoolId}),void 0!==n.RoleMappings&&null!==n.RoleMappings&&{RoleMappings:Qe(n.RoleMappings,t)}),void 0!==n.Roles&&null!==n.Roles&&{Roles:Xe(n.Roles,t)})},nn=function(n,t){return(0,e.__assign)((0,e.__assign)({},void 0!==n.ResourceArn&&null!==n.ResourceArn&&{ResourceArn:n.ResourceArn}),void 0!==n.Tags&&null!==n.Tags&&{Tags:De(n.Tags,t)})},tn=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.DeveloperProviderName&&null!==n.DeveloperProviderName&&{DeveloperProviderName:n.DeveloperProviderName}),void 0!==n.DeveloperUserIdentifier&&null!==n.DeveloperUserIdentifier&&{DeveloperUserIdentifier:n.DeveloperUserIdentifier}),void 0!==n.IdentityId&&null!==n.IdentityId&&{IdentityId:n.IdentityId}),void 0!==n.IdentityPoolId&&null!==n.IdentityPoolId&&{IdentityPoolId:n.IdentityPoolId})},an=function(n,t){return(0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==n.IdentityId&&null!==n.IdentityId&&{IdentityId:n.IdentityId}),void 0!==n.Logins&&null!==n.Logins&&{Logins:Ge(n.Logins,t)}),void 0!==n.LoginsToRemove&&null!==n.LoginsToRemove&&{LoginsToRemove:qe(n.LoginsToRemove,t)})},on=function(n,t){return(0,e.__assign)((0,e.__assign)({},void 0!==n.ResourceArn&&null!==n.ResourceArn&&{ResourceArn:n.ResourceArn}),void 0!==n.TagKeys&&null!==n.TagKeys&&{TagKeys:ke(n.TagKeys,t)})},sn=function(e,n){return{ClientId:void 0!==e.ClientId&&null!==e.ClientId?e.ClientId:void 0,ProviderName:void 0!==e.ProviderName&&null!==e.ProviderName?e.ProviderName:void 0,ServerSideTokenCheck:void 0!==e.ServerSideTokenCheck&&null!==e.ServerSideTokenCheck?e.ServerSideTokenCheck:void 0}},rn=function(e,n){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:sn(e,n)})},cn=function(e,n){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},dn=function(e,n){return{AccessKeyId:void 0!==e.AccessKeyId&&null!==e.AccessKeyId?e.AccessKeyId:void 0,Expiration:void 0!==e.Expiration&&null!==e.Expiration?new Date(Math.round(1e3*e.Expiration)):void 0,SecretKey:void 0!==e.SecretKey&&null!==e.SecretKey?e.SecretKey:void 0,SessionToken:void 0!==e.SessionToken&&null!==e.SessionToken?e.SessionToken:void 0}},un=function(e,n){return{UnprocessedIdentityIds:void 0!==e.UnprocessedIdentityIds&&null!==e.UnprocessedIdentityIds?Qn(e.UnprocessedIdentityIds,n):void 0}},ln=function(e,n){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},_n=function(e,n){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},pn=function(e,n){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},mn=function(e,n){return{Credentials:void 0!==e.Credentials&&null!==e.Credentials?dn(e.Credentials,n):void 0,IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}},vn=function(e,n){return{IdentityPoolId:void 0!==e.IdentityPoolId&&null!==e.IdentityPoolId?e.IdentityPoolId:void 0,RoleMappings:void 0!==e.RoleMappings&&null!==e.RoleMappings?Gn(e.RoleMappings,n):void 0,Roles:void 0!==e.Roles&&null!==e.Roles?Jn(e.Roles,n):void 0}},gn=function(e,n){return{IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}},yn=function(e,n){return{IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0,Token:void 0!==e.Token&&null!==e.Token?e.Token:void 0}},In=function(e,n){return{IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0,Token:void 0!==e.Token&&null!==e.Token?e.Token:void 0}},fn=function(e,n){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:xn(e,n)})},xn=function(e,n){return{CreationDate:void 0!==e.CreationDate&&null!==e.CreationDate?new Date(Math.round(1e3*e.CreationDate)):void 0,IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0,LastModifiedDate:void 0!==e.LastModifiedDate&&null!==e.LastModifiedDate?new Date(Math.round(1e3*e.LastModifiedDate)):void 0,Logins:void 0!==e.Logins&&null!==e.Logins?jn(e.Logins,n):void 0}},wn=function(e,n){return{AllowClassicFlow:void 0!==e.AllowClassicFlow&&null!==e.AllowClassicFlow?e.AllowClassicFlow:void 0,AllowUnauthenticatedIdentities:void 0!==e.AllowUnauthenticatedIdentities&&null!==e.AllowUnauthenticatedIdentities?e.AllowUnauthenticatedIdentities:void 0,CognitoIdentityProviders:void 0!==e.CognitoIdentityProviders&&null!==e.CognitoIdentityProviders?rn(e.CognitoIdentityProviders,n):void 0,DeveloperProviderName:void 0!==e.DeveloperProviderName&&null!==e.DeveloperProviderName?e.DeveloperProviderName:void 0,IdentityPoolId:void 0!==e.IdentityPoolId&&null!==e.IdentityPoolId?e.IdentityPoolId:void 0,IdentityPoolName:void 0!==e.IdentityPoolName&&null!==e.IdentityPoolName?e.IdentityPoolName:void 0,IdentityPoolTags:void 0!==e.IdentityPoolTags&&null!==e.IdentityPoolTags?Pn(e.IdentityPoolTags,n):void 0,OpenIdConnectProviderARNs:void 0!==e.OpenIdConnectProviderARNs&&null!==e.OpenIdConnectProviderARNs?On(e.OpenIdConnectProviderARNs,n):void 0,SamlProviderARNs:void 0!==e.SamlProviderARNs&&null!==e.SamlProviderARNs?Kn(e.SamlProviderARNs,n):void 0,SupportedLoginProviders:void 0!==e.SupportedLoginProviders&&null!==e.SupportedLoginProviders?Cn(e.SupportedLoginProviders,n):void 0}},En=function(e,n){return{IdentityPoolId:void 0!==e.IdentityPoolId&&null!==e.IdentityPoolId?e.IdentityPoolId:void 0,IdentityPoolName:void 0!==e.IdentityPoolName&&null!==e.IdentityPoolName?e.IdentityPoolName:void 0}},zn=function(e,n){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:En(e,n)})},Pn=function(n,t){return Object.entries(n).reduce(function(n,t){var a,o=(0,e.__read)(t,2),i=o[0],s=o[1];return null===s?n:(0,e.__assign)((0,e.__assign)({},n),((a={})[i]=s,a))},{})},Cn=function(n,t){return Object.entries(n).reduce(function(n,t){var a,o=(0,e.__read)(t,2),i=o[0],s=o[1];return null===s?n:(0,e.__assign)((0,e.__assign)({},n),((a={})[i]=s,a))},{})},Rn=function(e,n){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},An=function(e,n){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},bn=function(e,n){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},hn=function(e,n){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},$n=function(e,n){return{Identities:void 0!==e.Identities&&null!==e.Identities?fn(e.Identities,n):void 0,IdentityPoolId:void 0!==e.IdentityPoolId&&null!==e.IdentityPoolId?e.IdentityPoolId:void 0,NextToken:void 0!==e.NextToken&&null!==e.NextToken?e.NextToken:void 0}},Nn=function(e,n){return{IdentityPools:void 0!==e.IdentityPools&&null!==e.IdentityPools?zn(e.IdentityPools,n):void 0,NextToken:void 0!==e.NextToken&&null!==e.NextToken?e.NextToken:void 0}},Tn=function(e,n){return{Tags:void 0!==e.Tags&&null!==e.Tags?Pn(e.Tags,n):void 0}},jn=function(e,n){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},Mn=function(e,n){return{DeveloperUserIdentifierList:void 0!==e.DeveloperUserIdentifierList&&null!==e.DeveloperUserIdentifierList?_n(e.DeveloperUserIdentifierList,n):void 0,IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0,NextToken:void 0!==e.NextToken&&null!==e.NextToken?e.NextToken:void 0}},Sn=function(e,n){return{Claim:void 0!==e.Claim&&null!==e.Claim?e.Claim:void 0,MatchType:void 0!==e.MatchType&&null!==e.MatchType?e.MatchType:void 0,RoleARN:void 0!==e.RoleARN&&null!==e.RoleARN?e.RoleARN:void 0,Value:void 0!==e.Value&&null!==e.Value?e.Value:void 0}},kn=function(e,n){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Sn(e,n)})},Dn=function(e,n){return{IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}},Un=function(e,n){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},On=function(e,n){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},Ln=function(e,n){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Fn=function(e,n){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},qn=function(e,n){return{AmbiguousRoleResolution:void 0!==e.AmbiguousRoleResolution&&null!==e.AmbiguousRoleResolution?e.AmbiguousRoleResolution:void 0,RulesConfiguration:void 0!==e.RulesConfiguration&&null!==e.RulesConfiguration?Wn(e.RulesConfiguration,n):void 0,Type:void 0!==e.Type&&null!==e.Type?e.Type:void 0}},Gn=function(n,t){return Object.entries(n).reduce(function(n,a){var o,i=(0,e.__read)(a,2),s=i[0],r=i[1];return null===r?n:(0,e.__assign)((0,e.__assign)({},n),((o={})[s]=qn(r,t),o))},{})},Jn=function(n,t){return Object.entries(n).reduce(function(n,t){var a,o=(0,e.__read)(t,2),i=o[0],s=o[1];return null===s?n:(0,e.__assign)((0,e.__assign)({},n),((a={})[i]=s,a))},{})},Wn=function(e,n){return{Rules:void 0!==e.Rules&&null!==e.Rules?kn(e.Rules,n):void 0}},Kn=function(e,n){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},Vn=function(e,n){return{}},Hn=function(e,n){return{message:void 0!==e.message&&null!==e.message?e.message:void 0}},Bn=function(e,n){return{ErrorCode:void 0!==e.ErrorCode&&null!==e.ErrorCode?e.ErrorCode:void 0,IdentityId:void 0!==e.IdentityId&&null!==e.IdentityId?e.IdentityId:void 0}},Qn=function(e,n){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Bn(e,n)})},Xn=function(e,n){return{}},Yn=function(e){var n;return{httpStatusCode:e.statusCode,requestId:null!==(n=e.headers["x-amzn-requestid"])&&void 0!==n?n:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Zn=function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)},et=function(e,n){return Zn(e,n).then(function(e){return n.utf8Encoder(e)})},nt=function(t,a,o,i,s){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,c,d,u,l,_;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,t.endpoint()];case 1:return r=e.sent(),c=r.hostname,d=r.protocol,u=void 0===d?"https":d,l=r.port,_={protocol:u,hostname:c,port:l,method:"POST",path:o,headers:a},void 0!==i&&(_.hostname=i),void 0!==s&&(_.body=s),[2,new n.HttpRequest(_)]}})})},tt=function(e,n){return et(e,n).then(function(e){return e.length?JSON.parse(e):{}})},at=function(e,n){var t,a,o=function(e){var n=e;return n.indexOf(":")>=0&&(n=n.split(":")[0]),n.indexOf("#")>=0&&(n=n.split("#")[1]),n},i=(t=e.headers,a="x-amzn-errortype",Object.keys(t).find(function(e){return e.toLowerCase()===a.toLowerCase()}));return void 0!==i?o(e.headers[i]):void 0!==n.code?o(n.code):void 0!==n.__type?o(n.__type):""};
},{"tslib":"CvJj","@aws-sdk/protocol-http":"V5Hv"}],"xBKN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deserializerMiddleware=void 0;var e=require("tslib"),r=function(r,t){return function(n,i){return function(i){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var s,o;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,n(i)];case 1:return s=e.sent().response,[4,t(s,r)];case 2:return o=e.sent(),[2,{response:s,output:o}]}})})}}};exports.deserializerMiddleware=r;
},{"tslib":"G5GG"}],"bHYB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.serializerMiddleware=void 0;var e=require("tslib"),r=function(r,t){return function(i,n){return function(n){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var s;return(0,e.__generator)(this,function(u){switch(u.label){case 0:return[4,t(n.input,r)];case 1:return s=u.sent(),[2,i((0,e.__assign)((0,e.__assign)({},n),{request:s}))]}})})}}};exports.serializerMiddleware=r;
},{"tslib":"G5GG"}],"NWAW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSerdePlugin=a,exports.serializerMiddlewareOption=exports.deserializerMiddlewareOption=void 0;var e=require("./deserializerMiddleware"),r=require("./serializerMiddleware"),i={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0};exports.deserializerMiddlewareOption=i;var d={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function a(a,l,s){return{applyToStack:function(t){t.add((0,e.deserializerMiddleware)(a,s),i),t.add((0,r.serializerMiddleware)(a,l),d)}}}exports.serializerMiddlewareOption=d;
},{"./deserializerMiddleware":"xBKN","./serializerMiddleware":"bHYB"}],"sz9p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./deserializerMiddleware");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./serializerMiddleware");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./serdePlugin");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});
},{"./deserializerMiddleware":"xBKN","./serializerMiddleware":"bHYB","./serdePlugin":"NWAW"}],"n3lX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CreateIdentityPoolCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_json1_1"),r=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/middleware-signing"),n=require("@aws-sdk/smithy-client"),s=function(n){function s(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,n),s.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,r.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.getAwsAuthPlugin)(i));var s=e.concat(this.middlewareStack),d={logger:i.logger,clientName:"CognitoIdentityClient",commandName:"CreateIdentityPoolCommand",inputFilterSensitiveLog:t.CreateIdentityPoolInput.filterSensitiveLog,outputFilterSensitiveLog:t.IdentityPool.filterSensitiveLog},l=i.requestHandler;return s.resolve(function(e){return l.handle(e.request,n||{})},d)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_json1_1CreateIdentityPoolCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_json1_1CreateIdentityPoolCommand)(e,t)},s}(n.Command);exports.CreateIdentityPoolCommand=s;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"y6bR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteIdentitiesCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_json1_1"),r=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/middleware-signing"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,r.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,s.getAwsAuthPlugin)(i));var o=e.concat(this.middlewareStack),d={logger:i.logger,clientName:"CognitoIdentityClient",commandName:"DeleteIdentitiesCommand",inputFilterSensitiveLog:t.DeleteIdentitiesInput.filterSensitiveLog,outputFilterSensitiveLog:t.DeleteIdentitiesResponse.filterSensitiveLog},l=i.requestHandler;return o.resolve(function(e){return l.handle(e.request,n||{})},d)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_json1_1DeleteIdentitiesCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_json1_1DeleteIdentitiesCommand)(e,t)},o}(n.Command);exports.DeleteIdentitiesCommand=o;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"rPAG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteIdentityPoolCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_json1_1"),r=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/middleware-signing"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,r.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,n.getAwsAuthPlugin)(i));var s=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"CognitoIdentityClient",commandName:"DeleteIdentityPoolCommand",inputFilterSensitiveLog:t.DeleteIdentityPoolInput.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},d=i.requestHandler;return s.resolve(function(e){return d.handle(e.request,o||{})},l)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_json1_1DeleteIdentityPoolCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_json1_1DeleteIdentityPoolCommand)(e,t)},s}(o.Command);exports.DeleteIdentityPoolCommand=s;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"ZNze":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DescribeIdentityCommand=void 0;var e=require("tslib"),i=require("../models/models_0"),t=require("../protocols/Aws_json1_1"),r=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/middleware-signing"),s=require("@aws-sdk/smithy-client"),o=function(s){function o(e){var i=s.call(this)||this;return i.input=e,i}return(0,e.__extends)(o,s),o.prototype.resolveMiddleware=function(e,t,s){this.middlewareStack.use((0,r.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,n.getAwsAuthPlugin)(t));var o=e.concat(this.middlewareStack),d={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"DescribeIdentityCommand",inputFilterSensitiveLog:i.DescribeIdentityInput.filterSensitiveLog,outputFilterSensitiveLog:i.IdentityDescription.filterSensitiveLog},a=t.requestHandler;return o.resolve(function(e){return a.handle(e.request,s||{})},d)},o.prototype.serialize=function(e,i){return(0,t.serializeAws_json1_1DescribeIdentityCommand)(e,i)},o.prototype.deserialize=function(e,i){return(0,t.deserializeAws_json1_1DescribeIdentityCommand)(e,i)},o}(s.Command);exports.DescribeIdentityCommand=o;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"sdpX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DescribeIdentityPoolCommand=void 0;var e=require("tslib"),i=require("../models/models_0"),t=require("../protocols/Aws_json1_1"),r=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/middleware-signing"),n=require("@aws-sdk/smithy-client"),s=function(n){function s(e){var i=n.call(this)||this;return i.input=e,i}return(0,e.__extends)(s,n),s.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use((0,r.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.getAwsAuthPlugin)(t));var s=e.concat(this.middlewareStack),d={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"DescribeIdentityPoolCommand",inputFilterSensitiveLog:i.DescribeIdentityPoolInput.filterSensitiveLog,outputFilterSensitiveLog:i.IdentityPool.filterSensitiveLog},l=t.requestHandler;return s.resolve(function(e){return l.handle(e.request,n||{})},d)},s.prototype.serialize=function(e,i){return(0,t.serializeAws_json1_1DescribeIdentityPoolCommand)(e,i)},s.prototype.deserialize=function(e,i){return(0,t.deserializeAws_json1_1DescribeIdentityPoolCommand)(e,i)},s}(n.Command);exports.DescribeIdentityPoolCommand=s;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"y1rk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetCredentialsForIdentityCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_json1_1"),r=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,r.getSerdePlugin)(i,this.serialize,this.deserialize));var o=e.concat(this.middlewareStack),s={logger:i.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:t.GetCredentialsForIdentityInput.filterSensitiveLog,outputFilterSensitiveLog:t.GetCredentialsForIdentityResponse.filterSensitiveLog},d=i.requestHandler;return o.resolve(function(e){return d.handle(e.request,n||{})},s)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_json1_1GetCredentialsForIdentityCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_json1_1GetCredentialsForIdentityCommand)(e,t)},o}(n.Command);exports.GetCredentialsForIdentityCommand=o;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"zsG8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetIdCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_json1_1"),r=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,r.getSerdePlugin)(i,this.serialize,this.deserialize));var o=e.concat(this.middlewareStack),s={logger:i.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:t.GetIdInput.filterSensitiveLog,outputFilterSensitiveLog:t.GetIdResponse.filterSensitiveLog},d=i.requestHandler;return o.resolve(function(e){return d.handle(e.request,n||{})},s)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_json1_1GetIdCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_json1_1GetIdCommand)(e,t)},o}(n.Command);exports.GetIdCommand=o;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"FuPy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetIdentityPoolRolesCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_json1_1"),o=require("@aws-sdk/middleware-serde"),r=require("@aws-sdk/middleware-signing"),s=require("@aws-sdk/smithy-client"),n=function(s){function n(e){var t=s.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,s),n.prototype.resolveMiddleware=function(e,i,s){this.middlewareStack.use((0,o.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getAwsAuthPlugin)(i));var n=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"CognitoIdentityClient",commandName:"GetIdentityPoolRolesCommand",inputFilterSensitiveLog:t.GetIdentityPoolRolesInput.filterSensitiveLog,outputFilterSensitiveLog:t.GetIdentityPoolRolesResponse.filterSensitiveLog},d=i.requestHandler;return n.resolve(function(e){return d.handle(e.request,s||{})},l)},n.prototype.serialize=function(e,t){return(0,i.serializeAws_json1_1GetIdentityPoolRolesCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,i.deserializeAws_json1_1GetIdentityPoolRolesCommand)(e,t)},n}(s.Command);exports.GetIdentityPoolRolesCommand=n;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"LZ7u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetOpenIdTokenCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),n=require("../protocols/Aws_json1_1"),i=require("@aws-sdk/middleware-serde"),r=require("@aws-sdk/smithy-client"),o=function(r){function o(e){var t=r.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,r),o.prototype.resolveMiddleware=function(e,n,r){this.middlewareStack.use((0,i.getSerdePlugin)(n,this.serialize,this.deserialize));var o=e.concat(this.middlewareStack),s={logger:n.logger,clientName:"CognitoIdentityClient",commandName:"GetOpenIdTokenCommand",inputFilterSensitiveLog:t.GetOpenIdTokenInput.filterSensitiveLog,outputFilterSensitiveLog:t.GetOpenIdTokenResponse.filterSensitiveLog},d=n.requestHandler;return o.resolve(function(e){return d.handle(e.request,r||{})},s)},o.prototype.serialize=function(e,t){return(0,n.serializeAws_json1_1GetOpenIdTokenCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,n.deserializeAws_json1_1GetOpenIdTokenCommand)(e,t)},o}(r.Command);exports.GetOpenIdTokenCommand=o;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"wkYh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetOpenIdTokenForDeveloperIdentityCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_json1_1"),i=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/middleware-signing"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,i.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,n.getAwsAuthPlugin)(r));var s=e.concat(this.middlewareStack),d={logger:r.logger,clientName:"CognitoIdentityClient",commandName:"GetOpenIdTokenForDeveloperIdentityCommand",inputFilterSensitiveLog:t.GetOpenIdTokenForDeveloperIdentityInput.filterSensitiveLog,outputFilterSensitiveLog:t.GetOpenIdTokenForDeveloperIdentityResponse.filterSensitiveLog},l=r.requestHandler;return s.resolve(function(e){return l.handle(e.request,o||{})},d)},s.prototype.serialize=function(e,t){return(0,r.serializeAws_json1_1GetOpenIdTokenForDeveloperIdentityCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,r.deserializeAws_json1_1GetOpenIdTokenForDeveloperIdentityCommand)(e,t)},s}(o.Command);exports.GetOpenIdTokenForDeveloperIdentityCommand=s;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"YJCe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListIdentitiesCommand=void 0;var e=require("tslib"),i=require("../models/models_0"),t=require("../protocols/Aws_json1_1"),s=require("@aws-sdk/middleware-serde"),r=require("@aws-sdk/middleware-signing"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var i=n.call(this)||this;return i.input=e,i}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use((0,s.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getAwsAuthPlugin)(t));var o=e.concat(this.middlewareStack),d={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"ListIdentitiesCommand",inputFilterSensitiveLog:i.ListIdentitiesInput.filterSensitiveLog,outputFilterSensitiveLog:i.ListIdentitiesResponse.filterSensitiveLog},a=t.requestHandler;return o.resolve(function(e){return a.handle(e.request,n||{})},d)},o.prototype.serialize=function(e,i){return(0,t.serializeAws_json1_1ListIdentitiesCommand)(e,i)},o.prototype.deserialize=function(e,i){return(0,t.deserializeAws_json1_1ListIdentitiesCommand)(e,i)},o}(n.Command);exports.ListIdentitiesCommand=o;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"gFYQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListIdentityPoolsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_json1_1"),s=require("@aws-sdk/middleware-serde"),r=require("@aws-sdk/middleware-signing"),o=require("@aws-sdk/smithy-client"),n=function(o){function n(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,o),n.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getAwsAuthPlugin)(i));var n=e.concat(this.middlewareStack),d={logger:i.logger,clientName:"CognitoIdentityClient",commandName:"ListIdentityPoolsCommand",inputFilterSensitiveLog:t.ListIdentityPoolsInput.filterSensitiveLog,outputFilterSensitiveLog:t.ListIdentityPoolsResponse.filterSensitiveLog},l=i.requestHandler;return n.resolve(function(e){return l.handle(e.request,o||{})},d)},n.prototype.serialize=function(e,t){return(0,i.serializeAws_json1_1ListIdentityPoolsCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,i.deserializeAws_json1_1ListIdentityPoolsCommand)(e,t)},n}(o.Command);exports.ListIdentityPoolsCommand=n;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"VPEy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListTagsForResourceCommand=void 0;var e=require("tslib"),r=require("../models/models_0"),s=require("../protocols/Aws_json1_1"),i=require("@aws-sdk/middleware-serde"),t=require("@aws-sdk/middleware-signing"),o=require("@aws-sdk/smithy-client"),n=function(o){function n(e){var r=o.call(this)||this;return r.input=e,r}return(0,e.__extends)(n,o),n.prototype.resolveMiddleware=function(e,s,o){this.middlewareStack.use((0,i.getSerdePlugin)(s,this.serialize,this.deserialize)),this.middlewareStack.use((0,t.getAwsAuthPlugin)(s));var n=e.concat(this.middlewareStack),a={logger:s.logger,clientName:"CognitoIdentityClient",commandName:"ListTagsForResourceCommand",inputFilterSensitiveLog:r.ListTagsForResourceInput.filterSensitiveLog,outputFilterSensitiveLog:r.ListTagsForResourceResponse.filterSensitiveLog},u=s.requestHandler;return n.resolve(function(e){return u.handle(e.request,o||{})},a)},n.prototype.serialize=function(e,r){return(0,s.serializeAws_json1_1ListTagsForResourceCommand)(e,r)},n.prototype.deserialize=function(e,r){return(0,s.deserializeAws_json1_1ListTagsForResourceCommand)(e,r)},n}(o.Command);exports.ListTagsForResourceCommand=n;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"xaCe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LookupDeveloperIdentityCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_json1_1"),r=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/middleware-signing"),n=require("@aws-sdk/smithy-client"),s=function(n){function s(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,n),s.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,r.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.getAwsAuthPlugin)(i));var s=e.concat(this.middlewareStack),d={logger:i.logger,clientName:"CognitoIdentityClient",commandName:"LookupDeveloperIdentityCommand",inputFilterSensitiveLog:t.LookupDeveloperIdentityInput.filterSensitiveLog,outputFilterSensitiveLog:t.LookupDeveloperIdentityResponse.filterSensitiveLog},l=i.requestHandler;return s.resolve(function(e){return l.handle(e.request,n||{})},d)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_json1_1LookupDeveloperIdentityCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_json1_1LookupDeveloperIdentityCommand)(e,t)},s}(n.Command);exports.LookupDeveloperIdentityCommand=s;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"Th1U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MergeDeveloperIdentitiesCommand=void 0;var e=require("tslib"),i=require("../models/models_0"),t=require("../protocols/Aws_json1_1"),r=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/middleware-signing"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var i=n.call(this)||this;return i.input=e,i}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use((0,r.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,s.getAwsAuthPlugin)(t));var o=e.concat(this.middlewareStack),d={logger:t.logger,clientName:"CognitoIdentityClient",commandName:"MergeDeveloperIdentitiesCommand",inputFilterSensitiveLog:i.MergeDeveloperIdentitiesInput.filterSensitiveLog,outputFilterSensitiveLog:i.MergeDeveloperIdentitiesResponse.filterSensitiveLog},l=t.requestHandler;return o.resolve(function(e){return l.handle(e.request,n||{})},d)},o.prototype.serialize=function(e,i){return(0,t.serializeAws_json1_1MergeDeveloperIdentitiesCommand)(e,i)},o.prototype.deserialize=function(e,i){return(0,t.deserializeAws_json1_1MergeDeveloperIdentitiesCommand)(e,i)},o}(n.Command);exports.MergeDeveloperIdentitiesCommand=o;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"DVh2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SetIdentityPoolRolesCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_json1_1"),o=require("@aws-sdk/middleware-serde"),r=require("@aws-sdk/middleware-signing"),n=require("@aws-sdk/smithy-client"),s=function(n){function s(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,n),s.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,o.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getAwsAuthPlugin)(i));var s=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"CognitoIdentityClient",commandName:"SetIdentityPoolRolesCommand",inputFilterSensitiveLog:t.SetIdentityPoolRolesInput.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},d=i.requestHandler;return s.resolve(function(e){return d.handle(e.request,n||{})},l)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_json1_1SetIdentityPoolRolesCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_json1_1SetIdentityPoolRolesCommand)(e,t)},s}(n.Command);exports.SetIdentityPoolRolesCommand=s;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"ygGN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TagResourceCommand=void 0;var e=require("tslib"),r=require("../models/models_0"),i=require("../protocols/Aws_json1_1"),t=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/middleware-signing"),o=require("@aws-sdk/smithy-client"),n=function(o){function n(e){var r=o.call(this)||this;return r.input=e,r}return(0,e.__extends)(n,o),n.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,t.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,s.getAwsAuthPlugin)(i));var n=e.concat(this.middlewareStack),a={logger:i.logger,clientName:"CognitoIdentityClient",commandName:"TagResourceCommand",inputFilterSensitiveLog:r.TagResourceInput.filterSensitiveLog,outputFilterSensitiveLog:r.TagResourceResponse.filterSensitiveLog},u=i.requestHandler;return n.resolve(function(e){return u.handle(e.request,o||{})},a)},n.prototype.serialize=function(e,r){return(0,i.serializeAws_json1_1TagResourceCommand)(e,r)},n.prototype.deserialize=function(e,r){return(0,i.deserializeAws_json1_1TagResourceCommand)(e,r)},n}(o.Command);exports.TagResourceCommand=n;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"c6Fs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnlinkDeveloperIdentityCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_json1_1"),n=require("@aws-sdk/middleware-serde"),r=require("@aws-sdk/middleware-signing"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getAwsAuthPlugin)(i));var s=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"CognitoIdentityClient",commandName:"UnlinkDeveloperIdentityCommand",inputFilterSensitiveLog:t.UnlinkDeveloperIdentityInput.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},d=i.requestHandler;return s.resolve(function(e){return d.handle(e.request,o||{})},l)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_json1_1UnlinkDeveloperIdentityCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_json1_1UnlinkDeveloperIdentityCommand)(e,t)},s}(o.Command);exports.UnlinkDeveloperIdentityCommand=s;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"uAQe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnlinkIdentityCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_json1_1"),n=require("@aws-sdk/middleware-serde"),r=require("@aws-sdk/smithy-client"),o=function(r){function o(e){var t=r.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,r),o.prototype.resolveMiddleware=function(e,i,r){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize));var o=e.concat(this.middlewareStack),s={logger:i.logger,clientName:"CognitoIdentityClient",commandName:"UnlinkIdentityCommand",inputFilterSensitiveLog:t.UnlinkIdentityInput.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},d=i.requestHandler;return o.resolve(function(e){return d.handle(e.request,r||{})},s)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_json1_1UnlinkIdentityCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_json1_1UnlinkIdentityCommand)(e,t)},o}(r.Command);exports.UnlinkIdentityCommand=o;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"jQ6C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UntagResourceCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_json1_1"),i=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/middleware-signing"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,r,n){this.middlewareStack.use((0,i.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,s.getAwsAuthPlugin)(r));var o=e.concat(this.middlewareStack),a={logger:r.logger,clientName:"CognitoIdentityClient",commandName:"UntagResourceCommand",inputFilterSensitiveLog:t.UntagResourceInput.filterSensitiveLog,outputFilterSensitiveLog:t.UntagResourceResponse.filterSensitiveLog},u=r.requestHandler;return o.resolve(function(e){return u.handle(e.request,n||{})},a)},o.prototype.serialize=function(e,t){return(0,r.serializeAws_json1_1UntagResourceCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,r.deserializeAws_json1_1UntagResourceCommand)(e,t)},o}(n.Command);exports.UntagResourceCommand=o;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"SpPV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UpdateIdentityPoolCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_json1_1"),r=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/middleware-signing"),n=require("@aws-sdk/smithy-client"),s=function(n){function s(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,n),s.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,r.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,o.getAwsAuthPlugin)(i));var s=e.concat(this.middlewareStack),d={logger:i.logger,clientName:"CognitoIdentityClient",commandName:"UpdateIdentityPoolCommand",inputFilterSensitiveLog:t.IdentityPool.filterSensitiveLog,outputFilterSensitiveLog:t.IdentityPool.filterSensitiveLog},l=i.requestHandler;return s.resolve(function(e){return l.handle(e.request,n||{})},d)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_json1_1UpdateIdentityPoolCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_json1_1UpdateIdentityPoolCommand)(e,t)},s}(n.Command);exports.UpdateIdentityPoolCommand=s;
},{"tslib":"CvJj","../models/models_0":"M1EB","../protocols/Aws_json1_1":"zBEK","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/smithy-client":"pooH"}],"vjwg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CognitoIdentity=void 0;var t=require("tslib"),e=require("./CognitoIdentityClient"),o=require("./commands/CreateIdentityPoolCommand"),n=require("./commands/DeleteIdentitiesCommand"),i=require("./commands/DeleteIdentityPoolCommand"),r=require("./commands/DescribeIdentityCommand"),s=require("./commands/DescribeIdentityPoolCommand"),p=require("./commands/GetCredentialsForIdentityCommand"),f=require("./commands/GetIdCommand"),d=require("./commands/GetIdentityPoolRolesCommand"),u=require("./commands/GetOpenIdTokenCommand"),y=require("./commands/GetOpenIdTokenForDeveloperIdentityCommand"),c=require("./commands/ListIdentitiesCommand"),m=require("./commands/ListIdentityPoolsCommand"),h=require("./commands/ListTagsForResourceCommand"),a=require("./commands/LookupDeveloperIdentityCommand"),l=require("./commands/MergeDeveloperIdentitiesCommand"),w=require("./commands/SetIdentityPoolRolesCommand"),I=require("./commands/TagResourceCommand"),C=require("./commands/UnlinkDeveloperIdentityCommand"),b=require("./commands/UnlinkIdentityCommand"),g=require("./commands/UntagResourceCommand"),E=require("./commands/UpdateIdentityPoolCommand"),v=function(e){function v(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(v,e),v.prototype.createIdentityPool=function(t,e,n){var i=new o.CreateIdentityPoolCommand(t);if("function"==typeof e)this.send(i,e);else{if("function"!=typeof n)return this.send(i,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(i,e||{},n)}},v.prototype.deleteIdentities=function(t,e,o){var i=new n.DeleteIdentitiesCommand(t);if("function"==typeof e)this.send(i,e);else{if("function"!=typeof o)return this.send(i,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(i,e||{},o)}},v.prototype.deleteIdentityPool=function(t,e,o){var n=new i.DeleteIdentityPoolCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.describeIdentity=function(t,e,o){var n=new r.DescribeIdentityCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.describeIdentityPool=function(t,e,o){var n=new s.DescribeIdentityPoolCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.getCredentialsForIdentity=function(t,e,o){var n=new p.GetCredentialsForIdentityCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.getId=function(t,e,o){var n=new f.GetIdCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.getIdentityPoolRoles=function(t,e,o){var n=new d.GetIdentityPoolRolesCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.getOpenIdToken=function(t,e,o){var n=new u.GetOpenIdTokenCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.getOpenIdTokenForDeveloperIdentity=function(t,e,o){var n=new y.GetOpenIdTokenForDeveloperIdentityCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.listIdentities=function(t,e,o){var n=new c.ListIdentitiesCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.listIdentityPools=function(t,e,o){var n=new m.ListIdentityPoolsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.listTagsForResource=function(t,e,o){var n=new h.ListTagsForResourceCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.lookupDeveloperIdentity=function(t,e,o){var n=new a.LookupDeveloperIdentityCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.mergeDeveloperIdentities=function(t,e,o){var n=new l.MergeDeveloperIdentitiesCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.setIdentityPoolRoles=function(t,e,o){var n=new w.SetIdentityPoolRolesCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.tagResource=function(t,e,o){var n=new I.TagResourceCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.unlinkDeveloperIdentity=function(t,e,o){var n=new C.UnlinkDeveloperIdentityCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.unlinkIdentity=function(t,e,o){var n=new b.UnlinkIdentityCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.untagResource=function(t,e,o){var n=new g.UntagResourceCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v.prototype.updateIdentityPool=function(t,e,o){var n=new E.UpdateIdentityPoolCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},v}(e.CognitoIdentityClient);exports.CognitoIdentity=v;
},{"tslib":"CvJj","./CognitoIdentityClient":"SKFp","./commands/CreateIdentityPoolCommand":"n3lX","./commands/DeleteIdentitiesCommand":"y6bR","./commands/DeleteIdentityPoolCommand":"rPAG","./commands/DescribeIdentityCommand":"ZNze","./commands/DescribeIdentityPoolCommand":"sdpX","./commands/GetCredentialsForIdentityCommand":"y1rk","./commands/GetIdCommand":"zsG8","./commands/GetIdentityPoolRolesCommand":"FuPy","./commands/GetOpenIdTokenCommand":"LZ7u","./commands/GetOpenIdTokenForDeveloperIdentityCommand":"wkYh","./commands/ListIdentitiesCommand":"YJCe","./commands/ListIdentityPoolsCommand":"gFYQ","./commands/ListTagsForResourceCommand":"VPEy","./commands/LookupDeveloperIdentityCommand":"xaCe","./commands/MergeDeveloperIdentitiesCommand":"Th1U","./commands/SetIdentityPoolRolesCommand":"DVh2","./commands/TagResourceCommand":"ygGN","./commands/UnlinkDeveloperIdentityCommand":"c6Fs","./commands/UnlinkIdentityCommand":"uAQe","./commands/UntagResourceCommand":"jQ6C","./commands/UpdateIdentityPoolCommand":"SpPV"}],"x3Ox":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.paginateListIdentityPools=o;var e=require("tslib"),t=require("../CognitoIdentity"),n=require("../CognitoIdentityClient"),r=require("../commands/ListIdentityPoolsCommand"),i=function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];return(0,e.__awaiter)(void 0,void 0,void 0,function(){return(0,e.__generator)(this,function(a){switch(a.label){case 0:return[4,t.send.apply(t,(0,e.__spread)([new r.ListIdentityPoolsCommand(n)],i))];case 1:return[2,a.sent()]}})})},a=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return(0,e.__awaiter)(void 0,void 0,void 0,function(){return(0,e.__generator)(this,function(i){switch(i.label){case 0:return[4,t.listIdentityPools.apply(t,(0,e.__spread)([n],r))];case 1:return[2,i.sent()]}})})};function o(r,o){for(var s=[],c=2;c<arguments.length;c++)s[c-2]=arguments[c];return(0,e.__asyncGenerator)(this,arguments,function(){var c,u,l;return(0,e.__generator)(this,function(d){switch(d.label){case 0:c=r.startingToken||void 0,u=!0,d.label=1;case 1:return u?(o.NextToken=c,o.MaxResults=r.pageSize,r.client instanceof t.CognitoIdentity?[4,(0,e.__await)(a.apply(void 0,(0,e.__spread)([r.client,o],s)))]:[3,3]):[3,9];case 2:return l=d.sent(),[3,6];case 3:return r.client instanceof n.CognitoIdentityClient?[4,(0,e.__await)(i.apply(void 0,(0,e.__spread)([r.client,o],s)))]:[3,5];case 4:return l=d.sent(),[3,6];case 5:throw new Error("Invalid client, expected CognitoIdentity | CognitoIdentityClient");case 6:return[4,(0,e.__await)(l)];case 7:return[4,d.sent()];case 8:return d.sent(),c=l.NextToken,u=!!c,[3,1];case 9:return[4,(0,e.__await)(void 0)];case 10:return[2,d.sent()]}})})}
},{"tslib":"CvJj","../CognitoIdentity":"vjwg","../CognitoIdentityClient":"SKFp","../commands/ListIdentityPoolsCommand":"gFYQ"}],"c4RP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./models_0");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});
},{"./models_0":"M1EB"}],"crYF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./CognitoIdentityClient");Object.keys(e).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})});var t=require("./CognitoIdentity");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var r=require("./commands/CreateIdentityPoolCommand");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var n=require("./commands/DeleteIdentitiesCommand");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var o=require("./commands/DeleteIdentityPoolCommand");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var u=require("./commands/DescribeIdentityCommand");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var a=require("./commands/DescribeIdentityPoolCommand");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}})});var c=require("./commands/GetCredentialsForIdentityCommand");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}})});var d=require("./commands/GetIdCommand");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}})});var i=require("./commands/GetIdentityPoolRolesCommand");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})});var f=require("./commands/GetOpenIdTokenCommand");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}})});var s=require("./commands/GetOpenIdTokenForDeveloperIdentityCommand");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}})});var m=require("./commands/ListIdentitiesCommand");Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return m[e]}})});var l=require("./commands/ListIdentityPoolsCommand");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}})});var b=require("./pagination/ListIdentityPoolsPaginator");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}})});var y=require("./commands/ListTagsForResourceCommand");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return y[e]}})});var p=require("./commands/LookupDeveloperIdentityCommand");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}})});var O=require("./commands/MergeDeveloperIdentitiesCommand");Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return O[e]}})});var _=require("./commands/SetIdentityPoolRolesCommand");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _[e]}})});var j=require("./commands/TagResourceCommand");Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return j[e]}})});var P=require("./commands/UnlinkDeveloperIdentityCommand");Object.keys(P).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return P[e]}})});var g=require("./commands/UnlinkIdentityCommand");Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return g[e]}})});var k=require("./commands/UntagResourceCommand");Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return k[e]}})});var v=require("./commands/UpdateIdentityPoolCommand");Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return v[e]}})});var x=require("./pagination/Interfaces");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return x[e]}})});var M=require("./models/index");Object.keys(M).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return M[e]}})});
},{"./CognitoIdentityClient":"SKFp","./CognitoIdentity":"vjwg","./commands/CreateIdentityPoolCommand":"n3lX","./commands/DeleteIdentitiesCommand":"y6bR","./commands/DeleteIdentityPoolCommand":"rPAG","./commands/DescribeIdentityCommand":"ZNze","./commands/DescribeIdentityPoolCommand":"sdpX","./commands/GetCredentialsForIdentityCommand":"y1rk","./commands/GetIdCommand":"zsG8","./commands/GetIdentityPoolRolesCommand":"FuPy","./commands/GetOpenIdTokenCommand":"LZ7u","./commands/GetOpenIdTokenForDeveloperIdentityCommand":"wkYh","./commands/ListIdentitiesCommand":"YJCe","./commands/ListIdentityPoolsCommand":"gFYQ","./pagination/ListIdentityPoolsPaginator":"x3Ox","./commands/ListTagsForResourceCommand":"VPEy","./commands/LookupDeveloperIdentityCommand":"xaCe","./commands/MergeDeveloperIdentitiesCommand":"Th1U","./commands/SetIdentityPoolRolesCommand":"DVh2","./commands/TagResourceCommand":"ygGN","./commands/UnlinkDeveloperIdentityCommand":"c6Fs","./commands/UnlinkIdentityCommand":"uAQe","./commands/UntagResourceCommand":"jQ6C","./commands/UpdateIdentityPoolCommand":"SpPV","./pagination/Interfaces":"YyWV","./models/index":"c4RP"}],"ViSY":[function(require,module,exports) {
module.exports={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.7.0",scripts:{clean:"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./",prepublishOnly:"yarn build",pretest:"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js","test:e2e":"mocha **/cjs/**/*.ispec.js && karma start karma.conf.js",test:"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json",build:"yarn build:cjs && yarn build:es",postbuild:"downlevel-dts types types/ts3.4"},main:"./dist/cjs/index.js",types:"./types/index.d.ts",module:"./dist/es/index.js",browser:{"./runtimeConfig":"./runtimeConfig.browser"},"react-native":{"./runtimeConfig":"./runtimeConfig.native"},sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.7.0","@aws-sdk/credential-provider-node":"3.7.0","@aws-sdk/eventstream-serde-browser":"3.6.1","@aws-sdk/eventstream-serde-config-resolver":"3.6.1","@aws-sdk/eventstream-serde-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-blob-browser":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/hash-stream-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/md5-js":"3.6.1","@aws-sdk/middleware-apply-body-checksum":"3.6.1","@aws-sdk/middleware-bucket-endpoint":"3.7.0","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-expect-continue":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-location-constraint":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.7.0","@aws-sdk/middleware-sdk-s3":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-ssec":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.7.0","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.7.0","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","@aws-sdk/util-waiter":"3.6.1","@aws-sdk/xml-builder":"3.6.1","fast-xml-parser":"^3.16.0",tslib:"^2.0.0"},devDependencies:{"@aws-sdk/client-documentation-generator":"3.6.1","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","downlevel-dts":"0.7.0",jest:"^26.1.0",rimraf:"^3.0.0",typedoc:"^0.19.2",typescript:"~4.1.2"},engines:{node:">=10.0.0"},typesVersions:{"<4.0":{"types/*":["types/ts3.4/*"]}},author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};
},{}],"R0L5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Crc32=exports.crc32=void 0;var r=require("tslib");function e(r){return(new t).update(r).digest()}exports.crc32=e;var t=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,n;try{for(var o=r.__values(e),s=o.next();!s.done;s=o.next()){var u=s.value;this.checksum=this.checksum>>>8^c[255&(this.checksum^u)]}}catch(i){t={error:i}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();exports.Crc32=t;var c=Uint32Array.from([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);
},{"tslib":"G5GG"}],"RqZ4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Int64=void 0;var t=require("@aws-sdk/util-hex-encoding"),r=function(){function r(t){if(this.bytes=t,8!==t.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return r.fromNumber=function(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var n=new Uint8Array(8),o=7,i=Math.abs(Math.round(t));o>-1&&i>0;o--,i/=256)n[o]=i;return t<0&&e(n),new r(n)},r.prototype.valueOf=function(){var r=this.bytes.slice(0),n=128&r[0];return n&&e(r),parseInt((0,t.toHex)(r),16)*(n?-1:1)},r.prototype.toString=function(){return String(this.valueOf())},r}();function e(t){for(var r=0;r<8;r++)t[r]^=255;for(r=7;r>-1&&(t[r]++,0===t[r]);r--);}exports.Int64=r;
},{"@aws-sdk/util-hex-encoding":"S3iC"}],"YLcA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HeaderMarshaller=void 0;var e,r=require("tslib"),t=require("@aws-sdk/util-hex-encoding"),a=require("./Int64"),n=function(){function e(e,r){this.toUtf8=e,this.fromUtf8=r}return e.prototype.format=function(e){var t,a,n,u,s=[];try{for(var i=(0,r.__values)(Object.keys(e)),f=i.next();!f.done;f=i.next()){var o=f.value,y=this.fromUtf8(o);s.push(Uint8Array.from([y.byteLength]),y,this.formatHeaderValue(e[o]))}}catch(U){t={error:U}}finally{try{f&&!f.done&&(a=i.return)&&a.call(i)}finally{if(t)throw t.error}}var l=new Uint8Array(s.reduce(function(e,r){return e+r.byteLength},0)),b=0;try{for(var v=(0,r.__values)(s),c=v.next();!c.done;c=v.next()){var w=c.value;l.set(w,b),b+=w.byteLength}}catch(h){n={error:h}}finally{try{c&&!c.done&&(u=v.return)&&u.call(v)}finally{if(n)throw n.error}}return l},e.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":var u=new Uint8Array(9);return u[0]=5,u.set(e.value.bytes,1),u;case"binary":var s=new DataView(new ArrayBuffer(3+e.value.byteLength));s.setUint8(0,6),s.setUint16(1,e.value.byteLength,!1);var i=new Uint8Array(s.buffer);return i.set(e.value,3),i;case"string":var f=this.fromUtf8(e.value),o=new DataView(new ArrayBuffer(3+f.byteLength));o.setUint8(0,7),o.setUint16(1,f.byteLength,!1);var y=new Uint8Array(o.buffer);return y.set(f,3),y;case"timestamp":var l=new Uint8Array(9);return l[0]=8,l.set(a.Int64.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!c.test(e.value))throw new Error("Invalid UUID received: "+e.value);var b=new Uint8Array(17);return b[0]=9,b.set((0,t.fromHex)(e.value.replace(/\-/g,"")),1),b}},e.prototype.parse=function(e){for(var r={},n=0;n<e.byteLength;){var c=e.getUint8(n++),w=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,c));switch(n+=c,e.getUint8(n++)){case 0:r[w]={type:u,value:!0};break;case 1:r[w]={type:u,value:!1};break;case 2:r[w]={type:s,value:e.getInt8(n++)};break;case 3:r[w]={type:i,value:e.getInt16(n,!1)},n+=2;break;case 4:r[w]={type:f,value:e.getInt32(n,!1)},n+=4;break;case 5:r[w]={type:o,value:new a.Int64(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var U=e.getUint16(n,!1);n+=2,r[w]={type:y,value:new Uint8Array(e.buffer,e.byteOffset+n,U)},n+=U;break;case 7:var h=e.getUint16(n,!1);n+=2,r[w]={type:l,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,h))},n+=h;break;case 8:r[w]={type:b,value:new Date(new a.Int64(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:var g=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,r[w]={type:v,value:(0,t.toHex)(g.subarray(0,4))+"-"+(0,t.toHex)(g.subarray(4,6))+"-"+(0,t.toHex)(g.subarray(6,8))+"-"+(0,t.toHex)(g.subarray(8,10))+"-"+(0,t.toHex)(g.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return r},e}();exports.HeaderMarshaller=n,function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(e||(e={}));var u="boolean",s="byte",i="short",f="integer",o="long",y="binary",l="string",b="timestamp",v="uuid",c=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;
},{"tslib":"G5GG","@aws-sdk/util-hex-encoding":"S3iC","./Int64":"RqZ4"}],"tf1Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitMessage=o;var e=require("@aws-crypto/crc32"),t=4,r=2*t,s=4,a=r+2*s;function o(o){var n=o.byteLength,i=o.byteOffset,d=o.buffer;if(n<a)throw new Error("Provided message too short to accommodate event stream message overhead");var c=new DataView(d,i,n),h=c.getUint32(0,!1);if(n!==h)throw new Error("Reported message length does not match received message length");var g=c.getUint32(t,!1),w=c.getUint32(r,!1),m=c.getUint32(n-s,!1),u=(new e.Crc32).update(new Uint8Array(d,i,r));if(w!==u.digest())throw new Error("The prelude checksum specified in the message ("+w+") does not match the calculated CRC32 checksum ("+u.digest()+")");if(u.update(new Uint8Array(d,i+r,n-(r+s))),m!==u.digest())throw new Error("The message checksum ("+u.digest()+") did not match the expected value of "+m);return{headers:new DataView(d,i+r+s,g),body:new Uint8Array(d,i+r+s+g,h-g-(r+s+s))}}
},{"@aws-crypto/crc32":"R0L5"}],"eViY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventStreamMarshaller=void 0;var e=require("@aws-crypto/crc32"),r=require("./HeaderMarshaller"),t=require("./splitMessage"),a=function(){function a(e,t){this.headerMarshaller=new r.HeaderMarshaller(e,t)}return a.prototype.marshall=function(r){var t=r.headers,a=r.body,s=this.headerMarshaller.format(t),n=s.byteLength+a.byteLength+16,h=new Uint8Array(n),i=new DataView(h.buffer,h.byteOffset,h.byteLength),l=new e.Crc32;return i.setUint32(0,n,!1),i.setUint32(4,s.byteLength,!1),i.setUint32(8,l.update(h.subarray(0,8)).digest(),!1),h.set(s,12),h.set(a,s.byteLength+12),i.setUint32(n-4,l.update(h.subarray(8,n-4)).digest(),!1),h},a.prototype.unmarshall=function(e){var r=(0,t.splitMessage)(e),a=r.headers,s=r.body;return{headers:this.headerMarshaller.parse(a),body:s}},a.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},a}();exports.EventStreamMarshaller=a;
},{"@aws-crypto/crc32":"R0L5","./HeaderMarshaller":"YLcA","./splitMessage":"tf1Z"}],"xdDa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./EventStreamMarshaller");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./Int64");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./Message");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});
},{"./EventStreamMarshaller":"eViY","./Int64":"RqZ4","./Message":"YyWV"}],"W0YB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChunkedStream=t;var e=require("tslib");function t(t){var r,n=0,a=0,s=null,u=null;return(r={})[Symbol.asyncIterator]=function(){return(0,e.__asyncGenerator)(this,arguments,function(){var r,i,c,l,o,w,_,f;return(0,e.__generator)(this,function(b){switch(b.label){case 0:r=t[Symbol.asyncIterator](),b.label=1;case 1:return[4,(0,e.__await)(r.next())];case 2:return i=b.sent(),c=i.value,i.done?n?[3,4]:[4,(0,e.__await)(void 0)]:[3,10];case 3:return[2,b.sent()];case 4:return n!==a?[3,7]:[4,(0,e.__await)(s)];case 5:return[4,b.sent()];case 6:return b.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,(0,e.__await)(void 0)];case 9:return[2,b.sent()];case 10:l=c.length,o=0,b.label=11;case 11:if(!(o<l))return[3,15];if(!s){if(w=l-o,u||(u=new Uint8Array(4)),_=Math.min(4-a,w),u.set(c.slice(o,o+_),a),o+=_,(a+=_)<4)return[3,15];!function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);n=e,a=4,s=new Uint8Array(e),new DataView(s.buffer).setUint32(0,e,!1)}(new DataView(u.buffer).getUint32(0,!1)),u=null}return f=Math.min(n-a,l-o),s.set(c.slice(o,o+f),a),a+=f,o+=f,n&&n===a?[4,(0,e.__await)(s)]:[3,14];case 12:return[4,b.sent()];case 13:b.sent(),s=null,n=0,a=0,b.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},r}
},{"tslib":"G5GG"}],"zMMT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUnmarshalledStream=r;var e=require("tslib");function r(r,t){var a;return(a={})[Symbol.asyncIterator]=function(){return(0,e.__asyncGenerator)(this,arguments,function(){var a,n,s,u,o,c,l,i,h,_,v,w,d,y,p,f,b;return(0,e.__generator)(this,function(m){switch(m.label){case 0:m.trys.push([0,12,13,18]),a=(0,e.__asyncValues)(r),m.label=1;case 1:return[4,(0,e.__await)(a.next())];case 2:if((n=m.sent()).done)return[3,11];if(s=n.value,u=t.eventMarshaller.unmarshall(s),"error"!==(o=u.headers[":message-type"].value))return[3,3];throw(c=new Error(u.headers[":error-message"].value||"UnknownError")).name=u.headers[":error-code"].value,c;case 3:return"exception"!==o?[3,5]:(l=u.headers[":exception-type"].value,(y={})[l]=u,i=y,[4,(0,e.__await)(t.deserializer(i))]);case 4:if((h=m.sent()).$unknown)throw(_=new Error(t.toUtf8(u.body))).name=l,_;throw h[l];case 5:return"event"!==o?[3,9]:((p={})[u.headers[":event-type"].value]=u,v=p,[4,(0,e.__await)(t.deserializer(v))]);case 6:return(w=m.sent()).$unknown?[3,10]:[4,(0,e.__await)(w)];case 7:return[4,m.sent()];case 8:return m.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+u.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return d=m.sent(),f={error:d},[3,18];case 13:return m.trys.push([13,,16,17]),n&&!n.done&&(b=a.return)?[4,(0,e.__await)(b.call(a))]:[3,15];case 14:m.sent(),m.label=15;case 15:return[3,17];case 16:if(f)throw f.error;return[7];case 17:return[7];case 18:return[2]}})})},a}
},{"tslib":"G5GG"}],"S9wn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventStreamMarshaller=void 0;var e=require("tslib"),r=require("@aws-sdk/eventstream-marshaller"),t=require("./getChunkedStream"),a=require("./getUnmarshalledStream"),n=function(){function n(e){var t=e.utf8Encoder,a=e.utf8Decoder;this.eventMarshaller=new r.EventStreamMarshaller(t,a),this.utfEncoder=t}return n.prototype.deserialize=function(e,r){var n=(0,t.getChunkedStream)(e);return(0,a.getUnmarshalledStream)(n,{eventMarshaller:this.eventMarshaller,deserializer:r,toUtf8:this.utfEncoder})},n.prototype.serialize=function(r,t){var a,n=this;return(a={})[Symbol.asyncIterator]=function(){return(0,e.__asyncGenerator)(this,arguments,function(){var a,s,u,l,i,c,o;return(0,e.__generator)(this,function(h){switch(h.label){case 0:h.trys.push([0,7,8,13]),a=(0,e.__asyncValues)(r),h.label=1;case 1:return[4,(0,e.__await)(a.next())];case 2:return(s=h.sent()).done?[3,6]:(u=s.value,l=n.eventMarshaller.marshall(t(u)),[4,(0,e.__await)(l)]);case 3:return[4,h.sent()];case 4:h.sent(),h.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return i=h.sent(),c={error:i},[3,13];case 8:return h.trys.push([8,,11,12]),s&&!s.done&&(o=a.return)?[4,(0,e.__await)(o.call(a))]:[3,10];case 9:h.sent(),h.label=10;case 10:return[3,12];case 11:if(c)throw c.error;return[7];case 12:return[7];case 13:return[4,(0,e.__await)(new Uint8Array(0))];case 14:return[4,h.sent()];case 15:return h.sent(),[2]}})})},a},n}();exports.EventStreamMarshaller=n;
},{"tslib":"G5GG","@aws-sdk/eventstream-marshaller":"xdDa","./getChunkedStream":"W0YB","./getUnmarshalledStream":"zMMT"}],"otWM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eventStreamSerdeProvider=void 0;var e=require("./EventStreamMarshaller"),r=function(r){return new e.EventStreamMarshaller(r)};exports.eventStreamSerdeProvider=r;
},{"./EventStreamMarshaller":"S9wn"}],"ay9X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./provider");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./EventStreamMarshaller");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});
},{"./provider":"otWM","./EventStreamMarshaller":"S9wn"}],"okPV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.iterableToReadableStream=exports.readableStreamtoIterable=void 0;var e=require("tslib"),r=function(r){var t;return(t={})[Symbol.asyncIterator]=function(){return(0,e.__asyncGenerator)(this,arguments,function(){var t,a,n,s;return(0,e.__generator)(this,function(u){switch(u.label){case 0:t=r.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,(0,e.__await)(t.read())];case 3:return a=u.sent(),n=a.done,s=a.value,n?[4,(0,e.__await)(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,(0,e.__await)(s)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})},t};exports.readableStreamtoIterable=r;var t=function(r){var t=r[Symbol.asyncIterator]();return new ReadableStream({pull:function(r){return(0,e.__awaiter)(this,void 0,void 0,function(){var a,n,s;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,t.next()];case 1:return a=e.sent(),n=a.done,s=a.value,n?[2,r.close()]:(r.enqueue(s),[2])}})})}})};exports.iterableToReadableStream=t;
},{"tslib":"G5GG"}],"sg4A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventStreamMarshaller=void 0;var e=require("@aws-sdk/eventstream-marshaller"),r=require("@aws-sdk/eventstream-serde-universal"),a=require("./utils"),t=function(){function t(a){var t=a.utf8Encoder,l=a.utf8Decoder;this.eventMarshaller=new e.EventStreamMarshaller(t,l),this.universalMarshaller=new r.EventStreamMarshaller({utf8Decoder:l,utf8Encoder:t})}return t.prototype.deserialize=function(e,r){var t=l(e)?(0,a.readableStreamtoIterable)(e):e;return this.universalMarshaller.deserialize(t,r)},t.prototype.serialize=function(e,r){var t=this.universalMarshaller.serialize(e,r);return"function"==typeof ReadableStream?(0,a.iterableToReadableStream)(t):t},t}();exports.EventStreamMarshaller=t;var l=function(e){return"function"==typeof ReadableStream&&e instanceof ReadableStream};
},{"@aws-sdk/eventstream-marshaller":"xdDa","@aws-sdk/eventstream-serde-universal":"ay9X","./utils":"okPV"}],"Gf6p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eventStreamSerdeProvider=void 0;var e=require("./EventStreamMarshaller"),r=function(r){return new e.EventStreamMarshaller(r)};exports.eventStreamSerdeProvider=r;
},{"./EventStreamMarshaller":"sg4A"}],"S6nY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./provider");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./EventStreamMarshaller");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./utils");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});
},{"./provider":"Gf6p","./EventStreamMarshaller":"sg4A","./utils":"okPV"}],"sEDH":[function(require,module,exports) {
"use strict";function e(e,r,t){return void 0===t&&(t=1048576),new Promise(function(n,a){var i=new FileReader;i.addEventListener("error",a),i.addEventListener("abort",a);var o=e.size,d=0;function s(){d>=o?n():i.readAsArrayBuffer(e.slice(d,Math.min(o,d+t)))}i.addEventListener("load",function(e){var t=e.target.result;r(new Uint8Array(t)),d+=t.byteLength,s()}),s()})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.blobReader=e;
},{}],"Hq7A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.blobHasher=void 0;var e=require("tslib"),r=require("@aws-sdk/chunked-blob-reader"),t=function(t,s){return(0,e.__awaiter)(this,void 0,void 0,function(){var i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return i=new t,[4,(0,r.blobReader)(s,function(e){i.update(e)})];case 1:return e.sent(),[2,i.digest()]}})})};exports.blobHasher=t;
},{"tslib":"G5GG","@aws-sdk/chunked-blob-reader":"sEDH"}],"NDuC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.INIT=exports.DIGEST_LENGTH=exports.BLOCK_SIZE=void 0;var e=64;exports.BLOCK_SIZE=e;var r=16;exports.DIGEST_LENGTH=r;var t=[1732584193,4023233417,2562383102,271733878];exports.INIT=t;
},{}],"Nq62":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Md5=void 0;var t=require("tslib"),e=require("@aws-sdk/util-utf8-browser"),n=require("./constants"),i=function(){function e(){this.state=Uint32Array.from(n.INIT),this.buffer=new DataView(new ArrayBuffer(n.BLOCK_SIZE)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(!h(t)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var e=u(t),i=0,r=e.byteLength;for(this.bytesHashed+=r;r>0;)this.buffer.setUint8(this.bufferLength++,e[i++]),r--,this.bufferLength===n.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)}},e.prototype.digest=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){var e,i,r,f,g,U,s;return(0,t.__generator)(this,function(t){if(!this.finished){if(i=(e=this).buffer,r=e.bufferLength,f=e.bytesHashed,g=8*f,i.setUint8(this.bufferLength++,128),r%n.BLOCK_SIZE>=n.BLOCK_SIZE-8){for(s=this.bufferLength;s<n.BLOCK_SIZE;s++)i.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(s=this.bufferLength;s<n.BLOCK_SIZE-8;s++)i.setUint8(s,0);i.setUint32(n.BLOCK_SIZE-8,g>>>0,!0),i.setUint32(n.BLOCK_SIZE-4,Math.floor(g/4294967296),!0),this.hashBuffer(),this.finished=!0}for(U=new DataView(new ArrayBuffer(n.DIGEST_LENGTH)),s=0;s<4;s++)U.setUint32(4*s,this.state[s],!0);return[2,new Uint8Array(U.buffer,U.byteOffset,U.byteLength)]})})},e.prototype.hashBuffer=function(){var t=this.buffer,e=this.state,n=e[0],i=e[1],r=e[2],h=e[3];n=f(n,i,r,h,t.getUint32(0,!0),7,3614090360),h=f(h,n,i,r,t.getUint32(4,!0),12,3905402710),r=f(r,h,n,i,t.getUint32(8,!0),17,606105819),i=f(i,r,h,n,t.getUint32(12,!0),22,3250441966),n=f(n,i,r,h,t.getUint32(16,!0),7,4118548399),h=f(h,n,i,r,t.getUint32(20,!0),12,1200080426),r=f(r,h,n,i,t.getUint32(24,!0),17,2821735955),i=f(i,r,h,n,t.getUint32(28,!0),22,4249261313),n=f(n,i,r,h,t.getUint32(32,!0),7,1770035416),h=f(h,n,i,r,t.getUint32(36,!0),12,2336552879),r=f(r,h,n,i,t.getUint32(40,!0),17,4294925233),i=f(i,r,h,n,t.getUint32(44,!0),22,2304563134),n=f(n,i,r,h,t.getUint32(48,!0),7,1804603682),h=f(h,n,i,r,t.getUint32(52,!0),12,4254626195),r=f(r,h,n,i,t.getUint32(56,!0),17,2792965006),n=g(n,i=f(i,r,h,n,t.getUint32(60,!0),22,1236535329),r,h,t.getUint32(4,!0),5,4129170786),h=g(h,n,i,r,t.getUint32(24,!0),9,3225465664),r=g(r,h,n,i,t.getUint32(44,!0),14,643717713),i=g(i,r,h,n,t.getUint32(0,!0),20,3921069994),n=g(n,i,r,h,t.getUint32(20,!0),5,3593408605),h=g(h,n,i,r,t.getUint32(40,!0),9,38016083),r=g(r,h,n,i,t.getUint32(60,!0),14,3634488961),i=g(i,r,h,n,t.getUint32(16,!0),20,3889429448),n=g(n,i,r,h,t.getUint32(36,!0),5,568446438),h=g(h,n,i,r,t.getUint32(56,!0),9,3275163606),r=g(r,h,n,i,t.getUint32(12,!0),14,4107603335),i=g(i,r,h,n,t.getUint32(32,!0),20,1163531501),n=g(n,i,r,h,t.getUint32(52,!0),5,2850285829),h=g(h,n,i,r,t.getUint32(8,!0),9,4243563512),r=g(r,h,n,i,t.getUint32(28,!0),14,1735328473),n=U(n,i=g(i,r,h,n,t.getUint32(48,!0),20,2368359562),r,h,t.getUint32(20,!0),4,4294588738),h=U(h,n,i,r,t.getUint32(32,!0),11,2272392833),r=U(r,h,n,i,t.getUint32(44,!0),16,1839030562),i=U(i,r,h,n,t.getUint32(56,!0),23,4259657740),n=U(n,i,r,h,t.getUint32(4,!0),4,2763975236),h=U(h,n,i,r,t.getUint32(16,!0),11,1272893353),r=U(r,h,n,i,t.getUint32(28,!0),16,4139469664),i=U(i,r,h,n,t.getUint32(40,!0),23,3200236656),n=U(n,i,r,h,t.getUint32(52,!0),4,681279174),h=U(h,n,i,r,t.getUint32(0,!0),11,3936430074),r=U(r,h,n,i,t.getUint32(12,!0),16,3572445317),i=U(i,r,h,n,t.getUint32(24,!0),23,76029189),n=U(n,i,r,h,t.getUint32(36,!0),4,3654602809),h=U(h,n,i,r,t.getUint32(48,!0),11,3873151461),r=U(r,h,n,i,t.getUint32(60,!0),16,530742520),n=s(n,i=U(i,r,h,n,t.getUint32(8,!0),23,3299628645),r,h,t.getUint32(0,!0),6,4096336452),h=s(h,n,i,r,t.getUint32(28,!0),10,1126891415),r=s(r,h,n,i,t.getUint32(56,!0),15,2878612391),i=s(i,r,h,n,t.getUint32(20,!0),21,4237533241),n=s(n,i,r,h,t.getUint32(48,!0),6,1700485571),h=s(h,n,i,r,t.getUint32(12,!0),10,2399980690),r=s(r,h,n,i,t.getUint32(40,!0),15,4293915773),i=s(i,r,h,n,t.getUint32(4,!0),21,2240044497),n=s(n,i,r,h,t.getUint32(32,!0),6,1873313359),h=s(h,n,i,r,t.getUint32(60,!0),10,4264355552),r=s(r,h,n,i,t.getUint32(24,!0),15,2734768916),i=s(i,r,h,n,t.getUint32(52,!0),21,1309151649),n=s(n,i,r,h,t.getUint32(16,!0),6,4149444226),h=s(h,n,i,r,t.getUint32(44,!0),10,3174756917),r=s(r,h,n,i,t.getUint32(8,!0),15,718787259),i=s(i,r,h,n,t.getUint32(36,!0),21,3951481745),e[0]=n+e[0]&4294967295,e[1]=i+e[1]&4294967295,e[2]=r+e[2]&4294967295,e[3]=h+e[3]&4294967295},e}();function r(t,e,n,i,r,f){return((e=(e+t&4294967295)+(i+f&4294967295)&4294967295)<<r|e>>>32-r)+n&4294967295}function f(t,e,n,i,f,g,U){return r(e&n|~e&i,t,e,f,g,U)}function g(t,e,n,i,f,g,U){return r(e&i|n&~i,t,e,f,g,U)}function U(t,e,n,i,f,g,U){return r(e^n^i,t,e,f,g,U)}function s(t,e,n,i,f,g,U){return r(n^(e|~i),t,e,f,g,U)}function h(t){return"string"==typeof t?0===t.length:0===t.byteLength}function u(t){return"string"==typeof t?(0,e.fromUtf8)(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}exports.Md5=i;
},{"tslib":"G5GG","@aws-sdk/util-utf8-browser":"SHh0","./constants":"NDuC"}],"cJnH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultRegionInfoProvider=void 0;var a=require("tslib"),s="s3.{region}.amazonaws.com",e="s3.{region}.amazonaws.com.cn",o="s3.{region}.c2s.ic.gov",t="s3.{region}.sc2s.sgov.gov",n="s3.{region}.amazonaws.com",r=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),i=new Set(["cn-north-1","cn-northwest-1"]),m=new Set(["us-iso-east-1"]),c=new Set(["us-isob-east-1"]),w=new Set(["us-gov-east-1","us-gov-west-1"]),u=function(u,h){var p=void 0;switch(u){case"af-south-1":p={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":p={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":p={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":p={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":p={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":p={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":p={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":p={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":p={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":p={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":p={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":p={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":p={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":p={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":p={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":p={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":p={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":p={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":p={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":p={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":p={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":p={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":p={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":p={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":p={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":p={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":p={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":p={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":p={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:r.has(u)&&(p={hostname:s.replace("{region}",u),partition:"aws"}),i.has(u)&&(p={hostname:e.replace("{region}",u),partition:"aws-cn"}),m.has(u)&&(p={hostname:o.replace("{region}",u),partition:"aws-iso"}),c.has(u)&&(p={hostname:t.replace("{region}",u),partition:"aws-iso-b"}),w.has(u)&&(p={hostname:n.replace("{region}",u),partition:"aws-us-gov"}),void 0===p&&(p={hostname:s.replace("{region}",u),partition:"aws"})}return Promise.resolve((0,a.__assign)({signingService:"s3"},p))};exports.defaultRegionInfoProvider=u;
},{"tslib":"CvJj"}],"CbUH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClientSharedValues=void 0;var e=require("./endpoints"),r=require("@aws-sdk/url-parser"),s={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:e.defaultRegionInfoProvider,serviceId:"S3",signingEscapePath:!1,urlParser:r.parseUrl,useArnRegion:!1};exports.ClientSharedValues=s;
},{"./endpoints":"cJnH","@aws-sdk/url-parser":"fEUY"}],"Wyti":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClientDefaultValues=void 0;var e=require("tslib"),r=b(require("./package.json")),s=require("@aws-crypto/sha256-browser"),t=require("@aws-sdk/eventstream-serde-browser"),a=require("@aws-sdk/fetch-http-handler"),i=require("@aws-sdk/hash-blob-browser"),d=require("@aws-sdk/invalid-dependency"),n=require("@aws-sdk/md5-js"),o=require("@aws-sdk/middleware-retry"),u=require("@aws-sdk/util-base64-browser"),l=require("@aws-sdk/util-body-length-browser"),c=require("@aws-sdk/util-user-agent-browser"),w=require("@aws-sdk/util-utf8-browser"),f=require("./runtimeConfig.shared");function b(e){return e&&e.__esModule?e:{default:e}}var h=(0,e.__assign)((0,e.__assign)({},f.ClientSharedValues),{runtime:"browser",base64Decoder:u.fromBase64,base64Encoder:u.toBase64,bodyLengthChecker:l.calculateBodyLength,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:(0,c.defaultUserAgent)({serviceId:f.ClientSharedValues.serviceId,clientVersion:r.default.version}),eventStreamSerdeProvider:t.eventStreamSerdeProvider,maxAttempts:o.DEFAULT_MAX_ATTEMPTS,md5:n.Md5,region:(0,d.invalidProvider)("Region is missing"),requestHandler:new a.FetchHttpHandler,sha256:s.Sha256,streamCollector:a.streamCollector,streamHasher:i.blobHasher,utf8Decoder:w.fromUtf8,utf8Encoder:w.toUtf8});exports.ClientDefaultValues=h;
},{"tslib":"CvJj","./package.json":"ViSY","@aws-crypto/sha256-browser":"zTbm","@aws-sdk/eventstream-serde-browser":"S6nY","@aws-sdk/fetch-http-handler":"FVoP","@aws-sdk/hash-blob-browser":"Hq7A","@aws-sdk/invalid-dependency":"lkxb","@aws-sdk/md5-js":"Nq62","@aws-sdk/middleware-retry":"yjfw","@aws-sdk/util-base64-browser":"aNuR","@aws-sdk/util-body-length-browser":"JNXH","@aws-sdk/util-user-agent-browser":"VksY","@aws-sdk/util-utf8-browser":"SHh0","./runtimeConfig.shared":"CbUH"}],"x5bJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveEventStreamSerdeConfig=void 0;var e=require("tslib"),r=function(r){return(0,e.__assign)((0,e.__assign)({},r),{eventStreamMarshaller:r.eventStreamSerdeProvider(r)})};exports.resolveEventStreamSerdeConfig=r;
},{"tslib":"G5GG"}],"HJYF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./EventStreamSerdeConfig");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});
},{"./EventStreamSerdeConfig":"x5bJ"}],"NwRT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.parse=exports.validate=void 0;var r=require("tslib"),e=function(r){return"string"==typeof r&&0===r.indexOf("arn:")&&r.split(":").length>=6};exports.validate=e;var t=function(e){var t=e.split(":");if(t.length<6||"arn"!==t[0])throw new Error("Malformed ARN");var i=(0,r.__read)(t);return{partition:i[1],service:i[2],region:i[3],accountId:i[4],resource:i.slice(5).join(":")}};exports.parse=t;var i=function(r){var e=r.partition,t=void 0===e?"aws":e,i=r.service,o=r.region,n=r.accountId,s=r.resource;if([i,o,n,s].some(function(r){return"string"!=typeof r}))throw new Error("Input ARN object is invalid");return"arn:"+t+":"+i+":"+o+":"+n+":"+s};exports.build=i;
},{"tslib":"G5GG"}],"ZOxP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateNoFIPS=exports.validateNoDualstack=exports.getArnResources=exports.validateDNSHostLabel=exports.validateAccountId=exports.validateRegion=exports.validatePartition=exports.validateOutpostService=exports.validateS3Service=exports.validateService=exports.validateArnEndpointOptions=exports.getSuffixForArnEndpoint=exports.getSuffix=exports.isDnsCompatibleBucketName=exports.getPseudoRegion=exports.isBucketNameOptions=exports.S3_HOSTNAME_PATTERN=exports.DOT_PATTERN=void 0;var t=require("tslib"),e=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,o=/(\d+\.){3}\d+/,r=/\.\./,n=/\./;exports.DOT_PATTERN=n;var i=/^(.+\.)?s3[.-]([a-z0-9-]+)\./;exports.S3_HOSTNAME_PATTERN=i;var s=/^s3(-external-1)?\.amazonaws\.com$/,a="amazonaws.com",p=function(t){return"string"==typeof t.bucketName};exports.isBucketNameOptions=p;var c=function(t){return g(t)?t.replace(/fips-|-fips/,""):t};exports.getPseudoRegion=c;var u=function(t){return e.test(t)&&!o.test(t)&&!r.test(t)};exports.isDnsCompatibleBucketName=u;var l=function(t){var e=t.match(i);return[e[2],t.replace(new RegExp("^"+e[0]),"")]},d=function(t){return s.test(t)?["us-east-1",a]:l(t)};exports.getSuffix=d;var v=function(t){return s.test(t)?[t.replace("."+a,""),a]:l(t)};exports.getSuffixForArnEndpoint=v;var f=function(t){if(t.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(t.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!t.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")};exports.validateArnEndpointOptions=f;var x=function(t){if("s3"!==t&&"s3-outposts"!==t)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")};exports.validateService=x;var w=function(t){if("s3"!==t)throw new Error("Expect 's3' in Accesspoint ARN service component")};exports.validateS3Service=w;var h=function(t){if("s3-outposts"!==t)throw new Error("Expect 's3-posts' in Outpost ARN service component")};exports.validateOutpostService=h;var E=function(t,e){if(t!==e.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+t+'" but expected "'+e.clientPartition+'"')};exports.validatePartition=E;var N=function(t,e){if(""===t)throw new Error("ARN region is empty");if(!e.useArnRegion&&!A(t,e.clientRegion)&&!A(t,e.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+t+" but expected "+e.clientRegion);if(e.useArnRegion&&g(t))throw new Error("Endpoint does not support FIPS region")};exports.validateRegion=N;var g=function(t){return t.startsWith("fips-")||t.endsWith("-fips")},A=function(t,e){return t===e||c(t)===e||t===c(e)},R=function(t){if(!/[0-9]{12}/.exec(t))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")};exports.validateAccountId=R;var S=function(t,e){if(void 0===e&&(e={tlsCompatible:!0}),t.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(t)||/(\d+\.){3}\d+/.test(t)||/[.-]{2}/.test(t)||(null==e?void 0:e.tlsCompatible)&&n.test(t))throw new Error("Invalid DNS label "+t)};exports.validateDNSHostLabel=S;var m=function(e){var o=e.includes(":")?":":"/",r=(0,t.__read)(e.split(o)),n=r[0],i=r.slice(1);if("accesspoint"===n){if(1!==i.length||""===i[0])throw new Error("Access Point ARN should have one resource accesspoint"+o+"{accesspointname}");return{accesspointName:i[0]}}if("outpost"===n){if(!i[0]||"accesspoint"!==i[1]||!i[2]||3!==i.length)throw new Error("Outpost ARN should have resource outpost"+o+"{outpostId}"+o+"accesspoint"+o+"{accesspointName}");var s=(0,t.__read)(i,3),a=s[0];s[1];return{outpostId:a,accesspointName:s[2]}}throw new Error("ARN resource should begin with 'accesspoint"+o+"' or 'outpost"+o+"'")};exports.getArnResources=m;var b=function(t){if(t)throw new Error("Dualstack endpoint is not supported with Outpost")};exports.validateNoDualstack=b;var P=function(t){if(g(null!=t?t:""))throw new Error("FIPS region is not supported with Outpost, got "+t)};exports.validateNoFIPS=P;
},{"tslib":"G5GG"}],"Gu0i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bucketHostname=void 0;var t=require("tslib"),e=require("./bucketHostnameUtils"),i=function(i){var a=i.isCustomEndpoint,s=(i.baseHostname,i.dualstackEndpoint),d=i.accelerateEndpoint;if(a){if(s)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(d)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return(0,e.isBucketNameOptions)(i)?o((0,t.__assign)((0,t.__assign)({},i),{isCustomEndpoint:a})):n((0,t.__assign)((0,t.__assign)({},i),{isCustomEndpoint:a}))};exports.bucketHostname=i;var n=function(i){var n=i.isCustomEndpoint,o=i.baseHostname,a=(0,t.__read)(n?[i.clientRegion,o]:(0,e.getSuffixForArnEndpoint)(o),2),s=a[0],d=a[1],c=i.pathStyleEndpoint,r=i.dualstackEndpoint,l=void 0!==r&&r,u=i.accelerateEndpoint,p=void 0!==u&&u,v=i.tlsCompatible,g=void 0===v||v,m=i.useArnRegion,E=i.bucketName,b=i.clientPartition,k=void 0===b?"aws":b,S=i.clientSigningRegion,_=void 0===S?s:S;(0,e.validateArnEndpointOptions)({pathStyleEndpoint:c,accelerateEndpoint:p,tlsCompatible:g});var R=E.service,f=E.partition,h=E.accountId,C=E.region,N=E.resource;(0,e.validateService)(R),(0,e.validatePartition)(f,{clientPartition:k}),(0,e.validateAccountId)(h),(0,e.validateRegion)(C,{useArnRegion:m,clientRegion:s,clientSigningRegion:_});var A=(0,e.getArnResources)(N),H=A.accesspointName,w=A.outpostId;(0,e.validateDNSHostLabel)(H+"-"+h,{tlsCompatible:g});var D=m?C:s,P=m?C:_;return w?((0,e.validateOutpostService)(R),(0,e.validateDNSHostLabel)(w,{tlsCompatible:g}),(0,e.validateNoDualstack)(l),(0,e.validateNoFIPS)(D),{bucketEndpoint:!0,hostname:H+"-"+h+"."+w+(n?"":".s3-outposts."+D)+"."+d,signingRegion:P,signingService:"s3-outposts"}):((0,e.validateS3Service)(R),{bucketEndpoint:!0,hostname:H+"-"+h+(n?"":".s3-accesspoint"+(l?".dualstack":"")+"."+D)+"."+d,signingRegion:P})},o=function(i){var n=i.accelerateEndpoint,o=void 0!==n&&n,a=i.clientRegion,s=i.baseHostname,d=i.bucketName,c=i.dualstackEndpoint,r=void 0!==c&&c,l=i.pathStyleEndpoint,u=void 0!==l&&l,p=i.tlsCompatible,v=void 0===p||p,g=i.isCustomEndpoint,m=void 0!==g&&g,E=(0,t.__read)(m?[a,s]:(0,e.getSuffix)(s),2),b=E[0],k=E[1];return u||!(0,e.isDnsCompatibleBucketName)(d)||v&&e.DOT_PATTERN.test(d)?{bucketEndpoint:!1,hostname:r?"s3.dualstack."+b+"."+k:s}:(o?s="s3-accelerate"+(r?".dualstack":"")+"."+k:r&&(s="s3.dualstack."+b+"."+k),{bucketEndpoint:!0,hostname:d+"."+s})};
},{"tslib":"G5GG","./bucketHostnameUtils":"ZOxP"}],"xjFS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBucketEndpointPlugin=exports.bucketEndpointMiddlewareOptions=exports.bucketEndpointMiddleware=void 0;var e=require("tslib"),t=require("@aws-sdk/protocol-http"),n=require("@aws-sdk/util-arn-parser"),i=require("./bucketHostname"),o=require("./bucketHostnameUtils"),s=function(s){return function(a,r){return function(u){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var c,p,d,l,g,E,b,k,m,h,v,_,f,w,R,P,q,y;return(0,e.__generator)(this,function(H){switch(H.label){case 0:return c=u.input.Bucket,p=s.bucketEndpoint,d=u.request,t.HttpRequest.isInstance(d)?s.bucketEndpoint?(d.hostname=c,[3,7]):[3,1]:[3,8];case 1:return(0,n.validate)(c)?(l=(0,n.parse)(c),g=o.getPseudoRegion,[4,s.region()]):[3,5];case 2:return w=g.apply(void 0,[H.sent()]),[4,s.regionInfoProvider(w)];case 3:return E=H.sent()||{},b=E.partition,k=E.signingRegion,m=void 0===k?w:k,[4,s.useArnRegion()];case 4:return h=H.sent(),v=(0,i.bucketHostname)({bucketName:l,baseHostname:d.hostname,accelerateEndpoint:s.useAccelerateEndpoint,dualstackEndpoint:s.useDualstackEndpoint,pathStyleEndpoint:s.forcePathStyle,tlsCompatible:"https:"===d.protocol,useArnRegion:h,clientPartition:b,clientSigningRegion:m,clientRegion:w,isCustomEndpoint:s.isCustomEndpoint}),q=v.hostname,y=v.bucketEndpoint,_=v.signingRegion,f=v.signingService,_&&_!==m&&(r.signing_region=_),f&&"s3"!==f&&(r.signing_service=f),d.hostname=q,p=y,[3,7];case 5:return R=o.getPseudoRegion,[4,s.region()];case 6:w=R.apply(void 0,[H.sent()]),P=(0,i.bucketHostname)({bucketName:c,clientRegion:w,baseHostname:d.hostname,accelerateEndpoint:s.useAccelerateEndpoint,dualstackEndpoint:s.useDualstackEndpoint,pathStyleEndpoint:s.forcePathStyle,tlsCompatible:"https:"===d.protocol,isCustomEndpoint:s.isCustomEndpoint}),q=P.hostname,y=P.bucketEndpoint,d.hostname=q,p=y,H.label=7;case 7:p&&(d.path=d.path.replace(/^(\/)?[^\/]+/,""),""===d.path&&(d.path="/")),H.label=8;case 8:return[2,a((0,e.__assign)((0,e.__assign)({},u),{request:d}))]}})})}}};exports.bucketEndpointMiddleware=s;var a={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0};exports.bucketEndpointMiddlewareOptions=a;var r=function(e){return{applyToStack:function(t){t.addRelativeTo(s(e),a)}}};exports.getBucketEndpointPlugin=r;
},{"tslib":"G5GG","@aws-sdk/protocol-http":"V5Hv","@aws-sdk/util-arn-parser":"NwRT","./bucketHostname":"Gu0i","./bucketHostnameUtils":"ZOxP"}],"xO4L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveBucketEndpointConfig=t,exports.NODE_USE_ARN_REGION_CONFIG_OPTIONS=exports.NODE_USE_ARN_REGION_INI_NAME=exports.NODE_USE_ARN_REGION_ENV_NAME=void 0;var e=require("tslib");function t(t){var r=t.bucketEndpoint,o=void 0!==r&&r,n=t.forcePathStyle,_=void 0!==n&&n,i=t.useAccelerateEndpoint,E=void 0!==i&&i,s=t.useDualstackEndpoint,a=void 0!==s&&s,u=t.useArnRegion,N=void 0!==u&&u;return(0,e.__assign)((0,e.__assign)({},t),{bucketEndpoint:o,forcePathStyle:_,useAccelerateEndpoint:E,useDualstackEndpoint:a,useArnRegion:"function"==typeof N?N:function(){return Promise.resolve(N)}})}var r="AWS_S3_USE_ARN_REGION";exports.NODE_USE_ARN_REGION_ENV_NAME=r;var o="s3_use_arn_region";exports.NODE_USE_ARN_REGION_INI_NAME=o;var n={environmentVariableSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,r)){if("true"===e[r])return!0;if("false"===e[r])return!1;throw new Error("Cannot load env "+r+'. Expected "true" or "false", got '+e[r]+".")}},configFileSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,o)){if("true"===e[o])return!0;if("false"===e[o])return!1;throw new Error("Cannot load shared config entry "+o+'. Expected "true" or "false", got '+e[o]+".")}},default:!1};exports.NODE_USE_ARN_REGION_CONFIG_OPTIONS=n;
},{"tslib":"G5GG"}],"H53D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={getArnResources:!0,getPseudoRegion:!0,getSuffixForArnEndpoint:!0,validateOutpostService:!0,validatePartition:!0,validateAccountId:!0,validateRegion:!0,validateDNSHostLabel:!0,validateNoDualstack:!0,validateNoFIPS:!0};Object.defineProperty(exports,"getArnResources",{enumerable:!0,get:function(){return o.getArnResources}}),Object.defineProperty(exports,"getPseudoRegion",{enumerable:!0,get:function(){return o.getPseudoRegion}}),Object.defineProperty(exports,"getSuffixForArnEndpoint",{enumerable:!0,get:function(){return o.getSuffixForArnEndpoint}}),Object.defineProperty(exports,"validateOutpostService",{enumerable:!0,get:function(){return o.validateOutpostService}}),Object.defineProperty(exports,"validatePartition",{enumerable:!0,get:function(){return o.validatePartition}}),Object.defineProperty(exports,"validateAccountId",{enumerable:!0,get:function(){return o.validateAccountId}}),Object.defineProperty(exports,"validateRegion",{enumerable:!0,get:function(){return o.validateRegion}}),Object.defineProperty(exports,"validateDNSHostLabel",{enumerable:!0,get:function(){return o.validateDNSHostLabel}}),Object.defineProperty(exports,"validateNoDualstack",{enumerable:!0,get:function(){return o.validateNoDualstack}}),Object.defineProperty(exports,"validateNoFIPS",{enumerable:!0,get:function(){return o.validateNoFIPS}});var t=require("./bucketEndpointMiddleware");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var r=require("./bucketHostname");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var n=require("./configurations");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return n[t]}}))});var o=require("./bucketHostnameUtils");
},{"./bucketEndpointMiddleware":"xjFS","./bucketHostname":"Gu0i","./configurations":"xO4L","./bucketHostnameUtils":"ZOxP"}],"VnR9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addExpectContinueMiddleware=n,exports.getAddExpectContinuePlugin=exports.addExpectContinueMiddlewareOptions=void 0;var e=require("tslib"),t=require("@aws-sdk/protocol-http");function n(n){var r=this;return function(i){return function(o){return(0,e.__awaiter)(r,void 0,void 0,function(){var r;return(0,e.__generator)(this,function(d){return r=o.request,t.HttpRequest.isInstance(r)&&r.body&&"node"===n.runtime&&(r.headers=(0,e.__assign)((0,e.__assign)({},r.headers),{Expect:"100-continue"})),[2,i((0,e.__assign)((0,e.__assign)({},o),{request:r}))]})})}}}var r={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0};exports.addExpectContinueMiddlewareOptions=r;var i=function(e){return{applyToStack:function(t){t.add(n(e),r)}}};exports.getAddExpectContinuePlugin=i;
},{"tslib":"G5GG","@aws-sdk/protocol-http":"V5Hv"}],"p8Sy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateBucketNameMiddleware=a,exports.getValidateBucketNamePlugin=exports.validateBucketNameMiddlewareOptions=void 0;var e=require("tslib"),t=require("@aws-sdk/util-arn-parser");function a(){var a=this;return function(r){return function(i){return(0,e.__awaiter)(a,void 0,void 0,function(){var a,n;return(0,e.__generator)(this,function(u){if("string"==typeof(a=i.input.Bucket)&&!(0,t.validate)(a)&&a.indexOf("/")>=0)throw(n=new Error("Bucket name shouldn't contain '/', received '"+a+"'")).name="InvalidBucketName",n;return[2,r((0,e.__assign)({},i))]})})}}}var r={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0};exports.validateBucketNameMiddlewareOptions=r;var i=function(e){return{applyToStack:function(e){e.add(a(),r)}}};exports.getValidateBucketNamePlugin=i;
},{"tslib":"G5GG","@aws-sdk/util-arn-parser":"NwRT"}],"pYm3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUseRegionalEndpointPlugin=exports.useRegionalEndpointMiddlewareOptions=exports.useRegionalEndpointMiddleware=void 0;var e=require("tslib"),n=require("@aws-sdk/protocol-http"),t=function(t){return function(o){return function(s){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,i;return(0,e.__generator)(this,function(r){switch(r.label){case 0:return a=s.request,!n.HttpRequest.isInstance(a)||t.isCustomEndpoint?[2,o((0,e.__assign)({},s))]:"s3.amazonaws.com"!==a.hostname?[3,1]:(a.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return i="aws-global",[4,t.region()];case 2:i===r.sent()&&(a.hostname="s3.amazonaws.com"),r.label=3;case 3:return[2,o((0,e.__assign)({},s))]}})})}}};exports.useRegionalEndpointMiddleware=t;var o={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0};exports.useRegionalEndpointMiddlewareOptions=o;var s=function(e){return{applyToStack:function(n){n.add(t(e),o)}}};exports.getUseRegionalEndpointPlugin=s;
},{"tslib":"G5GG","@aws-sdk/protocol-http":"V5Hv"}],"t6XU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getThrow200ExceptionsPlugin=exports.throw200ExceptionsMiddlewareOptions=exports.throw200ExceptionsMiddleware=void 0;var e=require("tslib"),r=require("@aws-sdk/protocol-http"),t=function(t){return function(i){return function(s){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,u,d,c,l,p,w;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,i(s)];case 1:return a=e.sent(),u=a.response,r.HttpResponse.isInstance(u)?(d=u.statusCode,c=u.body,d<200&&d>=300?[2,a]:[4,n(c,t)]):[2,a];case 2:return l=e.sent(),[4,o(l,t)];case 3:if(p=e.sent(),0===l.length)throw(w=new Error("S3 aborted request")).name="InternalError",w;return p&&p.match("<Error>")&&(u.statusCode=400),u.body=l,[2,a]}})})}}};exports.throw200ExceptionsMiddleware=t;var n=function(e,r){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):r.streamCollector(e)||Promise.resolve(new Uint8Array)},o=function(e,r){return n(e,r).then(function(e){return r.utf8Encoder(e)})},i={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0};exports.throw200ExceptionsMiddlewareOptions=i;var s=function(e){return{applyToStack:function(r){r.addRelativeTo(t(e),i)}}};exports.getThrow200ExceptionsPlugin=s;
},{"tslib":"G5GG","@aws-sdk/protocol-http":"V5Hv"}],"omdv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./validate-bucket-name");Object.keys(e).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})});var t=require("./use-regional-endpoint");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var r=require("./throw-200-exceptions");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});
},{"./validate-bucket-name":"p8Sy","./use-regional-endpoint":"pYm3","./throw-200-exceptions":"t6XU"}],"ZPdf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.S3Client=void 0;var e=require("tslib"),i=require("./runtimeConfig"),r=require("@aws-sdk/config-resolver"),t=require("@aws-sdk/eventstream-serde-config-resolver"),s=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-content-length"),d=require("@aws-sdk/middleware-expect-continue"),o=require("@aws-sdk/middleware-host-header"),a=require("@aws-sdk/middleware-logger"),l=require("@aws-sdk/middleware-retry"),g=require("@aws-sdk/middleware-sdk-s3"),u=require("@aws-sdk/middleware-signing"),c=require("@aws-sdk/middleware-user-agent"),w=require("@aws-sdk/smithy-client"),f=function(w){function f(f){var k=this,m=(0,e.__assign)((0,e.__assign)({},i.ClientDefaultValues),f),v=(0,r.resolveRegionConfig)(m),C=(0,r.resolveEndpointsConfig)(v),p=(0,l.resolveRetryConfig)(C),q=(0,o.resolveHostHeaderConfig)(p),S=(0,u.resolveAwsAuthConfig)(q),h=(0,s.resolveBucketEndpointConfig)(S),P=(0,c.resolveUserAgentConfig)(h),y=(0,t.resolveEventStreamSerdeConfig)(P);return(k=w.call(this,y)||this).config=y,k.middlewareStack.use((0,l.getRetryPlugin)(k.config)),k.middlewareStack.use((0,n.getContentLengthPlugin)(k.config)),k.middlewareStack.use((0,o.getHostHeaderPlugin)(k.config)),k.middlewareStack.use((0,a.getLoggerPlugin)(k.config)),k.middlewareStack.use((0,u.getAwsAuthPlugin)(k.config)),k.middlewareStack.use((0,g.getValidateBucketNamePlugin)(k.config)),k.middlewareStack.use((0,g.getUseRegionalEndpointPlugin)(k.config)),k.middlewareStack.use((0,d.getAddExpectContinuePlugin)(k.config)),k.middlewareStack.use((0,c.getUserAgentPlugin)(k.config)),k}return(0,e.__extends)(f,w),f.prototype.destroy=function(){w.prototype.destroy.call(this)},f}(w.Client);exports.S3Client=f;
},{"tslib":"CvJj","./runtimeConfig":"Wyti","@aws-sdk/config-resolver":"wCq5","@aws-sdk/eventstream-serde-config-resolver":"HJYF","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-content-length":"tA3Y","@aws-sdk/middleware-expect-continue":"VnR9","@aws-sdk/middleware-host-header":"o4Pa","@aws-sdk/middleware-logger":"jfCX","@aws-sdk/middleware-retry":"yjfw","@aws-sdk/middleware-sdk-s3":"omdv","@aws-sdk/middleware-signing":"WKBl","@aws-sdk/middleware-user-agent":"O3h5","@aws-sdk/smithy-client":"pooH"}],"Iby9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LoggingEnabled=exports.TargetGrant=exports.GetBucketLocationRequest=exports.GetBucketLocationOutput=exports.GetBucketLifecycleConfigurationRequest=exports.GetBucketLifecycleConfigurationOutput=exports.LifecycleRule=exports.Transition=exports.NoncurrentVersionTransition=exports.NoncurrentVersionExpiration=exports.LifecycleRuleFilter=exports.LifecycleRuleAndOperator=exports.LifecycleExpiration=exports.GetBucketInventoryConfigurationRequest=exports.GetBucketInventoryConfigurationOutput=exports.InventoryConfiguration=exports.InventorySchedule=exports.InventoryFilter=exports.InventoryDestination=exports.InventoryS3BucketDestination=exports.InventoryEncryption=exports.SSES3=exports.SSEKMS=exports.GetBucketIntelligentTieringConfigurationRequest=exports.GetBucketIntelligentTieringConfigurationOutput=exports.IntelligentTieringConfiguration=exports.Tiering=exports.IntelligentTieringFilter=exports.IntelligentTieringAndOperator=exports.GetBucketEncryptionRequest=exports.GetBucketEncryptionOutput=exports.ServerSideEncryptionConfiguration=exports.ServerSideEncryptionRule=exports.ServerSideEncryptionByDefault=exports.GetBucketCorsRequest=exports.GetBucketCorsOutput=exports.CORSRule=exports.GetBucketAnalyticsConfigurationRequest=exports.GetBucketAnalyticsConfigurationOutput=exports.AnalyticsConfiguration=exports.StorageClassAnalysis=exports.StorageClassAnalysisDataExport=exports.AnalyticsExportDestination=exports.AnalyticsS3BucketDestination=exports.AnalyticsFilter=exports.AnalyticsAndOperator=exports.Tag=exports.GetBucketAclRequest=exports.GetBucketAclOutput=exports.GetBucketAccelerateConfigurationRequest=exports.GetBucketAccelerateConfigurationOutput=exports.DeletePublicAccessBlockRequest=exports.DeleteObjectTaggingRequest=exports.DeleteObjectTaggingOutput=exports.DeleteObjectsRequest=exports.Delete=exports.ObjectIdentifier=exports.DeleteObjectsOutput=exports._Error=exports.DeletedObject=exports.DeleteObjectRequest=exports.DeleteObjectOutput=exports.DeleteBucketWebsiteRequest=exports.DeleteBucketTaggingRequest=exports.DeleteBucketReplicationRequest=exports.DeleteBucketPolicyRequest=exports.DeleteBucketOwnershipControlsRequest=exports.DeleteBucketMetricsConfigurationRequest=exports.DeleteBucketLifecycleRequest=exports.DeleteBucketInventoryConfigurationRequest=exports.DeleteBucketIntelligentTieringConfigurationRequest=exports.DeleteBucketEncryptionRequest=exports.DeleteBucketCorsRequest=exports.DeleteBucketAnalyticsConfigurationRequest=exports.DeleteBucketRequest=exports.CreateMultipartUploadRequest=exports.CreateMultipartUploadOutput=exports.CreateBucketRequest=exports.CreateBucketConfiguration=exports.CreateBucketOutput=exports.BucketAlreadyOwnedByYou=exports.BucketAlreadyExists=exports.ObjectNotInActiveTierError=exports.CopyObjectRequest=exports.CopyObjectOutput=exports.CopyObjectResult=exports.CompleteMultipartUploadRequest=exports.CompletedMultipartUpload=exports.CompletedPart=exports.CompleteMultipartUploadOutput=exports.AccessControlTranslation=exports.AccessControlPolicy=exports.Owner=exports.Grant=exports.Grantee=exports.AccelerateConfiguration=exports.NoSuchUpload=exports.AbortMultipartUploadRequest=exports.AbortMultipartUploadOutput=exports.AbortIncompleteMultipartUpload=void 0,exports.ListObjectsRequest=exports.ListObjectsOutput=exports._Object=exports.ListMultipartUploadsRequest=exports.ListMultipartUploadsOutput=exports.MultipartUpload=exports.Initiator=exports.CommonPrefix=exports.ListBucketsOutput=exports.Bucket=exports.ListBucketMetricsConfigurationsRequest=exports.ListBucketMetricsConfigurationsOutput=exports.ListBucketInventoryConfigurationsRequest=exports.ListBucketInventoryConfigurationsOutput=exports.ListBucketIntelligentTieringConfigurationsRequest=exports.ListBucketIntelligentTieringConfigurationsOutput=exports.ListBucketAnalyticsConfigurationsRequest=exports.ListBucketAnalyticsConfigurationsOutput=exports.HeadObjectRequest=exports.HeadObjectOutput=exports.NoSuchBucket=exports.HeadBucketRequest=exports.GetPublicAccessBlockRequest=exports.GetPublicAccessBlockOutput=exports.PublicAccessBlockConfiguration=exports.GetObjectTorrentRequest=exports.GetObjectTorrentOutput=exports.GetObjectTaggingRequest=exports.GetObjectTaggingOutput=exports.GetObjectRetentionRequest=exports.GetObjectRetentionOutput=exports.ObjectLockRetention=exports.GetObjectLockConfigurationRequest=exports.GetObjectLockConfigurationOutput=exports.ObjectLockConfiguration=exports.ObjectLockRule=exports.DefaultRetention=exports.GetObjectLegalHoldRequest=exports.GetObjectLegalHoldOutput=exports.ObjectLockLegalHold=exports.GetObjectAclRequest=exports.GetObjectAclOutput=exports.NoSuchKey=exports.InvalidObjectState=exports.GetObjectRequest=exports.GetObjectOutput=exports.GetBucketWebsiteRequest=exports.GetBucketWebsiteOutput=exports.RoutingRule=exports.Redirect=exports.Condition=exports.RedirectAllRequestsTo=exports.IndexDocument=exports.ErrorDocument=exports.GetBucketVersioningRequest=exports.GetBucketVersioningOutput=exports.GetBucketTaggingRequest=exports.GetBucketTaggingOutput=exports.GetBucketRequestPaymentRequest=exports.GetBucketRequestPaymentOutput=exports.GetBucketReplicationRequest=exports.GetBucketReplicationOutput=exports.ReplicationConfiguration=exports.ReplicationRule=exports.SourceSelectionCriteria=exports.SseKmsEncryptedObjects=exports.ReplicaModifications=exports.ReplicationRuleFilter=exports.ReplicationRuleAndOperator=exports.ExistingObjectReplication=exports.Destination=exports.ReplicationTime=exports.Metrics=exports.ReplicationTimeValue=exports.EncryptionConfiguration=exports.DeleteMarkerReplication=exports.GetBucketPolicyStatusRequest=exports.GetBucketPolicyStatusOutput=exports.PolicyStatus=exports.GetBucketPolicyRequest=exports.GetBucketPolicyOutput=exports.GetBucketOwnershipControlsRequest=exports.GetBucketOwnershipControlsOutput=exports.OwnershipControls=exports.OwnershipControlsRule=exports.NotificationConfiguration=exports.TopicConfiguration=exports.QueueConfiguration=exports.LambdaFunctionConfiguration=exports.NotificationConfigurationFilter=exports.S3KeyFilter=exports.FilterRule=exports.GetBucketNotificationConfigurationRequest=exports.GetBucketMetricsConfigurationRequest=exports.GetBucketMetricsConfigurationOutput=exports.MetricsConfiguration=exports.MetricsFilter=exports.MetricsAndOperator=exports.GetBucketLoggingRequest=exports.GetBucketLoggingOutput=void 0,exports.Encryption=exports.GlacierJobParameters=exports.RestoreObjectOutput=exports.ObjectAlreadyInActiveTierError=exports.PutPublicAccessBlockRequest=exports.PutObjectTaggingRequest=exports.PutObjectTaggingOutput=exports.PutObjectRetentionRequest=exports.PutObjectRetentionOutput=exports.PutObjectLockConfigurationRequest=exports.PutObjectLockConfigurationOutput=exports.PutObjectLegalHoldRequest=exports.PutObjectLegalHoldOutput=exports.PutObjectAclRequest=exports.PutObjectAclOutput=exports.PutObjectRequest=exports.PutObjectOutput=exports.PutBucketWebsiteRequest=exports.WebsiteConfiguration=exports.PutBucketVersioningRequest=exports.VersioningConfiguration=exports.PutBucketTaggingRequest=exports.Tagging=exports.PutBucketRequestPaymentRequest=exports.RequestPaymentConfiguration=exports.PutBucketReplicationRequest=exports.PutBucketPolicyRequest=exports.PutBucketOwnershipControlsRequest=exports.PutBucketNotificationConfigurationRequest=exports.PutBucketMetricsConfigurationRequest=exports.PutBucketLoggingRequest=exports.BucketLoggingStatus=exports.PutBucketLifecycleConfigurationRequest=exports.BucketLifecycleConfiguration=exports.PutBucketInventoryConfigurationRequest=exports.PutBucketIntelligentTieringConfigurationRequest=exports.PutBucketEncryptionRequest=exports.PutBucketCorsRequest=exports.CORSConfiguration=exports.PutBucketAnalyticsConfigurationRequest=exports.PutBucketAclRequest=exports.PutBucketAccelerateConfigurationRequest=exports.ListPartsRequest=exports.ListPartsOutput=exports.Part=exports.ListObjectVersionsRequest=exports.ListObjectVersionsOutput=exports.ObjectVersion=exports.DeleteMarkerEntry=exports.ListObjectsV2Request=exports.ListObjectsV2Output=void 0;var t,e,n,i,o,r,s,u,c,p,f,g,a,l,x,_,S,L,R,v,O,k,C,B,y,q,d,b,G,E,I,P,T,j,A,M,D,N,K,m,V,F,w,U,h,H,W,$,J,Q,Y,z,X,Z,tt,et,nt,it,ot,rt,st,ut,ct,pt,ft,gt,at,lt,xt,_t,St,Lt,Rt,vt,Ot,kt,Ct,Bt,yt,qt,dt,bt,Gt,Et,It,Pt,Tt,jt,At,Mt,Dt,Nt,Kt,mt,Vt,Ft,wt,Ut,ht,Ht,Wt,$t,Jt,Qt,Yt,zt,Xt,Zt,te,ee,ne,ie,oe,re,se,ue,ce,pe,fe,ge,ae,le,xe,_e,Se,Le,Re,ve,Oe,ke,Ce,Be,ye,qe,de,be,Ge,Ee,Ie,Pe,Te,je,Ae,Me,De,Ne,Ke,me,Ve,Fe,we,Ue,he,He,We,$e,Je,Qe,Ye,ze,Xe,Ze,tn,en,nn,on,rn,sn,un,cn,pn,fn,gn,an,ln,xn,_n,Sn,Ln,Rn,vn,On,kn,Cn,Bn,yn,qn,dn,bn,Gn,En,In,Pn,Tn,jn,An,Mn,Dn,Nn,Kn,mn,Vn,Fn,wn,Un,hn,Hn,Wn,$n,Jn,Qn,Yn,zn,Xn,Zn,ti,ei,ni,ii,oi,ri,si,ui,ci,pi,fi,gi,ai,li,xi,_i,Si,Li,Ri,vi,Oi,ki,Ci,Bi,yi,qi,di,bi,Gi,Ei,Ii,Pi,Ti,ji,Ai,Mi,Di=require("tslib"),Ni=require("@aws-sdk/smithy-client");exports.AbortIncompleteMultipartUpload=t,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(t||(exports.AbortIncompleteMultipartUpload=t={})),exports.AbortMultipartUploadOutput=e,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(e||(exports.AbortMultipartUploadOutput=e={})),exports.AbortMultipartUploadRequest=n,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(n||(exports.AbortMultipartUploadRequest=n={})),exports.NoSuchUpload=i,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(i||(exports.NoSuchUpload=i={})),exports.AccelerateConfiguration=o,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(o||(exports.AccelerateConfiguration=o={})),exports.Grantee=r,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(r||(exports.Grantee=r={})),exports.Grant=s,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(s||(exports.Grant=s={})),exports.Owner=u,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(u||(exports.Owner=u={})),exports.AccessControlPolicy=c,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(c||(exports.AccessControlPolicy=c={})),exports.AccessControlTranslation=p,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(p||(exports.AccessControlTranslation=p={})),exports.CompleteMultipartUploadOutput=f,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:Ni.SENSITIVE_STRING})}}(f||(exports.CompleteMultipartUploadOutput=f={})),exports.CompletedPart=g,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(g||(exports.CompletedPart=g={})),exports.CompletedMultipartUpload=a,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(a||(exports.CompletedMultipartUpload=a={})),exports.CompleteMultipartUploadRequest=l,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(l||(exports.CompleteMultipartUploadRequest=l={})),exports.CopyObjectResult=x,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(x||(exports.CopyObjectResult=x={})),exports.CopyObjectOutput=_,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)((0,Di.__assign)({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:Ni.SENSITIVE_STRING}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ni.SENSITIVE_STRING})}}(_||(exports.CopyObjectOutput=_={})),exports.CopyObjectRequest=S,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)((0,Di.__assign)((0,Di.__assign)((0,Di.__assign)({},t),t.SSECustomerKey&&{SSECustomerKey:Ni.SENSITIVE_STRING}),t.SSEKMSKeyId&&{SSEKMSKeyId:Ni.SENSITIVE_STRING}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ni.SENSITIVE_STRING}),t.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Ni.SENSITIVE_STRING})}}(S||(exports.CopyObjectRequest=S={})),exports.ObjectNotInActiveTierError=L,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(L||(exports.ObjectNotInActiveTierError=L={})),exports.BucketAlreadyExists=R,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(R||(exports.BucketAlreadyExists=R={})),exports.BucketAlreadyOwnedByYou=v,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(v||(exports.BucketAlreadyOwnedByYou=v={})),exports.CreateBucketOutput=O,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(O||(exports.CreateBucketOutput=O={})),exports.CreateBucketConfiguration=k,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(k||(exports.CreateBucketConfiguration=k={})),exports.CreateBucketRequest=C,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(C||(exports.CreateBucketRequest=C={})),exports.CreateMultipartUploadOutput=B,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)((0,Di.__assign)({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:Ni.SENSITIVE_STRING}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ni.SENSITIVE_STRING})}}(B||(exports.CreateMultipartUploadOutput=B={})),exports.CreateMultipartUploadRequest=y,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)((0,Di.__assign)((0,Di.__assign)({},t),t.SSECustomerKey&&{SSECustomerKey:Ni.SENSITIVE_STRING}),t.SSEKMSKeyId&&{SSEKMSKeyId:Ni.SENSITIVE_STRING}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ni.SENSITIVE_STRING})}}(y||(exports.CreateMultipartUploadRequest=y={})),exports.DeleteBucketRequest=q,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(q||(exports.DeleteBucketRequest=q={})),exports.DeleteBucketAnalyticsConfigurationRequest=d,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(d||(exports.DeleteBucketAnalyticsConfigurationRequest=d={})),exports.DeleteBucketCorsRequest=b,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(b||(exports.DeleteBucketCorsRequest=b={})),exports.DeleteBucketEncryptionRequest=G,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(G||(exports.DeleteBucketEncryptionRequest=G={})),exports.DeleteBucketIntelligentTieringConfigurationRequest=E,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(E||(exports.DeleteBucketIntelligentTieringConfigurationRequest=E={})),exports.DeleteBucketInventoryConfigurationRequest=I,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(I||(exports.DeleteBucketInventoryConfigurationRequest=I={})),exports.DeleteBucketLifecycleRequest=P,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(P||(exports.DeleteBucketLifecycleRequest=P={})),exports.DeleteBucketMetricsConfigurationRequest=T,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(T||(exports.DeleteBucketMetricsConfigurationRequest=T={})),exports.DeleteBucketOwnershipControlsRequest=j,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(j||(exports.DeleteBucketOwnershipControlsRequest=j={})),exports.DeleteBucketPolicyRequest=A,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(A||(exports.DeleteBucketPolicyRequest=A={})),exports.DeleteBucketReplicationRequest=M,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(M||(exports.DeleteBucketReplicationRequest=M={})),exports.DeleteBucketTaggingRequest=D,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(D||(exports.DeleteBucketTaggingRequest=D={})),exports.DeleteBucketWebsiteRequest=N,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(N||(exports.DeleteBucketWebsiteRequest=N={})),exports.DeleteObjectOutput=K,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(K||(exports.DeleteObjectOutput=K={})),exports.DeleteObjectRequest=m,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(m||(exports.DeleteObjectRequest=m={})),exports.DeletedObject=V,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(V||(exports.DeletedObject=V={})),exports._Error=F,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(F||(exports._Error=F={})),exports.DeleteObjectsOutput=w,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(w||(exports.DeleteObjectsOutput=w={})),exports.ObjectIdentifier=U,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(U||(exports.ObjectIdentifier=U={})),exports.Delete=h,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(h||(exports.Delete=h={})),exports.DeleteObjectsRequest=H,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(H||(exports.DeleteObjectsRequest=H={})),exports.DeleteObjectTaggingOutput=W,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(W||(exports.DeleteObjectTaggingOutput=W={})),exports.DeleteObjectTaggingRequest=$,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}($||(exports.DeleteObjectTaggingRequest=$={})),exports.DeletePublicAccessBlockRequest=J,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(J||(exports.DeletePublicAccessBlockRequest=J={})),exports.GetBucketAccelerateConfigurationOutput=Q,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Q||(exports.GetBucketAccelerateConfigurationOutput=Q={})),exports.GetBucketAccelerateConfigurationRequest=Y,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Y||(exports.GetBucketAccelerateConfigurationRequest=Y={})),exports.GetBucketAclOutput=z,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(z||(exports.GetBucketAclOutput=z={})),exports.GetBucketAclRequest=X,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(X||(exports.GetBucketAclRequest=X={})),exports.Tag=Z,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Z||(exports.Tag=Z={})),exports.AnalyticsAndOperator=tt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(tt||(exports.AnalyticsAndOperator=tt={})),exports.AnalyticsFilter=et,function(t){t.visit=function(t,e){return void 0!==t.Prefix?e.Prefix(t.Prefix):void 0!==t.Tag?e.Tag(t.Tag):void 0!==t.And?e.And(t.And):e._(t.$unknown[0],t.$unknown[1])},t.filterSensitiveLog=function(t){var e;return void 0!==t.Prefix?{Prefix:t.Prefix}:void 0!==t.Tag?{Tag:Z.filterSensitiveLog(t.Tag)}:void 0!==t.And?{And:tt.filterSensitiveLog(t.And)}:void 0!==t.$unknown?((e={})[t.$unknown[0]]="UNKNOWN",e):void 0}}(et||(exports.AnalyticsFilter=et={})),exports.AnalyticsS3BucketDestination=nt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(nt||(exports.AnalyticsS3BucketDestination=nt={})),exports.AnalyticsExportDestination=it,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(it||(exports.AnalyticsExportDestination=it={})),exports.StorageClassAnalysisDataExport=ot,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ot||(exports.StorageClassAnalysisDataExport=ot={})),exports.StorageClassAnalysis=rt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(rt||(exports.StorageClassAnalysis=rt={})),exports.AnalyticsConfiguration=st,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.Filter&&{Filter:et.filterSensitiveLog(t.Filter)})}}(st||(exports.AnalyticsConfiguration=st={})),exports.GetBucketAnalyticsConfigurationOutput=ut,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.AnalyticsConfiguration&&{AnalyticsConfiguration:st.filterSensitiveLog(t.AnalyticsConfiguration)})}}(ut||(exports.GetBucketAnalyticsConfigurationOutput=ut={})),exports.GetBucketAnalyticsConfigurationRequest=ct,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ct||(exports.GetBucketAnalyticsConfigurationRequest=ct={})),exports.CORSRule=pt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(pt||(exports.CORSRule=pt={})),exports.GetBucketCorsOutput=ft,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ft||(exports.GetBucketCorsOutput=ft={})),exports.GetBucketCorsRequest=gt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(gt||(exports.GetBucketCorsRequest=gt={})),exports.ServerSideEncryptionByDefault=at,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.KMSMasterKeyID&&{KMSMasterKeyID:Ni.SENSITIVE_STRING})}}(at||(exports.ServerSideEncryptionByDefault=at={})),exports.ServerSideEncryptionRule=lt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:at.filterSensitiveLog(t.ApplyServerSideEncryptionByDefault)})}}(lt||(exports.ServerSideEncryptionRule=lt={})),exports.ServerSideEncryptionConfiguration=xt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.Rules&&{Rules:t.Rules.map(function(t){return lt.filterSensitiveLog(t)})})}}(xt||(exports.ServerSideEncryptionConfiguration=xt={})),exports.GetBucketEncryptionOutput=_t,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:xt.filterSensitiveLog(t.ServerSideEncryptionConfiguration)})}}(_t||(exports.GetBucketEncryptionOutput=_t={})),exports.GetBucketEncryptionRequest=St,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(St||(exports.GetBucketEncryptionRequest=St={})),exports.IntelligentTieringAndOperator=Lt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Lt||(exports.IntelligentTieringAndOperator=Lt={})),exports.IntelligentTieringFilter=Rt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Rt||(exports.IntelligentTieringFilter=Rt={})),exports.Tiering=vt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(vt||(exports.Tiering=vt={})),exports.IntelligentTieringConfiguration=Ot,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ot||(exports.IntelligentTieringConfiguration=Ot={})),exports.GetBucketIntelligentTieringConfigurationOutput=kt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(kt||(exports.GetBucketIntelligentTieringConfigurationOutput=kt={})),exports.GetBucketIntelligentTieringConfigurationRequest=Ct,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ct||(exports.GetBucketIntelligentTieringConfigurationRequest=Ct={})),exports.SSEKMS=Bt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.KeyId&&{KeyId:Ni.SENSITIVE_STRING})}}(Bt||(exports.SSEKMS=Bt={})),exports.SSES3=yt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(yt||(exports.SSES3=yt={})),exports.InventoryEncryption=qt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.SSEKMS&&{SSEKMS:Bt.filterSensitiveLog(t.SSEKMS)})}}(qt||(exports.InventoryEncryption=qt={})),exports.InventoryS3BucketDestination=dt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.Encryption&&{Encryption:qt.filterSensitiveLog(t.Encryption)})}}(dt||(exports.InventoryS3BucketDestination=dt={})),exports.InventoryDestination=bt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.S3BucketDestination&&{S3BucketDestination:dt.filterSensitiveLog(t.S3BucketDestination)})}}(bt||(exports.InventoryDestination=bt={})),exports.InventoryFilter=Gt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Gt||(exports.InventoryFilter=Gt={})),exports.InventorySchedule=Et,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Et||(exports.InventorySchedule=Et={})),exports.InventoryConfiguration=It,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.Destination&&{Destination:bt.filterSensitiveLog(t.Destination)})}}(It||(exports.InventoryConfiguration=It={})),exports.GetBucketInventoryConfigurationOutput=Pt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.InventoryConfiguration&&{InventoryConfiguration:It.filterSensitiveLog(t.InventoryConfiguration)})}}(Pt||(exports.GetBucketInventoryConfigurationOutput=Pt={})),exports.GetBucketInventoryConfigurationRequest=Tt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Tt||(exports.GetBucketInventoryConfigurationRequest=Tt={})),exports.LifecycleExpiration=jt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(jt||(exports.LifecycleExpiration=jt={})),exports.LifecycleRuleAndOperator=At,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(At||(exports.LifecycleRuleAndOperator=At={})),exports.LifecycleRuleFilter=Mt,function(t){t.visit=function(t,e){return void 0!==t.Prefix?e.Prefix(t.Prefix):void 0!==t.Tag?e.Tag(t.Tag):void 0!==t.And?e.And(t.And):e._(t.$unknown[0],t.$unknown[1])},t.filterSensitiveLog=function(t){var e;return void 0!==t.Prefix?{Prefix:t.Prefix}:void 0!==t.Tag?{Tag:Z.filterSensitiveLog(t.Tag)}:void 0!==t.And?{And:At.filterSensitiveLog(t.And)}:void 0!==t.$unknown?((e={})[t.$unknown[0]]="UNKNOWN",e):void 0}}(Mt||(exports.LifecycleRuleFilter=Mt={})),exports.NoncurrentVersionExpiration=Dt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Dt||(exports.NoncurrentVersionExpiration=Dt={})),exports.NoncurrentVersionTransition=Nt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Nt||(exports.NoncurrentVersionTransition=Nt={})),exports.Transition=Kt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Kt||(exports.Transition=Kt={})),exports.LifecycleRule=mt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.Filter&&{Filter:Mt.filterSensitiveLog(t.Filter)})}}(mt||(exports.LifecycleRule=mt={})),exports.GetBucketLifecycleConfigurationOutput=Vt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.Rules&&{Rules:t.Rules.map(function(t){return mt.filterSensitiveLog(t)})})}}(Vt||(exports.GetBucketLifecycleConfigurationOutput=Vt={})),exports.GetBucketLifecycleConfigurationRequest=Ft,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ft||(exports.GetBucketLifecycleConfigurationRequest=Ft={})),exports.GetBucketLocationOutput=wt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(wt||(exports.GetBucketLocationOutput=wt={})),exports.GetBucketLocationRequest=Ut,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ut||(exports.GetBucketLocationRequest=Ut={})),exports.TargetGrant=ht,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ht||(exports.TargetGrant=ht={})),exports.LoggingEnabled=Ht,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ht||(exports.LoggingEnabled=Ht={})),exports.GetBucketLoggingOutput=Wt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Wt||(exports.GetBucketLoggingOutput=Wt={})),exports.GetBucketLoggingRequest=$t,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}($t||(exports.GetBucketLoggingRequest=$t={})),exports.MetricsAndOperator=Jt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Jt||(exports.MetricsAndOperator=Jt={})),exports.MetricsFilter=Qt,function(t){t.visit=function(t,e){return void 0!==t.Prefix?e.Prefix(t.Prefix):void 0!==t.Tag?e.Tag(t.Tag):void 0!==t.And?e.And(t.And):e._(t.$unknown[0],t.$unknown[1])},t.filterSensitiveLog=function(t){var e;return void 0!==t.Prefix?{Prefix:t.Prefix}:void 0!==t.Tag?{Tag:Z.filterSensitiveLog(t.Tag)}:void 0!==t.And?{And:Jt.filterSensitiveLog(t.And)}:void 0!==t.$unknown?((e={})[t.$unknown[0]]="UNKNOWN",e):void 0}}(Qt||(exports.MetricsFilter=Qt={})),exports.MetricsConfiguration=Yt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.Filter&&{Filter:Qt.filterSensitiveLog(t.Filter)})}}(Yt||(exports.MetricsConfiguration=Yt={})),exports.GetBucketMetricsConfigurationOutput=zt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.MetricsConfiguration&&{MetricsConfiguration:Yt.filterSensitiveLog(t.MetricsConfiguration)})}}(zt||(exports.GetBucketMetricsConfigurationOutput=zt={})),exports.GetBucketMetricsConfigurationRequest=Xt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Xt||(exports.GetBucketMetricsConfigurationRequest=Xt={})),exports.GetBucketNotificationConfigurationRequest=Zt,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Zt||(exports.GetBucketNotificationConfigurationRequest=Zt={})),exports.FilterRule=te,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(te||(exports.FilterRule=te={})),exports.S3KeyFilter=ee,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ee||(exports.S3KeyFilter=ee={})),exports.NotificationConfigurationFilter=ne,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ne||(exports.NotificationConfigurationFilter=ne={})),exports.LambdaFunctionConfiguration=ie,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ie||(exports.LambdaFunctionConfiguration=ie={})),exports.QueueConfiguration=oe,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(oe||(exports.QueueConfiguration=oe={})),exports.TopicConfiguration=re,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(re||(exports.TopicConfiguration=re={})),exports.NotificationConfiguration=se,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(se||(exports.NotificationConfiguration=se={})),exports.OwnershipControlsRule=ue,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ue||(exports.OwnershipControlsRule=ue={})),exports.OwnershipControls=ce,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ce||(exports.OwnershipControls=ce={})),exports.GetBucketOwnershipControlsOutput=pe,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(pe||(exports.GetBucketOwnershipControlsOutput=pe={})),exports.GetBucketOwnershipControlsRequest=fe,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(fe||(exports.GetBucketOwnershipControlsRequest=fe={})),exports.GetBucketPolicyOutput=ge,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ge||(exports.GetBucketPolicyOutput=ge={})),exports.GetBucketPolicyRequest=ae,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ae||(exports.GetBucketPolicyRequest=ae={})),exports.PolicyStatus=le,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(le||(exports.PolicyStatus=le={})),exports.GetBucketPolicyStatusOutput=xe,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(xe||(exports.GetBucketPolicyStatusOutput=xe={})),exports.GetBucketPolicyStatusRequest=_e,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(_e||(exports.GetBucketPolicyStatusRequest=_e={})),exports.DeleteMarkerReplication=Se,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Se||(exports.DeleteMarkerReplication=Se={})),exports.EncryptionConfiguration=Le,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Le||(exports.EncryptionConfiguration=Le={})),exports.ReplicationTimeValue=Re,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Re||(exports.ReplicationTimeValue=Re={})),exports.Metrics=ve,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ve||(exports.Metrics=ve={})),exports.ReplicationTime=Oe,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Oe||(exports.ReplicationTime=Oe={})),exports.Destination=ke,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ke||(exports.Destination=ke={})),exports.ExistingObjectReplication=Ce,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ce||(exports.ExistingObjectReplication=Ce={})),exports.ReplicationRuleAndOperator=Be,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Be||(exports.ReplicationRuleAndOperator=Be={})),exports.ReplicationRuleFilter=ye,function(t){t.visit=function(t,e){return void 0!==t.Prefix?e.Prefix(t.Prefix):void 0!==t.Tag?e.Tag(t.Tag):void 0!==t.And?e.And(t.And):e._(t.$unknown[0],t.$unknown[1])},t.filterSensitiveLog=function(t){var e;return void 0!==t.Prefix?{Prefix:t.Prefix}:void 0!==t.Tag?{Tag:Z.filterSensitiveLog(t.Tag)}:void 0!==t.And?{And:Be.filterSensitiveLog(t.And)}:void 0!==t.$unknown?((e={})[t.$unknown[0]]="UNKNOWN",e):void 0}}(ye||(exports.ReplicationRuleFilter=ye={})),exports.ReplicaModifications=qe,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(qe||(exports.ReplicaModifications=qe={})),exports.SseKmsEncryptedObjects=de,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(de||(exports.SseKmsEncryptedObjects=de={})),exports.SourceSelectionCriteria=be,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(be||(exports.SourceSelectionCriteria=be={})),exports.ReplicationRule=Ge,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.Filter&&{Filter:ye.filterSensitiveLog(t.Filter)})}}(Ge||(exports.ReplicationRule=Ge={})),exports.ReplicationConfiguration=Ee,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.Rules&&{Rules:t.Rules.map(function(t){return Ge.filterSensitiveLog(t)})})}}(Ee||(exports.ReplicationConfiguration=Ee={})),exports.GetBucketReplicationOutput=Ie,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.ReplicationConfiguration&&{ReplicationConfiguration:Ee.filterSensitiveLog(t.ReplicationConfiguration)})}}(Ie||(exports.GetBucketReplicationOutput=Ie={})),exports.GetBucketReplicationRequest=Pe,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Pe||(exports.GetBucketReplicationRequest=Pe={})),exports.GetBucketRequestPaymentOutput=Te,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Te||(exports.GetBucketRequestPaymentOutput=Te={})),exports.GetBucketRequestPaymentRequest=je,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(je||(exports.GetBucketRequestPaymentRequest=je={})),exports.GetBucketTaggingOutput=Ae,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ae||(exports.GetBucketTaggingOutput=Ae={})),exports.GetBucketTaggingRequest=Me,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Me||(exports.GetBucketTaggingRequest=Me={})),exports.GetBucketVersioningOutput=De,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(De||(exports.GetBucketVersioningOutput=De={})),exports.GetBucketVersioningRequest=Ne,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ne||(exports.GetBucketVersioningRequest=Ne={})),exports.ErrorDocument=Ke,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ke||(exports.ErrorDocument=Ke={})),exports.IndexDocument=me,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(me||(exports.IndexDocument=me={})),exports.RedirectAllRequestsTo=Ve,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ve||(exports.RedirectAllRequestsTo=Ve={})),exports.Condition=Fe,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Fe||(exports.Condition=Fe={})),exports.Redirect=we,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(we||(exports.Redirect=we={})),exports.RoutingRule=Ue,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ue||(exports.RoutingRule=Ue={})),exports.GetBucketWebsiteOutput=he,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(he||(exports.GetBucketWebsiteOutput=he={})),exports.GetBucketWebsiteRequest=He,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(He||(exports.GetBucketWebsiteRequest=He={})),exports.GetObjectOutput=We,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:Ni.SENSITIVE_STRING})}}(We||(exports.GetObjectOutput=We={})),exports.GetObjectRequest=$e,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.SSECustomerKey&&{SSECustomerKey:Ni.SENSITIVE_STRING})}}($e||(exports.GetObjectRequest=$e={})),exports.InvalidObjectState=Je,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Je||(exports.InvalidObjectState=Je={})),exports.NoSuchKey=Qe,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Qe||(exports.NoSuchKey=Qe={})),exports.GetObjectAclOutput=Ye,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ye||(exports.GetObjectAclOutput=Ye={})),exports.GetObjectAclRequest=ze,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ze||(exports.GetObjectAclRequest=ze={})),exports.ObjectLockLegalHold=Xe,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Xe||(exports.ObjectLockLegalHold=Xe={})),exports.GetObjectLegalHoldOutput=Ze,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ze||(exports.GetObjectLegalHoldOutput=Ze={})),exports.GetObjectLegalHoldRequest=tn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(tn||(exports.GetObjectLegalHoldRequest=tn={})),exports.DefaultRetention=en,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(en||(exports.DefaultRetention=en={})),exports.ObjectLockRule=nn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(nn||(exports.ObjectLockRule=nn={})),exports.ObjectLockConfiguration=on,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(on||(exports.ObjectLockConfiguration=on={})),exports.GetObjectLockConfigurationOutput=rn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(rn||(exports.GetObjectLockConfigurationOutput=rn={})),exports.GetObjectLockConfigurationRequest=sn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(sn||(exports.GetObjectLockConfigurationRequest=sn={})),exports.ObjectLockRetention=un,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(un||(exports.ObjectLockRetention=un={})),exports.GetObjectRetentionOutput=cn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(cn||(exports.GetObjectRetentionOutput=cn={})),exports.GetObjectRetentionRequest=pn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(pn||(exports.GetObjectRetentionRequest=pn={})),exports.GetObjectTaggingOutput=fn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(fn||(exports.GetObjectTaggingOutput=fn={})),exports.GetObjectTaggingRequest=gn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(gn||(exports.GetObjectTaggingRequest=gn={})),exports.GetObjectTorrentOutput=an,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(an||(exports.GetObjectTorrentOutput=an={})),exports.GetObjectTorrentRequest=ln,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ln||(exports.GetObjectTorrentRequest=ln={})),exports.PublicAccessBlockConfiguration=xn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(xn||(exports.PublicAccessBlockConfiguration=xn={})),exports.GetPublicAccessBlockOutput=_n,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(_n||(exports.GetPublicAccessBlockOutput=_n={})),exports.GetPublicAccessBlockRequest=Sn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Sn||(exports.GetPublicAccessBlockRequest=Sn={})),exports.HeadBucketRequest=Ln,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ln||(exports.HeadBucketRequest=Ln={})),exports.NoSuchBucket=Rn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Rn||(exports.NoSuchBucket=Rn={})),exports.HeadObjectOutput=vn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:Ni.SENSITIVE_STRING})}}(vn||(exports.HeadObjectOutput=vn={})),exports.HeadObjectRequest=On,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.SSECustomerKey&&{SSECustomerKey:Ni.SENSITIVE_STRING})}}(On||(exports.HeadObjectRequest=On={})),exports.ListBucketAnalyticsConfigurationsOutput=kn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.AnalyticsConfigurationList&&{AnalyticsConfigurationList:t.AnalyticsConfigurationList.map(function(t){return st.filterSensitiveLog(t)})})}}(kn||(exports.ListBucketAnalyticsConfigurationsOutput=kn={})),exports.ListBucketAnalyticsConfigurationsRequest=Cn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Cn||(exports.ListBucketAnalyticsConfigurationsRequest=Cn={})),exports.ListBucketIntelligentTieringConfigurationsOutput=Bn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Bn||(exports.ListBucketIntelligentTieringConfigurationsOutput=Bn={})),exports.ListBucketIntelligentTieringConfigurationsRequest=yn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(yn||(exports.ListBucketIntelligentTieringConfigurationsRequest=yn={})),exports.ListBucketInventoryConfigurationsOutput=qn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.InventoryConfigurationList&&{InventoryConfigurationList:t.InventoryConfigurationList.map(function(t){return It.filterSensitiveLog(t)})})}}(qn||(exports.ListBucketInventoryConfigurationsOutput=qn={})),exports.ListBucketInventoryConfigurationsRequest=dn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(dn||(exports.ListBucketInventoryConfigurationsRequest=dn={})),exports.ListBucketMetricsConfigurationsOutput=bn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.MetricsConfigurationList&&{MetricsConfigurationList:t.MetricsConfigurationList.map(function(t){return Yt.filterSensitiveLog(t)})})}}(bn||(exports.ListBucketMetricsConfigurationsOutput=bn={})),exports.ListBucketMetricsConfigurationsRequest=Gn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Gn||(exports.ListBucketMetricsConfigurationsRequest=Gn={})),exports.Bucket=En,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(En||(exports.Bucket=En={})),exports.ListBucketsOutput=In,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(In||(exports.ListBucketsOutput=In={})),exports.CommonPrefix=Pn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Pn||(exports.CommonPrefix=Pn={})),exports.Initiator=Tn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Tn||(exports.Initiator=Tn={})),exports.MultipartUpload=jn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(jn||(exports.MultipartUpload=jn={})),exports.ListMultipartUploadsOutput=An,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(An||(exports.ListMultipartUploadsOutput=An={})),exports.ListMultipartUploadsRequest=Mn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Mn||(exports.ListMultipartUploadsRequest=Mn={})),exports._Object=Dn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Dn||(exports._Object=Dn={})),exports.ListObjectsOutput=Nn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Nn||(exports.ListObjectsOutput=Nn={})),exports.ListObjectsRequest=Kn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Kn||(exports.ListObjectsRequest=Kn={})),exports.ListObjectsV2Output=mn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(mn||(exports.ListObjectsV2Output=mn={})),exports.ListObjectsV2Request=Vn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Vn||(exports.ListObjectsV2Request=Vn={})),exports.DeleteMarkerEntry=Fn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Fn||(exports.DeleteMarkerEntry=Fn={})),exports.ObjectVersion=wn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(wn||(exports.ObjectVersion=wn={})),exports.ListObjectVersionsOutput=Un,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Un||(exports.ListObjectVersionsOutput=Un={})),exports.ListObjectVersionsRequest=hn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(hn||(exports.ListObjectVersionsRequest=hn={})),exports.Part=Hn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Hn||(exports.Part=Hn={})),exports.ListPartsOutput=Wn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Wn||(exports.ListPartsOutput=Wn={})),exports.ListPartsRequest=$n,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}($n||(exports.ListPartsRequest=$n={})),exports.PutBucketAccelerateConfigurationRequest=Jn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Jn||(exports.PutBucketAccelerateConfigurationRequest=Jn={})),exports.PutBucketAclRequest=Qn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Qn||(exports.PutBucketAclRequest=Qn={})),exports.PutBucketAnalyticsConfigurationRequest=Yn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.AnalyticsConfiguration&&{AnalyticsConfiguration:st.filterSensitiveLog(t.AnalyticsConfiguration)})}}(Yn||(exports.PutBucketAnalyticsConfigurationRequest=Yn={})),exports.CORSConfiguration=zn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(zn||(exports.CORSConfiguration=zn={})),exports.PutBucketCorsRequest=Xn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Xn||(exports.PutBucketCorsRequest=Xn={})),exports.PutBucketEncryptionRequest=Zn,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:xt.filterSensitiveLog(t.ServerSideEncryptionConfiguration)})}}(Zn||(exports.PutBucketEncryptionRequest=Zn={})),exports.PutBucketIntelligentTieringConfigurationRequest=ti,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ti||(exports.PutBucketIntelligentTieringConfigurationRequest=ti={})),exports.PutBucketInventoryConfigurationRequest=ei,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.InventoryConfiguration&&{InventoryConfiguration:It.filterSensitiveLog(t.InventoryConfiguration)})}}(ei||(exports.PutBucketInventoryConfigurationRequest=ei={})),exports.BucketLifecycleConfiguration=ni,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.Rules&&{Rules:t.Rules.map(function(t){return mt.filterSensitiveLog(t)})})}}(ni||(exports.BucketLifecycleConfiguration=ni={})),exports.PutBucketLifecycleConfigurationRequest=ii,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.LifecycleConfiguration&&{LifecycleConfiguration:ni.filterSensitiveLog(t.LifecycleConfiguration)})}}(ii||(exports.PutBucketLifecycleConfigurationRequest=ii={})),exports.BucketLoggingStatus=oi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(oi||(exports.BucketLoggingStatus=oi={})),exports.PutBucketLoggingRequest=ri,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ri||(exports.PutBucketLoggingRequest=ri={})),exports.PutBucketMetricsConfigurationRequest=si,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.MetricsConfiguration&&{MetricsConfiguration:Yt.filterSensitiveLog(t.MetricsConfiguration)})}}(si||(exports.PutBucketMetricsConfigurationRequest=si={})),exports.PutBucketNotificationConfigurationRequest=ui,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ui||(exports.PutBucketNotificationConfigurationRequest=ui={})),exports.PutBucketOwnershipControlsRequest=ci,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ci||(exports.PutBucketOwnershipControlsRequest=ci={})),exports.PutBucketPolicyRequest=pi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(pi||(exports.PutBucketPolicyRequest=pi={})),exports.PutBucketReplicationRequest=fi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.ReplicationConfiguration&&{ReplicationConfiguration:Ee.filterSensitiveLog(t.ReplicationConfiguration)})}}(fi||(exports.PutBucketReplicationRequest=fi={})),exports.RequestPaymentConfiguration=gi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(gi||(exports.RequestPaymentConfiguration=gi={})),exports.PutBucketRequestPaymentRequest=ai,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ai||(exports.PutBucketRequestPaymentRequest=ai={})),exports.Tagging=li,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(li||(exports.Tagging=li={})),exports.PutBucketTaggingRequest=xi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(xi||(exports.PutBucketTaggingRequest=xi={})),exports.VersioningConfiguration=_i,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(_i||(exports.VersioningConfiguration=_i={})),exports.PutBucketVersioningRequest=Si,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Si||(exports.PutBucketVersioningRequest=Si={})),exports.WebsiteConfiguration=Li,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Li||(exports.WebsiteConfiguration=Li={})),exports.PutBucketWebsiteRequest=Ri,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ri||(exports.PutBucketWebsiteRequest=Ri={})),exports.PutObjectOutput=vi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)((0,Di.__assign)({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:Ni.SENSITIVE_STRING}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ni.SENSITIVE_STRING})}}(vi||(exports.PutObjectOutput=vi={})),exports.PutObjectRequest=Oi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)((0,Di.__assign)((0,Di.__assign)({},t),t.SSECustomerKey&&{SSECustomerKey:Ni.SENSITIVE_STRING}),t.SSEKMSKeyId&&{SSEKMSKeyId:Ni.SENSITIVE_STRING}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ni.SENSITIVE_STRING})}}(Oi||(exports.PutObjectRequest=Oi={})),exports.PutObjectAclOutput=ki,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ki||(exports.PutObjectAclOutput=ki={})),exports.PutObjectAclRequest=Ci,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ci||(exports.PutObjectAclRequest=Ci={})),exports.PutObjectLegalHoldOutput=Bi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Bi||(exports.PutObjectLegalHoldOutput=Bi={})),exports.PutObjectLegalHoldRequest=yi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(yi||(exports.PutObjectLegalHoldRequest=yi={})),exports.PutObjectLockConfigurationOutput=qi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(qi||(exports.PutObjectLockConfigurationOutput=qi={})),exports.PutObjectLockConfigurationRequest=di,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(di||(exports.PutObjectLockConfigurationRequest=di={})),exports.PutObjectRetentionOutput=bi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(bi||(exports.PutObjectRetentionOutput=bi={})),exports.PutObjectRetentionRequest=Gi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Gi||(exports.PutObjectRetentionRequest=Gi={})),exports.PutObjectTaggingOutput=Ei,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ei||(exports.PutObjectTaggingOutput=Ei={})),exports.PutObjectTaggingRequest=Ii,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ii||(exports.PutObjectTaggingRequest=Ii={})),exports.PutPublicAccessBlockRequest=Pi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Pi||(exports.PutPublicAccessBlockRequest=Pi={})),exports.ObjectAlreadyInActiveTierError=Ti,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ti||(exports.ObjectAlreadyInActiveTierError=Ti={})),exports.RestoreObjectOutput=ji,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(ji||(exports.RestoreObjectOutput=ji={})),exports.GlacierJobParameters=Ai,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)({},t)}}(Ai||(exports.GlacierJobParameters=Ai={})),exports.Encryption=Mi,function(t){t.filterSensitiveLog=function(t){return(0,Di.__assign)((0,Di.__assign)({},t),t.KMSKeyId&&{KMSKeyId:Ni.SENSITIVE_STRING})}}(Mi||(exports.Encryption=Mi={}));
},{"tslib":"CvJj","@aws-sdk/smithy-client":"pooH"}],"x6F4":[function(require,module,exports) {
"use strict";function e(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.escapeAttribute=e;
},{}],"zr1w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.XmlNode=void 0;var t=require("tslib"),e=require("./escape-attribute"),r=function(){function r(t,e){void 0===e&&(e=[]),this.name=t,this.children=e,this.attributes={}}return r.prototype.withName=function(t){return this.name=t,this},r.prototype.addAttribute=function(t,e){return this.attributes[t]=e,this},r.prototype.addChildNode=function(t){return this.children.push(t),this},r.prototype.removeAttribute=function(t){return delete this.attributes[t],this},r.prototype.toString=function(){var r,i,n=Boolean(this.children.length),o="<"+this.name,u=this.attributes;try{for(var s=(0,t.__values)(Object.keys(u)),a=s.next();!a.done;a=s.next()){var h=a.value,l=u[h];null!=l&&(o+=" "+h+'="'+(0,e.escapeAttribute)(""+l)+'"')}}catch(c){r={error:c}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o+(n?">"+this.children.map(function(t){return t.toString()}).join("")+"</"+this.name+">":"/>")},r}();exports.XmlNode=r;
},{"tslib":"G5GG","./escape-attribute":"x6F4"}],"IbVM":[function(require,module,exports) {
"use strict";function e(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.escapeElement=e;
},{}],"ttZD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.XmlText=void 0;var e=require("./escape-element"),t=function(){function t(e){this.value=e}return t.prototype.toString=function(){return(0,e.escapeElement)(""+this.value)},t}();exports.XmlText=t;
},{"./escape-element":"IbVM"}],"uCwe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./XmlNode");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./XmlText");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});
},{"./XmlNode":"zr1w","./XmlText":"ttZD"}],"unKm":[function(require,module,exports) {
"use strict";const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",e=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",u="["+t+"]["+e+"]*",n=new RegExp("^"+u+"$"),r=function(t,e){const u=[];let n=e.exec(t);for(;n;){const r=[],o=n.length;for(let t=0;t<o;t++)r.push(n[t]);u.push(r),n=e.exec(t)}return u},o=function(t){const e=n.exec(t);return!(null==e)};exports.isExist=function(t){return void 0!==t},exports.isEmptyObject=function(t){return 0===Object.keys(t).length},exports.merge=function(t,e,u){if(e){const n=Object.keys(e),r=n.length;for(let o=0;o<r;o++)t[n[o]]="strict"===u?[e[n[o]]]:e[n[o]]}},exports.getValue=function(t){return exports.isExist(t)?t:""},exports.buildOptions=function(t,e,u){var n={};if(!t)return e;for(let r=0;r<u.length;r++)void 0!==t[u[r]]?n[u[r]]=t[u[r]]:n[u[r]]=e[u[r]];return n},exports.isTagNameInArrayMode=function(t,e,u){return!1!==e&&(e instanceof RegExp?e.test(t):"function"==typeof e?!!e(t,u):"strict"===e)},exports.isName=o,exports.getAllMatches=r,exports.nameRegexp=u;
},{}],"sBcP":[function(require,module,exports) {
"use strict";const t=require("./util"),a=function(e,r,i){const s={};if((!e.child||t.isEmptyObject(e.child))&&(!e.attrsMap||t.isEmptyObject(e.attrsMap)))return t.isExist(e.val)?e.val:"";if(t.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==r.cdataPositionChar)){const a=t.isTagNameInArrayMode(e.tagname,r.arrayMode,i);s[r.textNodeName]=a?[e.val]:e.val}t.merge(s,e.attrsMap,r.arrayMode);const o=Object.keys(e.child);for(let c=0;c<o.length;c++){const l=o[c];if(e.child[l]&&e.child[l].length>1){s[l]=[];for(let t in e.child[l])e.child[l].hasOwnProperty(t)&&s[l].push(a(e.child[l][t],r,l))}else{const o=a(e.child[l][0],r,l),c=!0===r.arrayMode&&"object"==typeof o||t.isTagNameInArrayMode(l,r.arrayMode,i);s[l]=c?[o]:o}}return s};exports.convertToJson=a;
},{"./util":"unKm"}],"GD7g":[function(require,module,exports) {
"use strict";module.exports=function(t,i,a){this.tagname=t,this.parent=i,this.child={},this.attrsMap={},this.val=a,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}};
},{}],"NOxM":[function(require,module,exports) {
"use strict";const e=require("./util"),t=require("./util").buildOptions,a=require("./xmlNode"),r="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,e.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const s={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};exports.defaultOptions=s;const n=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function o(e,t,a){return t&&(a.trimValues&&(t=t.trim()),t=i(t=a.tagValueProcessor(t,e),a.parseNodeValue,a.parseTrueNumberOnly)),t}function l(e,t){if(t.ignoreNameSpace){const t=e.split(":"),a="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=a+t[1])}return e}function i(t,a,r){if(a&&"string"==typeof t){let e;return""===t.trim()||isNaN(t)?e="true"===t||"false"!==t&&t:(-1!==t.indexOf("0x")?e=Number.parseInt(t,16):-1!==t.indexOf(".")?(e=Number.parseFloat(t),t=t.replace(/\.?0+$/,"")):e=Number.parseInt(t,10),r&&(e=String(e)===t?e:t)),e}return e.isExist(t)?t:""}exports.props=n;const u=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function c(t,a){if(!a.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");const r=e.getAllMatches(t,u),s=r.length,n={};for(let e=0;e<s;e++){const t=l(r[e][1],a);t.length&&(void 0!==r[e][4]?(a.trimValues&&(r[e][4]=r[e][4].trim()),r[e][4]=a.attrValueProcessor(r[e][4],t),n[a.attributeNamePrefix+t]=i(r[e][4],a.parseAttributeValue,a.parseTrueNumberOnly)):a.allowBooleanAttributes&&(n[a.attributeNamePrefix+t]=!0))}if(!Object.keys(n).length)return;if(a.attrNodeName){const e={};return e[a.attrNodeName]=n,e}return n}}const d=function(r,l){r=r.replace(/\r\n?/g,"\n"),l=t(l,s,n);const i=new a("!xml");let u=i,d="";for(let t=0;t<r.length;t++){if("<"===r[t])if("/"===r[t+1]){const a=p(r,">",t,"Closing Tag is not closed.");let s=r.substring(t+2,a).trim();if(l.ignoreNameSpace){const e=s.indexOf(":");-1!==e&&(s=s.substr(e+1))}u&&(u.val?u.val=e.getValue(u.val)+""+o(s,d,l):u.val=o(s,d,l)),l.stopNodes.length&&l.stopNodes.includes(u.tagname)&&(u.child=[],null==u.attrsMap&&(u.attrsMap={}),u.val=r.substr(u.startIndex+1,t-u.startIndex-1)),u=u.parent,d="",t=a}else if("?"===r[t+1])t=p(r,"?>",t,"Pi Tag is not closed.");else if("!--"===r.substr(t+1,3))t=p(r,"--\x3e",t,"Comment is not closed.");else if("!D"===r.substr(t+1,2)){const e=p(r,">",t,"DOCTYPE is not closed.");t=r.substring(t,e).indexOf("[")>=0?r.indexOf("]>",t)+1:e}else if("!["===r.substr(t+1,2)){const s=p(r,"]]>",t,"CDATA is not closed.")-2,n=r.substring(t+9,s);if(d&&(u.val=e.getValue(u.val)+""+o(u.tagname,d,l),d=""),l.cdataTagName){const t=new a(l.cdataTagName,u,n);u.addChild(t),u.val=e.getValue(u.val)+l.cdataPositionChar,n&&(t.val=n)}else u.val=(u.val||"")+(n||"");t=s+2}else{const s=g(r,t+1);let n=s.data;const i=s.index,p=n.indexOf(" ");let N=n;if(-1!==p&&(N=n.substr(0,p).replace(/\s\s*$/,""),n=n.substr(p+1)),l.ignoreNameSpace){const e=N.indexOf(":");-1!==e&&(N=N.substr(e+1))}if(u&&d&&"!xml"!==u.tagname&&(u.val=e.getValue(u.val)+""+o(u.tagname,d,l)),n.length>0&&n.lastIndexOf("/")===n.length-1){n="/"===N[N.length-1]?N=N.substr(0,N.length-1):n.substr(0,n.length-1);const e=new a(N,u,"");N!==n&&(e.attrsMap=c(n,l)),u.addChild(e)}else{const e=new a(N,u);l.stopNodes.length&&l.stopNodes.includes(e.tagname)&&(e.startIndex=i),N!==n&&(e.attrsMap=c(n,l)),u.addChild(e),u=e}d="",t=i}else d+=r[t]}return i};function g(e,t){let a,r="";for(let s=t;s<e.length;s++){let t=e[s];if(a)t===a&&(a="");else if('"'===t||"'"===t)a=t;else{if(">"===t)return{data:r,index:s};"\t"===t&&(t=" ")}r+=t}}function p(e,t,a,r){const s=e.indexOf(t,a);if(-1===s)throw new Error(r);return s+t.length-1}exports.getTraversalObj=d;
},{"./util":"unKm","./xmlNode":"GD7g"}],"p0Cs":[function(require,module,exports) {
"use strict";const e=require("./util"),t={allowBooleanAttributes:!1},n=["allowBooleanAttributes"];function r(e,t){for(var n=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var r=e.substr(n,t-n);if(t>5&&"xml"===r)return c("InvalidXml","XML declaration allowed only at the start of the document.",v(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function i(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&0===--n)break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}exports.validate=function(l,a){a=e.buildOptions(a,t,n);const s=[];let u=!1,d=!1;"\ufeff"===l[0]&&(l=l.substr(1));for(let e=0;e<l.length;e++)if("<"===l[e]&&"?"===l[e+1]){if((e=r(l,e+=2)).err)return e}else{if("<"!==l[e]){if(" "===l[e]||"\t"===l[e]||"\n"===l[e]||"\r"===l[e])continue;return c("InvalidChar","char '"+l[e]+"' is not expected.",v(l,e))}if("!"===l[++e]){e=i(l,e);continue}{let t=!1;"/"===l[e]&&(t=!0,e++);let n="";for(;e<l.length&&">"!==l[e]&&" "!==l[e]&&"\t"!==l[e]&&"\n"!==l[e]&&"\r"!==l[e];e++)n+=l[e];if("/"===(n=n.trim())[n.length-1]&&(n=n.substring(0,n.length-1),e--),!h(n)){let t;return c("InvalidTag",t=0===n.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+n+"' is an invalid name.",v(l,e))}const b=o(l,e);if(!1===b)return c("InvalidAttr","Attributes for '"+n+"' have open quote.",v(l,e));let p=b.value;if(e=b.index,"/"===p[p.length-1]){const t=f(p=p.substring(0,p.length-1),a);if(!0!==t)return c(t.err.code,t.err.msg,v(l,e-p.length+t.err.line));u=!0}else if(t){if(!b.tagClosed)return c("InvalidTag","Closing tag '"+n+"' doesn't have proper closing.",v(l,e));if(p.trim().length>0)return c("InvalidTag","Closing tag '"+n+"' can't have attributes or invalid starting.",v(l,e));{const t=s.pop();if(n!==t)return c("InvalidTag","Closing tag '"+t+"' is expected inplace of '"+n+"'.",v(l,e));0==s.length&&(d=!0)}}else{const t=f(p,a);if(!0!==t)return c(t.err.code,t.err.msg,v(l,e-p.length+t.err.line));if(!0===d)return c("InvalidXml","Multiple possible root nodes found.",v(l,e));s.push(n),u=!0}for(e++;e<l.length;e++)if("<"===l[e]){if("!"===l[e+1]){e=i(l,++e);continue}if("?"!==l[e+1])break;if((e=r(l,++e)).err)return e}else if("&"===l[e]){const t=g(l,e);if(-1==t)return c("InvalidChar","char '&' is not expected.",v(l,e));e=t}"<"===l[e]&&e--}}return u?!(s.length>0)||c("InvalidXml","Invalid '"+JSON.stringify(s,null,4).replace(/\r?\n/g,"")+"' found.",1):c("InvalidXml","Start tag expected.",1)};var l='"',a="'";function o(e,t){let n="",r="",i=!1;for(;t<e.length;t++){if(e[t]===l||e[t]===a)if(""===r)r=e[t];else{if(r!==e[t])continue;r=""}else if(">"===e[t]&&""===r){i=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:i}}const s=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function f(t,n){const r=e.getAllMatches(t,s),i={};for(let e=0;e<r.length;e++){if(0===r[e][1].length)return c("InvalidAttr","Attribute '"+r[e][2]+"' has no space in starting.",b(t,r[e][0]));if(void 0===r[e][3]&&!n.allowBooleanAttributes)return c("InvalidAttr","boolean attribute '"+r[e][2]+"' is not allowed.",b(t,r[e][0]));const l=r[e][2];if(!d(l))return c("InvalidAttr","Attribute '"+l+"' is an invalid name.",b(t,r[e][0]));if(i.hasOwnProperty(l))return c("InvalidAttr","Attribute '"+l+"' is repeated.",b(t,r[e][0]));i[l]=1}return!0}function u(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}function g(e,t){if(";"===e[++t])return-1;if("#"===e[t])return u(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function c(e,t,n){return{err:{code:e,msg:t,line:n}}}function d(t){return e.isName(t)}function h(t){return e.isName(t)}function v(e,t){return e.substring(0,t).split(/\r?\n/).length}function b(e,t){return e.indexOf(t)+t.length}
},{"./util":"unKm"}],"QAkl":[function(require,module,exports) {
"use strict";const r=function(r){return String.fromCharCode(r)},t={nilChar:r(176),missingChar:r(201),nilPremitive:r(175),missingPremitive:r(200),emptyChar:r(178),emptyValue:r(177),boundryChar:r(179),objStart:r(198),arrStart:r(204),arrayEnd:r(185)},e=[t.nilChar,t.nilPremitive,t.missingChar,t.missingPremitive,t.boundryChar,t.emptyChar,t.emptyValue,t.arrayEnd,t.objStart,t.arrStart],n=function(r,e,s){if("string"==typeof e)return r&&r[0]&&void 0!==r[0].val?i(r[0].val,e):i(r,e);{const l=o(r);if(!0===l){let o="";if(Array.isArray(e)){o+=t.arrStart;const l=e[0],u=r.length;if("string"==typeof l)for(let t=0;t<u;t++){const e=i(r[t].val,l);o=a(o,e)}else for(let t=0;t<u;t++){const e=n(r[t],l,s);o=a(o,e)}o+=t.arrayEnd}else{o+=t.objStart;const i=Object.keys(e);Array.isArray(r)&&(r=r[0]);for(let t in i){const l=i[t];let u;u=!s.ignoreAttributes&&r.attrsMap&&r.attrsMap[l]?n(r.attrsMap[l],e[l],s):l===s.textNodeName?n(r.val,e[l],s):n(r.child[l],e[l],s),o=a(o,u)}}return o}return l}},i=function(r){switch(r){case void 0:return t.missingPremitive;case null:return t.nilPremitive;case"":return t.emptyValue;default:return r}},a=function(r,e){return s(e[0])||s(r[r.length-1])||(r+=t.boundryChar),r+e},s=function(r){return-1!==e.indexOf(r)};function o(r){return void 0===r?t.missingChar:null===r?t.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||t.emptyChar}const l=require("./xmlstr2xmlnode"),u=require("./util").buildOptions,c=function(r,t,e){return e=u(e,l.defaultOptions,l.props),n(r,t,e)};exports.convert2nimn=c;
},{"./xmlstr2xmlnode":"NOxM","./util":"unKm"}],"pxwy":[function(require,module,exports) {
"use strict";const t=require("./util"),e=require("./util").buildOptions,i=require("./xmlstr2xmlnode"),n=function(t,n){return(n=e(n,i.defaultOptions,i.props)).indentBy=n.indentBy||"",r(t,n,0)},r=function(e,i,n){let s="{";const o=Object.keys(e.child);for(let t=0;t<o.length;t++){var a=o[t];if(e.child[a]&&e.child[a].length>1){for(var u in s+='"'+a+'" : [ ',e.child[a])s+=r(e.child[a][u],i)+" , ";s=s.substr(0,s.length-1)+" ] "}else s+='"'+a+'" : '+r(e.child[a][0],i)+" ,"}return t.merge(s,e.attrsMap),t.isEmptyObject(s)?t.isExist(e.val)?e.val:"":(t.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==i.cdataPositionChar)&&(s+='"'+i.textNodeName+'" : '+l(e.val)),","===s[s.length-1]&&(s=s.substr(0,s.length-2)),s+"}")};function l(t){return!0!==t&&!1!==t&&isNaN(t)?'"'+t+'"':t}function s(t,e){return t.indentBy.repeat(e)}exports.convertToJsonString=n;
},{"./util":"unKm","./xmlstr2xmlnode":"NOxM"}],"R02W":[function(require,module,exports) {
"use strict";const t=require("./util").buildOptions,e={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}},i=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function s(s){this.options=t(s,e,i),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=c),this.options.cdataTagName?this.isCDATA=l:this.isCDATA=function(){return!1},this.replaceCDATAstr=o,this.replaceCDATAarr=n,this.options.format?(this.indentate=u,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=d,this.buildObjNode=r):(this.buildTextNode=h,this.buildObjNode=a),this.buildTextValNode=h,this.buildObjectNode=a}function o(t,e){return t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t?t+"<![CDATA["+e+"]]"+this.tagEndChar:t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}function n(t,e){if(t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t)return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let i in e)t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[i]+"]]>");return t+this.newLine}function a(t,e,i,s){return i&&!t.includes("<")?this.indentate(s)+"<"+e+i+">"+t+"</"+e+this.tagEndChar:this.indentate(s)+"<"+e+i+this.tagEndChar+t+this.indentate(s)+"</"+e+this.tagEndChar}function r(t,e,i,s){return""!==t?this.buildObjectNode(t,e,i,s):this.indentate(s)+"<"+e+i+"/"+this.tagEndChar}function h(t,e,i,s){return this.indentate(s)+"<"+e+i+">"+this.options.tagValueProcessor(t)+"</"+e+this.tagEndChar}function d(t,e,i,s){return""!==t?this.buildTextValNode(t,e,i,s):this.indentate(s)+"<"+e+i+"/"+this.tagEndChar}function u(t){return this.options.indentBy.repeat(t)}function c(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function l(t){return t===this.options.cdataTagName}s.prototype.parse=function(t){return this.j2x(t,0).val},s.prototype.j2x=function(t,e){let i="",s="";const o=Object.keys(t),n=o.length;for(let a=0;a<n;a++){const n=o[a];if(void 0===t[n]);else if(null===t[n])s+=this.indentate(e)+"<"+n+"/"+this.tagEndChar;else if(t[n]instanceof Date)s+=this.buildTextNode(t[n],n,"",e);else if("object"!=typeof t[n]){const o=this.isAttribute(n);o?i+=" "+o+'="'+this.options.attrValueProcessor(""+t[n])+'"':this.isCDATA(n)?t[this.options.textNodeName]?s+=this.replaceCDATAstr(t[this.options.textNodeName],t[n]):s+=this.replaceCDATAstr("",t[n]):n===this.options.textNodeName?t[this.options.cdataTagName]||(s+=this.options.tagValueProcessor(""+t[n])):s+=this.buildTextNode(t[n],n,"",e)}else if(Array.isArray(t[n]))if(this.isCDATA(n))s+=this.indentate(e),t[this.options.textNodeName]?s+=this.replaceCDATAarr(t[this.options.textNodeName],t[n]):s+=this.replaceCDATAarr("",t[n]);else{const i=t[n].length;for(let o=0;o<i;o++){const i=t[n][o];if(void 0===i);else if(null===i)s+=this.indentate(e)+"<"+n+"/"+this.tagEndChar;else if("object"==typeof i){const t=this.j2x(i,e+1);s+=this.buildObjNode(t.val,n,t.attrStr,e)}else s+=this.buildTextNode(i,n,"",e)}}else if(this.options.attrNodeName&&n===this.options.attrNodeName){const e=Object.keys(t[n]),s=e.length;for(let o=0;o<s;o++)i+=" "+e[o]+'="'+this.options.attrValueProcessor(""+t[n][e[o]])+'"'}else{const i=this.j2x(t[n],e+1);s+=this.buildObjNode(i.val,n,i.attrStr,e)}}return{attrStr:i,val:s}},module.exports=s;
},{"./util":"unKm"}],"uCul":[function(require,module,exports) {
"use strict";const o=require("./node2json"),e=require("./xmlstr2xmlnode"),r=require("./xmlstr2xmlnode"),n=require("./util").buildOptions,t=require("./validator");function s(o,e){if(o){if(console.log(e+"{"),console.log(e+'  "tagName": "'+o.tagname+'", '),o.parent&&console.log(e+'  "parent": "'+o.parent.tagname+'", '),console.log(e+'  "val": "'+o.val+'", '),console.log(e+'  "attrs": '+JSON.stringify(o.attrsMap,null,4)+", "),o.child){console.log(e+'"child": {');const r=e+e;Object.keys(o.child).forEach(function(n){const t=o.child[n];Array.isArray(t)?(console.log(e+'"'+n+'" :['),t.forEach(function(o,e){s(o,r)}),console.log(e+"],")):(console.log(e+' "'+n+'" : {'),s(t,r),console.log(e+"},"))}),console.log(e+"},")}console.log(e+"},")}}exports.parse=function(s,l,a){if(a){!0===a&&(a={});const o=t.validate(s,a);if(!0!==o)throw Error(o.err.msg)}l=n(l,r.defaultOptions,r.props);const i=e.getTraversalObj(s,l);return o.convertToJson(i,l)},exports.convertTonimn=require("../src/nimndata").convert2nimn,exports.getTraversalObj=e.getTraversalObj,exports.convertToJson=o.convertToJson,exports.convertToJsonString=require("./node2json_str").convertToJsonString,exports.validate=t.validate,exports.j2xParser=require("./json2xml"),exports.parseToNimn=function(o,e,r){return exports.convertTonimn(exports.getTraversalObj(o,r),e,r)};
},{"./node2json":"sBcP","./xmlstr2xmlnode":"NOxM","./util":"unKm","./validator":"p0Cs","../src/nimndata":"QAkl","./node2json_str":"pxwy","./json2xml":"R02W"}],"EuSE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deserializeAws_restXmlDeleteBucketEncryptionCommand=exports.deserializeAws_restXmlDeleteBucketCorsCommand=exports.deserializeAws_restXmlDeleteBucketAnalyticsConfigurationCommand=exports.deserializeAws_restXmlDeleteBucketCommand=exports.deserializeAws_restXmlCreateMultipartUploadCommand=exports.deserializeAws_restXmlCreateBucketCommand=exports.deserializeAws_restXmlCopyObjectCommand=exports.deserializeAws_restXmlCompleteMultipartUploadCommand=exports.deserializeAws_restXmlAbortMultipartUploadCommand=exports.serializeAws_restXmlUploadPartCopyCommand=exports.serializeAws_restXmlUploadPartCommand=exports.serializeAws_restXmlSelectObjectContentCommand=exports.serializeAws_restXmlRestoreObjectCommand=exports.serializeAws_restXmlPutPublicAccessBlockCommand=exports.serializeAws_restXmlPutObjectTaggingCommand=exports.serializeAws_restXmlPutObjectRetentionCommand=exports.serializeAws_restXmlPutObjectLockConfigurationCommand=exports.serializeAws_restXmlPutObjectLegalHoldCommand=exports.serializeAws_restXmlPutObjectAclCommand=exports.serializeAws_restXmlPutObjectCommand=exports.serializeAws_restXmlPutBucketWebsiteCommand=exports.serializeAws_restXmlPutBucketVersioningCommand=exports.serializeAws_restXmlPutBucketTaggingCommand=exports.serializeAws_restXmlPutBucketRequestPaymentCommand=exports.serializeAws_restXmlPutBucketReplicationCommand=exports.serializeAws_restXmlPutBucketPolicyCommand=exports.serializeAws_restXmlPutBucketOwnershipControlsCommand=exports.serializeAws_restXmlPutBucketNotificationConfigurationCommand=exports.serializeAws_restXmlPutBucketMetricsConfigurationCommand=exports.serializeAws_restXmlPutBucketLoggingCommand=exports.serializeAws_restXmlPutBucketLifecycleConfigurationCommand=exports.serializeAws_restXmlPutBucketInventoryConfigurationCommand=exports.serializeAws_restXmlPutBucketIntelligentTieringConfigurationCommand=exports.serializeAws_restXmlPutBucketEncryptionCommand=exports.serializeAws_restXmlPutBucketCorsCommand=exports.serializeAws_restXmlPutBucketAnalyticsConfigurationCommand=exports.serializeAws_restXmlPutBucketAclCommand=exports.serializeAws_restXmlPutBucketAccelerateConfigurationCommand=exports.serializeAws_restXmlListPartsCommand=exports.serializeAws_restXmlListObjectVersionsCommand=exports.serializeAws_restXmlListObjectsV2Command=exports.serializeAws_restXmlListObjectsCommand=exports.serializeAws_restXmlListMultipartUploadsCommand=exports.serializeAws_restXmlListBucketsCommand=exports.serializeAws_restXmlListBucketMetricsConfigurationsCommand=exports.serializeAws_restXmlListBucketInventoryConfigurationsCommand=exports.serializeAws_restXmlListBucketIntelligentTieringConfigurationsCommand=exports.serializeAws_restXmlListBucketAnalyticsConfigurationsCommand=exports.serializeAws_restXmlHeadObjectCommand=exports.serializeAws_restXmlHeadBucketCommand=exports.serializeAws_restXmlGetPublicAccessBlockCommand=exports.serializeAws_restXmlGetObjectTorrentCommand=exports.serializeAws_restXmlGetObjectTaggingCommand=exports.serializeAws_restXmlGetObjectRetentionCommand=exports.serializeAws_restXmlGetObjectLockConfigurationCommand=exports.serializeAws_restXmlGetObjectLegalHoldCommand=exports.serializeAws_restXmlGetObjectAclCommand=exports.serializeAws_restXmlGetObjectCommand=exports.serializeAws_restXmlGetBucketWebsiteCommand=exports.serializeAws_restXmlGetBucketVersioningCommand=exports.serializeAws_restXmlGetBucketTaggingCommand=exports.serializeAws_restXmlGetBucketRequestPaymentCommand=exports.serializeAws_restXmlGetBucketReplicationCommand=exports.serializeAws_restXmlGetBucketPolicyStatusCommand=exports.serializeAws_restXmlGetBucketPolicyCommand=exports.serializeAws_restXmlGetBucketOwnershipControlsCommand=exports.serializeAws_restXmlGetBucketNotificationConfigurationCommand=exports.serializeAws_restXmlGetBucketMetricsConfigurationCommand=exports.serializeAws_restXmlGetBucketLoggingCommand=exports.serializeAws_restXmlGetBucketLocationCommand=exports.serializeAws_restXmlGetBucketLifecycleConfigurationCommand=exports.serializeAws_restXmlGetBucketInventoryConfigurationCommand=exports.serializeAws_restXmlGetBucketIntelligentTieringConfigurationCommand=exports.serializeAws_restXmlGetBucketEncryptionCommand=exports.serializeAws_restXmlGetBucketCorsCommand=exports.serializeAws_restXmlGetBucketAnalyticsConfigurationCommand=exports.serializeAws_restXmlGetBucketAclCommand=exports.serializeAws_restXmlGetBucketAccelerateConfigurationCommand=exports.serializeAws_restXmlDeletePublicAccessBlockCommand=exports.serializeAws_restXmlDeleteObjectTaggingCommand=exports.serializeAws_restXmlDeleteObjectsCommand=exports.serializeAws_restXmlDeleteObjectCommand=exports.serializeAws_restXmlDeleteBucketWebsiteCommand=exports.serializeAws_restXmlDeleteBucketTaggingCommand=exports.serializeAws_restXmlDeleteBucketReplicationCommand=exports.serializeAws_restXmlDeleteBucketPolicyCommand=exports.serializeAws_restXmlDeleteBucketOwnershipControlsCommand=exports.serializeAws_restXmlDeleteBucketMetricsConfigurationCommand=exports.serializeAws_restXmlDeleteBucketLifecycleCommand=exports.serializeAws_restXmlDeleteBucketInventoryConfigurationCommand=exports.serializeAws_restXmlDeleteBucketIntelligentTieringConfigurationCommand=exports.serializeAws_restXmlDeleteBucketEncryptionCommand=exports.serializeAws_restXmlDeleteBucketCorsCommand=exports.serializeAws_restXmlDeleteBucketAnalyticsConfigurationCommand=exports.serializeAws_restXmlDeleteBucketCommand=exports.serializeAws_restXmlCreateMultipartUploadCommand=exports.serializeAws_restXmlCreateBucketCommand=exports.serializeAws_restXmlCopyObjectCommand=exports.serializeAws_restXmlCompleteMultipartUploadCommand=exports.serializeAws_restXmlAbortMultipartUploadCommand=void 0,exports.deserializeAws_restXmlUploadPartCopyCommand=exports.deserializeAws_restXmlUploadPartCommand=exports.deserializeAws_restXmlSelectObjectContentCommand=exports.deserializeAws_restXmlRestoreObjectCommand=exports.deserializeAws_restXmlPutPublicAccessBlockCommand=exports.deserializeAws_restXmlPutObjectTaggingCommand=exports.deserializeAws_restXmlPutObjectRetentionCommand=exports.deserializeAws_restXmlPutObjectLockConfigurationCommand=exports.deserializeAws_restXmlPutObjectLegalHoldCommand=exports.deserializeAws_restXmlPutObjectAclCommand=exports.deserializeAws_restXmlPutObjectCommand=exports.deserializeAws_restXmlPutBucketWebsiteCommand=exports.deserializeAws_restXmlPutBucketVersioningCommand=exports.deserializeAws_restXmlPutBucketTaggingCommand=exports.deserializeAws_restXmlPutBucketRequestPaymentCommand=exports.deserializeAws_restXmlPutBucketReplicationCommand=exports.deserializeAws_restXmlPutBucketPolicyCommand=exports.deserializeAws_restXmlPutBucketOwnershipControlsCommand=exports.deserializeAws_restXmlPutBucketNotificationConfigurationCommand=exports.deserializeAws_restXmlPutBucketMetricsConfigurationCommand=exports.deserializeAws_restXmlPutBucketLoggingCommand=exports.deserializeAws_restXmlPutBucketLifecycleConfigurationCommand=exports.deserializeAws_restXmlPutBucketInventoryConfigurationCommand=exports.deserializeAws_restXmlPutBucketIntelligentTieringConfigurationCommand=exports.deserializeAws_restXmlPutBucketEncryptionCommand=exports.deserializeAws_restXmlPutBucketCorsCommand=exports.deserializeAws_restXmlPutBucketAnalyticsConfigurationCommand=exports.deserializeAws_restXmlPutBucketAclCommand=exports.deserializeAws_restXmlPutBucketAccelerateConfigurationCommand=exports.deserializeAws_restXmlListPartsCommand=exports.deserializeAws_restXmlListObjectVersionsCommand=exports.deserializeAws_restXmlListObjectsV2Command=exports.deserializeAws_restXmlListObjectsCommand=exports.deserializeAws_restXmlListMultipartUploadsCommand=exports.deserializeAws_restXmlListBucketsCommand=exports.deserializeAws_restXmlListBucketMetricsConfigurationsCommand=exports.deserializeAws_restXmlListBucketInventoryConfigurationsCommand=exports.deserializeAws_restXmlListBucketIntelligentTieringConfigurationsCommand=exports.deserializeAws_restXmlListBucketAnalyticsConfigurationsCommand=exports.deserializeAws_restXmlHeadObjectCommand=exports.deserializeAws_restXmlHeadBucketCommand=exports.deserializeAws_restXmlGetPublicAccessBlockCommand=exports.deserializeAws_restXmlGetObjectTorrentCommand=exports.deserializeAws_restXmlGetObjectTaggingCommand=exports.deserializeAws_restXmlGetObjectRetentionCommand=exports.deserializeAws_restXmlGetObjectLockConfigurationCommand=exports.deserializeAws_restXmlGetObjectLegalHoldCommand=exports.deserializeAws_restXmlGetObjectAclCommand=exports.deserializeAws_restXmlGetObjectCommand=exports.deserializeAws_restXmlGetBucketWebsiteCommand=exports.deserializeAws_restXmlGetBucketVersioningCommand=exports.deserializeAws_restXmlGetBucketTaggingCommand=exports.deserializeAws_restXmlGetBucketRequestPaymentCommand=exports.deserializeAws_restXmlGetBucketReplicationCommand=exports.deserializeAws_restXmlGetBucketPolicyStatusCommand=exports.deserializeAws_restXmlGetBucketPolicyCommand=exports.deserializeAws_restXmlGetBucketOwnershipControlsCommand=exports.deserializeAws_restXmlGetBucketNotificationConfigurationCommand=exports.deserializeAws_restXmlGetBucketMetricsConfigurationCommand=exports.deserializeAws_restXmlGetBucketLoggingCommand=exports.deserializeAws_restXmlGetBucketLocationCommand=exports.deserializeAws_restXmlGetBucketLifecycleConfigurationCommand=exports.deserializeAws_restXmlGetBucketInventoryConfigurationCommand=exports.deserializeAws_restXmlGetBucketIntelligentTieringConfigurationCommand=exports.deserializeAws_restXmlGetBucketEncryptionCommand=exports.deserializeAws_restXmlGetBucketCorsCommand=exports.deserializeAws_restXmlGetBucketAnalyticsConfigurationCommand=exports.deserializeAws_restXmlGetBucketAclCommand=exports.deserializeAws_restXmlGetBucketAccelerateConfigurationCommand=exports.deserializeAws_restXmlDeletePublicAccessBlockCommand=exports.deserializeAws_restXmlDeleteObjectTaggingCommand=exports.deserializeAws_restXmlDeleteObjectsCommand=exports.deserializeAws_restXmlDeleteObjectCommand=exports.deserializeAws_restXmlDeleteBucketWebsiteCommand=exports.deserializeAws_restXmlDeleteBucketTaggingCommand=exports.deserializeAws_restXmlDeleteBucketReplicationCommand=exports.deserializeAws_restXmlDeleteBucketPolicyCommand=exports.deserializeAws_restXmlDeleteBucketOwnershipControlsCommand=exports.deserializeAws_restXmlDeleteBucketMetricsConfigurationCommand=exports.deserializeAws_restXmlDeleteBucketLifecycleCommand=exports.deserializeAws_restXmlDeleteBucketInventoryConfigurationCommand=exports.deserializeAws_restXmlDeleteBucketIntelligentTieringConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),o=require("@aws-sdk/protocol-http"),n=require("@aws-sdk/smithy-client"),r=require("@aws-sdk/xml-builder"),i=require("fast-xml-parser"),a=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({},mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)({"x-id":"AbortMultipartUpload"},void 0!==t.UploadId&&{uploadId:t.UploadId}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlAbortMultipartUploadCommand=a;var s=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)({},void 0!==t.UploadId&&{uploadId:t.UploadId}),void 0!==t.MultipartUpload&&(c=Kr(t.MultipartUpload,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"POST",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlCompleteMultipartUploadCommand=s;var d=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},mu(t.ACL)&&{"x-amz-acl":t.ACL}),mu(t.CacheControl)&&{"cache-control":t.CacheControl}),mu(t.ContentDisposition)&&{"content-disposition":t.ContentDisposition}),mu(t.ContentEncoding)&&{"content-encoding":t.ContentEncoding}),mu(t.ContentLanguage)&&{"content-language":t.ContentLanguage}),mu(t.ContentType)&&{"content-type":t.ContentType}),mu(t.CopySource)&&{"x-amz-copy-source":t.CopySource}),mu(t.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":t.CopySourceIfMatch}),mu(t.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":(0,n.dateToUtcString)(t.CopySourceIfModifiedSince).toString()}),mu(t.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":t.CopySourceIfNoneMatch}),mu(t.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":(0,n.dateToUtcString)(t.CopySourceIfUnmodifiedSince).toString()}),mu(t.Expires)&&{expires:(0,n.dateToUtcString)(t.Expires).toString()}),mu(t.GrantFullControl)&&{"x-amz-grant-full-control":t.GrantFullControl}),mu(t.GrantRead)&&{"x-amz-grant-read":t.GrantRead}),mu(t.GrantReadACP)&&{"x-amz-grant-read-acp":t.GrantReadACP}),mu(t.GrantWriteACP)&&{"x-amz-grant-write-acp":t.GrantWriteACP}),mu(t.MetadataDirective)&&{"x-amz-metadata-directive":t.MetadataDirective}),mu(t.TaggingDirective)&&{"x-amz-tagging-directive":t.TaggingDirective}),mu(t.ServerSideEncryption)&&{"x-amz-server-side-encryption":t.ServerSideEncryption}),mu(t.StorageClass)&&{"x-amz-storage-class":t.StorageClass}),mu(t.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":t.WebsiteRedirectLocation}),mu(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),mu(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),mu(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),mu(t.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":t.SSEKMSKeyId}),mu(t.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":t.SSEKMSEncryptionContext}),mu(t.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":t.BucketKeyEnabled.toString()}),mu(t.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":t.CopySourceSSECustomerAlgorithm}),mu(t.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":t.CopySourceSSECustomerKey}),mu(t.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":t.CopySourceSSECustomerKeyMD5}),mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.Tagging)&&{"x-amz-tagging":t.Tagging}),mu(t.ObjectLockMode)&&{"x-amz-object-lock-mode":t.ObjectLockMode}),mu(t.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(t.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),mu(t.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":t.ObjectLockLegalHoldStatus}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),mu(t.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":t.ExpectedSourceBucketOwner}),void 0!==t.Metadata&&Object.keys(t.Metadata).reduce(function(o,n){var r;return(0,e.__assign)((0,e.__assign)({},o),((r={})["x-amz-meta-"+n.toLowerCase()]=t.Metadata[n],r))},{})),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d={"x-id":"CopyObject"},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"PUT",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlCopyObjectCommand=d;var u=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p;return(0,e.__generator)(this,function(g){switch(g.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ACL)&&{"x-amz-acl":t.ACL}),mu(t.GrantFullControl)&&{"x-amz-grant-full-control":t.GrantFullControl}),mu(t.GrantRead)&&{"x-amz-grant-read":t.GrantRead}),mu(t.GrantReadACP)&&{"x-amz-grant-read-acp":t.GrantReadACP}),mu(t.GrantWrite)&&{"x-amz-grant-write":t.GrantWrite}),mu(t.GrantWriteACP)&&{"x-amz-grant-write-acp":t.GrantWriteACP}),mu(t.ObjectLockEnabledForBucket)&&{"x-amz-bucket-object-lock-enabled":t.ObjectLockEnabledForBucket.toString()}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0!==t.CreateBucketConfiguration&&(u=Gr(t.CreateBucketConfiguration,r),d='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),d+=u.toString()),[4,r.endpoint()];case 1:return c=g.sent(),l=c.hostname,m=c.protocol,v=void 0===m?"https":m,p=c.port,[2,new o.HttpRequest({protocol:v,hostname:l,port:p,method:"PUT",headers:i,path:a,body:d})]}})})};exports.serializeAws_restXmlCreateBucketCommand=u;var c=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},mu(t.ACL)&&{"x-amz-acl":t.ACL}),mu(t.CacheControl)&&{"cache-control":t.CacheControl}),mu(t.ContentDisposition)&&{"content-disposition":t.ContentDisposition}),mu(t.ContentEncoding)&&{"content-encoding":t.ContentEncoding}),mu(t.ContentLanguage)&&{"content-language":t.ContentLanguage}),mu(t.ContentType)&&{"content-type":t.ContentType}),mu(t.Expires)&&{expires:(0,n.dateToUtcString)(t.Expires).toString()}),mu(t.GrantFullControl)&&{"x-amz-grant-full-control":t.GrantFullControl}),mu(t.GrantRead)&&{"x-amz-grant-read":t.GrantRead}),mu(t.GrantReadACP)&&{"x-amz-grant-read-acp":t.GrantReadACP}),mu(t.GrantWriteACP)&&{"x-amz-grant-write-acp":t.GrantWriteACP}),mu(t.ServerSideEncryption)&&{"x-amz-server-side-encryption":t.ServerSideEncryption}),mu(t.StorageClass)&&{"x-amz-storage-class":t.StorageClass}),mu(t.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":t.WebsiteRedirectLocation}),mu(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),mu(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),mu(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),mu(t.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":t.SSEKMSKeyId}),mu(t.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":t.SSEKMSEncryptionContext}),mu(t.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":t.BucketKeyEnabled.toString()}),mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.Tagging)&&{"x-amz-tagging":t.Tagging}),mu(t.ObjectLockMode)&&{"x-amz-object-lock-mode":t.ObjectLockMode}),mu(t.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(t.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),mu(t.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":t.ObjectLockLegalHoldStatus}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),void 0!==t.Metadata&&Object.keys(t.Metadata).reduce(function(o,n){var r;return(0,e.__assign)((0,e.__assign)({},o),((r={})["x-amz-meta-"+n.toLowerCase()]=t.Metadata[n],r))},{})),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d={uploads:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"POST",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlCreateMultipartUploadCommand=c;var l=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m;return(0,e.__generator)(this,function(v){switch(v.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),[4,r.endpoint()];case 1:return d=v.sent(),u=d.hostname,c=d.protocol,l=void 0===c?"https":c,m=d.port,[2,new o.HttpRequest({protocol:l,hostname:u,port:m,method:"DELETE",headers:i,path:a,body:void 0})]}})})};exports.serializeAws_restXmlDeleteBucketCommand=l;var m=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({analytics:""},void 0!==t.Id&&{id:t.Id}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteBucketAnalyticsConfigurationCommand=m;var v=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={cors:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteBucketCorsCommand=v;var p=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={encryption:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteBucketEncryptionCommand=p;var g=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i={},a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({"intelligent-tiering":""},void 0!==t.Id&&{id:t.Id}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteBucketIntelligentTieringConfigurationCommand=g;var _=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({inventory:""},void 0!==t.Id&&{id:t.Id}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteBucketInventoryConfigurationCommand=_;var f=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={lifecycle:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteBucketLifecycleCommand=f;var w=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({metrics:""},void 0!==t.Id&&{id:t.Id}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteBucketMetricsConfigurationCommand=w;var h=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={ownershipControls:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteBucketOwnershipControlsCommand=h;var y=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={policy:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteBucketPolicyCommand=y;var C=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={replication:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteBucketReplicationCommand=C;var x=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={tagging:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteBucketTaggingCommand=x;var b=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={website:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteBucketWebsiteCommand=b;var k=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},mu(t.MFA)&&{"x-amz-mfa":t.MFA}),mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":t.BypassGovernanceRetention.toString()}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)({"x-id":"DeleteObject"},void 0!==t.VersionId&&{versionId:t.VersionId}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteObjectCommand=k;var E=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.MFA)&&{"x-amz-mfa":t.MFA}),mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":t.BypassGovernanceRetention.toString()}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={delete:""},void 0!==t.Delete&&(c=Qr(t.Delete,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"POST",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlDeleteObjectsCommand=E;var N=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)({tagging:""},void 0!==t.VersionId&&{versionId:t.VersionId}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeleteObjectTaggingCommand=N;var T=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={publicAccessBlock:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"DELETE",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlDeletePublicAccessBlockCommand=T;var B=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={accelerate:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketAccelerateConfigurationCommand=B;var S=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={acl:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketAclCommand=S;var P=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({analytics:"","x-id":"GetBucketAnalyticsConfiguration"},void 0!==t.Id&&{id:t.Id}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketAnalyticsConfigurationCommand=P;var A=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={cors:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketCorsCommand=A;var z=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={encryption:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketEncryptionCommand=z;var I=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i={},a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({"intelligent-tiering":"","x-id":"GetBucketIntelligentTieringConfiguration"},void 0!==t.Id&&{id:t.Id}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketIntelligentTieringConfigurationCommand=I;var X=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({inventory:"","x-id":"GetBucketInventoryConfiguration"},void 0!==t.Id&&{id:t.Id}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketInventoryConfigurationCommand=X;var M=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={lifecycle:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketLifecycleConfigurationCommand=M;var R=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={location:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketLocationCommand=R;var O=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={logging:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketLoggingCommand=O;var D=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({metrics:"","x-id":"GetBucketMetricsConfiguration"},void 0!==t.Id&&{id:t.Id}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketMetricsConfigurationCommand=D;var K=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={notification:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketNotificationConfigurationCommand=K;var j=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={ownershipControls:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketOwnershipControlsCommand=j;var H=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={policy:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketPolicyCommand=H;var U=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={policyStatus:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketPolicyStatusCommand=U;var q=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={replication:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketReplicationCommand=q;var L=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={requestPayment:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketRequestPaymentCommand=L;var $=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={tagging:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketTaggingCommand=$;var G=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={versioning:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketVersioningCommand=G;var F=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={website:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetBucketWebsiteCommand=F;var V=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},mu(t.IfMatch)&&{"if-match":t.IfMatch}),mu(t.IfModifiedSince)&&{"if-modified-since":(0,n.dateToUtcString)(t.IfModifiedSince).toString()}),mu(t.IfNoneMatch)&&{"if-none-match":t.IfNoneMatch}),mu(t.IfUnmodifiedSince)&&{"if-unmodified-since":(0,n.dateToUtcString)(t.IfUnmodifiedSince).toString()}),mu(t.Range)&&{range:t.Range}),mu(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),mu(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),mu(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({"x-id":"GetObject"},void 0!==t.ResponseCacheControl&&{"response-cache-control":t.ResponseCacheControl}),void 0!==t.ResponseContentDisposition&&{"response-content-disposition":t.ResponseContentDisposition}),void 0!==t.ResponseContentEncoding&&{"response-content-encoding":t.ResponseContentEncoding}),void 0!==t.ResponseContentLanguage&&{"response-content-language":t.ResponseContentLanguage}),void 0!==t.ResponseContentType&&{"response-content-type":t.ResponseContentType}),void 0!==t.ResponseExpires&&{"response-expires":(t.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==t.VersionId&&{versionId:t.VersionId}),void 0!==t.PartNumber&&{partNumber:t.PartNumber.toString()}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetObjectCommand=V;var W=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({},mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)({acl:""},void 0!==t.VersionId&&{versionId:t.VersionId}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetObjectAclCommand=W;var Q=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({},mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)({"legal-hold":""},void 0!==t.VersionId&&{versionId:t.VersionId}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetObjectLegalHoldCommand=Q;var J=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={"object-lock":""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetObjectLockConfigurationCommand=J;var Y=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({},mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)({retention:""},void 0!==t.VersionId&&{versionId:t.VersionId}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetObjectRetentionCommand=Y;var Z=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)({tagging:""},void 0!==t.VersionId&&{versionId:t.VersionId}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetObjectTaggingCommand=Z;var ee=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({},mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d={torrent:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetObjectTorrentCommand=ee;var te=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={publicAccessBlock:""},[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlGetPublicAccessBlockCommand=te;var oe=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m;return(0,e.__generator)(this,function(v){switch(v.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),[4,r.endpoint()];case 1:return d=v.sent(),u=d.hostname,c=d.protocol,l=void 0===c?"https":c,m=d.port,[2,new o.HttpRequest({protocol:l,hostname:u,port:m,method:"HEAD",headers:i,path:a,body:void 0})]}})})};exports.serializeAws_restXmlHeadBucketCommand=oe;var ne=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},mu(t.IfMatch)&&{"if-match":t.IfMatch}),mu(t.IfModifiedSince)&&{"if-modified-since":(0,n.dateToUtcString)(t.IfModifiedSince).toString()}),mu(t.IfNoneMatch)&&{"if-none-match":t.IfNoneMatch}),mu(t.IfUnmodifiedSince)&&{"if-unmodified-since":(0,n.dateToUtcString)(t.IfUnmodifiedSince).toString()}),mu(t.Range)&&{range:t.Range}),mu(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),mu(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),mu(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)((0,e.__assign)({},void 0!==t.VersionId&&{versionId:t.VersionId}),void 0!==t.PartNumber&&{partNumber:t.PartNumber.toString()}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"HEAD",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlHeadObjectCommand=ne;var re=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({analytics:"","x-id":"ListBucketAnalyticsConfigurations"},void 0!==t.ContinuationToken&&{"continuation-token":t.ContinuationToken}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlListBucketAnalyticsConfigurationsCommand=re;var ie=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i={},a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({"intelligent-tiering":"","x-id":"ListBucketIntelligentTieringConfigurations"},void 0!==t.ContinuationToken&&{"continuation-token":t.ContinuationToken}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlListBucketIntelligentTieringConfigurationsCommand=ie;var ae=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({inventory:"","x-id":"ListBucketInventoryConfigurations"},void 0!==t.ContinuationToken&&{"continuation-token":t.ContinuationToken}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlListBucketInventoryConfigurationsCommand=ae;var se=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({metrics:"","x-id":"ListBucketMetricsConfigurations"},void 0!==t.ContinuationToken&&{"continuation-token":t.ContinuationToken}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlListBucketMetricsConfigurationsCommand=se;var de=function(t,n){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var t,r,i,a,s,d,u,c;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return t={},r="/",i="",[4,n.endpoint()];case 1:return a=e.sent(),s=a.hostname,d=a.protocol,u=void 0===d?"https":d,c=a.port,[2,new o.HttpRequest({protocol:u,hostname:s,port:c,method:"GET",headers:t,path:r,body:i})]}})})};exports.serializeAws_restXmlListBucketsCommand=de;var ue=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({uploads:""},void 0!==t.Delimiter&&{delimiter:t.Delimiter}),void 0!==t.EncodingType&&{"encoding-type":t.EncodingType}),void 0!==t.KeyMarker&&{"key-marker":t.KeyMarker}),void 0!==t.MaxUploads&&{"max-uploads":t.MaxUploads.toString()}),void 0!==t.Prefix&&{prefix:t.Prefix}),void 0!==t.UploadIdMarker&&{"upload-id-marker":t.UploadIdMarker}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlListMultipartUploadsCommand=ue;var ce=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({},mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},void 0!==t.Delimiter&&{delimiter:t.Delimiter}),void 0!==t.EncodingType&&{"encoding-type":t.EncodingType}),void 0!==t.Marker&&{marker:t.Marker}),void 0!==t.MaxKeys&&{"max-keys":t.MaxKeys.toString()}),void 0!==t.Prefix&&{prefix:t.Prefix}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlListObjectsCommand=ce;var le=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({},mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({"list-type":"2"},void 0!==t.Delimiter&&{delimiter:t.Delimiter}),void 0!==t.EncodingType&&{"encoding-type":t.EncodingType}),void 0!==t.MaxKeys&&{"max-keys":t.MaxKeys.toString()}),void 0!==t.Prefix&&{prefix:t.Prefix}),void 0!==t.ContinuationToken&&{"continuation-token":t.ContinuationToken}),void 0!==t.FetchOwner&&{"fetch-owner":t.FetchOwner.toString()}),void 0!==t.StartAfter&&{"start-after":t.StartAfter}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlListObjectsV2Command=le;var me=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)({},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({versions:""},void 0!==t.Delimiter&&{delimiter:t.Delimiter}),void 0!==t.EncodingType&&{"encoding-type":t.EncodingType}),void 0!==t.KeyMarker&&{"key-marker":t.KeyMarker}),void 0!==t.MaxKeys&&{"max-keys":t.MaxKeys.toString()}),void 0!==t.Prefix&&{prefix:t.Prefix}),void 0!==t.VersionIdMarker&&{"version-id-marker":t.VersionIdMarker}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlListObjectVersionsCommand=me;var ve=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({},mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)((0,e.__assign)((0,e.__assign)({"x-id":"ListParts"},void 0!==t.MaxParts&&{"max-parts":t.MaxParts.toString()}),void 0!==t.PartNumberMarker&&{"part-number-marker":t.PartNumberMarker}),void 0!==t.UploadId&&{uploadId:t.UploadId}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"GET",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlListPartsCommand=ve;var pe=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)({"content-type":"application/xml"},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={accelerate:""},void 0!==t.AccelerateConfiguration&&(c=Nr(t.AccelerateConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketAccelerateConfigurationCommand=pe;var ge=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ACL)&&{"x-amz-acl":t.ACL}),mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.GrantFullControl)&&{"x-amz-grant-full-control":t.GrantFullControl}),mu(t.GrantRead)&&{"x-amz-grant-read":t.GrantRead}),mu(t.GrantReadACP)&&{"x-amz-grant-read-acp":t.GrantReadACP}),mu(t.GrantWrite)&&{"x-amz-grant-write":t.GrantWrite}),mu(t.GrantWriteACP)&&{"x-amz-grant-write-acp":t.GrantWriteACP}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={acl:""},void 0!==t.AccessControlPolicy&&(c=Tr(t.AccessControlPolicy,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketAclCommand=ge;var _e=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)({"content-type":"application/xml"},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({analytics:""},void 0!==t.Id&&{id:t.Id}),void 0!==t.AnalyticsConfiguration&&(c=Ir(t.AnalyticsConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketAnalyticsConfigurationCommand=_e;var fe=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={cors:""},void 0!==t.CORSConfiguration&&(c=qr(t.CORSConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketCorsCommand=fe;var we=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={encryption:""},void 0!==t.ServerSideEncryptionConfiguration&&(c=Ea(t.ServerSideEncryptionConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketEncryptionCommand=we;var he=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i={"content-type":"application/xml"},a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({"intelligent-tiering":""},void 0!==t.Id&&{id:t.Id}),void 0!==t.IntelligentTieringConfiguration&&(c=pi(t.IntelligentTieringConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketIntelligentTieringConfigurationCommand=he;var ye=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)({"content-type":"application/xml"},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({inventory:""},void 0!==t.Id&&{id:t.Id}),void 0!==t.InventoryConfiguration&&(c=_i(t.InventoryConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketInventoryConfigurationCommand=ye;var Ce=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)({"content-type":"application/xml"},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={lifecycle:""},void 0!==t.LifecycleConfiguration&&(c=Or(t.LifecycleConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketLifecycleConfigurationCommand=Ce;var xe=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={logging:""},void 0!==t.BucketLoggingStatus&&(c=Dr(t.BucketLoggingStatus,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketLoggingCommand=xe;var be=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)({"content-type":"application/xml"},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d=(0,e.__assign)({metrics:""},void 0!==t.Id&&{id:t.Id}),void 0!==t.MetricsConfiguration&&(c=Ri(t.MetricsConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketMetricsConfigurationCommand=be;var ke=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)({"content-type":"application/xml"},mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={notification:""},void 0!==t.NotificationConfiguration&&(c=Hi(t.NotificationConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketNotificationConfigurationCommand=ke;var Ee=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={ownershipControls:""},void 0!==t.OwnershipControls&&(c=Yi(t.OwnershipControls,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketOwnershipControlsCommand=Ee;var Ne=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)({"content-type":"text/plain"},mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ConfirmRemoveSelfBucketAccess)&&{"x-amz-confirm-remove-self-bucket-access":t.ConfirmRemoveSelfBucketAccess.toString()}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={policy:""},void 0!==t.Policy&&(c=t.Policy,u=c),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketPolicyCommand=Ne;var Te=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.Token)&&{"x-amz-bucket-object-lock-token":t.Token}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={replication:""},void 0!==t.ReplicationConfiguration&&(c=da(t.ReplicationConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketReplicationCommand=Te;var Be=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={requestPayment:""},void 0!==t.RequestPaymentConfiguration&&(c=ga(t.RequestPaymentConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketRequestPaymentCommand=Be;var Se=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={tagging:""},void 0!==t.Tagging&&(c=Ma(t.Tagging,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketTaggingCommand=Se;var Pe=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.MFA)&&{"x-amz-mfa":t.MFA}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={versioning:""},void 0!==t.VersioningConfiguration&&(c=Ga(t.VersioningConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketVersioningCommand=Pe;var Ae=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={website:""},void 0!==t.WebsiteConfiguration&&(c=Fa(t.WebsiteConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutBucketWebsiteCommand=Ae;var ze=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({"content-type":"application/octet-stream"},mu(t.ACL)&&{"x-amz-acl":t.ACL}),mu(t.CacheControl)&&{"cache-control":t.CacheControl}),mu(t.ContentDisposition)&&{"content-disposition":t.ContentDisposition}),mu(t.ContentEncoding)&&{"content-encoding":t.ContentEncoding}),mu(t.ContentLanguage)&&{"content-language":t.ContentLanguage}),mu(t.ContentLength)&&{"content-length":t.ContentLength.toString()}),mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ContentType)&&{"content-type":t.ContentType}),mu(t.Expires)&&{expires:(0,n.dateToUtcString)(t.Expires).toString()}),mu(t.GrantFullControl)&&{"x-amz-grant-full-control":t.GrantFullControl}),mu(t.GrantRead)&&{"x-amz-grant-read":t.GrantRead}),mu(t.GrantReadACP)&&{"x-amz-grant-read-acp":t.GrantReadACP}),mu(t.GrantWriteACP)&&{"x-amz-grant-write-acp":t.GrantWriteACP}),mu(t.ServerSideEncryption)&&{"x-amz-server-side-encryption":t.ServerSideEncryption}),mu(t.StorageClass)&&{"x-amz-storage-class":t.StorageClass}),mu(t.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":t.WebsiteRedirectLocation}),mu(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),mu(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),mu(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),mu(t.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":t.SSEKMSKeyId}),mu(t.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":t.SSEKMSEncryptionContext}),mu(t.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":t.BucketKeyEnabled.toString()}),mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.Tagging)&&{"x-amz-tagging":t.Tagging}),mu(t.ObjectLockMode)&&{"x-amz-object-lock-mode":t.ObjectLockMode}),mu(t.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(t.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),mu(t.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":t.ObjectLockLegalHoldStatus}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),void 0!==t.Metadata&&Object.keys(t.Metadata).reduce(function(o,n){var r;return(0,e.__assign)((0,e.__assign)({},o),((r={})["x-amz-meta-"+n.toLowerCase()]=t.Metadata[n],r))},{})),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d={"x-id":"PutObject"},void 0!==t.Body&&(c=t.Body,u=c),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutObjectCommand=ze;var Ie=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ACL)&&{"x-amz-acl":t.ACL}),mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.GrantFullControl)&&{"x-amz-grant-full-control":t.GrantFullControl}),mu(t.GrantRead)&&{"x-amz-grant-read":t.GrantRead}),mu(t.GrantReadACP)&&{"x-amz-grant-read-acp":t.GrantReadACP}),mu(t.GrantWrite)&&{"x-amz-grant-write":t.GrantWrite}),mu(t.GrantWriteACP)&&{"x-amz-grant-write-acp":t.GrantWriteACP}),mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)({acl:""},void 0!==t.VersionId&&{versionId:t.VersionId}),void 0!==t.AccessControlPolicy&&(c=Tr(t.AccessControlPolicy,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutObjectAclCommand=Ie;var Xe=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)({"legal-hold":""},void 0!==t.VersionId&&{versionId:t.VersionId}),void 0!==t.LegalHold&&(c=Gi(t.LegalHold,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutObjectLegalHoldCommand=Xe;var Me=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.Token)&&{"x-amz-bucket-object-lock-token":t.Token}),mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={"object-lock":""},void 0!==t.ObjectLockConfiguration&&(c=$i(t.ObjectLockConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutObjectLockConfigurationCommand=Me;var Re=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":t.BypassGovernanceRetention.toString()}),mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)({retention:""},void 0!==t.VersionId&&{versionId:t.VersionId}),void 0!==t.Retention&&(c=Fi(t.Retention,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutObjectRetentionCommand=Re;var Oe=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)({tagging:""},void 0!==t.VersionId&&{versionId:t.VersionId}),void 0!==t.Tagging&&(c=Ma(t.Tagging,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutObjectTaggingCommand=Oe;var De=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),d={publicAccessBlock:""},void 0!==t.PublicAccessBlockConfiguration&&(c=oa(t.PublicAccessBlockConfiguration,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlPutPublicAccessBlockCommand=De;var Ke=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)({restore:""},void 0!==t.VersionId&&{versionId:t.VersionId}),void 0!==t.RestoreRequest&&(c=fa(t.RestoreRequest,r),u='<?xml version="1.0" encoding="UTF-8"?>',c.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),u+=c.toString()),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"POST",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlRestoreObjectCommand=Ke;var je=function(t,i){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var a,s,d,u,c,l,m,v,p,g,_,f;return(0,e.__generator)(this,function(w){switch(w.label){case 0:if(a=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({"content-type":"application/xml"},mu(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),mu(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),mu(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),s="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((d=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(s=s.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(d)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((d=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return s=s.replace("{Key+}",d.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),u={select:"","select-type":"2"},c='<?xml version="1.0" encoding="UTF-8"?>',(l=new r.XmlNode("SelectObjectContentRequest")).addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),void 0!==t.Expression&&(m=new r.XmlNode("Expression").addChildNode(new r.XmlText(t.Expression)).withName("Expression"),l.addChildNode(m)),void 0!==t.ExpressionType&&(m=new r.XmlNode("ExpressionType").addChildNode(new r.XmlText(t.ExpressionType)).withName("ExpressionType"),l.addChildNode(m)),void 0!==t.InputSerialization&&(m=mi(t.InputSerialization,i).withName("InputSerialization"),l.addChildNode(m)),void 0!==t.OutputSerialization&&(m=Qi(t.OutputSerialization,i).withName("OutputSerialization"),l.addChildNode(m)),void 0!==t.RequestProgress&&(m=_a(t.RequestProgress,i).withName("RequestProgress"),l.addChildNode(m)),void 0!==t.ScanRange&&(m=xa(t.ScanRange,i).withName("ScanRange"),l.addChildNode(m)),c+=l.toString(),[4,i.endpoint()];case 1:return v=w.sent(),p=v.hostname,g=v.protocol,_=void 0===g?"https":g,f=v.port,[2,new o.HttpRequest({protocol:_,hostname:p,port:f,method:"POST",headers:a,path:s,query:u,body:c})]}})})};exports.serializeAws_restXmlSelectObjectContentCommand=je;var He=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v,p,g;return(0,e.__generator)(this,function(_){switch(_.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({"content-type":"application/octet-stream"},mu(t.ContentLength)&&{"content-length":t.ContentLength.toString()}),mu(t.ContentMD5)&&{"content-md5":t.ContentMD5}),mu(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),mu(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),mu(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)((0,e.__assign)({"x-id":"UploadPart"},void 0!==t.PartNumber&&{partNumber:t.PartNumber.toString()}),void 0!==t.UploadId&&{uploadId:t.UploadId}),void 0!==t.Body&&(c=t.Body,u=c),[4,r.endpoint()];case 1:return l=_.sent(),m=l.hostname,v=l.protocol,p=void 0===v?"https":v,g=l.port,[2,new o.HttpRequest({protocol:p,hostname:m,port:g,method:"PUT",headers:i,path:a,query:d,body:u})]}})})};exports.serializeAws_restXmlUploadPartCommand=He;var Ue=function(t,r){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var i,a,s,d,u,c,l,m,v;return(0,e.__generator)(this,function(p){switch(p.label){case 0:if(i=(0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)((0,e.__assign)({},mu(t.CopySource)&&{"x-amz-copy-source":t.CopySource}),mu(t.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":t.CopySourceIfMatch}),mu(t.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":(0,n.dateToUtcString)(t.CopySourceIfModifiedSince).toString()}),mu(t.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":t.CopySourceIfNoneMatch}),mu(t.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":(0,n.dateToUtcString)(t.CopySourceIfUnmodifiedSince).toString()}),mu(t.CopySourceRange)&&{"x-amz-copy-source-range":t.CopySourceRange}),mu(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),mu(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),mu(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),mu(t.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":t.CopySourceSSECustomerAlgorithm}),mu(t.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":t.CopySourceSSECustomerKey}),mu(t.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":t.CopySourceSSECustomerKeyMD5}),mu(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),mu(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),mu(t.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":t.ExpectedSourceBucketOwner}),a="/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(a=a.replace("{Bucket}",(0,n.extendedEncodeURIComponent)(s)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return a=a.replace("{Key+}",s.split("/").map(function(e){return(0,n.extendedEncodeURIComponent)(e)}).join("/")),d=(0,e.__assign)((0,e.__assign)({"x-id":"UploadPartCopy"},void 0!==t.PartNumber&&{partNumber:t.PartNumber.toString()}),void 0!==t.UploadId&&{uploadId:t.UploadId}),[4,r.endpoint()];case 1:return u=p.sent(),c=u.hostname,l=u.protocol,m=void 0===l?"https":l,v=u.port,[2,new o.HttpRequest({protocol:m,hostname:c,port:v,method:"PUT",headers:i,path:a,query:d,body:void 0})]}})})};exports.serializeAws_restXmlUploadPartCopyCommand=Ue;var qe=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,Le(t,o)]:(n={$metadata:uu(t),RequestCharged:void 0},void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlAbortMultipartUploadCommand=qe;var Le=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u,c;return(0,e.__generator)(this,function(l){switch(l.label){case 0:return r=[(0,e.__assign)({},t)],c={},[4,pu(t.body,o)];case 1:switch(n=e.__assign.apply(void 0,r.concat([(c.body=l.sent(),c)])),a="UnknownError",a=gu(t,n.body),a){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return s=[{}],[4,xr(n,o)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,s.concat([l.sent()])),{name:a,$metadata:uu(t)}]),[3,5];case 4:d=n.body,a=d.code||d.Code||a,i=(0,e.__assign)((0,e.__assign)({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:uu(t)}),l.label=5;case 5:return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},$e=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Ge(t,o)]:(n={$metadata:uu(t),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==t.headers["x-amz-expiration"]&&(n.Expiration=t.headers["x-amz-expiration"]),void 0!==t.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers["x-amz-version-id"]&&(n.VersionId=t.headers["x-amz-version-id"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===t.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),[4,pu(t.body,o)]);case 1:return void 0!==(r=e.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.ETag&&(n.ETag=r.ETag),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.Location&&(n.Location=r.Location),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlCompleteMultipartUploadCommand=$e;var Ge=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Fe=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Ve(t,o)]:(n={$metadata:uu(t),BucketKeyEnabled:void 0,CopyObjectResult:void 0,CopySourceVersionId:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==t.headers["x-amz-expiration"]&&(n.Expiration=t.headers["x-amz-expiration"]),void 0!==t.headers["x-amz-copy-source-version-id"]&&(n.CopySourceVersionId=t.headers["x-amz-copy-source-version-id"]),void 0!==t.headers["x-amz-version-id"]&&(n.VersionId=t.headers["x-amz-version-id"]),void 0!==t.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=t.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==t.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=t.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=t.headers["x-amz-server-side-encryption-context"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===t.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),[4,pu(t.body,o)]);case 1:return r=e.sent(),n.CopyObjectResult=cs(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlCopyObjectCommand=Fe;var Ve=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u,c;return(0,e.__generator)(this,function(l){switch(l.label){case 0:return r=[(0,e.__assign)({},t)],c={},[4,pu(t.body,o)];case 1:switch(n=e.__assign.apply(void 0,r.concat([(c.body=l.sent(),c)])),a="UnknownError",a=gu(t,n.body),a){case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":return[3,2]}return[3,4];case 2:return s=[{}],[4,kr(n,o)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,s.concat([l.sent()])),{name:a,$metadata:uu(t)}]),[3,5];case 4:d=n.body,a=d.code||d.Code||a,i=(0,e.__assign)((0,e.__assign)({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:uu(t)}),l.label=5;case 5:return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},We=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Qe(t,o)]:(n={$metadata:uu(t),Location:void 0},void 0!==t.headers.location&&(n.Location=t.headers.location),[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlCreateBucketCommand=We;var Qe=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u,c,l;return(0,e.__generator)(this,function(m){switch(m.label){case 0:return r=[(0,e.__assign)({},t)],l={},[4,pu(t.body,o)];case 1:switch(n=e.__assign.apply(void 0,r.concat([(l.body=m.sent(),l)])),a="UnknownError",a=gu(t,n.body),a){case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":return[3,2];case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":return[3,4]}return[3,6];case 2:return s=[{}],[4,fr(n,o)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,s.concat([m.sent()])),{name:a,$metadata:uu(t)}]),[3,7];case 4:return d=[{}],[4,wr(n,o)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([m.sent()])),{name:a,$metadata:uu(t)}]),[3,7];case 6:u=n.body,a=u.code||u.Code||a,i=(0,e.__assign)((0,e.__assign)({},u),{name:""+a,message:u.message||u.Message||a,$fault:"client",$metadata:uu(t)}),m.label=7;case 7:return c=i.message||i.Message||a,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}})})},Je=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Ye(t,o)]:(n={$metadata:uu(t),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==t.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(t.headers["x-amz-abort-date"])),void 0!==t.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=t.headers["x-amz-abort-rule-id"]),void 0!==t.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=t.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==t.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=t.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=t.headers["x-amz-server-side-encryption-context"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===t.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),[4,pu(t.body,o)]);case 1:return void 0!==(r=e.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.UploadId&&(n.UploadId=r.UploadId),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlCreateMultipartUploadCommand=Je;var Ye=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Ze=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,et(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteBucketCommand=Ze;var et=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},tt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,ot(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteBucketAnalyticsConfigurationCommand=tt;var ot=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},nt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,rt(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteBucketCorsCommand=nt;var rt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},it=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,at(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteBucketEncryptionCommand=it;var at=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},st=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,dt(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteBucketIntelligentTieringConfigurationCommand=st;var dt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},ut=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,ct(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteBucketInventoryConfigurationCommand=ut;var ct=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},lt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,mt(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteBucketLifecycleCommand=lt;var mt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},vt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,pt(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteBucketMetricsConfigurationCommand=vt;var pt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},gt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,_t(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteBucketOwnershipControlsCommand=gt;var _t=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},ft=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,wt(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteBucketPolicyCommand=ft;var wt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},ht=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,yt(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteBucketReplicationCommand=ht;var yt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Ct=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,xt(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteBucketTaggingCommand=Ct;var xt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},bt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,kt(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteBucketWebsiteCommand=bt;var kt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Et=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,Nt(t,o)]:(n={$metadata:uu(t),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==t.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===t.headers["x-amz-delete-marker"]),void 0!==t.headers["x-amz-version-id"]&&(n.VersionId=t.headers["x-amz-version-id"]),void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteObjectCommand=Et;var Nt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Tt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Bt(t,o)]:(r={$metadata:uu(t),Deleted:void 0,Errors:void 0,RequestCharged:void 0},void 0!==t.headers["x-amz-request-charged"]&&(r.RequestCharged=t.headers["x-amz-request-charged"]),[4,pu(t.body,o)]);case 1:return""===(i=e.sent()).Deleted&&(r.Deleted=[]),void 0!==i.Deleted&&(r.Deleted=_s((0,n.getArrayIfSingleItem)(i.Deleted),o)),""===i.Error&&(r.Errors=[]),void 0!==i.Error&&(r.Errors=ks((0,n.getArrayIfSingleItem)(i.Error),o)),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlDeleteObjectsCommand=Tt;var Bt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},St=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,Pt(t,o)]:(n={$metadata:uu(t),VersionId:void 0},void 0!==t.headers["x-amz-version-id"]&&(n.VersionId=t.headers["x-amz-version-id"]),[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeleteObjectTaggingCommand=St;var Pt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},At=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 204!==t.statusCode&&t.statusCode>=300?[2,zt(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlDeletePublicAccessBlockCommand=At;var zt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},It=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Xt(t,o)]:(n={$metadata:uu(t),Status:void 0},[4,pu(t.body,o)]);case 1:return void 0!==(r=e.sent()).Status&&(n.Status=r.Status),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketAccelerateConfigurationCommand=It;var Xt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Mt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Rt(t,o)]:(r={$metadata:uu(t),Grants:void 0,Owner:void 0},[4,pu(t.body,o)]);case 1:return""===(i=e.sent()).AccessControlList&&(r.Grants=[]),void 0!==i.AccessControlList&&void 0!==i.AccessControlList.Grant&&(r.Grants=zs((0,n.getArrayIfSingleItem)(i.AccessControlList.Grant),o)),void 0!==i.Owner&&(r.Owner=yd(i.Owner,o)),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlGetBucketAclCommand=Mt;var Rt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Ot=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Dt(t,o)]:(n={$metadata:uu(t),AnalyticsConfiguration:void 0},[4,pu(t.body,o)]);case 1:return r=e.sent(),n.AnalyticsConfiguration=es(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketAnalyticsConfigurationCommand=Ot;var Dt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Kt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,jt(t,o)]:(r={$metadata:uu(t),CORSRules:void 0},[4,pu(t.body,o)]);case 1:return""===(i=e.sent()).CORSRule&&(r.CORSRules=[]),void 0!==i.CORSRule&&(r.CORSRules=vs((0,n.getArrayIfSingleItem)(i.CORSRule),o)),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlGetBucketCorsCommand=Kt;var jt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Ht=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Ut(t,o)]:(n={$metadata:uu(t),ServerSideEncryptionConfiguration:void 0},[4,pu(t.body,o)]);case 1:return r=e.sent(),n.ServerSideEncryptionConfiguration=Ld(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketEncryptionCommand=Ht;var Ut=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},qt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Lt(t,o)]:(n={$metadata:uu(t),IntelligentTieringConfiguration:void 0},[4,pu(t.body,o)]);case 1:return r=e.sent(),n.IntelligentTieringConfiguration=Rs(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketIntelligentTieringConfigurationCommand=qt;var Lt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},$t=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Gt(t,o)]:(n={$metadata:uu(t),InventoryConfiguration:void 0},[4,pu(t.body,o)]);case 1:return r=e.sent(),n.InventoryConfiguration=Ks(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketInventoryConfigurationCommand=$t;var Gt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Ft=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Vt(t,o)]:(r={$metadata:uu(t),Rules:void 0},[4,pu(t.body,o)]);case 1:return""===(i=e.sent()).Rule&&(r.Rules=[]),void 0!==i.Rule&&(r.Rules=Zs((0,n.getArrayIfSingleItem)(i.Rule),o)),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlGetBucketLifecycleConfigurationCommand=Ft;var Vt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Wt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Qt(t,o)]:(n={$metadata:uu(t),LocationConstraint:void 0},[4,pu(t.body,o)]);case 1:return void 0!==(r=e.sent()).LocationConstraint&&(n.LocationConstraint=r.LocationConstraint),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketLocationCommand=Wt;var Qt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Jt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Yt(t,o)]:(n={$metadata:uu(t),LoggingEnabled:void 0},[4,pu(t.body,o)]);case 1:return void 0!==(r=e.sent()).LoggingEnabled&&(n.LoggingEnabled=ed(r.LoggingEnabled,o)),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketLoggingCommand=Jt;var Yt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Zt=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,eo(t,o)]:(n={$metadata:uu(t),MetricsConfiguration:void 0},[4,pu(t.body,o)]);case 1:return r=e.sent(),n.MetricsConfiguration=nd(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketMetricsConfigurationCommand=Zt;var eo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},to=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,oo(t,o)]:(r={$metadata:uu(t),LambdaFunctionConfigurations:void 0,QueueConfigurations:void 0,TopicConfigurations:void 0},[4,pu(t.body,o)]);case 1:return""===(i=e.sent()).CloudFunctionConfiguration&&(r.LambdaFunctionConfigurations=[]),void 0!==i.CloudFunctionConfiguration&&(r.LambdaFunctionConfigurations=Vs((0,n.getArrayIfSingleItem)(i.CloudFunctionConfiguration),o)),""===i.QueueConfiguration&&(r.QueueConfigurations=[]),void 0!==i.QueueConfiguration&&(r.QueueConfigurations=Sd((0,n.getArrayIfSingleItem)(i.QueueConfiguration),o)),""===i.TopicConfiguration&&(r.TopicConfigurations=[]),void 0!==i.TopicConfiguration&&(r.TopicConfigurations=au((0,n.getArrayIfSingleItem)(i.TopicConfiguration),o)),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlGetBucketNotificationConfigurationCommand=to;var oo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},no=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,ro(t,o)]:(n={$metadata:uu(t),OwnershipControls:void 0},[4,pu(t.body,o)]);case 1:return r=e.sent(),n.OwnershipControls=Cd(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketOwnershipControlsCommand=no;var ro=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},io=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,ao(t,o)]:(n={$metadata:uu(t),Policy:void 0},[4,pu(t.body,o)]);case 1:return void 0!==(r=e.sent()).Policy&&(n.Policy=r.Policy),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketPolicyCommand=io;var ao=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},so=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,uo(t,o)]:(n={$metadata:uu(t),PolicyStatus:void 0},[4,pu(t.body,o)]);case 1:return r=e.sent(),n.PolicyStatus=Nd(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketPolicyStatusCommand=so;var uo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},co=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,lo(t,o)]:(n={$metadata:uu(t),ReplicationConfiguration:void 0},[4,pu(t.body,o)]);case 1:return r=e.sent(),n.ReplicationConfiguration=Id(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketReplicationCommand=co;var lo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},mo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,vo(t,o)]:(n={$metadata:uu(t),Payer:void 0},[4,pu(t.body,o)]);case 1:return void 0!==(r=e.sent()).Payer&&(n.Payer=r.Payer),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketRequestPaymentCommand=mo;var vo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},po=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,go(t,o)]:(r={$metadata:uu(t),TagSet:void 0},[4,pu(t.body,o)]);case 1:return""===(i=e.sent()).TagSet&&(r.TagSet=[]),void 0!==i.TagSet&&void 0!==i.TagSet.Tag&&(r.TagSet=eu((0,n.getArrayIfSingleItem)(i.TagSet.Tag),o)),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlGetBucketTaggingCommand=po;var go=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},_o=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,fo(t,o)]:(n={$metadata:uu(t),MFADelete:void 0,Status:void 0},[4,pu(t.body,o)]);case 1:return void 0!==(r=e.sent()).MfaDelete&&(n.MFADelete=r.MfaDelete),void 0!==r.Status&&(n.Status=r.Status),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetBucketVersioningCommand=_o;var fo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},wo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,ho(t,o)]:(r={$metadata:uu(t),ErrorDocument:void 0,IndexDocument:void 0,RedirectAllRequestsTo:void 0,RoutingRules:void 0},[4,pu(t.body,o)]);case 1:return void 0!==(i=e.sent()).ErrorDocument&&(r.ErrorDocument=bs(i.ErrorDocument,o)),void 0!==i.IndexDocument&&(r.IndexDocument=Is(i.IndexDocument,o)),void 0!==i.RedirectAllRequestsTo&&(r.RedirectAllRequestsTo=Ad(i.RedirectAllRequestsTo,o)),""===i.RoutingRules&&(r.RoutingRules=[]),void 0!==i.RoutingRules&&void 0!==i.RoutingRules.RoutingRule&&(r.RoutingRules=Hd((0,n.getArrayIfSingleItem)(i.RoutingRules.RoutingRule),o)),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlGetBucketWebsiteCommand=wo;var ho=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},yo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){return 200!==t.statusCode&&t.statusCode>=300?[2,Co(t,o)]:(n={$metadata:uu(t),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==t.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===t.headers["x-amz-delete-marker"]),void 0!==t.headers["accept-ranges"]&&(n.AcceptRanges=t.headers["accept-ranges"]),void 0!==t.headers["x-amz-expiration"]&&(n.Expiration=t.headers["x-amz-expiration"]),void 0!==t.headers["x-amz-restore"]&&(n.Restore=t.headers["x-amz-restore"]),void 0!==t.headers["last-modified"]&&(n.LastModified=new Date(t.headers["last-modified"])),void 0!==t.headers["content-length"]&&(n.ContentLength=parseInt(t.headers["content-length"],10)),void 0!==t.headers.etag&&(n.ETag=t.headers.etag),void 0!==t.headers["x-amz-missing-meta"]&&(n.MissingMeta=parseInt(t.headers["x-amz-missing-meta"],10)),void 0!==t.headers["x-amz-version-id"]&&(n.VersionId=t.headers["x-amz-version-id"]),void 0!==t.headers["cache-control"]&&(n.CacheControl=t.headers["cache-control"]),void 0!==t.headers["content-disposition"]&&(n.ContentDisposition=t.headers["content-disposition"]),void 0!==t.headers["content-encoding"]&&(n.ContentEncoding=t.headers["content-encoding"]),void 0!==t.headers["content-language"]&&(n.ContentLanguage=t.headers["content-language"]),void 0!==t.headers["content-range"]&&(n.ContentRange=t.headers["content-range"]),void 0!==t.headers["content-type"]&&(n.ContentType=t.headers["content-type"]),void 0!==t.headers.expires&&(n.Expires=new Date(t.headers.expires)),void 0!==t.headers["x-amz-website-redirect-location"]&&(n.WebsiteRedirectLocation=t.headers["x-amz-website-redirect-location"]),void 0!==t.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=t.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==t.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=t.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===t.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==t.headers["x-amz-storage-class"]&&(n.StorageClass=t.headers["x-amz-storage-class"]),void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),void 0!==t.headers["x-amz-replication-status"]&&(n.ReplicationStatus=t.headers["x-amz-replication-status"]),void 0!==t.headers["x-amz-mp-parts-count"]&&(n.PartsCount=parseInt(t.headers["x-amz-mp-parts-count"],10)),void 0!==t.headers["x-amz-tagging-count"]&&(n.TagCount=parseInt(t.headers["x-amz-tagging-count"],10)),void 0!==t.headers["x-amz-object-lock-mode"]&&(n.ObjectLockMode=t.headers["x-amz-object-lock-mode"]),void 0!==t.headers["x-amz-object-lock-retain-until-date"]&&(n.ObjectLockRetainUntilDate=new Date(t.headers["x-amz-object-lock-retain-until-date"])),void 0!==t.headers["x-amz-object-lock-legal-hold"]&&(n.ObjectLockLegalHoldStatus=t.headers["x-amz-object-lock-legal-hold"]),Object.keys(t.headers).forEach(function(e){void 0===n.Metadata&&(n.Metadata={}),e.startsWith("x-amz-meta-")&&(n.Metadata[e.substring(11)]=t.headers[e])}),r=t.body,n.Body=r,[2,Promise.resolve(n)])})})};exports.deserializeAws_restXmlGetObjectCommand=yo;var Co=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u,c,l;return(0,e.__generator)(this,function(m){switch(m.label){case 0:return r=[(0,e.__assign)({},t)],l={},[4,pu(t.body,o)];case 1:switch(n=e.__assign.apply(void 0,r.concat([(l.body=m.sent(),l)])),a="UnknownError",a=gu(t,n.body),a){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return s=[{}],[4,hr(n,o)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,s.concat([m.sent()])),{name:a,$metadata:uu(t)}]),[3,7];case 4:return d=[{}],[4,Cr(n,o)];case 5:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,d.concat([m.sent()])),{name:a,$metadata:uu(t)}]),[3,7];case 6:u=n.body,a=u.code||u.Code||a,i=(0,e.__assign)((0,e.__assign)({},u),{name:""+a,message:u.message||u.Message||a,$fault:"client",$metadata:uu(t)}),m.label=7;case 7:return c=i.message||i.Message||a,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}})})},xo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,bo(t,o)]:(r={$metadata:uu(t),Grants:void 0,Owner:void 0,RequestCharged:void 0},void 0!==t.headers["x-amz-request-charged"]&&(r.RequestCharged=t.headers["x-amz-request-charged"]),[4,pu(t.body,o)]);case 1:return""===(i=e.sent()).AccessControlList&&(r.Grants=[]),void 0!==i.AccessControlList&&void 0!==i.AccessControlList.Grant&&(r.Grants=zs((0,n.getArrayIfSingleItem)(i.AccessControlList.Grant),o)),void 0!==i.Owner&&(r.Owner=yd(i.Owner,o)),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlGetObjectAclCommand=xo;var bo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u,c;return(0,e.__generator)(this,function(l){switch(l.label){case 0:return r=[(0,e.__assign)({},t)],c={},[4,pu(t.body,o)];case 1:switch(n=e.__assign.apply(void 0,r.concat([(c.body=l.sent(),c)])),a="UnknownError",a=gu(t,n.body),a){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return s=[{}],[4,Cr(n,o)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,s.concat([l.sent()])),{name:a,$metadata:uu(t)}]),[3,5];case 4:d=n.body,a=d.code||d.Code||a,i=(0,e.__assign)((0,e.__assign)({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:uu(t)}),l.label=5;case 5:return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},ko=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Eo(t,o)]:(n={$metadata:uu(t),LegalHold:void 0},[4,pu(t.body,o)]);case 1:return r=e.sent(),n.LegalHold=gd(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetObjectLegalHoldCommand=ko;var Eo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},No=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,To(t,o)]:(n={$metadata:uu(t),ObjectLockConfiguration:void 0},[4,pu(t.body,o)]);case 1:return r=e.sent(),n.ObjectLockConfiguration=pd(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetObjectLockConfigurationCommand=No;var To=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Bo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,So(t,o)]:(n={$metadata:uu(t),Retention:void 0},[4,pu(t.body,o)]);case 1:return r=e.sent(),n.Retention=_d(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetObjectRetentionCommand=Bo;var So=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Po=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Ao(t,o)]:(r={$metadata:uu(t),TagSet:void 0,VersionId:void 0},void 0!==t.headers["x-amz-version-id"]&&(r.VersionId=t.headers["x-amz-version-id"]),[4,pu(t.body,o)]);case 1:return""===(i=e.sent()).TagSet&&(r.TagSet=[]),void 0!==i.TagSet&&void 0!==i.TagSet.Tag&&(r.TagSet=eu((0,n.getArrayIfSingleItem)(i.TagSet.Tag),o)),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlGetObjectTaggingCommand=Po;var Ao=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},zo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){return 200!==t.statusCode&&t.statusCode>=300?[2,Io(t,o)]:(n={$metadata:uu(t),Body:void 0,RequestCharged:void 0},void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),r=t.body,n.Body=r,[2,Promise.resolve(n)])})})};exports.deserializeAws_restXmlGetObjectTorrentCommand=zo;var Io=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Xo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Mo(t,o)]:(n={$metadata:uu(t),PublicAccessBlockConfiguration:void 0},[4,pu(t.body,o)]);case 1:return r=e.sent(),n.PublicAccessBlockConfiguration=Td(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlGetPublicAccessBlockCommand=Xo;var Mo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Ro=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Oo(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlHeadBucketCommand=Ro;var Oo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u,c;return(0,e.__generator)(this,function(l){switch(l.label){case 0:return r=[(0,e.__assign)({},t)],c={},[4,pu(t.body,o)];case 1:switch(n=e.__assign.apply(void 0,r.concat([(c.body=l.sent(),c)])),a="UnknownError",a=gu(t,n.body),a){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return s=[{}],[4,yr(n,o)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,s.concat([l.sent()])),{name:a,$metadata:uu(t)}]),[3,5];case 4:d=n.body,a=d.code||d.Code||a,i=(0,e.__assign)((0,e.__assign)({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:uu(t)}),l.label=5;case 5:return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Do=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Ko(t,o)]:(n={$metadata:uu(t),AcceptRanges:void 0,ArchiveStatus:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==t.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===t.headers["x-amz-delete-marker"]),void 0!==t.headers["accept-ranges"]&&(n.AcceptRanges=t.headers["accept-ranges"]),void 0!==t.headers["x-amz-expiration"]&&(n.Expiration=t.headers["x-amz-expiration"]),void 0!==t.headers["x-amz-restore"]&&(n.Restore=t.headers["x-amz-restore"]),void 0!==t.headers["x-amz-archive-status"]&&(n.ArchiveStatus=t.headers["x-amz-archive-status"]),void 0!==t.headers["last-modified"]&&(n.LastModified=new Date(t.headers["last-modified"])),void 0!==t.headers["content-length"]&&(n.ContentLength=parseInt(t.headers["content-length"],10)),void 0!==t.headers.etag&&(n.ETag=t.headers.etag),void 0!==t.headers["x-amz-missing-meta"]&&(n.MissingMeta=parseInt(t.headers["x-amz-missing-meta"],10)),void 0!==t.headers["x-amz-version-id"]&&(n.VersionId=t.headers["x-amz-version-id"]),void 0!==t.headers["cache-control"]&&(n.CacheControl=t.headers["cache-control"]),void 0!==t.headers["content-disposition"]&&(n.ContentDisposition=t.headers["content-disposition"]),void 0!==t.headers["content-encoding"]&&(n.ContentEncoding=t.headers["content-encoding"]),void 0!==t.headers["content-language"]&&(n.ContentLanguage=t.headers["content-language"]),void 0!==t.headers["content-type"]&&(n.ContentType=t.headers["content-type"]),void 0!==t.headers.expires&&(n.Expires=new Date(t.headers.expires)),void 0!==t.headers["x-amz-website-redirect-location"]&&(n.WebsiteRedirectLocation=t.headers["x-amz-website-redirect-location"]),void 0!==t.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=t.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==t.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=t.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===t.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==t.headers["x-amz-storage-class"]&&(n.StorageClass=t.headers["x-amz-storage-class"]),void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),void 0!==t.headers["x-amz-replication-status"]&&(n.ReplicationStatus=t.headers["x-amz-replication-status"]),void 0!==t.headers["x-amz-mp-parts-count"]&&(n.PartsCount=parseInt(t.headers["x-amz-mp-parts-count"],10)),void 0!==t.headers["x-amz-object-lock-mode"]&&(n.ObjectLockMode=t.headers["x-amz-object-lock-mode"]),void 0!==t.headers["x-amz-object-lock-retain-until-date"]&&(n.ObjectLockRetainUntilDate=new Date(t.headers["x-amz-object-lock-retain-until-date"])),void 0!==t.headers["x-amz-object-lock-legal-hold"]&&(n.ObjectLockLegalHoldStatus=t.headers["x-amz-object-lock-legal-hold"]),Object.keys(t.headers).forEach(function(e){void 0===n.Metadata&&(n.Metadata={}),e.startsWith("x-amz-meta-")&&(n.Metadata[e.substring(11)]=t.headers[e])}),[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlHeadObjectCommand=Do;var Ko=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u,c;return(0,e.__generator)(this,function(l){switch(l.label){case 0:return r=[(0,e.__assign)({},t)],c={},[4,pu(t.body,o)];case 1:switch(n=e.__assign.apply(void 0,r.concat([(c.body=l.sent(),c)])),a="UnknownError",a=gu(t,n.body),a){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return s=[{}],[4,Cr(n,o)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,s.concat([l.sent()])),{name:a,$metadata:uu(t)}]),[3,5];case 4:d=n.body,a=d.code||d.Code||a,i=(0,e.__assign)((0,e.__assign)({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:uu(t)}),l.label=5;case 5:return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},jo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Ho(t,o)]:(r={$metadata:uu(t),AnalyticsConfigurationList:void 0,ContinuationToken:void 0,IsTruncated:void 0,NextContinuationToken:void 0},[4,pu(t.body,o)]);case 1:return""===(i=e.sent()).AnalyticsConfiguration&&(r.AnalyticsConfigurationList=[]),void 0!==i.AnalyticsConfiguration&&(r.AnalyticsConfigurationList=ts((0,n.getArrayIfSingleItem)(i.AnalyticsConfiguration),o)),void 0!==i.ContinuationToken&&(r.ContinuationToken=i.ContinuationToken),void 0!==i.IsTruncated&&(r.IsTruncated="true"==i.IsTruncated),void 0!==i.NextContinuationToken&&(r.NextContinuationToken=i.NextContinuationToken),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlListBucketAnalyticsConfigurationsCommand=jo;var Ho=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Uo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,qo(t,o)]:(r={$metadata:uu(t),ContinuationToken:void 0,IntelligentTieringConfigurationList:void 0,IsTruncated:void 0,NextContinuationToken:void 0},[4,pu(t.body,o)]);case 1:return void 0!==(i=e.sent()).ContinuationToken&&(r.ContinuationToken=i.ContinuationToken),""===i.IntelligentTieringConfiguration&&(r.IntelligentTieringConfigurationList=[]),void 0!==i.IntelligentTieringConfiguration&&(r.IntelligentTieringConfigurationList=Os((0,n.getArrayIfSingleItem)(i.IntelligentTieringConfiguration),o)),void 0!==i.IsTruncated&&(r.IsTruncated="true"==i.IsTruncated),void 0!==i.NextContinuationToken&&(r.NextContinuationToken=i.NextContinuationToken),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlListBucketIntelligentTieringConfigurationsCommand=Uo;var qo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Lo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,$o(t,o)]:(r={$metadata:uu(t),ContinuationToken:void 0,InventoryConfigurationList:void 0,IsTruncated:void 0,NextContinuationToken:void 0},[4,pu(t.body,o)]);case 1:return void 0!==(i=e.sent()).ContinuationToken&&(r.ContinuationToken=i.ContinuationToken),""===i.InventoryConfiguration&&(r.InventoryConfigurationList=[]),void 0!==i.InventoryConfiguration&&(r.InventoryConfigurationList=js((0,n.getArrayIfSingleItem)(i.InventoryConfiguration),o)),void 0!==i.IsTruncated&&(r.IsTruncated="true"==i.IsTruncated),void 0!==i.NextContinuationToken&&(r.NextContinuationToken=i.NextContinuationToken),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlListBucketInventoryConfigurationsCommand=Lo;var $o=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Go=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Fo(t,o)]:(r={$metadata:uu(t),ContinuationToken:void 0,IsTruncated:void 0,MetricsConfigurationList:void 0,NextContinuationToken:void 0},[4,pu(t.body,o)]);case 1:return void 0!==(i=e.sent()).ContinuationToken&&(r.ContinuationToken=i.ContinuationToken),void 0!==i.IsTruncated&&(r.IsTruncated="true"==i.IsTruncated),""===i.MetricsConfiguration&&(r.MetricsConfigurationList=[]),void 0!==i.MetricsConfiguration&&(r.MetricsConfigurationList=rd((0,n.getArrayIfSingleItem)(i.MetricsConfiguration),o)),void 0!==i.NextContinuationToken&&(r.NextContinuationToken=i.NextContinuationToken),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlListBucketMetricsConfigurationsCommand=Go;var Fo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Vo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Wo(t,o)]:(r={$metadata:uu(t),Buckets:void 0,Owner:void 0},[4,pu(t.body,o)]);case 1:return""===(i=e.sent()).Buckets&&(r.Buckets=[]),void 0!==i.Buckets&&void 0!==i.Buckets.Bucket&&(r.Buckets=as((0,n.getArrayIfSingleItem)(i.Buckets.Bucket),o)),void 0!==i.Owner&&(r.Owner=yd(i.Owner,o)),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlListBucketsCommand=Vo;var Wo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Qo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Jo(t,o)]:(r={$metadata:uu(t),Bucket:void 0,CommonPrefixes:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyMarker:void 0,MaxUploads:void 0,NextKeyMarker:void 0,NextUploadIdMarker:void 0,Prefix:void 0,UploadIdMarker:void 0,Uploads:void 0},[4,pu(t.body,o)]);case 1:return void 0!==(i=e.sent()).Bucket&&(r.Bucket=i.Bucket),""===i.CommonPrefixes&&(r.CommonPrefixes=[]),void 0!==i.CommonPrefixes&&(r.CommonPrefixes=ds((0,n.getArrayIfSingleItem)(i.CommonPrefixes),o)),void 0!==i.Delimiter&&(r.Delimiter=i.Delimiter),void 0!==i.EncodingType&&(r.EncodingType=i.EncodingType),void 0!==i.IsTruncated&&(r.IsTruncated="true"==i.IsTruncated),void 0!==i.KeyMarker&&(r.KeyMarker=i.KeyMarker),void 0!==i.MaxUploads&&(r.MaxUploads=parseInt(i.MaxUploads)),void 0!==i.NextKeyMarker&&(r.NextKeyMarker=i.NextKeyMarker),void 0!==i.NextUploadIdMarker&&(r.NextUploadIdMarker=i.NextUploadIdMarker),void 0!==i.Prefix&&(r.Prefix=i.Prefix),void 0!==i.UploadIdMarker&&(r.UploadIdMarker=i.UploadIdMarker),""===i.Upload&&(r.Uploads=[]),void 0!==i.Upload&&(r.Uploads=sd((0,n.getArrayIfSingleItem)(i.Upload),o)),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlListMultipartUploadsCommand=Qo;var Jo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Yo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Zo(t,o)]:(r={$metadata:uu(t),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,pu(t.body,o)]);case 1:return""===(i=e.sent()).CommonPrefixes&&(r.CommonPrefixes=[]),void 0!==i.CommonPrefixes&&(r.CommonPrefixes=ds((0,n.getArrayIfSingleItem)(i.CommonPrefixes),o)),""===i.Contents&&(r.Contents=[]),void 0!==i.Contents&&(r.Contents=vd((0,n.getArrayIfSingleItem)(i.Contents),o)),void 0!==i.Delimiter&&(r.Delimiter=i.Delimiter),void 0!==i.EncodingType&&(r.EncodingType=i.EncodingType),void 0!==i.IsTruncated&&(r.IsTruncated="true"==i.IsTruncated),void 0!==i.Marker&&(r.Marker=i.Marker),void 0!==i.MaxKeys&&(r.MaxKeys=parseInt(i.MaxKeys)),void 0!==i.Name&&(r.Name=i.Name),void 0!==i.NextMarker&&(r.NextMarker=i.NextMarker),void 0!==i.Prefix&&(r.Prefix=i.Prefix),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlListObjectsCommand=Yo;var Zo=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u,c;return(0,e.__generator)(this,function(l){switch(l.label){case 0:return r=[(0,e.__assign)({},t)],c={},[4,pu(t.body,o)];case 1:switch(n=e.__assign.apply(void 0,r.concat([(c.body=l.sent(),c)])),a="UnknownError",a=gu(t,n.body),a){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return s=[{}],[4,yr(n,o)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,s.concat([l.sent()])),{name:a,$metadata:uu(t)}]),[3,5];case 4:d=n.body,a=d.code||d.Code||a,i=(0,e.__assign)((0,e.__assign)({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:uu(t)}),l.label=5;case 5:return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},en=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,tn(t,o)]:(r={$metadata:uu(t),CommonPrefixes:void 0,Contents:void 0,ContinuationToken:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyCount:void 0,MaxKeys:void 0,Name:void 0,NextContinuationToken:void 0,Prefix:void 0,StartAfter:void 0},[4,pu(t.body,o)]);case 1:return""===(i=e.sent()).CommonPrefixes&&(r.CommonPrefixes=[]),void 0!==i.CommonPrefixes&&(r.CommonPrefixes=ds((0,n.getArrayIfSingleItem)(i.CommonPrefixes),o)),""===i.Contents&&(r.Contents=[]),void 0!==i.Contents&&(r.Contents=vd((0,n.getArrayIfSingleItem)(i.Contents),o)),void 0!==i.ContinuationToken&&(r.ContinuationToken=i.ContinuationToken),void 0!==i.Delimiter&&(r.Delimiter=i.Delimiter),void 0!==i.EncodingType&&(r.EncodingType=i.EncodingType),void 0!==i.IsTruncated&&(r.IsTruncated="true"==i.IsTruncated),void 0!==i.KeyCount&&(r.KeyCount=parseInt(i.KeyCount)),void 0!==i.MaxKeys&&(r.MaxKeys=parseInt(i.MaxKeys)),void 0!==i.Name&&(r.Name=i.Name),void 0!==i.NextContinuationToken&&(r.NextContinuationToken=i.NextContinuationToken),void 0!==i.Prefix&&(r.Prefix=i.Prefix),void 0!==i.StartAfter&&(r.StartAfter=i.StartAfter),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlListObjectsV2Command=en;var tn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u,c;return(0,e.__generator)(this,function(l){switch(l.label){case 0:return r=[(0,e.__assign)({},t)],c={},[4,pu(t.body,o)];case 1:switch(n=e.__assign.apply(void 0,r.concat([(c.body=l.sent(),c)])),a="UnknownError",a=gu(t,n.body),a){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return s=[{}],[4,yr(n,o)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,s.concat([l.sent()])),{name:a,$metadata:uu(t)}]),[3,5];case 4:d=n.body,a=d.code||d.Code||a,i=(0,e.__assign)((0,e.__assign)({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:uu(t)}),l.label=5;case 5:return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},on=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,nn(t,o)]:(r={$metadata:uu(t),CommonPrefixes:void 0,DeleteMarkers:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyMarker:void 0,MaxKeys:void 0,Name:void 0,NextKeyMarker:void 0,NextVersionIdMarker:void 0,Prefix:void 0,VersionIdMarker:void 0,Versions:void 0},[4,pu(t.body,o)]);case 1:return""===(i=e.sent()).CommonPrefixes&&(r.CommonPrefixes=[]),void 0!==i.CommonPrefixes&&(r.CommonPrefixes=ds((0,n.getArrayIfSingleItem)(i.CommonPrefixes),o)),""===i.DeleteMarker&&(r.DeleteMarkers=[]),void 0!==i.DeleteMarker&&(r.DeleteMarkers=hs((0,n.getArrayIfSingleItem)(i.DeleteMarker),o)),void 0!==i.Delimiter&&(r.Delimiter=i.Delimiter),void 0!==i.EncodingType&&(r.EncodingType=i.EncodingType),void 0!==i.IsTruncated&&(r.IsTruncated="true"==i.IsTruncated),void 0!==i.KeyMarker&&(r.KeyMarker=i.KeyMarker),void 0!==i.MaxKeys&&(r.MaxKeys=parseInt(i.MaxKeys)),void 0!==i.Name&&(r.Name=i.Name),void 0!==i.NextKeyMarker&&(r.NextKeyMarker=i.NextKeyMarker),void 0!==i.NextVersionIdMarker&&(r.NextVersionIdMarker=i.NextVersionIdMarker),void 0!==i.Prefix&&(r.Prefix=i.Prefix),void 0!==i.VersionIdMarker&&(r.VersionIdMarker=i.VersionIdMarker),""===i.Version&&(r.Versions=[]),void 0!==i.Version&&(r.Versions=hd((0,n.getArrayIfSingleItem)(i.Version),o)),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlListObjectVersionsCommand=on;var nn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},rn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var r,i;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,an(t,o)]:(r={$metadata:uu(t),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==t.headers["x-amz-abort-date"]&&(r.AbortDate=new Date(t.headers["x-amz-abort-date"])),void 0!==t.headers["x-amz-abort-rule-id"]&&(r.AbortRuleId=t.headers["x-amz-abort-rule-id"]),void 0!==t.headers["x-amz-request-charged"]&&(r.RequestCharged=t.headers["x-amz-request-charged"]),[4,pu(t.body,o)]);case 1:return void 0!==(i=e.sent()).Bucket&&(r.Bucket=i.Bucket),void 0!==i.Initiator&&(r.Initiator=Xs(i.Initiator,o)),void 0!==i.IsTruncated&&(r.IsTruncated="true"==i.IsTruncated),void 0!==i.Key&&(r.Key=i.Key),void 0!==i.MaxParts&&(r.MaxParts=parseInt(i.MaxParts)),void 0!==i.NextPartNumberMarker&&(r.NextPartNumberMarker=i.NextPartNumberMarker),void 0!==i.Owner&&(r.Owner=yd(i.Owner,o)),void 0!==i.PartNumberMarker&&(r.PartNumberMarker=i.PartNumberMarker),""===i.Part&&(r.Parts=[]),void 0!==i.Part&&(r.Parts=Ed((0,n.getArrayIfSingleItem)(i.Part),o)),void 0!==i.StorageClass&&(r.StorageClass=i.StorageClass),void 0!==i.UploadId&&(r.UploadId=i.UploadId),[2,Promise.resolve(r)]}})})};exports.deserializeAws_restXmlListPartsCommand=rn;var an=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},sn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,dn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketAccelerateConfigurationCommand=sn;var dn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},un=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,cn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketAclCommand=un;var cn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},ln=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,mn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketAnalyticsConfigurationCommand=ln;var mn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},vn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,pn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketCorsCommand=vn;var pn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},gn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,_n(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketEncryptionCommand=gn;var _n=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},fn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,wn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketIntelligentTieringConfigurationCommand=fn;var wn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},hn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,yn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketInventoryConfigurationCommand=hn;var yn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Cn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,xn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketLifecycleConfigurationCommand=Cn;var xn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},bn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,kn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketLoggingCommand=bn;var kn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},En=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Nn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketMetricsConfigurationCommand=En;var Nn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Tn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Bn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketNotificationConfigurationCommand=Tn;var Bn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Sn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Pn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketOwnershipControlsCommand=Sn;var Pn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},An=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,zn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketPolicyCommand=An;var zn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},In=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Xn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketReplicationCommand=In;var Xn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Mn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Rn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketRequestPaymentCommand=Mn;var Rn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},On=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Dn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketTaggingCommand=On;var Dn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Kn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,jn(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketVersioningCommand=Kn;var jn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Hn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Un(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutBucketWebsiteCommand=Hn;var Un=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},qn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Ln(t,o)]:(n={$metadata:uu(t),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==t.headers["x-amz-expiration"]&&(n.Expiration=t.headers["x-amz-expiration"]),void 0!==t.headers.etag&&(n.ETag=t.headers.etag),void 0!==t.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers["x-amz-version-id"]&&(n.VersionId=t.headers["x-amz-version-id"]),void 0!==t.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=t.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==t.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=t.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=t.headers["x-amz-server-side-encryption-context"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===t.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutObjectCommand=qn;var Ln=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},$n=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Gn(t,o)]:(n={$metadata:uu(t),RequestCharged:void 0},void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutObjectAclCommand=$n;var Gn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u,c;return(0,e.__generator)(this,function(l){switch(l.label){case 0:return r=[(0,e.__assign)({},t)],c={},[4,pu(t.body,o)];case 1:switch(n=e.__assign.apply(void 0,r.concat([(c.body=l.sent(),c)])),a="UnknownError",a=gu(t,n.body),a){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return s=[{}],[4,Cr(n,o)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,s.concat([l.sent()])),{name:a,$metadata:uu(t)}]),[3,5];case 4:d=n.body,a=d.code||d.Code||a,i=(0,e.__assign)((0,e.__assign)({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:uu(t)}),l.label=5;case 5:return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Fn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Vn(t,o)]:(n={$metadata:uu(t),RequestCharged:void 0},void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutObjectLegalHoldCommand=Fn;var Vn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Wn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Qn(t,o)]:(n={$metadata:uu(t),RequestCharged:void 0},void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutObjectLockConfigurationCommand=Wn;var Qn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Jn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Yn(t,o)]:(n={$metadata:uu(t),RequestCharged:void 0},void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutObjectRetentionCommand=Jn;var Yn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},Zn=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,er(t,o)]:(n={$metadata:uu(t),VersionId:void 0},void 0!==t.headers["x-amz-version-id"]&&(n.VersionId=t.headers["x-amz-version-id"]),[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutObjectTaggingCommand=Zn;var er=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},tr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,or(t,o)]:(n={$metadata:uu(t)},[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlPutPublicAccessBlockCommand=tr;var or=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},nr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,rr(t,o)]:(n={$metadata:uu(t),RequestCharged:void 0,RestoreOutputPath:void 0},void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),void 0!==t.headers["x-amz-restore-output-path"]&&(n.RestoreOutputPath=t.headers["x-amz-restore-output-path"]),[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlRestoreObjectCommand=nr;var rr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u,c;return(0,e.__generator)(this,function(l){switch(l.label){case 0:return r=[(0,e.__assign)({},t)],c={},[4,pu(t.body,o)];case 1:switch(n=e.__assign.apply(void 0,r.concat([(c.body=l.sent(),c)])),a="UnknownError",a=gu(t,n.body),a){case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":return[3,2]}return[3,4];case 2:return s=[{}],[4,br(n,o)];case 3:return i=e.__assign.apply(void 0,[e.__assign.apply(void 0,s.concat([l.sent()])),{name:a,$metadata:uu(t)}]),[3,5];case 4:d=n.body,a=d.code||d.Code||a,i=(0,e.__assign)((0,e.__assign)({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:uu(t)}),l.label=5;case 5:return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},ir=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(i){return 200!==t.statusCode&&t.statusCode>=300?[2,ar(t,o)]:(n={$metadata:uu(t),Payload:void 0},r=o.eventStreamMarshaller.deserialize(t.body,function(t){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return n=Object.keys(t)[0],r=Object.entries(t[n].headers).reduce(function(e,t){return e[t[0]]=t[1].value,e},{}),i={headers:r,body:t[n].body},(a={})[n]=i,[4,lr(a,o)];case 1:return[2,e.sent()]}})})}),n.Payload=r,[2,Promise.resolve(n)])})})};exports.deserializeAws_restXmlSelectObjectContentCommand=ir;var ar=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},sr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,dr(t,o)]:(n={$metadata:uu(t),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==t.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers.etag&&(n.ETag=t.headers.etag),void 0!==t.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=t.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==t.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=t.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===t.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),[4,cu(t.body,o)]);case 1:return e.sent(),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlUploadPartCommand=sr;var dr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},ur=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,cr(t,o)]:(n={$metadata:uu(t),BucketKeyEnabled:void 0,CopyPartResult:void 0,CopySourceVersionId:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==t.headers["x-amz-copy-source-version-id"]&&(n.CopySourceVersionId=t.headers["x-amz-copy-source-version-id"]),void 0!==t.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=t.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==t.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=t.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===t.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==t.headers["x-amz-request-charged"]&&(n.RequestCharged=t.headers["x-amz-request-charged"]),[4,pu(t.body,o)]);case 1:return r=e.sent(),n.CopyPartResult=ls(r,o),[2,Promise.resolve(n)]}})})};exports.deserializeAws_restXmlUploadPartCopyCommand=ur;var cr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s,d,u;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return r=[(0,e.__assign)({},t)],u={},[4,pu(t.body,o)];case 1:return n=e.__assign.apply(void 0,r.concat([(u.body=c.sent(),u)])),a="UnknownError",a=gu(t,n.body),s=n.body,a=s.code||s.Code||a,i=(0,e.__assign)((0,e.__assign)({},s),{name:""+a,message:s.message||s.Message||a,$fault:"client",$metadata:uu(t)}),d=i.message||i.Message||a,i.message=d,delete i.Message,[2,Promise.reject(Object.assign(new Error(d),i))]}})})},lr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r,i,a,s;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return void 0===t.Records?[3,2]:(n={},[4,gr(t.Records,o)]);case 1:return[2,(n.Records=e.sent(),n)];case 2:return void 0===t.Stats?[3,4]:(r={},[4,_r(t.Stats,o)]);case 3:return[2,(r.Stats=e.sent(),r)];case 4:return void 0===t.Progress?[3,6]:(i={},[4,pr(t.Progress,o)]);case 5:return[2,(i.Progress=e.sent(),i)];case 6:return void 0===t.Cont?[3,8]:(a={},[4,mr(t.Cont,o)]);case 7:return[2,(a.Cont=e.sent(),a)];case 8:return void 0===t.End?[3,10]:(s={},[4,vr(t.End,o)]);case 9:return[2,(s.End=e.sent(),s)];case 10:return[2,{$unknown:t}]}})})},mr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return[2,{}]})})},vr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return[2,{}]})})},pr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return r=n={},[4,pu(t.body,o)];case 1:return r.Details=e.sent(),[2,n]}})})},gr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var o;return(0,e.__generator)(this,function(e){return(o={}).Payload=t.body,[2,o]})})},_r=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return r=n={},[4,pu(t.body,o)];case 1:return r.Details=e.sent(),[2,n]}})})},fr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var o;return(0,e.__generator)(this,function(e){return o={name:"BucketAlreadyExists",$fault:"client",$metadata:uu(t)},t.body,[2,o]})})},wr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var o;return(0,e.__generator)(this,function(e){return o={name:"BucketAlreadyOwnedByYou",$fault:"client",$metadata:uu(t)},t.body,[2,o]})})},hr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var o,n;return(0,e.__generator)(this,function(e){return o={name:"InvalidObjectState",$fault:"client",$metadata:uu(t),AccessTier:void 0,StorageClass:void 0},void 0!==(n=t.body).AccessTier&&(o.AccessTier=n.AccessTier),void 0!==n.StorageClass&&(o.StorageClass=n.StorageClass),[2,o]})})},yr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var o;return(0,e.__generator)(this,function(e){return o={name:"NoSuchBucket",$fault:"client",$metadata:uu(t)},t.body,[2,o]})})},Cr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var o;return(0,e.__generator)(this,function(e){return o={name:"NoSuchKey",$fault:"client",$metadata:uu(t)},t.body,[2,o]})})},xr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var o;return(0,e.__generator)(this,function(e){return o={name:"NoSuchUpload",$fault:"client",$metadata:uu(t)},t.body,[2,o]})})},br=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var o;return(0,e.__generator)(this,function(e){return o={name:"ObjectAlreadyInActiveTierError",$fault:"client",$metadata:uu(t)},t.body,[2,o]})})},kr=function(t,o){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var o;return(0,e.__generator)(this,function(e){return o={name:"ObjectNotInActiveTierError",$fault:"client",$metadata:uu(t)},t.body,[2,o]})})},Er=function(e,t){var o=new r.XmlNode("AbortIncompleteMultipartUpload");if(void 0!==e.DaysAfterInitiation&&null!==e.DaysAfterInitiation){var n=new r.XmlNode("DaysAfterInitiation").addChildNode(new r.XmlText(String(e.DaysAfterInitiation))).withName("DaysAfterInitiation");o.addChildNode(n)}return o},Nr=function(e,t){var o=new r.XmlNode("AccelerateConfiguration");if(void 0!==e.Status&&null!==e.Status){var n=new r.XmlNode("BucketAccelerateStatus").addChildNode(new r.XmlText(e.Status)).withName("Status");o.addChildNode(n)}return o},Tr=function(e,t){var o=new r.XmlNode("AccessControlPolicy");if(void 0!==e.Grants&&null!==e.Grants){var n=ci(e.Grants,t),i=new r.XmlNode("AccessControlList");n.map(function(e){i.addChildNode(e)}),o.addChildNode(i)}if(void 0!==e.Owner&&null!==e.Owner){var a=Ji(e.Owner,t).withName("Owner");o.addChildNode(a)}return o},Br=function(e,t){var o=new r.XmlNode("AccessControlTranslation");if(void 0!==e.Owner&&null!==e.Owner){var n=new r.XmlNode("OwnerOverride").addChildNode(new r.XmlText(e.Owner)).withName("Owner");o.addChildNode(n)}return o},Sr=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:new r.XmlNode("AllowedHeader").addChildNode(new r.XmlText(e)).withName("member")})},Pr=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:new r.XmlNode("AllowedMethod").addChildNode(new r.XmlText(e)).withName("member")})},Ar=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:new r.XmlNode("AllowedOrigin").addChildNode(new r.XmlText(e)).withName("member")})},zr=function(e,t){var o=new r.XmlNode("AnalyticsAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var n=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e.Prefix)).withName("Prefix");o.addChildNode(n)}void 0!==e.Tags&&null!==e.Tags&&Ra(e.Tags,t).map(function(e){e=e.withName("Tag"),o.addChildNode(e)});return o},Ir=function(e,t){var o=new r.XmlNode("AnalyticsConfiguration");if(void 0!==e.Id&&null!==e.Id){var n=new r.XmlNode("AnalyticsId").addChildNode(new r.XmlText(e.Id)).withName("Id");o.addChildNode(n)}if(void 0!==e.Filter&&null!==e.Filter){n=Mr(e.Filter,t).withName("Filter");o.addChildNode(n)}if(void 0!==e.StorageClassAnalysis&&null!==e.StorageClassAnalysis){n=za(e.StorageClassAnalysis,t).withName("StorageClassAnalysis");o.addChildNode(n)}return o},Xr=function(e,t){var o=new r.XmlNode("AnalyticsExportDestination");if(void 0!==e.S3BucketDestination&&null!==e.S3BucketDestination){var n=Rr(e.S3BucketDestination,t).withName("S3BucketDestination");o.addChildNode(n)}return o},Mr=function(e,o){var n=new r.XmlNode("AnalyticsFilter");return t.AnalyticsFilter.visit(e,{Prefix:function(e){var t=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e)).withName("Prefix");n.addChildNode(t)},Tag:function(e){var t=Xa(e,o).withName("Tag");n.addChildNode(t)},And:function(e){var t=zr(e,o).withName("And");n.addChildNode(t)},_:function(e,t){if(!(t instanceof r.XmlNode||t instanceof r.XmlText))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new r.XmlNode(e).addChildNode(t))}}),n},Rr=function(e,t){var o=new r.XmlNode("AnalyticsS3BucketDestination");if(void 0!==e.Format&&null!==e.Format){var n=new r.XmlNode("AnalyticsS3ExportFileFormat").addChildNode(new r.XmlText(e.Format)).withName("Format");o.addChildNode(n)}if(void 0!==e.BucketAccountId&&null!==e.BucketAccountId){n=new r.XmlNode("AccountId").addChildNode(new r.XmlText(e.BucketAccountId)).withName("BucketAccountId");o.addChildNode(n)}if(void 0!==e.Bucket&&null!==e.Bucket){n=new r.XmlNode("BucketName").addChildNode(new r.XmlText(e.Bucket)).withName("Bucket");o.addChildNode(n)}if(void 0!==e.Prefix&&null!==e.Prefix){n=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e.Prefix)).withName("Prefix");o.addChildNode(n)}return o},Or=function(e,t){var o=new r.XmlNode("BucketLifecycleConfiguration");void 0!==e.Rules&&null!==e.Rules&&Ai(e.Rules,t).map(function(e){e=e.withName("Rule"),o.addChildNode(e)});return o},Dr=function(e,t){var o=new r.XmlNode("BucketLoggingStatus");if(void 0!==e.LoggingEnabled&&null!==e.LoggingEnabled){var n=zi(e.LoggingEnabled,t).withName("LoggingEnabled");o.addChildNode(n)}return o},Kr=function(e,t){var o=new r.XmlNode("CompletedMultipartUpload");void 0!==e.Parts&&null!==e.Parts&&Hr(e.Parts,t).map(function(e){e=e.withName("Part"),o.addChildNode(e)});return o},jr=function(e,t){var o=new r.XmlNode("CompletedPart");if(void 0!==e.ETag&&null!==e.ETag){var n=new r.XmlNode("ETag").addChildNode(new r.XmlText(e.ETag)).withName("ETag");o.addChildNode(n)}if(void 0!==e.PartNumber&&null!==e.PartNumber){n=new r.XmlNode("PartNumber").addChildNode(new r.XmlText(String(e.PartNumber))).withName("PartNumber");o.addChildNode(n)}return o},Hr=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:jr(e,t).withName("member")})},Ur=function(e,t){var o=new r.XmlNode("Condition");if(void 0!==e.HttpErrorCodeReturnedEquals&&null!==e.HttpErrorCodeReturnedEquals){var n=new r.XmlNode("HttpErrorCodeReturnedEquals").addChildNode(new r.XmlText(e.HttpErrorCodeReturnedEquals)).withName("HttpErrorCodeReturnedEquals");o.addChildNode(n)}if(void 0!==e.KeyPrefixEquals&&null!==e.KeyPrefixEquals){n=new r.XmlNode("KeyPrefixEquals").addChildNode(new r.XmlText(e.KeyPrefixEquals)).withName("KeyPrefixEquals");o.addChildNode(n)}return o},qr=function(e,t){var o=new r.XmlNode("CORSConfiguration");void 0!==e.CORSRules&&null!==e.CORSRules&&$r(e.CORSRules,t).map(function(e){e=e.withName("CORSRule"),o.addChildNode(e)});return o},Lr=function(e,t){var o=new r.XmlNode("CORSRule");void 0!==e.AllowedHeaders&&null!==e.AllowedHeaders&&Sr(e.AllowedHeaders,t).map(function(e){e=e.withName("AllowedHeader"),o.addChildNode(e)});void 0!==e.AllowedMethods&&null!==e.AllowedMethods&&Pr(e.AllowedMethods,t).map(function(e){e=e.withName("AllowedMethod"),o.addChildNode(e)});void 0!==e.AllowedOrigins&&null!==e.AllowedOrigins&&Ar(e.AllowedOrigins,t).map(function(e){e=e.withName("AllowedOrigin"),o.addChildNode(e)});void 0!==e.ExposeHeaders&&null!==e.ExposeHeaders&&ri(e.ExposeHeaders,t).map(function(e){e=e.withName("ExposeHeader"),o.addChildNode(e)});if(void 0!==e.MaxAgeSeconds&&null!==e.MaxAgeSeconds){var n=new r.XmlNode("MaxAgeSeconds").addChildNode(new r.XmlText(String(e.MaxAgeSeconds))).withName("MaxAgeSeconds");o.addChildNode(n)}return o},$r=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:Lr(e,t).withName("member")})},Gr=function(e,t){var o=new r.XmlNode("CreateBucketConfiguration");if(void 0!==e.LocationConstraint&&null!==e.LocationConstraint){var n=new r.XmlNode("BucketLocationConstraint").addChildNode(new r.XmlText(e.LocationConstraint)).withName("LocationConstraint");o.addChildNode(n)}return o},Fr=function(e,t){var o=new r.XmlNode("CSVInput");if(void 0!==e.FileHeaderInfo&&null!==e.FileHeaderInfo){var n=new r.XmlNode("FileHeaderInfo").addChildNode(new r.XmlText(e.FileHeaderInfo)).withName("FileHeaderInfo");o.addChildNode(n)}if(void 0!==e.Comments&&null!==e.Comments){n=new r.XmlNode("Comments").addChildNode(new r.XmlText(e.Comments)).withName("Comments");o.addChildNode(n)}if(void 0!==e.QuoteEscapeCharacter&&null!==e.QuoteEscapeCharacter){n=new r.XmlNode("QuoteEscapeCharacter").addChildNode(new r.XmlText(e.QuoteEscapeCharacter)).withName("QuoteEscapeCharacter");o.addChildNode(n)}if(void 0!==e.RecordDelimiter&&null!==e.RecordDelimiter){n=new r.XmlNode("RecordDelimiter").addChildNode(new r.XmlText(e.RecordDelimiter)).withName("RecordDelimiter");o.addChildNode(n)}if(void 0!==e.FieldDelimiter&&null!==e.FieldDelimiter){n=new r.XmlNode("FieldDelimiter").addChildNode(new r.XmlText(e.FieldDelimiter)).withName("FieldDelimiter");o.addChildNode(n)}if(void 0!==e.QuoteCharacter&&null!==e.QuoteCharacter){n=new r.XmlNode("QuoteCharacter").addChildNode(new r.XmlText(e.QuoteCharacter)).withName("QuoteCharacter");o.addChildNode(n)}if(void 0!==e.AllowQuotedRecordDelimiter&&null!==e.AllowQuotedRecordDelimiter){n=new r.XmlNode("AllowQuotedRecordDelimiter").addChildNode(new r.XmlText(String(e.AllowQuotedRecordDelimiter))).withName("AllowQuotedRecordDelimiter");o.addChildNode(n)}return o},Vr=function(e,t){var o=new r.XmlNode("CSVOutput");if(void 0!==e.QuoteFields&&null!==e.QuoteFields){var n=new r.XmlNode("QuoteFields").addChildNode(new r.XmlText(e.QuoteFields)).withName("QuoteFields");o.addChildNode(n)}if(void 0!==e.QuoteEscapeCharacter&&null!==e.QuoteEscapeCharacter){n=new r.XmlNode("QuoteEscapeCharacter").addChildNode(new r.XmlText(e.QuoteEscapeCharacter)).withName("QuoteEscapeCharacter");o.addChildNode(n)}if(void 0!==e.RecordDelimiter&&null!==e.RecordDelimiter){n=new r.XmlNode("RecordDelimiter").addChildNode(new r.XmlText(e.RecordDelimiter)).withName("RecordDelimiter");o.addChildNode(n)}if(void 0!==e.FieldDelimiter&&null!==e.FieldDelimiter){n=new r.XmlNode("FieldDelimiter").addChildNode(new r.XmlText(e.FieldDelimiter)).withName("FieldDelimiter");o.addChildNode(n)}if(void 0!==e.QuoteCharacter&&null!==e.QuoteCharacter){n=new r.XmlNode("QuoteCharacter").addChildNode(new r.XmlText(e.QuoteCharacter)).withName("QuoteCharacter");o.addChildNode(n)}return o},Wr=function(e,t){var o=new r.XmlNode("DefaultRetention");if(void 0!==e.Mode&&null!==e.Mode){var n=new r.XmlNode("ObjectLockRetentionMode").addChildNode(new r.XmlText(e.Mode)).withName("Mode");o.addChildNode(n)}if(void 0!==e.Days&&null!==e.Days){n=new r.XmlNode("Days").addChildNode(new r.XmlText(String(e.Days))).withName("Days");o.addChildNode(n)}if(void 0!==e.Years&&null!==e.Years){n=new r.XmlNode("Years").addChildNode(new r.XmlText(String(e.Years))).withName("Years");o.addChildNode(n)}return o},Qr=function(e,t){var o=new r.XmlNode("Delete");void 0!==e.Objects&&null!==e.Objects&&Li(e.Objects,t).map(function(e){e=e.withName("Object"),o.addChildNode(e)});if(void 0!==e.Quiet&&null!==e.Quiet){var n=new r.XmlNode("Quiet").addChildNode(new r.XmlText(String(e.Quiet))).withName("Quiet");o.addChildNode(n)}return o},Jr=function(e,t){var o=new r.XmlNode("DeleteMarkerReplication");if(void 0!==e.Status&&null!==e.Status){var n=new r.XmlNode("DeleteMarkerReplicationStatus").addChildNode(new r.XmlText(e.Status)).withName("Status");o.addChildNode(n)}return o},Yr=function(e,t){var o=new r.XmlNode("Destination");if(void 0!==e.Bucket&&null!==e.Bucket){var n=new r.XmlNode("BucketName").addChildNode(new r.XmlText(e.Bucket)).withName("Bucket");o.addChildNode(n)}if(void 0!==e.Account&&null!==e.Account){n=new r.XmlNode("AccountId").addChildNode(new r.XmlText(e.Account)).withName("Account");o.addChildNode(n)}if(void 0!==e.StorageClass&&null!==e.StorageClass){n=new r.XmlNode("StorageClass").addChildNode(new r.XmlText(e.StorageClass)).withName("StorageClass");o.addChildNode(n)}if(void 0!==e.AccessControlTranslation&&null!==e.AccessControlTranslation){n=Br(e.AccessControlTranslation,t).withName("AccessControlTranslation");o.addChildNode(n)}if(void 0!==e.EncryptionConfiguration&&null!==e.EncryptionConfiguration){n=ei(e.EncryptionConfiguration,t).withName("EncryptionConfiguration");o.addChildNode(n)}if(void 0!==e.ReplicationTime&&null!==e.ReplicationTime){n=va(e.ReplicationTime,t).withName("ReplicationTime");o.addChildNode(n)}if(void 0!==e.Metrics&&null!==e.Metrics){n=Xi(e.Metrics,t).withName("Metrics");o.addChildNode(n)}return o},Zr=function(e,t){var o=new r.XmlNode("Encryption");if(void 0!==e.EncryptionType&&null!==e.EncryptionType){var n=new r.XmlNode("ServerSideEncryption").addChildNode(new r.XmlText(e.EncryptionType)).withName("EncryptionType");o.addChildNode(n)}if(void 0!==e.KMSKeyId&&null!==e.KMSKeyId){n=new r.XmlNode("SSEKMSKeyId").addChildNode(new r.XmlText(e.KMSKeyId)).withName("KMSKeyId");o.addChildNode(n)}if(void 0!==e.KMSContext&&null!==e.KMSContext){n=new r.XmlNode("KMSContext").addChildNode(new r.XmlText(e.KMSContext)).withName("KMSContext");o.addChildNode(n)}return o},ei=function(e,t){var o=new r.XmlNode("EncryptionConfiguration");if(void 0!==e.ReplicaKmsKeyID&&null!==e.ReplicaKmsKeyID){var n=new r.XmlNode("ReplicaKmsKeyID").addChildNode(new r.XmlText(e.ReplicaKmsKeyID)).withName("ReplicaKmsKeyID");o.addChildNode(n)}return o},ti=function(e,t){var o=new r.XmlNode("ErrorDocument");if(void 0!==e.Key&&null!==e.Key){var n=new r.XmlNode("ObjectKey").addChildNode(new r.XmlText(e.Key)).withName("Key");o.addChildNode(n)}return o},oi=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:new r.XmlNode("Event").addChildNode(new r.XmlText(e)).withName("member")})},ni=function(e,t){var o=new r.XmlNode("ExistingObjectReplication");if(void 0!==e.Status&&null!==e.Status){var n=new r.XmlNode("ExistingObjectReplicationStatus").addChildNode(new r.XmlText(e.Status)).withName("Status");o.addChildNode(n)}return o},ri=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:new r.XmlNode("ExposeHeader").addChildNode(new r.XmlText(e)).withName("member")})},ii=function(e,t){var o=new r.XmlNode("FilterRule");if(void 0!==e.Name&&null!==e.Name){var n=new r.XmlNode("FilterRuleName").addChildNode(new r.XmlText(e.Name)).withName("Name");o.addChildNode(n)}if(void 0!==e.Value&&null!==e.Value){n=new r.XmlNode("FilterRuleValue").addChildNode(new r.XmlText(e.Value)).withName("Value");o.addChildNode(n)}return o},ai=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:ii(e,t).withName("member")})},si=function(e,t){var o=new r.XmlNode("GlacierJobParameters");if(void 0!==e.Tier&&null!==e.Tier){var n=new r.XmlNode("Tier").addChildNode(new r.XmlText(e.Tier)).withName("Tier");o.addChildNode(n)}return o},di=function(e,t){var o=new r.XmlNode("Grant");if(void 0!==e.Grantee&&null!==e.Grantee){var n=ui(e.Grantee,t).withName("Grantee");o.addChildNode(n)}if(void 0!==e.Permission&&null!==e.Permission){n=new r.XmlNode("Permission").addChildNode(new r.XmlText(e.Permission)).withName("Permission");o.addChildNode(n)}return o},ui=function(e,t){var o=new r.XmlNode("Grantee");if(void 0!==e.DisplayName&&null!==e.DisplayName){var n=new r.XmlNode("DisplayName").addChildNode(new r.XmlText(e.DisplayName)).withName("DisplayName");o.addChildNode(n)}if(void 0!==e.EmailAddress&&null!==e.EmailAddress){n=new r.XmlNode("EmailAddress").addChildNode(new r.XmlText(e.EmailAddress)).withName("EmailAddress");o.addChildNode(n)}if(void 0!==e.ID&&null!==e.ID){n=new r.XmlNode("ID").addChildNode(new r.XmlText(e.ID)).withName("ID");o.addChildNode(n)}if(void 0!==e.URI&&null!==e.URI){n=new r.XmlNode("URI").addChildNode(new r.XmlText(e.URI)).withName("URI");o.addChildNode(n)}return void 0!==e.Type&&null!==e.Type&&o.addAttribute("xsi:type",e.Type),o},ci=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:di(e,t).withName("Grant")})},li=function(e,t){var o=new r.XmlNode("IndexDocument");if(void 0!==e.Suffix&&null!==e.Suffix){var n=new r.XmlNode("Suffix").addChildNode(new r.XmlText(e.Suffix)).withName("Suffix");o.addChildNode(n)}return o},mi=function(e,t){var o=new r.XmlNode("InputSerialization");if(void 0!==e.CSV&&null!==e.CSV){var n=Fr(e.CSV,t).withName("CSV");o.addChildNode(n)}if(void 0!==e.CompressionType&&null!==e.CompressionType){n=new r.XmlNode("CompressionType").addChildNode(new r.XmlText(e.CompressionType)).withName("CompressionType");o.addChildNode(n)}if(void 0!==e.JSON&&null!==e.JSON){n=bi(e.JSON,t).withName("JSON");o.addChildNode(n)}if(void 0!==e.Parquet&&null!==e.Parquet){n=ta(e.Parquet,t).withName("Parquet");o.addChildNode(n)}return o},vi=function(e,t){var o=new r.XmlNode("IntelligentTieringAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var n=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e.Prefix)).withName("Prefix");o.addChildNode(n)}void 0!==e.Tags&&null!==e.Tags&&Ra(e.Tags,t).map(function(e){e=e.withName("Tag"),o.addChildNode(e)});return o},pi=function(e,t){var o=new r.XmlNode("IntelligentTieringConfiguration");if(void 0!==e.Id&&null!==e.Id){var n=new r.XmlNode("IntelligentTieringId").addChildNode(new r.XmlText(e.Id)).withName("Id");o.addChildNode(n)}if(void 0!==e.Filter&&null!==e.Filter){n=gi(e.Filter,t).withName("Filter");o.addChildNode(n)}if(void 0!==e.Status&&null!==e.Status){n=new r.XmlNode("IntelligentTieringStatus").addChildNode(new r.XmlText(e.Status)).withName("Status");o.addChildNode(n)}void 0!==e.Tierings&&null!==e.Tierings&&ja(e.Tierings,t).map(function(e){e=e.withName("Tiering"),o.addChildNode(e)});return o},gi=function(e,t){var o=new r.XmlNode("IntelligentTieringFilter");if(void 0!==e.Prefix&&null!==e.Prefix){var n=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e.Prefix)).withName("Prefix");o.addChildNode(n)}if(void 0!==e.Tag&&null!==e.Tag){n=Xa(e.Tag,t).withName("Tag");o.addChildNode(n)}if(void 0!==e.And&&null!==e.And){n=vi(e.And,t).withName("And");o.addChildNode(n)}return o},_i=function(e,t){var o=new r.XmlNode("InventoryConfiguration");if(void 0!==e.Destination&&null!==e.Destination){var n=fi(e.Destination,t).withName("Destination");o.addChildNode(n)}if(void 0!==e.IsEnabled&&null!==e.IsEnabled){n=new r.XmlNode("IsEnabled").addChildNode(new r.XmlText(String(e.IsEnabled))).withName("IsEnabled");o.addChildNode(n)}if(void 0!==e.Filter&&null!==e.Filter){n=hi(e.Filter,t).withName("Filter");o.addChildNode(n)}if(void 0!==e.Id&&null!==e.Id){n=new r.XmlNode("InventoryId").addChildNode(new r.XmlText(e.Id)).withName("Id");o.addChildNode(n)}if(void 0!==e.IncludedObjectVersions&&null!==e.IncludedObjectVersions){n=new r.XmlNode("InventoryIncludedObjectVersions").addChildNode(new r.XmlText(e.IncludedObjectVersions)).withName("IncludedObjectVersions");o.addChildNode(n)}if(void 0!==e.OptionalFields&&null!==e.OptionalFields){var i=yi(e.OptionalFields,t),a=new r.XmlNode("OptionalFields");i.map(function(e){a.addChildNode(e)}),o.addChildNode(a)}if(void 0!==e.Schedule&&null!==e.Schedule){n=xi(e.Schedule,t).withName("Schedule");o.addChildNode(n)}return o},fi=function(e,t){var o=new r.XmlNode("InventoryDestination");if(void 0!==e.S3BucketDestination&&null!==e.S3BucketDestination){var n=Ci(e.S3BucketDestination,t).withName("S3BucketDestination");o.addChildNode(n)}return o},wi=function(e,t){var o=new r.XmlNode("InventoryEncryption");if(void 0!==e.SSES3&&null!==e.SSES3){var n=Aa(e.SSES3,t).withName("SSE-S3");o.addChildNode(n)}if(void 0!==e.SSEKMS&&null!==e.SSEKMS){n=Sa(e.SSEKMS,t).withName("SSE-KMS");o.addChildNode(n)}return o},hi=function(e,t){var o=new r.XmlNode("InventoryFilter");if(void 0!==e.Prefix&&null!==e.Prefix){var n=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e.Prefix)).withName("Prefix");o.addChildNode(n)}return o},yi=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:new r.XmlNode("InventoryOptionalField").addChildNode(new r.XmlText(e)).withName("Field")})},Ci=function(e,t){var o=new r.XmlNode("InventoryS3BucketDestination");if(void 0!==e.AccountId&&null!==e.AccountId){var n=new r.XmlNode("AccountId").addChildNode(new r.XmlText(e.AccountId)).withName("AccountId");o.addChildNode(n)}if(void 0!==e.Bucket&&null!==e.Bucket){n=new r.XmlNode("BucketName").addChildNode(new r.XmlText(e.Bucket)).withName("Bucket");o.addChildNode(n)}if(void 0!==e.Format&&null!==e.Format){n=new r.XmlNode("InventoryFormat").addChildNode(new r.XmlText(e.Format)).withName("Format");o.addChildNode(n)}if(void 0!==e.Prefix&&null!==e.Prefix){n=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e.Prefix)).withName("Prefix");o.addChildNode(n)}if(void 0!==e.Encryption&&null!==e.Encryption){n=wi(e.Encryption,t).withName("Encryption");o.addChildNode(n)}return o},xi=function(e,t){var o=new r.XmlNode("InventorySchedule");if(void 0!==e.Frequency&&null!==e.Frequency){var n=new r.XmlNode("InventoryFrequency").addChildNode(new r.XmlText(e.Frequency)).withName("Frequency");o.addChildNode(n)}return o},bi=function(e,t){var o=new r.XmlNode("JSONInput");if(void 0!==e.Type&&null!==e.Type){var n=new r.XmlNode("JSONType").addChildNode(new r.XmlText(e.Type)).withName("Type");o.addChildNode(n)}return o},ki=function(e,t){var o=new r.XmlNode("JSONOutput");if(void 0!==e.RecordDelimiter&&null!==e.RecordDelimiter){var n=new r.XmlNode("RecordDelimiter").addChildNode(new r.XmlText(e.RecordDelimiter)).withName("RecordDelimiter");o.addChildNode(n)}return o},Ei=function(e,t){var o=new r.XmlNode("LambdaFunctionConfiguration");if(void 0!==e.Id&&null!==e.Id){var n=new r.XmlNode("NotificationId").addChildNode(new r.XmlText(e.Id)).withName("Id");o.addChildNode(n)}if(void 0!==e.LambdaFunctionArn&&null!==e.LambdaFunctionArn){n=new r.XmlNode("LambdaFunctionArn").addChildNode(new r.XmlText(e.LambdaFunctionArn)).withName("CloudFunction");o.addChildNode(n)}void 0!==e.Events&&null!==e.Events&&oi(e.Events,t).map(function(e){e=e.withName("Event"),o.addChildNode(e)});if(void 0!==e.Filter&&null!==e.Filter){n=Ui(e.Filter,t).withName("Filter");o.addChildNode(n)}return o},Ni=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:Ei(e,t).withName("member")})},Ti=function(e,t){var o=new r.XmlNode("LifecycleExpiration");if(void 0!==e.Date&&null!==e.Date){var n=new r.XmlNode("Date").addChildNode(new r.XmlText(e.Date.toISOString().split(".")[0]+"Z")).withName("Date");o.addChildNode(n)}if(void 0!==e.Days&&null!==e.Days){n=new r.XmlNode("Days").addChildNode(new r.XmlText(String(e.Days))).withName("Days");o.addChildNode(n)}if(void 0!==e.ExpiredObjectDeleteMarker&&null!==e.ExpiredObjectDeleteMarker){n=new r.XmlNode("ExpiredObjectDeleteMarker").addChildNode(new r.XmlText(String(e.ExpiredObjectDeleteMarker))).withName("ExpiredObjectDeleteMarker");o.addChildNode(n)}return o},Bi=function(e,t){var o=new r.XmlNode("LifecycleRule");if(void 0!==e.Expiration&&null!==e.Expiration){var n=Ti(e.Expiration,t).withName("Expiration");o.addChildNode(n)}if(void 0!==e.ID&&null!==e.ID){n=new r.XmlNode("ID").addChildNode(new r.XmlText(e.ID)).withName("ID");o.addChildNode(n)}if(void 0!==e.Prefix&&null!==e.Prefix){n=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e.Prefix)).withName("Prefix");o.addChildNode(n)}if(void 0!==e.Filter&&null!==e.Filter){n=Pi(e.Filter,t).withName("Filter");o.addChildNode(n)}if(void 0!==e.Status&&null!==e.Status){n=new r.XmlNode("ExpirationStatus").addChildNode(new r.XmlText(e.Status)).withName("Status");o.addChildNode(n)}void 0!==e.Transitions&&null!==e.Transitions&&La(e.Transitions,t).map(function(e){e=e.withName("Transition"),o.addChildNode(e)});void 0!==e.NoncurrentVersionTransitions&&null!==e.NoncurrentVersionTransitions&&ji(e.NoncurrentVersionTransitions,t).map(function(e){e=e.withName("NoncurrentVersionTransition"),o.addChildNode(e)});if(void 0!==e.NoncurrentVersionExpiration&&null!==e.NoncurrentVersionExpiration){n=Di(e.NoncurrentVersionExpiration,t).withName("NoncurrentVersionExpiration");o.addChildNode(n)}if(void 0!==e.AbortIncompleteMultipartUpload&&null!==e.AbortIncompleteMultipartUpload){n=Er(e.AbortIncompleteMultipartUpload,t).withName("AbortIncompleteMultipartUpload");o.addChildNode(n)}return o},Si=function(e,t){var o=new r.XmlNode("LifecycleRuleAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var n=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e.Prefix)).withName("Prefix");o.addChildNode(n)}void 0!==e.Tags&&null!==e.Tags&&Ra(e.Tags,t).map(function(e){e=e.withName("Tag"),o.addChildNode(e)});return o},Pi=function(e,o){var n=new r.XmlNode("LifecycleRuleFilter");return t.LifecycleRuleFilter.visit(e,{Prefix:function(e){var t=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e)).withName("Prefix");n.addChildNode(t)},Tag:function(e){var t=Xa(e,o).withName("Tag");n.addChildNode(t)},And:function(e){var t=Si(e,o).withName("And");n.addChildNode(t)},_:function(e,t){if(!(t instanceof r.XmlNode||t instanceof r.XmlText))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new r.XmlNode(e).addChildNode(t))}}),n},Ai=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:Bi(e,t).withName("member")})},zi=function(e,t){var o=new r.XmlNode("LoggingEnabled");if(void 0!==e.TargetBucket&&null!==e.TargetBucket){var n=new r.XmlNode("TargetBucket").addChildNode(new r.XmlText(e.TargetBucket)).withName("TargetBucket");o.addChildNode(n)}if(void 0!==e.TargetGrants&&null!==e.TargetGrants){var i=Da(e.TargetGrants,t),a=new r.XmlNode("TargetGrants");i.map(function(e){a.addChildNode(e)}),o.addChildNode(a)}if(void 0!==e.TargetPrefix&&null!==e.TargetPrefix){n=new r.XmlNode("TargetPrefix").addChildNode(new r.XmlText(e.TargetPrefix)).withName("TargetPrefix");o.addChildNode(n)}return o},Ii=function(e,t){var o=new r.XmlNode("MetadataEntry");if(void 0!==e.Name&&null!==e.Name){var n=new r.XmlNode("MetadataKey").addChildNode(new r.XmlText(e.Name)).withName("Name");o.addChildNode(n)}if(void 0!==e.Value&&null!==e.Value){n=new r.XmlNode("MetadataValue").addChildNode(new r.XmlText(e.Value)).withName("Value");o.addChildNode(n)}return o},Xi=function(e,t){var o=new r.XmlNode("Metrics");if(void 0!==e.Status&&null!==e.Status){var n=new r.XmlNode("MetricsStatus").addChildNode(new r.XmlText(e.Status)).withName("Status");o.addChildNode(n)}if(void 0!==e.EventThreshold&&null!==e.EventThreshold){n=pa(e.EventThreshold,t).withName("EventThreshold");o.addChildNode(n)}return o},Mi=function(e,t){var o=new r.XmlNode("MetricsAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var n=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e.Prefix)).withName("Prefix");o.addChildNode(n)}void 0!==e.Tags&&null!==e.Tags&&Ra(e.Tags,t).map(function(e){e=e.withName("Tag"),o.addChildNode(e)});return o},Ri=function(e,t){var o=new r.XmlNode("MetricsConfiguration");if(void 0!==e.Id&&null!==e.Id){var n=new r.XmlNode("MetricsId").addChildNode(new r.XmlText(e.Id)).withName("Id");o.addChildNode(n)}if(void 0!==e.Filter&&null!==e.Filter){n=Oi(e.Filter,t).withName("Filter");o.addChildNode(n)}return o},Oi=function(e,o){var n=new r.XmlNode("MetricsFilter");return t.MetricsFilter.visit(e,{Prefix:function(e){var t=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e)).withName("Prefix");n.addChildNode(t)},Tag:function(e){var t=Xa(e,o).withName("Tag");n.addChildNode(t)},And:function(e){var t=Mi(e,o).withName("And");n.addChildNode(t)},_:function(e,t){if(!(t instanceof r.XmlNode||t instanceof r.XmlText))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new r.XmlNode(e).addChildNode(t))}}),n},Di=function(e,t){var o=new r.XmlNode("NoncurrentVersionExpiration");if(void 0!==e.NoncurrentDays&&null!==e.NoncurrentDays){var n=new r.XmlNode("Days").addChildNode(new r.XmlText(String(e.NoncurrentDays))).withName("NoncurrentDays");o.addChildNode(n)}return o},Ki=function(e,t){var o=new r.XmlNode("NoncurrentVersionTransition");if(void 0!==e.NoncurrentDays&&null!==e.NoncurrentDays){var n=new r.XmlNode("Days").addChildNode(new r.XmlText(String(e.NoncurrentDays))).withName("NoncurrentDays");o.addChildNode(n)}if(void 0!==e.StorageClass&&null!==e.StorageClass){n=new r.XmlNode("TransitionStorageClass").addChildNode(new r.XmlText(e.StorageClass)).withName("StorageClass");o.addChildNode(n)}return o},ji=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:Ki(e,t).withName("member")})},Hi=function(e,t){var o=new r.XmlNode("NotificationConfiguration");void 0!==e.TopicConfigurations&&null!==e.TopicConfigurations&&Ua(e.TopicConfigurations,t).map(function(e){e=e.withName("TopicConfiguration"),o.addChildNode(e)});void 0!==e.QueueConfigurations&&null!==e.QueueConfigurations&&ra(e.QueueConfigurations,t).map(function(e){e=e.withName("QueueConfiguration"),o.addChildNode(e)});void 0!==e.LambdaFunctionConfigurations&&null!==e.LambdaFunctionConfigurations&&Ni(e.LambdaFunctionConfigurations,t).map(function(e){e=e.withName("CloudFunctionConfiguration"),o.addChildNode(e)});return o},Ui=function(e,t){var o=new r.XmlNode("NotificationConfigurationFilter");if(void 0!==e.Key&&null!==e.Key){var n=ya(e.Key,t).withName("S3Key");o.addChildNode(n)}return o},qi=function(e,t){var o=new r.XmlNode("ObjectIdentifier");if(void 0!==e.Key&&null!==e.Key){var n=new r.XmlNode("ObjectKey").addChildNode(new r.XmlText(e.Key)).withName("Key");o.addChildNode(n)}if(void 0!==e.VersionId&&null!==e.VersionId){n=new r.XmlNode("ObjectVersionId").addChildNode(new r.XmlText(e.VersionId)).withName("VersionId");o.addChildNode(n)}return o},Li=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:qi(e,t).withName("member")})},$i=function(e,t){var o=new r.XmlNode("ObjectLockConfiguration");if(void 0!==e.ObjectLockEnabled&&null!==e.ObjectLockEnabled){var n=new r.XmlNode("ObjectLockEnabled").addChildNode(new r.XmlText(e.ObjectLockEnabled)).withName("ObjectLockEnabled");o.addChildNode(n)}if(void 0!==e.Rule&&null!==e.Rule){n=Vi(e.Rule,t).withName("Rule");o.addChildNode(n)}return o},Gi=function(e,t){var o=new r.XmlNode("ObjectLockLegalHold");if(void 0!==e.Status&&null!==e.Status){var n=new r.XmlNode("ObjectLockLegalHoldStatus").addChildNode(new r.XmlText(e.Status)).withName("Status");o.addChildNode(n)}return o},Fi=function(e,t){var o=new r.XmlNode("ObjectLockRetention");if(void 0!==e.Mode&&null!==e.Mode){var n=new r.XmlNode("ObjectLockRetentionMode").addChildNode(new r.XmlText(e.Mode)).withName("Mode");o.addChildNode(n)}if(void 0!==e.RetainUntilDate&&null!==e.RetainUntilDate){n=new r.XmlNode("Date").addChildNode(new r.XmlText(e.RetainUntilDate.toISOString().split(".")[0]+"Z")).withName("RetainUntilDate");o.addChildNode(n)}return o},Vi=function(e,t){var o=new r.XmlNode("ObjectLockRule");if(void 0!==e.DefaultRetention&&null!==e.DefaultRetention){var n=Wr(e.DefaultRetention,t).withName("DefaultRetention");o.addChildNode(n)}return o},Wi=function(e,t){var o=new r.XmlNode("OutputLocation");if(void 0!==e.S3&&null!==e.S3){var n=Ca(e.S3,t).withName("S3");o.addChildNode(n)}return o},Qi=function(e,t){var o=new r.XmlNode("OutputSerialization");if(void 0!==e.CSV&&null!==e.CSV){var n=Vr(e.CSV,t).withName("CSV");o.addChildNode(n)}if(void 0!==e.JSON&&null!==e.JSON){n=ki(e.JSON,t).withName("JSON");o.addChildNode(n)}return o},Ji=function(e,t){var o=new r.XmlNode("Owner");if(void 0!==e.DisplayName&&null!==e.DisplayName){var n=new r.XmlNode("DisplayName").addChildNode(new r.XmlText(e.DisplayName)).withName("DisplayName");o.addChildNode(n)}if(void 0!==e.ID&&null!==e.ID){n=new r.XmlNode("ID").addChildNode(new r.XmlText(e.ID)).withName("ID");o.addChildNode(n)}return o},Yi=function(e,t){var o=new r.XmlNode("OwnershipControls");void 0!==e.Rules&&null!==e.Rules&&ea(e.Rules,t).map(function(e){e=e.withName("Rule"),o.addChildNode(e)});return o},Zi=function(e,t){var o=new r.XmlNode("OwnershipControlsRule");if(void 0!==e.ObjectOwnership&&null!==e.ObjectOwnership){var n=new r.XmlNode("ObjectOwnership").addChildNode(new r.XmlText(e.ObjectOwnership)).withName("ObjectOwnership");o.addChildNode(n)}return o},ea=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:Zi(e,t).withName("member")})},ta=function(e,t){return new r.XmlNode("ParquetInput")},oa=function(e,t){var o=new r.XmlNode("PublicAccessBlockConfiguration");if(void 0!==e.BlockPublicAcls&&null!==e.BlockPublicAcls){var n=new r.XmlNode("Setting").addChildNode(new r.XmlText(String(e.BlockPublicAcls))).withName("BlockPublicAcls");o.addChildNode(n)}if(void 0!==e.IgnorePublicAcls&&null!==e.IgnorePublicAcls){n=new r.XmlNode("Setting").addChildNode(new r.XmlText(String(e.IgnorePublicAcls))).withName("IgnorePublicAcls");o.addChildNode(n)}if(void 0!==e.BlockPublicPolicy&&null!==e.BlockPublicPolicy){n=new r.XmlNode("Setting").addChildNode(new r.XmlText(String(e.BlockPublicPolicy))).withName("BlockPublicPolicy");o.addChildNode(n)}if(void 0!==e.RestrictPublicBuckets&&null!==e.RestrictPublicBuckets){n=new r.XmlNode("Setting").addChildNode(new r.XmlText(String(e.RestrictPublicBuckets))).withName("RestrictPublicBuckets");o.addChildNode(n)}return o},na=function(e,t){var o=new r.XmlNode("QueueConfiguration");if(void 0!==e.Id&&null!==e.Id){var n=new r.XmlNode("NotificationId").addChildNode(new r.XmlText(e.Id)).withName("Id");o.addChildNode(n)}if(void 0!==e.QueueArn&&null!==e.QueueArn){n=new r.XmlNode("QueueArn").addChildNode(new r.XmlText(e.QueueArn)).withName("Queue");o.addChildNode(n)}void 0!==e.Events&&null!==e.Events&&oi(e.Events,t).map(function(e){e=e.withName("Event"),o.addChildNode(e)});if(void 0!==e.Filter&&null!==e.Filter){n=Ui(e.Filter,t).withName("Filter");o.addChildNode(n)}return o},ra=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:na(e,t).withName("member")})},ia=function(e,t){var o=new r.XmlNode("Redirect");if(void 0!==e.HostName&&null!==e.HostName){var n=new r.XmlNode("HostName").addChildNode(new r.XmlText(e.HostName)).withName("HostName");o.addChildNode(n)}if(void 0!==e.HttpRedirectCode&&null!==e.HttpRedirectCode){n=new r.XmlNode("HttpRedirectCode").addChildNode(new r.XmlText(e.HttpRedirectCode)).withName("HttpRedirectCode");o.addChildNode(n)}if(void 0!==e.Protocol&&null!==e.Protocol){n=new r.XmlNode("Protocol").addChildNode(new r.XmlText(e.Protocol)).withName("Protocol");o.addChildNode(n)}if(void 0!==e.ReplaceKeyPrefixWith&&null!==e.ReplaceKeyPrefixWith){n=new r.XmlNode("ReplaceKeyPrefixWith").addChildNode(new r.XmlText(e.ReplaceKeyPrefixWith)).withName("ReplaceKeyPrefixWith");o.addChildNode(n)}if(void 0!==e.ReplaceKeyWith&&null!==e.ReplaceKeyWith){n=new r.XmlNode("ReplaceKeyWith").addChildNode(new r.XmlText(e.ReplaceKeyWith)).withName("ReplaceKeyWith");o.addChildNode(n)}return o},aa=function(e,t){var o=new r.XmlNode("RedirectAllRequestsTo");if(void 0!==e.HostName&&null!==e.HostName){var n=new r.XmlNode("HostName").addChildNode(new r.XmlText(e.HostName)).withName("HostName");o.addChildNode(n)}if(void 0!==e.Protocol&&null!==e.Protocol){n=new r.XmlNode("Protocol").addChildNode(new r.XmlText(e.Protocol)).withName("Protocol");o.addChildNode(n)}return o},sa=function(e,t){var o=new r.XmlNode("ReplicaModifications");if(void 0!==e.Status&&null!==e.Status){var n=new r.XmlNode("ReplicaModificationsStatus").addChildNode(new r.XmlText(e.Status)).withName("Status");o.addChildNode(n)}return o},da=function(e,t){var o=new r.XmlNode("ReplicationConfiguration");if(void 0!==e.Role&&null!==e.Role){var n=new r.XmlNode("Role").addChildNode(new r.XmlText(e.Role)).withName("Role");o.addChildNode(n)}void 0!==e.Rules&&null!==e.Rules&&ma(e.Rules,t).map(function(e){e=e.withName("Rule"),o.addChildNode(e)});return o},ua=function(e,t){var o=new r.XmlNode("ReplicationRule");if(void 0!==e.ID&&null!==e.ID){var n=new r.XmlNode("ID").addChildNode(new r.XmlText(e.ID)).withName("ID");o.addChildNode(n)}if(void 0!==e.Priority&&null!==e.Priority){n=new r.XmlNode("Priority").addChildNode(new r.XmlText(String(e.Priority))).withName("Priority");o.addChildNode(n)}if(void 0!==e.Prefix&&null!==e.Prefix){n=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e.Prefix)).withName("Prefix");o.addChildNode(n)}if(void 0!==e.Filter&&null!==e.Filter){n=la(e.Filter,t).withName("Filter");o.addChildNode(n)}if(void 0!==e.Status&&null!==e.Status){n=new r.XmlNode("ReplicationRuleStatus").addChildNode(new r.XmlText(e.Status)).withName("Status");o.addChildNode(n)}if(void 0!==e.SourceSelectionCriteria&&null!==e.SourceSelectionCriteria){n=Ba(e.SourceSelectionCriteria,t).withName("SourceSelectionCriteria");o.addChildNode(n)}if(void 0!==e.ExistingObjectReplication&&null!==e.ExistingObjectReplication){n=ni(e.ExistingObjectReplication,t).withName("ExistingObjectReplication");o.addChildNode(n)}if(void 0!==e.Destination&&null!==e.Destination){n=Yr(e.Destination,t).withName("Destination");o.addChildNode(n)}if(void 0!==e.DeleteMarkerReplication&&null!==e.DeleteMarkerReplication){n=Jr(e.DeleteMarkerReplication,t).withName("DeleteMarkerReplication");o.addChildNode(n)}return o},ca=function(e,t){var o=new r.XmlNode("ReplicationRuleAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var n=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e.Prefix)).withName("Prefix");o.addChildNode(n)}void 0!==e.Tags&&null!==e.Tags&&Ra(e.Tags,t).map(function(e){e=e.withName("Tag"),o.addChildNode(e)});return o},la=function(e,o){var n=new r.XmlNode("ReplicationRuleFilter");return t.ReplicationRuleFilter.visit(e,{Prefix:function(e){var t=new r.XmlNode("Prefix").addChildNode(new r.XmlText(e)).withName("Prefix");n.addChildNode(t)},Tag:function(e){var t=Xa(e,o).withName("Tag");n.addChildNode(t)},And:function(e){var t=ca(e,o).withName("And");n.addChildNode(t)},_:function(e,t){if(!(t instanceof r.XmlNode||t instanceof r.XmlText))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new r.XmlNode(e).addChildNode(t))}}),n},ma=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:ua(e,t).withName("member")})},va=function(e,t){var o=new r.XmlNode("ReplicationTime");if(void 0!==e.Status&&null!==e.Status){var n=new r.XmlNode("ReplicationTimeStatus").addChildNode(new r.XmlText(e.Status)).withName("Status");o.addChildNode(n)}if(void 0!==e.Time&&null!==e.Time){n=pa(e.Time,t).withName("Time");o.addChildNode(n)}return o},pa=function(e,t){var o=new r.XmlNode("ReplicationTimeValue");if(void 0!==e.Minutes&&null!==e.Minutes){var n=new r.XmlNode("Minutes").addChildNode(new r.XmlText(String(e.Minutes))).withName("Minutes");o.addChildNode(n)}return o},ga=function(e,t){var o=new r.XmlNode("RequestPaymentConfiguration");if(void 0!==e.Payer&&null!==e.Payer){var n=new r.XmlNode("Payer").addChildNode(new r.XmlText(e.Payer)).withName("Payer");o.addChildNode(n)}return o},_a=function(e,t){var o=new r.XmlNode("RequestProgress");if(void 0!==e.Enabled&&null!==e.Enabled){var n=new r.XmlNode("EnableRequestProgress").addChildNode(new r.XmlText(String(e.Enabled))).withName("Enabled");o.addChildNode(n)}return o},fa=function(e,t){var o=new r.XmlNode("RestoreRequest");if(void 0!==e.Days&&null!==e.Days){var n=new r.XmlNode("Days").addChildNode(new r.XmlText(String(e.Days))).withName("Days");o.addChildNode(n)}if(void 0!==e.GlacierJobParameters&&null!==e.GlacierJobParameters){n=si(e.GlacierJobParameters,t).withName("GlacierJobParameters");o.addChildNode(n)}if(void 0!==e.Type&&null!==e.Type){n=new r.XmlNode("RestoreRequestType").addChildNode(new r.XmlText(e.Type)).withName("Type");o.addChildNode(n)}if(void 0!==e.Tier&&null!==e.Tier){n=new r.XmlNode("Tier").addChildNode(new r.XmlText(e.Tier)).withName("Tier");o.addChildNode(n)}if(void 0!==e.Description&&null!==e.Description){n=new r.XmlNode("Description").addChildNode(new r.XmlText(e.Description)).withName("Description");o.addChildNode(n)}if(void 0!==e.SelectParameters&&null!==e.SelectParameters){n=ba(e.SelectParameters,t).withName("SelectParameters");o.addChildNode(n)}if(void 0!==e.OutputLocation&&null!==e.OutputLocation){n=Wi(e.OutputLocation,t).withName("OutputLocation");o.addChildNode(n)}return o},wa=function(e,t){var o=new r.XmlNode("RoutingRule");if(void 0!==e.Condition&&null!==e.Condition){var n=Ur(e.Condition,t).withName("Condition");o.addChildNode(n)}if(void 0!==e.Redirect&&null!==e.Redirect){n=ia(e.Redirect,t).withName("Redirect");o.addChildNode(n)}return o},ha=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:wa(e,t).withName("RoutingRule")})},ya=function(e,t){var o=new r.XmlNode("S3KeyFilter");void 0!==e.FilterRules&&null!==e.FilterRules&&ai(e.FilterRules,t).map(function(e){e=e.withName("FilterRule"),o.addChildNode(e)});return o},Ca=function(e,t){var o=new r.XmlNode("S3Location");if(void 0!==e.BucketName&&null!==e.BucketName){var n=new r.XmlNode("BucketName").addChildNode(new r.XmlText(e.BucketName)).withName("BucketName");o.addChildNode(n)}if(void 0!==e.Prefix&&null!==e.Prefix){n=new r.XmlNode("LocationPrefix").addChildNode(new r.XmlText(e.Prefix)).withName("Prefix");o.addChildNode(n)}if(void 0!==e.Encryption&&null!==e.Encryption){n=Zr(e.Encryption,t).withName("Encryption");o.addChildNode(n)}if(void 0!==e.CannedACL&&null!==e.CannedACL){n=new r.XmlNode("ObjectCannedACL").addChildNode(new r.XmlText(e.CannedACL)).withName("CannedACL");o.addChildNode(n)}if(void 0!==e.AccessControlList&&null!==e.AccessControlList){var i=ci(e.AccessControlList,t),a=new r.XmlNode("AccessControlList");i.map(function(e){a.addChildNode(e)}),o.addChildNode(a)}if(void 0!==e.Tagging&&null!==e.Tagging){n=Ma(e.Tagging,t).withName("Tagging");o.addChildNode(n)}if(void 0!==e.UserMetadata&&null!==e.UserMetadata){i=$a(e.UserMetadata,t);var s=new r.XmlNode("UserMetadata");i.map(function(e){s.addChildNode(e)}),o.addChildNode(s)}if(void 0!==e.StorageClass&&null!==e.StorageClass){n=new r.XmlNode("StorageClass").addChildNode(new r.XmlText(e.StorageClass)).withName("StorageClass");o.addChildNode(n)}return o},xa=function(e,t){var o=new r.XmlNode("ScanRange");if(void 0!==e.Start&&null!==e.Start){var n=new r.XmlNode("Start").addChildNode(new r.XmlText(String(e.Start))).withName("Start");o.addChildNode(n)}if(void 0!==e.End&&null!==e.End){n=new r.XmlNode("End").addChildNode(new r.XmlText(String(e.End))).withName("End");o.addChildNode(n)}return o},ba=function(e,t){var o=new r.XmlNode("SelectParameters");if(void 0!==e.InputSerialization&&null!==e.InputSerialization){var n=mi(e.InputSerialization,t).withName("InputSerialization");o.addChildNode(n)}if(void 0!==e.ExpressionType&&null!==e.ExpressionType){n=new r.XmlNode("ExpressionType").addChildNode(new r.XmlText(e.ExpressionType)).withName("ExpressionType");o.addChildNode(n)}if(void 0!==e.Expression&&null!==e.Expression){n=new r.XmlNode("Expression").addChildNode(new r.XmlText(e.Expression)).withName("Expression");o.addChildNode(n)}if(void 0!==e.OutputSerialization&&null!==e.OutputSerialization){n=Qi(e.OutputSerialization,t).withName("OutputSerialization");o.addChildNode(n)}return o},ka=function(e,t){var o=new r.XmlNode("ServerSideEncryptionByDefault");if(void 0!==e.SSEAlgorithm&&null!==e.SSEAlgorithm){var n=new r.XmlNode("ServerSideEncryption").addChildNode(new r.XmlText(e.SSEAlgorithm)).withName("SSEAlgorithm");o.addChildNode(n)}if(void 0!==e.KMSMasterKeyID&&null!==e.KMSMasterKeyID){n=new r.XmlNode("SSEKMSKeyId").addChildNode(new r.XmlText(e.KMSMasterKeyID)).withName("KMSMasterKeyID");o.addChildNode(n)}return o},Ea=function(e,t){var o=new r.XmlNode("ServerSideEncryptionConfiguration");void 0!==e.Rules&&null!==e.Rules&&Ta(e.Rules,t).map(function(e){e=e.withName("Rule"),o.addChildNode(e)});return o},Na=function(e,t){var o=new r.XmlNode("ServerSideEncryptionRule");if(void 0!==e.ApplyServerSideEncryptionByDefault&&null!==e.ApplyServerSideEncryptionByDefault){var n=ka(e.ApplyServerSideEncryptionByDefault,t).withName("ApplyServerSideEncryptionByDefault");o.addChildNode(n)}if(void 0!==e.BucketKeyEnabled&&null!==e.BucketKeyEnabled){n=new r.XmlNode("BucketKeyEnabled").addChildNode(new r.XmlText(String(e.BucketKeyEnabled))).withName("BucketKeyEnabled");o.addChildNode(n)}return o},Ta=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:Na(e,t).withName("member")})},Ba=function(e,t){var o=new r.XmlNode("SourceSelectionCriteria");if(void 0!==e.SseKmsEncryptedObjects&&null!==e.SseKmsEncryptedObjects){var n=Pa(e.SseKmsEncryptedObjects,t).withName("SseKmsEncryptedObjects");o.addChildNode(n)}if(void 0!==e.ReplicaModifications&&null!==e.ReplicaModifications){n=sa(e.ReplicaModifications,t).withName("ReplicaModifications");o.addChildNode(n)}return o},Sa=function(e,t){var o=new r.XmlNode("SSE-KMS");if(void 0!==e.KeyId&&null!==e.KeyId){var n=new r.XmlNode("SSEKMSKeyId").addChildNode(new r.XmlText(e.KeyId)).withName("KeyId");o.addChildNode(n)}return o},Pa=function(e,t){var o=new r.XmlNode("SseKmsEncryptedObjects");if(void 0!==e.Status&&null!==e.Status){var n=new r.XmlNode("SseKmsEncryptedObjectsStatus").addChildNode(new r.XmlText(e.Status)).withName("Status");o.addChildNode(n)}return o},Aa=function(e,t){return new r.XmlNode("SSE-S3")},za=function(e,t){var o=new r.XmlNode("StorageClassAnalysis");if(void 0!==e.DataExport&&null!==e.DataExport){var n=Ia(e.DataExport,t).withName("DataExport");o.addChildNode(n)}return o},Ia=function(e,t){var o=new r.XmlNode("StorageClassAnalysisDataExport");if(void 0!==e.OutputSchemaVersion&&null!==e.OutputSchemaVersion){var n=new r.XmlNode("StorageClassAnalysisSchemaVersion").addChildNode(new r.XmlText(e.OutputSchemaVersion)).withName("OutputSchemaVersion");o.addChildNode(n)}if(void 0!==e.Destination&&null!==e.Destination){n=Xr(e.Destination,t).withName("Destination");o.addChildNode(n)}return o},Xa=function(e,t){var o=new r.XmlNode("Tag");if(void 0!==e.Key&&null!==e.Key){var n=new r.XmlNode("ObjectKey").addChildNode(new r.XmlText(e.Key)).withName("Key");o.addChildNode(n)}if(void 0!==e.Value&&null!==e.Value){n=new r.XmlNode("Value").addChildNode(new r.XmlText(e.Value)).withName("Value");o.addChildNode(n)}return o},Ma=function(e,t){var o=new r.XmlNode("Tagging");if(void 0!==e.TagSet&&null!==e.TagSet){var n=Ra(e.TagSet,t),i=new r.XmlNode("TagSet");n.map(function(e){i.addChildNode(e)}),o.addChildNode(i)}return o},Ra=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:Xa(e,t).withName("Tag")})},Oa=function(e,t){var o=new r.XmlNode("TargetGrant");if(void 0!==e.Grantee&&null!==e.Grantee){var n=ui(e.Grantee,t).withName("Grantee");o.addChildNode(n)}if(void 0!==e.Permission&&null!==e.Permission){n=new r.XmlNode("BucketLogsPermission").addChildNode(new r.XmlText(e.Permission)).withName("Permission");o.addChildNode(n)}return o},Da=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:Oa(e,t).withName("Grant")})},Ka=function(e,t){var o=new r.XmlNode("Tiering");if(void 0!==e.Days&&null!==e.Days){var n=new r.XmlNode("IntelligentTieringDays").addChildNode(new r.XmlText(String(e.Days))).withName("Days");o.addChildNode(n)}if(void 0!==e.AccessTier&&null!==e.AccessTier){n=new r.XmlNode("IntelligentTieringAccessTier").addChildNode(new r.XmlText(e.AccessTier)).withName("AccessTier");o.addChildNode(n)}return o},ja=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:Ka(e,t).withName("member")})},Ha=function(e,t){var o=new r.XmlNode("TopicConfiguration");if(void 0!==e.Id&&null!==e.Id){var n=new r.XmlNode("NotificationId").addChildNode(new r.XmlText(e.Id)).withName("Id");o.addChildNode(n)}if(void 0!==e.TopicArn&&null!==e.TopicArn){n=new r.XmlNode("TopicArn").addChildNode(new r.XmlText(e.TopicArn)).withName("Topic");o.addChildNode(n)}void 0!==e.Events&&null!==e.Events&&oi(e.Events,t).map(function(e){e=e.withName("Event"),o.addChildNode(e)});if(void 0!==e.Filter&&null!==e.Filter){n=Ui(e.Filter,t).withName("Filter");o.addChildNode(n)}return o},Ua=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:Ha(e,t).withName("member")})},qa=function(e,t){var o=new r.XmlNode("Transition");if(void 0!==e.Date&&null!==e.Date){var n=new r.XmlNode("Date").addChildNode(new r.XmlText(e.Date.toISOString().split(".")[0]+"Z")).withName("Date");o.addChildNode(n)}if(void 0!==e.Days&&null!==e.Days){n=new r.XmlNode("Days").addChildNode(new r.XmlText(String(e.Days))).withName("Days");o.addChildNode(n)}if(void 0!==e.StorageClass&&null!==e.StorageClass){n=new r.XmlNode("TransitionStorageClass").addChildNode(new r.XmlText(e.StorageClass)).withName("StorageClass");o.addChildNode(n)}return o},La=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:qa(e,t).withName("member")})},$a=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:Ii(e,t).withName("MetadataEntry")})},Ga=function(e,t){var o=new r.XmlNode("VersioningConfiguration");if(void 0!==e.MFADelete&&null!==e.MFADelete){var n=new r.XmlNode("MFADelete").addChildNode(new r.XmlText(e.MFADelete)).withName("MfaDelete");o.addChildNode(n)}if(void 0!==e.Status&&null!==e.Status){n=new r.XmlNode("BucketVersioningStatus").addChildNode(new r.XmlText(e.Status)).withName("Status");o.addChildNode(n)}return o},Fa=function(e,t){var o=new r.XmlNode("WebsiteConfiguration");if(void 0!==e.ErrorDocument&&null!==e.ErrorDocument){var n=ti(e.ErrorDocument,t).withName("ErrorDocument");o.addChildNode(n)}if(void 0!==e.IndexDocument&&null!==e.IndexDocument){n=li(e.IndexDocument,t).withName("IndexDocument");o.addChildNode(n)}if(void 0!==e.RedirectAllRequestsTo&&null!==e.RedirectAllRequestsTo){n=aa(e.RedirectAllRequestsTo,t).withName("RedirectAllRequestsTo");o.addChildNode(n)}if(void 0!==e.RoutingRules&&null!==e.RoutingRules){var i=ha(e.RoutingRules,t),a=new r.XmlNode("RoutingRules");i.map(function(e){a.addChildNode(e)}),o.addChildNode(a)}return o},Va=function(e,t){var o={DaysAfterInitiation:void 0};return void 0!==e.DaysAfterInitiation&&(o.DaysAfterInitiation=parseInt(e.DaysAfterInitiation)),o},Wa=function(e,t){var o={Owner:void 0};return void 0!==e.Owner&&(o.Owner=e.Owner),o},Qa=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},Ja=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},Ya=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},Za=function(e,t){var o={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(o.Prefix=e.Prefix),""===e.Tag&&(o.Tags=[]),void 0!==e.Tag&&(o.Tags=eu((0,n.getArrayIfSingleItem)(e.Tag),t)),o},es=function(e,t){var o={Id:void 0,Filter:void 0,StorageClassAnalysis:void 0};return void 0!==e.Id&&(o.Id=e.Id),void 0!==e.Filter&&(o.Filter=ns(e.Filter,t)),void 0!==e.StorageClassAnalysis&&(o.StorageClassAnalysis=Jd(e.StorageClassAnalysis,t)),o},ts=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:es(e,t)})},os=function(e,t){var o={S3BucketDestination:void 0};return void 0!==e.S3BucketDestination&&(o.S3BucketDestination=rs(e.S3BucketDestination,t)),o},ns=function(e,t){return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Zd(e.Tag,t)}:void 0!==e.And?{And:Za(e.And,t)}:{$unknown:Object.entries(e)[0]}},rs=function(e,t){var o={Format:void 0,BucketAccountId:void 0,Bucket:void 0,Prefix:void 0};return void 0!==e.Format&&(o.Format=e.Format),void 0!==e.BucketAccountId&&(o.BucketAccountId=e.BucketAccountId),void 0!==e.Bucket&&(o.Bucket=e.Bucket),void 0!==e.Prefix&&(o.Prefix=e.Prefix),o},is=function(e,t){var o={Name:void 0,CreationDate:void 0};return void 0!==e.Name&&(o.Name=e.Name),void 0!==e.CreationDate&&(o.CreationDate=new Date(e.CreationDate)),o},as=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:is(e,t)})},ss=function(e,t){var o={Prefix:void 0};return void 0!==e.Prefix&&(o.Prefix=e.Prefix),o},ds=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:ss(e,t)})},us=function(e,t){var o={HttpErrorCodeReturnedEquals:void 0,KeyPrefixEquals:void 0};return void 0!==e.HttpErrorCodeReturnedEquals&&(o.HttpErrorCodeReturnedEquals=e.HttpErrorCodeReturnedEquals),void 0!==e.KeyPrefixEquals&&(o.KeyPrefixEquals=e.KeyPrefixEquals),o},cs=function(e,t){var o={ETag:void 0,LastModified:void 0};return void 0!==e.ETag&&(o.ETag=e.ETag),void 0!==e.LastModified&&(o.LastModified=new Date(e.LastModified)),o},ls=function(e,t){var o={ETag:void 0,LastModified:void 0};return void 0!==e.ETag&&(o.ETag=e.ETag),void 0!==e.LastModified&&(o.LastModified=new Date(e.LastModified)),o},ms=function(e,t){var o={AllowedHeaders:void 0,AllowedMethods:void 0,AllowedOrigins:void 0,ExposeHeaders:void 0,MaxAgeSeconds:void 0};return""===e.AllowedHeader&&(o.AllowedHeaders=[]),void 0!==e.AllowedHeader&&(o.AllowedHeaders=Qa((0,n.getArrayIfSingleItem)(e.AllowedHeader),t)),""===e.AllowedMethod&&(o.AllowedMethods=[]),void 0!==e.AllowedMethod&&(o.AllowedMethods=Ja((0,n.getArrayIfSingleItem)(e.AllowedMethod),t)),""===e.AllowedOrigin&&(o.AllowedOrigins=[]),void 0!==e.AllowedOrigin&&(o.AllowedOrigins=Ya((0,n.getArrayIfSingleItem)(e.AllowedOrigin),t)),""===e.ExposeHeader&&(o.ExposeHeaders=[]),void 0!==e.ExposeHeader&&(o.ExposeHeaders=Ts((0,n.getArrayIfSingleItem)(e.ExposeHeader),t)),void 0!==e.MaxAgeSeconds&&(o.MaxAgeSeconds=parseInt(e.MaxAgeSeconds)),o},vs=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:ms(e,t)})},ps=function(e,t){var o={Mode:void 0,Days:void 0,Years:void 0};return void 0!==e.Mode&&(o.Mode=e.Mode),void 0!==e.Days&&(o.Days=parseInt(e.Days)),void 0!==e.Years&&(o.Years=parseInt(e.Years)),o},gs=function(e,t){var o={Key:void 0,VersionId:void 0,DeleteMarker:void 0,DeleteMarkerVersionId:void 0};return void 0!==e.Key&&(o.Key=e.Key),void 0!==e.VersionId&&(o.VersionId=e.VersionId),void 0!==e.DeleteMarker&&(o.DeleteMarker="true"==e.DeleteMarker),void 0!==e.DeleteMarkerVersionId&&(o.DeleteMarkerVersionId=e.DeleteMarkerVersionId),o},_s=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:gs(e,t)})},fs=function(e,t){var o={Owner:void 0,Key:void 0,VersionId:void 0,IsLatest:void 0,LastModified:void 0};return void 0!==e.Owner&&(o.Owner=yd(e.Owner,t)),void 0!==e.Key&&(o.Key=e.Key),void 0!==e.VersionId&&(o.VersionId=e.VersionId),void 0!==e.IsLatest&&(o.IsLatest="true"==e.IsLatest),void 0!==e.LastModified&&(o.LastModified=new Date(e.LastModified)),o},ws=function(e,t){var o={Status:void 0};return void 0!==e.Status&&(o.Status=e.Status),o},hs=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:fs(e,t)})},ys=function(e,t){var o={Bucket:void 0,Account:void 0,StorageClass:void 0,AccessControlTranslation:void 0,EncryptionConfiguration:void 0,ReplicationTime:void 0,Metrics:void 0};return void 0!==e.Bucket&&(o.Bucket=e.Bucket),void 0!==e.Account&&(o.Account=e.Account),void 0!==e.StorageClass&&(o.StorageClass=e.StorageClass),void 0!==e.AccessControlTranslation&&(o.AccessControlTranslation=Wa(e.AccessControlTranslation,t)),void 0!==e.EncryptionConfiguration&&(o.EncryptionConfiguration=Cs(e.EncryptionConfiguration,t)),void 0!==e.ReplicationTime&&(o.ReplicationTime=Dd(e.ReplicationTime,t)),void 0!==e.Metrics&&(o.Metrics=td(e.Metrics,t)),o},Cs=function(e,t){var o={ReplicaKmsKeyID:void 0};return void 0!==e.ReplicaKmsKeyID&&(o.ReplicaKmsKeyID=e.ReplicaKmsKeyID),o},xs=function(e,t){var o={Key:void 0,VersionId:void 0,Code:void 0,Message:void 0};return void 0!==e.Key&&(o.Key=e.Key),void 0!==e.VersionId&&(o.VersionId=e.VersionId),void 0!==e.Code&&(o.Code=e.Code),void 0!==e.Message&&(o.Message=e.Message),o},bs=function(e,t){var o={Key:void 0};return void 0!==e.Key&&(o.Key=e.Key),o},ks=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:xs(e,t)})},Es=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},Ns=function(e,t){var o={Status:void 0};return void 0!==e.Status&&(o.Status=e.Status),o},Ts=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},Bs=function(e,t){var o={Name:void 0,Value:void 0};return void 0!==e.Name&&(o.Name=e.Name),void 0!==e.Value&&(o.Value=e.Value),o},Ss=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Bs(e,t)})},Ps=function(e,t){var o={Grantee:void 0,Permission:void 0};return void 0!==e.Grantee&&(o.Grantee=As(e.Grantee,t)),void 0!==e.Permission&&(o.Permission=e.Permission),o},As=function(e,t){var o={DisplayName:void 0,EmailAddress:void 0,ID:void 0,URI:void 0,Type:void 0};return void 0!==e.DisplayName&&(o.DisplayName=e.DisplayName),void 0!==e.EmailAddress&&(o.EmailAddress=e.EmailAddress),void 0!==e.ID&&(o.ID=e.ID),void 0!==e.URI&&(o.URI=e.URI),void 0!==e["xsi:type"]&&(o.Type=e["xsi:type"]),o},zs=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Ps(e,t)})},Is=function(e,t){var o={Suffix:void 0};return void 0!==e.Suffix&&(o.Suffix=e.Suffix),o},Xs=function(e,t){var o={ID:void 0,DisplayName:void 0};return void 0!==e.ID&&(o.ID=e.ID),void 0!==e.DisplayName&&(o.DisplayName=e.DisplayName),o},Ms=function(e,t){var o={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(o.Prefix=e.Prefix),""===e.Tag&&(o.Tags=[]),void 0!==e.Tag&&(o.Tags=eu((0,n.getArrayIfSingleItem)(e.Tag),t)),o},Rs=function(e,t){var o={Id:void 0,Filter:void 0,Status:void 0,Tierings:void 0};return void 0!==e.Id&&(o.Id=e.Id),void 0!==e.Filter&&(o.Filter=Ds(e.Filter,t)),void 0!==e.Status&&(o.Status=e.Status),""===e.Tiering&&(o.Tierings=[]),void 0!==e.Tiering&&(o.Tierings=ru((0,n.getArrayIfSingleItem)(e.Tiering),t)),o},Os=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Rs(e,t)})},Ds=function(e,t){var o={Prefix:void 0,Tag:void 0,And:void 0};return void 0!==e.Prefix&&(o.Prefix=e.Prefix),void 0!==e.Tag&&(o.Tag=Zd(e.Tag,t)),void 0!==e.And&&(o.And=Ms(e.And,t)),o},Ks=function(e,t){var o={Destination:void 0,IsEnabled:void 0,Filter:void 0,Id:void 0,IncludedObjectVersions:void 0,OptionalFields:void 0,Schedule:void 0};return void 0!==e.Destination&&(o.Destination=Hs(e.Destination,t)),void 0!==e.IsEnabled&&(o.IsEnabled="true"==e.IsEnabled),void 0!==e.Filter&&(o.Filter=qs(e.Filter,t)),void 0!==e.Id&&(o.Id=e.Id),void 0!==e.IncludedObjectVersions&&(o.IncludedObjectVersions=e.IncludedObjectVersions),""===e.OptionalFields&&(o.OptionalFields=[]),void 0!==e.OptionalFields&&void 0!==e.OptionalFields.Field&&(o.OptionalFields=Ls((0,n.getArrayIfSingleItem)(e.OptionalFields.Field),t)),void 0!==e.Schedule&&(o.Schedule=Gs(e.Schedule,t)),o},js=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Ks(e,t)})},Hs=function(e,t){var o={S3BucketDestination:void 0};return void 0!==e.S3BucketDestination&&(o.S3BucketDestination=$s(e.S3BucketDestination,t)),o},Us=function(e,t){var o={SSES3:void 0,SSEKMS:void 0};return void 0!==e["SSE-S3"]&&(o.SSES3=Qd(e["SSE-S3"],t)),void 0!==e["SSE-KMS"]&&(o.SSEKMS=Vd(e["SSE-KMS"],t)),o},qs=function(e,t){var o={Prefix:void 0};return void 0!==e.Prefix&&(o.Prefix=e.Prefix),o},Ls=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},$s=function(e,t){var o={AccountId:void 0,Bucket:void 0,Format:void 0,Prefix:void 0,Encryption:void 0};return void 0!==e.AccountId&&(o.AccountId=e.AccountId),void 0!==e.Bucket&&(o.Bucket=e.Bucket),void 0!==e.Format&&(o.Format=e.Format),void 0!==e.Prefix&&(o.Prefix=e.Prefix),void 0!==e.Encryption&&(o.Encryption=Us(e.Encryption,t)),o},Gs=function(e,t){var o={Frequency:void 0};return void 0!==e.Frequency&&(o.Frequency=e.Frequency),o},Fs=function(e,t){var o={Id:void 0,LambdaFunctionArn:void 0,Events:void 0,Filter:void 0};return void 0!==e.Id&&(o.Id=e.Id),void 0!==e.CloudFunction&&(o.LambdaFunctionArn=e.CloudFunction),""===e.Event&&(o.Events=[]),void 0!==e.Event&&(o.Events=Es((0,n.getArrayIfSingleItem)(e.Event),t)),void 0!==e.Filter&&(o.Filter=ld(e.Filter,t)),o},Vs=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Fs(e,t)})},Ws=function(e,t){var o={Date:void 0,Days:void 0,ExpiredObjectDeleteMarker:void 0};return void 0!==e.Date&&(o.Date=new Date(e.Date)),void 0!==e.Days&&(o.Days=parseInt(e.Days)),void 0!==e.ExpiredObjectDeleteMarker&&(o.ExpiredObjectDeleteMarker="true"==e.ExpiredObjectDeleteMarker),o},Qs=function(e,t){var o={Expiration:void 0,ID:void 0,Prefix:void 0,Filter:void 0,Status:void 0,Transitions:void 0,NoncurrentVersionTransitions:void 0,NoncurrentVersionExpiration:void 0,AbortIncompleteMultipartUpload:void 0};return void 0!==e.Expiration&&(o.Expiration=Ws(e.Expiration,t)),void 0!==e.ID&&(o.ID=e.ID),void 0!==e.Prefix&&(o.Prefix=e.Prefix),void 0!==e.Filter&&(o.Filter=Ys(e.Filter,t)),void 0!==e.Status&&(o.Status=e.Status),""===e.Transition&&(o.Transitions=[]),void 0!==e.Transition&&(o.Transitions=du((0,n.getArrayIfSingleItem)(e.Transition),t)),""===e.NoncurrentVersionTransition&&(o.NoncurrentVersionTransitions=[]),void 0!==e.NoncurrentVersionTransition&&(o.NoncurrentVersionTransitions=cd((0,n.getArrayIfSingleItem)(e.NoncurrentVersionTransition),t)),void 0!==e.NoncurrentVersionExpiration&&(o.NoncurrentVersionExpiration=dd(e.NoncurrentVersionExpiration,t)),void 0!==e.AbortIncompleteMultipartUpload&&(o.AbortIncompleteMultipartUpload=Va(e.AbortIncompleteMultipartUpload,t)),o},Js=function(e,t){var o={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(o.Prefix=e.Prefix),""===e.Tag&&(o.Tags=[]),void 0!==e.Tag&&(o.Tags=eu((0,n.getArrayIfSingleItem)(e.Tag),t)),o},Ys=function(e,t){return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Zd(e.Tag,t)}:void 0!==e.And?{And:Js(e.And,t)}:{$unknown:Object.entries(e)[0]}},Zs=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Qs(e,t)})},ed=function(e,t){var o={TargetBucket:void 0,TargetGrants:void 0,TargetPrefix:void 0};return void 0!==e.TargetBucket&&(o.TargetBucket=e.TargetBucket),""===e.TargetGrants&&(o.TargetGrants=[]),void 0!==e.TargetGrants&&void 0!==e.TargetGrants.Grant&&(o.TargetGrants=ou((0,n.getArrayIfSingleItem)(e.TargetGrants.Grant),t)),void 0!==e.TargetPrefix&&(o.TargetPrefix=e.TargetPrefix),o},td=function(e,t){var o={Status:void 0,EventThreshold:void 0};return void 0!==e.Status&&(o.Status=e.Status),void 0!==e.EventThreshold&&(o.EventThreshold=Kd(e.EventThreshold,t)),o},od=function(e,t){var o={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(o.Prefix=e.Prefix),""===e.Tag&&(o.Tags=[]),void 0!==e.Tag&&(o.Tags=eu((0,n.getArrayIfSingleItem)(e.Tag),t)),o},nd=function(e,t){var o={Id:void 0,Filter:void 0};return void 0!==e.Id&&(o.Id=e.Id),void 0!==e.Filter&&(o.Filter=id(e.Filter,t)),o},rd=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:nd(e,t)})},id=function(e,t){return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Zd(e.Tag,t)}:void 0!==e.And?{And:od(e.And,t)}:{$unknown:Object.entries(e)[0]}},ad=function(e,t){var o={UploadId:void 0,Key:void 0,Initiated:void 0,StorageClass:void 0,Owner:void 0,Initiator:void 0};return void 0!==e.UploadId&&(o.UploadId=e.UploadId),void 0!==e.Key&&(o.Key=e.Key),void 0!==e.Initiated&&(o.Initiated=new Date(e.Initiated)),void 0!==e.StorageClass&&(o.StorageClass=e.StorageClass),void 0!==e.Owner&&(o.Owner=yd(e.Owner,t)),void 0!==e.Initiator&&(o.Initiator=Xs(e.Initiator,t)),o},sd=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:ad(e,t)})},dd=function(e,t){var o={NoncurrentDays:void 0};return void 0!==e.NoncurrentDays&&(o.NoncurrentDays=parseInt(e.NoncurrentDays)),o},ud=function(e,t){var o={NoncurrentDays:void 0,StorageClass:void 0};return void 0!==e.NoncurrentDays&&(o.NoncurrentDays=parseInt(e.NoncurrentDays)),void 0!==e.StorageClass&&(o.StorageClass=e.StorageClass),o},cd=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:ud(e,t)})},ld=function(e,t){var o={Key:void 0};return void 0!==e.S3Key&&(o.Key=Ud(e.S3Key,t)),o},md=function(e,t){var o={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return void 0!==e.Key&&(o.Key=e.Key),void 0!==e.LastModified&&(o.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(o.ETag=e.ETag),void 0!==e.Size&&(o.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(o.StorageClass=e.StorageClass),void 0!==e.Owner&&(o.Owner=yd(e.Owner,t)),o},vd=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:md(e,t)})},pd=function(e,t){var o={ObjectLockEnabled:void 0,Rule:void 0};return void 0!==e.ObjectLockEnabled&&(o.ObjectLockEnabled=e.ObjectLockEnabled),void 0!==e.Rule&&(o.Rule=fd(e.Rule,t)),o},gd=function(e,t){var o={Status:void 0};return void 0!==e.Status&&(o.Status=e.Status),o},_d=function(e,t){var o={Mode:void 0,RetainUntilDate:void 0};return void 0!==e.Mode&&(o.Mode=e.Mode),void 0!==e.RetainUntilDate&&(o.RetainUntilDate=new Date(e.RetainUntilDate)),o},fd=function(e,t){var o={DefaultRetention:void 0};return void 0!==e.DefaultRetention&&(o.DefaultRetention=ps(e.DefaultRetention,t)),o},wd=function(e,t){var o={ETag:void 0,Size:void 0,StorageClass:void 0,Key:void 0,VersionId:void 0,IsLatest:void 0,LastModified:void 0,Owner:void 0};return void 0!==e.ETag&&(o.ETag=e.ETag),void 0!==e.Size&&(o.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(o.StorageClass=e.StorageClass),void 0!==e.Key&&(o.Key=e.Key),void 0!==e.VersionId&&(o.VersionId=e.VersionId),void 0!==e.IsLatest&&(o.IsLatest="true"==e.IsLatest),void 0!==e.LastModified&&(o.LastModified=new Date(e.LastModified)),void 0!==e.Owner&&(o.Owner=yd(e.Owner,t)),o},hd=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:wd(e,t)})},yd=function(e,t){var o={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(o.DisplayName=e.DisplayName),void 0!==e.ID&&(o.ID=e.ID),o},Cd=function(e,t){var o={Rules:void 0};return""===e.Rule&&(o.Rules=[]),void 0!==e.Rule&&(o.Rules=bd((0,n.getArrayIfSingleItem)(e.Rule),t)),o},xd=function(e,t){var o={ObjectOwnership:void 0};return void 0!==e.ObjectOwnership&&(o.ObjectOwnership=e.ObjectOwnership),o},bd=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:xd(e,t)})},kd=function(e,t){var o={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0};return void 0!==e.PartNumber&&(o.PartNumber=parseInt(e.PartNumber)),void 0!==e.LastModified&&(o.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(o.ETag=e.ETag),void 0!==e.Size&&(o.Size=parseInt(e.Size)),o},Ed=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:kd(e,t)})},Nd=function(e,t){var o={IsPublic:void 0};return void 0!==e.IsPublic&&(o.IsPublic="true"==e.IsPublic),o},Td=function(e,t){var o={BlockPublicAcls:void 0,IgnorePublicAcls:void 0,BlockPublicPolicy:void 0,RestrictPublicBuckets:void 0};return void 0!==e.BlockPublicAcls&&(o.BlockPublicAcls="true"==e.BlockPublicAcls),void 0!==e.IgnorePublicAcls&&(o.IgnorePublicAcls="true"==e.IgnorePublicAcls),void 0!==e.BlockPublicPolicy&&(o.BlockPublicPolicy="true"==e.BlockPublicPolicy),void 0!==e.RestrictPublicBuckets&&(o.RestrictPublicBuckets="true"==e.RestrictPublicBuckets),o},Bd=function(e,t){var o={Id:void 0,QueueArn:void 0,Events:void 0,Filter:void 0};return void 0!==e.Id&&(o.Id=e.Id),void 0!==e.Queue&&(o.QueueArn=e.Queue),""===e.Event&&(o.Events=[]),void 0!==e.Event&&(o.Events=Es((0,n.getArrayIfSingleItem)(e.Event),t)),void 0!==e.Filter&&(o.Filter=ld(e.Filter,t)),o},Sd=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Bd(e,t)})},Pd=function(e,t){var o={HostName:void 0,HttpRedirectCode:void 0,Protocol:void 0,ReplaceKeyPrefixWith:void 0,ReplaceKeyWith:void 0};return void 0!==e.HostName&&(o.HostName=e.HostName),void 0!==e.HttpRedirectCode&&(o.HttpRedirectCode=e.HttpRedirectCode),void 0!==e.Protocol&&(o.Protocol=e.Protocol),void 0!==e.ReplaceKeyPrefixWith&&(o.ReplaceKeyPrefixWith=e.ReplaceKeyPrefixWith),void 0!==e.ReplaceKeyWith&&(o.ReplaceKeyWith=e.ReplaceKeyWith),o},Ad=function(e,t){var o={HostName:void 0,Protocol:void 0};return void 0!==e.HostName&&(o.HostName=e.HostName),void 0!==e.Protocol&&(o.Protocol=e.Protocol),o},zd=function(e,t){var o={Status:void 0};return void 0!==e.Status&&(o.Status=e.Status),o},Id=function(e,t){var o={Role:void 0,Rules:void 0};return void 0!==e.Role&&(o.Role=e.Role),""===e.Rule&&(o.Rules=[]),void 0!==e.Rule&&(o.Rules=Od((0,n.getArrayIfSingleItem)(e.Rule),t)),o},Xd=function(e,t){var o={ID:void 0,Priority:void 0,Prefix:void 0,Filter:void 0,Status:void 0,SourceSelectionCriteria:void 0,ExistingObjectReplication:void 0,Destination:void 0,DeleteMarkerReplication:void 0};return void 0!==e.ID&&(o.ID=e.ID),void 0!==e.Priority&&(o.Priority=parseInt(e.Priority)),void 0!==e.Prefix&&(o.Prefix=e.Prefix),void 0!==e.Filter&&(o.Filter=Rd(e.Filter,t)),void 0!==e.Status&&(o.Status=e.Status),void 0!==e.SourceSelectionCriteria&&(o.SourceSelectionCriteria=Fd(e.SourceSelectionCriteria,t)),void 0!==e.ExistingObjectReplication&&(o.ExistingObjectReplication=Ns(e.ExistingObjectReplication,t)),void 0!==e.Destination&&(o.Destination=ys(e.Destination,t)),void 0!==e.DeleteMarkerReplication&&(o.DeleteMarkerReplication=ws(e.DeleteMarkerReplication,t)),o},Md=function(e,t){var o={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(o.Prefix=e.Prefix),""===e.Tag&&(o.Tags=[]),void 0!==e.Tag&&(o.Tags=eu((0,n.getArrayIfSingleItem)(e.Tag),t)),o},Rd=function(e,t){return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Zd(e.Tag,t)}:void 0!==e.And?{And:Md(e.And,t)}:{$unknown:Object.entries(e)[0]}},Od=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Xd(e,t)})},Dd=function(e,t){var o={Status:void 0,Time:void 0};return void 0!==e.Status&&(o.Status=e.Status),void 0!==e.Time&&(o.Time=Kd(e.Time,t)),o},Kd=function(e,t){var o={Minutes:void 0};return void 0!==e.Minutes&&(o.Minutes=parseInt(e.Minutes)),o},jd=function(e,t){var o={Condition:void 0,Redirect:void 0};return void 0!==e.Condition&&(o.Condition=us(e.Condition,t)),void 0!==e.Redirect&&(o.Redirect=Pd(e.Redirect,t)),o},Hd=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:jd(e,t)})},Ud=function(e,t){var o={FilterRules:void 0};return""===e.FilterRule&&(o.FilterRules=[]),void 0!==e.FilterRule&&(o.FilterRules=Ss((0,n.getArrayIfSingleItem)(e.FilterRule),t)),o},qd=function(e,t){var o={SSEAlgorithm:void 0,KMSMasterKeyID:void 0};return void 0!==e.SSEAlgorithm&&(o.SSEAlgorithm=e.SSEAlgorithm),void 0!==e.KMSMasterKeyID&&(o.KMSMasterKeyID=e.KMSMasterKeyID),o},Ld=function(e,t){var o={Rules:void 0};return""===e.Rule&&(o.Rules=[]),void 0!==e.Rule&&(o.Rules=Gd((0,n.getArrayIfSingleItem)(e.Rule),t)),o},$d=function(e,t){var o={ApplyServerSideEncryptionByDefault:void 0,BucketKeyEnabled:void 0};return void 0!==e.ApplyServerSideEncryptionByDefault&&(o.ApplyServerSideEncryptionByDefault=qd(e.ApplyServerSideEncryptionByDefault,t)),void 0!==e.BucketKeyEnabled&&(o.BucketKeyEnabled="true"==e.BucketKeyEnabled),o},Gd=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:$d(e,t)})},Fd=function(e,t){var o={SseKmsEncryptedObjects:void 0,ReplicaModifications:void 0};return void 0!==e.SseKmsEncryptedObjects&&(o.SseKmsEncryptedObjects=Wd(e.SseKmsEncryptedObjects,t)),void 0!==e.ReplicaModifications&&(o.ReplicaModifications=zd(e.ReplicaModifications,t)),o},Vd=function(e,t){var o={KeyId:void 0};return void 0!==e.KeyId&&(o.KeyId=e.KeyId),o},Wd=function(e,t){var o={Status:void 0};return void 0!==e.Status&&(o.Status=e.Status),o},Qd=function(e,t){return{}},Jd=function(e,t){var o={DataExport:void 0};return void 0!==e.DataExport&&(o.DataExport=Yd(e.DataExport,t)),o},Yd=function(e,t){var o={OutputSchemaVersion:void 0,Destination:void 0};return void 0!==e.OutputSchemaVersion&&(o.OutputSchemaVersion=e.OutputSchemaVersion),void 0!==e.Destination&&(o.Destination=os(e.Destination,t)),o},Zd=function(e,t){var o={Key:void 0,Value:void 0};return void 0!==e.Key&&(o.Key=e.Key),void 0!==e.Value&&(o.Value=e.Value),o},eu=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Zd(e,t)})},tu=function(e,t){var o={Grantee:void 0,Permission:void 0};return void 0!==e.Grantee&&(o.Grantee=As(e.Grantee,t)),void 0!==e.Permission&&(o.Permission=e.Permission),o},ou=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:tu(e,t)})},nu=function(e,t){var o={Days:void 0,AccessTier:void 0};return void 0!==e.Days&&(o.Days=parseInt(e.Days)),void 0!==e.AccessTier&&(o.AccessTier=e.AccessTier),o},ru=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:nu(e,t)})},iu=function(e,t){var o={Id:void 0,TopicArn:void 0,Events:void 0,Filter:void 0};return void 0!==e.Id&&(o.Id=e.Id),void 0!==e.Topic&&(o.TopicArn=e.Topic),""===e.Event&&(o.Events=[]),void 0!==e.Event&&(o.Events=Es((0,n.getArrayIfSingleItem)(e.Event),t)),void 0!==e.Filter&&(o.Filter=ld(e.Filter,t)),o},au=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:iu(e,t)})},su=function(e,t){var o={Date:void 0,Days:void 0,StorageClass:void 0};return void 0!==e.Date&&(o.Date=new Date(e.Date)),void 0!==e.Days&&(o.Days=parseInt(e.Days)),void 0!==e.StorageClass&&(o.StorageClass=e.StorageClass),o},du=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:su(e,t)})},uu=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},cu=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},lu=function(e,t){return cu(e,t).then(function(e){return t.utf8Encoder(e)})},mu=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},vu=function(e){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")},pu=function(e,t){return lu(e,t).then(function(e){if(e.length){var t=(0,i.parse)(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return vu(e)}}),o=Object.keys(t)[0],r=t[o];return r["#text"]&&(r[o]=r["#text"],delete r["#text"]),(0,n.getValueFromTextNode)(r)}return{}})},gu=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""};
},{"tslib":"CvJj","../models/models_0":"Iby9","@aws-sdk/protocol-http":"V5Hv","@aws-sdk/smithy-client":"pooH","@aws-sdk/xml-builder":"uCwe","fast-xml-parser":"uCul"}],"Hy2z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbortMultipartUploadCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),o=require("@aws-sdk/middleware-serde"),l=require("@aws-sdk/smithy-client"),a=function(l){function a(e){var t=l.call(this)||this;return t.input=e,t}return(0,e.__extends)(a,l),a.prototype.resolveMiddleware=function(e,r,l){this.middlewareStack.use((0,o.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var a=e.concat(this.middlewareStack),s={logger:r.logger,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:t.AbortMultipartUploadRequest.filterSensitiveLog,outputFilterSensitiveLog:t.AbortMultipartUploadOutput.filterSensitiveLog},n=r.requestHandler;return a.resolve(function(e){return n.handle(e.request,l||{})},s)},a.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlAbortMultipartUploadCommand)(e,t)},a.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlAbortMultipartUploadCommand)(e,t)},a}(l.Command);exports.AbortMultipartUploadCommand=a;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"OFHN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CompleteMultipartUploadCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),l=require("@aws-sdk/middleware-sdk-s3"),o=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/smithy-client"),a=function(s){function a(e){var t=s.call(this)||this;return t.input=e,t}return(0,e.__extends)(a,s),a.prototype.resolveMiddleware=function(e,r,s){this.middlewareStack.use((0,o.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,l.getThrow200ExceptionsPlugin)(r)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var a=e.concat(this.middlewareStack),d={logger:r.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:t.CompleteMultipartUploadRequest.filterSensitiveLog,outputFilterSensitiveLog:t.CompleteMultipartUploadOutput.filterSensitiveLog},n=r.requestHandler;return a.resolve(function(e){return n.handle(e.request,s||{})},d)},a.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlCompleteMultipartUploadCommand)(e,t)},a.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlCompleteMultipartUploadCommand)(e,t)},a}(s.Command);exports.CompleteMultipartUploadCommand=a;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-sdk-s3":"omdv","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"bGA5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ssecMiddleware=r,exports.getSsecPlugin=exports.ssecMiddlewareOptions=void 0;var e=require("tslib");function r(r){var t=this;return function(s){return function(n){return(0,e.__awaiter)(t,void 0,void 0,function(){var t,a,i,o,u,c,l,d,p,y,f,g,_,S,v,h,b;return(0,e.__generator)(this,function(w){switch(w.label){case 0:t=(0,e.__assign)({},n.input),a=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],w.label=1;case 1:w.trys.push([1,6,7,8]),i=(0,e.__values)(a),o=i.next(),w.label=2;case 2:return o.done?[3,5]:(u=o.value,(c=t[u.target])?(l=ArrayBuffer.isView(c)?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):"string"==typeof c?r.utf8Decoder(c):new Uint8Array(c),d=r.base64Encoder(l),(p=new r.md5).update(l),y=[(0,e.__assign)({},t)],(b={})[u.target]=d,f=u.hash,_=(g=r).base64Encoder,[4,p.digest()]):[3,4]);case 3:t=e.__assign.apply(void 0,y.concat([(b[f]=_.apply(g,[w.sent()]),b)])),w.label=4;case 4:return o=i.next(),[3,2];case 5:return[3,8];case 6:return S=w.sent(),v={error:S},[3,8];case 7:try{o&&!o.done&&(h=i.return)&&h.call(i)}finally{if(v)throw v.error}return[7];case 8:return[2,s((0,e.__assign)((0,e.__assign)({},n),{input:t}))]}})})}}}var t={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0};exports.ssecMiddlewareOptions=t;var s=function(e){return{applyToStack:function(s){s.add(r(e),t)}}};exports.getSsecPlugin=s;
},{"tslib":"G5GG"}],"yJo6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CopyObjectCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-sdk-s3"),o=require("@aws-sdk/middleware-serde"),d=require("@aws-sdk/middleware-ssec"),n=require("@aws-sdk/smithy-client"),l=function(n){function l(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(l,n),l.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,o.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,s.getThrow200ExceptionsPlugin)(i)),this.middlewareStack.use((0,d.getSsecPlugin)(i)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var l=e.concat(this.middlewareStack),a={logger:i.logger,clientName:"S3Client",commandName:"CopyObjectCommand",inputFilterSensitiveLog:t.CopyObjectRequest.filterSensitiveLog,outputFilterSensitiveLog:t.CopyObjectOutput.filterSensitiveLog},u=i.requestHandler;return l.resolve(function(e){return u.handle(e.request,n||{})},a)},l.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlCopyObjectCommand)(e,t)},l.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlCopyObjectCommand)(e,t)},l}(n.Command);exports.CopyObjectCommand=l;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-sdk-s3":"omdv","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-ssec":"bGA5","@aws-sdk/smithy-client":"pooH"}],"W70c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.locationConstraintMiddleware=n,exports.getLocationConstraintPlugin=exports.locationConstraintMiddlewareOptions=void 0;var t=require("tslib");function n(n){var i=this;return function(e){return function(o){return(0,t.__awaiter)(i,void 0,void 0,function(){var i,r;return(0,t.__generator)(this,function(a){switch(a.label){case 0:return i=o.input.CreateBucketConfiguration,[4,n.region()];case 1:return r=a.sent(),i&&i.LocationConstraint||(o=(0,t.__assign)((0,t.__assign)({},o),{input:(0,t.__assign)((0,t.__assign)({},o.input),{CreateBucketConfiguration:"us-east-1"===r?void 0:{LocationConstraint:r}})})),[2,e(o)]}})})}}}var i={step:"initialize",tags:["LOCATION_CONSTRAINT","CREATE_BUCKET_CONFIGURATION"],name:"locationConstraintMiddleware",override:!0};exports.locationConstraintMiddlewareOptions=i;var e=function(t){return{applyToStack:function(e){e.add(n(t),i)}}};exports.getLocationConstraintPlugin=e;
},{"tslib":"G5GG"}],"Ogt0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CreateBucketCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-location-constraint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),a=function(n){function a(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(a,n),a.prototype.resolveMiddleware=function(e,r,n){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getLocationConstraintPlugin)(r));var a=e.concat(this.middlewareStack),o={logger:r.logger,clientName:"S3Client",commandName:"CreateBucketCommand",inputFilterSensitiveLog:t.CreateBucketRequest.filterSensitiveLog,outputFilterSensitiveLog:t.CreateBucketOutput.filterSensitiveLog},u=r.requestHandler;return a.resolve(function(e){return u.handle(e.request,n||{})},o)},a.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlCreateBucketCommand)(e,t)},a.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlCreateBucketCommand)(e,t)},a}(n.Command);exports.CreateBucketCommand=a;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-location-constraint":"W70c","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"Injc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CreateMultipartUploadCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),a=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/middleware-ssec"),l=require("@aws-sdk/smithy-client"),d=function(l){function d(e){var t=l.call(this)||this;return t.input=e,t}return(0,e.__extends)(d,l),d.prototype.resolveMiddleware=function(e,r,l){this.middlewareStack.use((0,a.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,s.getSsecPlugin)(r)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var d=e.concat(this.middlewareStack),o={logger:r.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:t.CreateMultipartUploadRequest.filterSensitiveLog,outputFilterSensitiveLog:t.CreateMultipartUploadOutput.filterSensitiveLog},n=r.requestHandler;return d.resolve(function(e){return n.handle(e.request,l||{})},o)},d.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlCreateMultipartUploadCommand)(e,t)},d.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlCreateMultipartUploadCommand)(e,t)},d}(l.Command);exports.CreateMultipartUploadCommand=d;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-ssec":"bGA5","@aws-sdk/smithy-client":"pooH"}],"CiOf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteBucketAnalyticsConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"S3Client",commandName:"DeleteBucketAnalyticsConfigurationCommand",inputFilterSensitiveLog:t.DeleteBucketAnalyticsConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},u=i.requestHandler;return s.resolve(function(e){return u.handle(e.request,o||{})},l)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlDeleteBucketAnalyticsConfigurationCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlDeleteBucketAnalyticsConfigurationCommand)(e,t)},s}(o.Command);exports.DeleteBucketAnalyticsConfigurationCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"zaAx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteBucketCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/smithy-client"),n=function(s){function n(e){var t=s.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,s),n.prototype.resolveMiddleware=function(e,r,s){this.middlewareStack.use((0,i.getSerdePlugin)(r,this.serialize,this.deserialize));var n=e.concat(this.middlewareStack),l={logger:r.logger,clientName:"S3Client",commandName:"DeleteBucketCommand",inputFilterSensitiveLog:t.DeleteBucketRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=r.requestHandler;return n.resolve(function(e){return o.handle(e.request,s||{})},l)},n.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlDeleteBucketCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlDeleteBucketCommand)(e,t)},n}(s.Command);exports.DeleteBucketCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"mdKh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteBucketCorsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),n=function(o){function n(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,o),n.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var n=e.concat(this.middlewareStack),l={logger:r.logger,clientName:"S3Client",commandName:"DeleteBucketCorsCommand",inputFilterSensitiveLog:t.DeleteBucketCorsRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},u=r.requestHandler;return n.resolve(function(e){return u.handle(e.request,o||{})},l)},n.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlDeleteBucketCorsCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlDeleteBucketCorsCommand)(e,t)},n}(o.Command);exports.DeleteBucketCorsCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"NlJJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteBucketEncryptionCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,n.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var s=e.concat(this.middlewareStack),l={logger:r.logger,clientName:"S3Client",commandName:"DeleteBucketEncryptionCommand",inputFilterSensitiveLog:t.DeleteBucketEncryptionRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},u=r.requestHandler;return s.resolve(function(e){return u.handle(e.request,o||{})},l)},s.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlDeleteBucketEncryptionCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlDeleteBucketEncryptionCommand)(e,t)},s}(o.Command);exports.DeleteBucketEncryptionCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"afGu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteBucketIntelligentTieringConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),l=require("@aws-sdk/smithy-client"),o=function(l){function o(e){var t=l.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,l),o.prototype.resolveMiddleware=function(e,i,l){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var o=e.concat(this.middlewareStack),s={logger:i.logger,clientName:"S3Client",commandName:"DeleteBucketIntelligentTieringConfigurationCommand",inputFilterSensitiveLog:t.DeleteBucketIntelligentTieringConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},u=i.requestHandler;return o.resolve(function(e){return u.handle(e.request,l||{})},s)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlDeleteBucketIntelligentTieringConfigurationCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlDeleteBucketIntelligentTieringConfigurationCommand)(e,t)},o}(l.Command);exports.DeleteBucketIntelligentTieringConfigurationCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"ig9r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteBucketInventoryConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,n.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var s=e.concat(this.middlewareStack),u={logger:r.logger,clientName:"S3Client",commandName:"DeleteBucketInventoryConfigurationCommand",inputFilterSensitiveLog:t.DeleteBucketInventoryConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},l=r.requestHandler;return s.resolve(function(e){return l.handle(e.request,o||{})},u)},s.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlDeleteBucketInventoryConfigurationCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlDeleteBucketInventoryConfigurationCommand)(e,t)},s}(o.Command);exports.DeleteBucketInventoryConfigurationCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"hTc0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteBucketLifecycleCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),l=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/smithy-client"),n=function(s){function n(e){var t=s.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,s),n.prototype.resolveMiddleware=function(e,i,s){this.middlewareStack.use((0,l.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var n=e.concat(this.middlewareStack),o={logger:i.logger,clientName:"S3Client",commandName:"DeleteBucketLifecycleCommand",inputFilterSensitiveLog:t.DeleteBucketLifecycleRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},u=i.requestHandler;return n.resolve(function(e){return u.handle(e.request,s||{})},o)},n.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlDeleteBucketLifecycleCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlDeleteBucketLifecycleCommand)(e,t)},n}(s.Command);exports.DeleteBucketLifecycleCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"ZhDm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteBucketMetricsConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"DeleteBucketMetricsConfigurationCommand",inputFilterSensitiveLog:t.DeleteBucketMetricsConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},l=i.requestHandler;return s.resolve(function(e){return l.handle(e.request,o||{})},u)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlDeleteBucketMetricsConfigurationCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlDeleteBucketMetricsConfigurationCommand)(e,t)},s}(o.Command);exports.DeleteBucketMetricsConfigurationCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"ksCC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteBucketOwnershipControlsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,r,n){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var o=e.concat(this.middlewareStack),l={logger:r.logger,clientName:"S3Client",commandName:"DeleteBucketOwnershipControlsCommand",inputFilterSensitiveLog:t.DeleteBucketOwnershipControlsRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},u=r.requestHandler;return o.resolve(function(e){return u.handle(e.request,n||{})},l)},o.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlDeleteBucketOwnershipControlsCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlDeleteBucketOwnershipControlsCommand)(e,t)},o}(n.Command);exports.DeleteBucketOwnershipControlsCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"r2Yi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteBucketPolicyCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),l=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,l.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),n={logger:i.logger,clientName:"S3Client",commandName:"DeleteBucketPolicyCommand",inputFilterSensitiveLog:t.DeleteBucketPolicyRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},u=i.requestHandler;return s.resolve(function(e){return u.handle(e.request,o||{})},n)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlDeleteBucketPolicyCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlDeleteBucketPolicyCommand)(e,t)},s}(o.Command);exports.DeleteBucketPolicyCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"abjC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteBucketReplicationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),l=require("@aws-sdk/smithy-client"),o=function(l){function o(e){var t=l.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,l),o.prototype.resolveMiddleware=function(e,i,l){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var o=e.concat(this.middlewareStack),s={logger:i.logger,clientName:"S3Client",commandName:"DeleteBucketReplicationCommand",inputFilterSensitiveLog:t.DeleteBucketReplicationRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},u=i.requestHandler;return o.resolve(function(e){return u.handle(e.request,l||{})},s)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlDeleteBucketReplicationCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlDeleteBucketReplicationCommand)(e,t)},o}(l.Command);exports.DeleteBucketReplicationCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"C2JC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteBucketTaggingCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/smithy-client"),l=function(s){function l(e){var t=s.call(this)||this;return t.input=e,t}return(0,e.__extends)(l,s),l.prototype.resolveMiddleware=function(e,i,s){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var l=e.concat(this.middlewareStack),o={logger:i.logger,clientName:"S3Client",commandName:"DeleteBucketTaggingCommand",inputFilterSensitiveLog:t.DeleteBucketTaggingRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},u=i.requestHandler;return l.resolve(function(e){return u.handle(e.request,s||{})},o)},l.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlDeleteBucketTaggingCommand)(e,t)},l.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlDeleteBucketTaggingCommand)(e,t)},l}(s.Command);exports.DeleteBucketTaggingCommand=l;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"rzB9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteBucketWebsiteCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),l=function(n){function l(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(l,n),l.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var l=e.concat(this.middlewareStack),o={logger:i.logger,clientName:"S3Client",commandName:"DeleteBucketWebsiteCommand",inputFilterSensitiveLog:t.DeleteBucketWebsiteRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},u=i.requestHandler;return l.resolve(function(e){return u.handle(e.request,n||{})},o)},l.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlDeleteBucketWebsiteCommand)(e,t)},l.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlDeleteBucketWebsiteCommand)(e,t)},l}(n.Command);exports.DeleteBucketWebsiteCommand=l;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"R794":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteObjectCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),l=require("@aws-sdk/smithy-client"),n=function(l){function n(e){var t=l.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,l),n.prototype.resolveMiddleware=function(e,r,l){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var n=e.concat(this.middlewareStack),o={logger:r.logger,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:t.DeleteObjectRequest.filterSensitiveLog,outputFilterSensitiveLog:t.DeleteObjectOutput.filterSensitiveLog},d=r.requestHandler;return n.resolve(function(e){return d.handle(e.request,l||{})},o)},n.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlDeleteObjectCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlDeleteObjectCommand)(e,t)},n}(l.Command);exports.DeleteObjectCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"GXH0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteObjectTaggingCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/smithy-client"),l=function(s){function l(e){var t=s.call(this)||this;return t.input=e,t}return(0,e.__extends)(l,s),l.prototype.resolveMiddleware=function(e,i,s){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var l=e.concat(this.middlewareStack),a={logger:i.logger,clientName:"S3Client",commandName:"DeleteObjectTaggingCommand",inputFilterSensitiveLog:t.DeleteObjectTaggingRequest.filterSensitiveLog,outputFilterSensitiveLog:t.DeleteObjectTaggingOutput.filterSensitiveLog},o=i.requestHandler;return l.resolve(function(e){return o.handle(e.request,s||{})},a)},l.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlDeleteObjectTaggingCommand)(e,t)},l.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlDeleteObjectTaggingCommand)(e,t)},l}(s.Command);exports.DeleteObjectTaggingCommand=l;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"Ua7d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveMd5BodyChecksumConfig=r;var e=require("tslib");function r(r){return(0,e.__assign)({},r)}
},{"tslib":"G5GG"}],"VVE0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyMd5BodyChecksumMiddleware=s,exports.getApplyMd5BodyChecksumPlugin=exports.applyMd5BodyChecksumMiddlewareOptions=void 0;var e=require("tslib"),r=require("@aws-sdk/is-array-buffer"),t=require("@aws-sdk/protocol-http");function s(s){var a=this;return function(n){return function(i){return(0,e.__awaiter)(a,void 0,void 0,function(){var a,d,u,p,l,c,y,_,f,v,h,M;return(0,e.__generator)(this,function(g){switch(g.label){case 0:return a=i.request,t.HttpRequest.isInstance(a)?(d=a.body,o("Content-MD5",u=a.headers)?[3,2]:(p=void 0,void 0===d||"string"==typeof d||ArrayBuffer.isView(d)||(0,r.isArrayBuffer)(d)?((l=new s.md5).update(d||""),p=l.digest()):p=s.streamHasher(s.md5,d),c=[(0,e.__assign)({},a)],h={},y=[(0,e.__assign)({},u)],M={},_="Content-MD5",v=(f=s).base64Encoder,[4,p])):[3,2];case 1:a=e.__assign.apply(void 0,c.concat([(h.headers=e.__assign.apply(void 0,y.concat([(M[_]=v.apply(f,[g.sent()]),M)])),h)])),g.label=2;case 2:return[2,n((0,e.__assign)((0,e.__assign)({},i),{request:a}))]}})})}}}var a={name:"applyMd5BodyChecksumMiddleware",step:"build",tags:["SET_CONTENT_MD5","BODY_CHECKSUM"],override:!0};exports.applyMd5BodyChecksumMiddlewareOptions=a;var n=function(e){return{applyToStack:function(r){r.add(s(e),a)}}};function o(r,t){var s,a;r=r.toLowerCase();try{for(var n=(0,e.__values)(Object.keys(t)),o=n.next();!o.done;o=n.next()){if(r===o.value.toLowerCase())return!0}}catch(i){s={error:i}}finally{try{o&&!o.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return!1}exports.getApplyMd5BodyChecksumPlugin=n;
},{"tslib":"G5GG","@aws-sdk/is-array-buffer":"mtty","@aws-sdk/protocol-http":"V5Hv"}],"i3Xp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./md5Configuration");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./applyMd5BodyChecksumMiddleware");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});
},{"./md5Configuration":"Ua7d","./applyMd5BodyChecksumMiddleware":"VVE0"}],"dRrd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeleteObjectsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-apply-body-checksum"),s=require("@aws-sdk/middleware-bucket-endpoint"),l=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),d=function(n){function d(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(d,n),d.prototype.resolveMiddleware=function(e,r,n){this.middlewareStack.use((0,l.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,s.getBucketEndpointPlugin)(r)),this.middlewareStack.use((0,i.getApplyMd5BodyChecksumPlugin)(r));var d=e.concat(this.middlewareStack),o={logger:r.logger,clientName:"S3Client",commandName:"DeleteObjectsCommand",inputFilterSensitiveLog:t.DeleteObjectsRequest.filterSensitiveLog,outputFilterSensitiveLog:t.DeleteObjectsOutput.filterSensitiveLog},u=r.requestHandler;return d.resolve(function(e){return u.handle(e.request,n||{})},o)},d.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlDeleteObjectsCommand)(e,t)},d.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlDeleteObjectsCommand)(e,t)},d}(n.Command);exports.DeleteObjectsCommand=d;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-apply-body-checksum":"i3Xp","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"JSiD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DeletePublicAccessBlockCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),l=require("@aws-sdk/smithy-client"),o=function(l){function o(e){var t=l.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,l),o.prototype.resolveMiddleware=function(e,i,l){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var o=e.concat(this.middlewareStack),n={logger:i.logger,clientName:"S3Client",commandName:"DeletePublicAccessBlockCommand",inputFilterSensitiveLog:t.DeletePublicAccessBlockRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},c=i.requestHandler;return o.resolve(function(e){return c.handle(e.request,l||{})},n)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlDeletePublicAccessBlockCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlDeletePublicAccessBlockCommand)(e,t)},o}(l.Command);exports.DeletePublicAccessBlockCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"HGGq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketAccelerateConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),u=function(o){function u(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(u,o),u.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,n.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var u=e.concat(this.middlewareStack),a={logger:r.logger,clientName:"S3Client",commandName:"GetBucketAccelerateConfigurationCommand",inputFilterSensitiveLog:t.GetBucketAccelerateConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketAccelerateConfigurationOutput.filterSensitiveLog},s=r.requestHandler;return u.resolve(function(e){return s.handle(e.request,o||{})},a)},u.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlGetBucketAccelerateConfigurationCommand)(e,t)},u.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlGetBucketAccelerateConfigurationCommand)(e,t)},u}(o.Command);exports.GetBucketAccelerateConfigurationCommand=u;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"igt1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketAclCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),l=require("@aws-sdk/smithy-client"),n=function(l){function n(e){var t=l.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,l),n.prototype.resolveMiddleware=function(e,r,l){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var n=e.concat(this.middlewareStack),u={logger:r.logger,clientName:"S3Client",commandName:"GetBucketAclCommand",inputFilterSensitiveLog:t.GetBucketAclRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketAclOutput.filterSensitiveLog},o=r.requestHandler;return n.resolve(function(e){return o.handle(e.request,l||{})},u)},n.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlGetBucketAclCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlGetBucketAclCommand)(e,t)},n}(l.Command);exports.GetBucketAclCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"rte0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketAnalyticsConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"GetBucketAnalyticsConfigurationCommand",inputFilterSensitiveLog:t.GetBucketAnalyticsConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketAnalyticsConfigurationOutput.filterSensitiveLog},a=i.requestHandler;return s.resolve(function(e){return a.handle(e.request,o||{})},u)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetBucketAnalyticsConfigurationCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetBucketAnalyticsConfigurationCommand)(e,t)},s}(o.Command);exports.GetBucketAnalyticsConfigurationCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"chCO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketCorsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),n=function(o){function n(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,o),n.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var n=e.concat(this.middlewareStack),u={logger:r.logger,clientName:"S3Client",commandName:"GetBucketCorsCommand",inputFilterSensitiveLog:t.GetBucketCorsRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketCorsOutput.filterSensitiveLog},l=r.requestHandler;return n.resolve(function(e){return l.handle(e.request,o||{})},u)},n.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlGetBucketCorsCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlGetBucketCorsCommand)(e,t)},n}(o.Command);exports.GetBucketCorsCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"v8xS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketEncryptionCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,n.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var s=e.concat(this.middlewareStack),u={logger:r.logger,clientName:"S3Client",commandName:"GetBucketEncryptionCommand",inputFilterSensitiveLog:t.GetBucketEncryptionRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketEncryptionOutput.filterSensitiveLog},l=r.requestHandler;return s.resolve(function(e){return l.handle(e.request,o||{})},u)},s.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlGetBucketEncryptionCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlGetBucketEncryptionCommand)(e,t)},s}(o.Command);exports.GetBucketEncryptionCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"CPj3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketIntelligentTieringConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),n=require("@aws-sdk/middleware-bucket-endpoint"),r=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),l=function(o){function l(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(l,o),l.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,r.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,n.getBucketEndpointPlugin)(i));var l=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"GetBucketIntelligentTieringConfigurationCommand",inputFilterSensitiveLog:t.GetBucketIntelligentTieringConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketIntelligentTieringConfigurationOutput.filterSensitiveLog},s=i.requestHandler;return l.resolve(function(e){return s.handle(e.request,o||{})},u)},l.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetBucketIntelligentTieringConfigurationCommand)(e,t)},l.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetBucketIntelligentTieringConfigurationCommand)(e,t)},l}(o.Command);exports.GetBucketIntelligentTieringConfigurationCommand=l;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"D4Fc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketInventoryConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),u=function(o){function u(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(u,o),u.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,n.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var u=e.concat(this.middlewareStack),s={logger:r.logger,clientName:"S3Client",commandName:"GetBucketInventoryConfigurationCommand",inputFilterSensitiveLog:t.GetBucketInventoryConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketInventoryConfigurationOutput.filterSensitiveLog},a=r.requestHandler;return u.resolve(function(e){return a.handle(e.request,o||{})},s)},u.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlGetBucketInventoryConfigurationCommand)(e,t)},u.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlGetBucketInventoryConfigurationCommand)(e,t)},u}(o.Command);exports.GetBucketInventoryConfigurationCommand=u;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"DHIu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketLifecycleConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),u=function(o){function u(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(u,o),u.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var u=e.concat(this.middlewareStack),s={logger:i.logger,clientName:"S3Client",commandName:"GetBucketLifecycleConfigurationCommand",inputFilterSensitiveLog:t.GetBucketLifecycleConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketLifecycleConfigurationOutput.filterSensitiveLog},l=i.requestHandler;return u.resolve(function(e){return l.handle(e.request,o||{})},s)},u.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetBucketLifecycleConfigurationCommand)(e,t)},u.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetBucketLifecycleConfigurationCommand)(e,t)},u}(o.Command);exports.GetBucketLifecycleConfigurationCommand=u;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"mLhC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketLocationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),o=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),s=function(n){function s(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,n),s.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,o.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"GetBucketLocationCommand",inputFilterSensitiveLog:t.GetBucketLocationRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketLocationOutput.filterSensitiveLog},a=i.requestHandler;return s.resolve(function(e){return a.handle(e.request,n||{})},u)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetBucketLocationCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetBucketLocationCommand)(e,t)},s}(n.Command);exports.GetBucketLocationCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"o5wZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketLoggingCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"GetBucketLoggingCommand",inputFilterSensitiveLog:t.GetBucketLoggingRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketLoggingOutput.filterSensitiveLog},l=i.requestHandler;return s.resolve(function(e){return l.handle(e.request,o||{})},u)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetBucketLoggingCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetBucketLoggingCommand)(e,t)},s}(o.Command);exports.GetBucketLoggingCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"LriA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketMetricsConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"GetBucketMetricsConfigurationCommand",inputFilterSensitiveLog:t.GetBucketMetricsConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketMetricsConfigurationOutput.filterSensitiveLog},a=i.requestHandler;return s.resolve(function(e){return a.handle(e.request,o||{})},u)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetBucketMetricsConfigurationCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetBucketMetricsConfigurationCommand)(e,t)},s}(o.Command);exports.GetBucketMetricsConfigurationCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"QCUB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketNotificationConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),o=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),a=function(n){function a(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(a,n),a.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,o.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var a=e.concat(this.middlewareStack),s={logger:i.logger,clientName:"S3Client",commandName:"GetBucketNotificationConfigurationCommand",inputFilterSensitiveLog:t.GetBucketNotificationConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:t.NotificationConfiguration.filterSensitiveLog},u=i.requestHandler;return a.resolve(function(e){return u.handle(e.request,n||{})},s)},a.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetBucketNotificationConfigurationCommand)(e,t)},a.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetBucketNotificationConfigurationCommand)(e,t)},a}(n.Command);exports.GetBucketNotificationConfigurationCommand=a;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"sqiA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketOwnershipControlsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,r,n){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var o=e.concat(this.middlewareStack),l={logger:r.logger,clientName:"S3Client",commandName:"GetBucketOwnershipControlsCommand",inputFilterSensitiveLog:t.GetBucketOwnershipControlsRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketOwnershipControlsOutput.filterSensitiveLog},u=r.requestHandler;return o.resolve(function(e){return u.handle(e.request,n||{})},l)},o.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlGetBucketOwnershipControlsCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlGetBucketOwnershipControlsCommand)(e,t)},o}(n.Command);exports.GetBucketOwnershipControlsCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"Xcbw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketPolicyCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),o=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/smithy-client"),l=function(s){function l(e){var t=s.call(this)||this;return t.input=e,t}return(0,e.__extends)(l,s),l.prototype.resolveMiddleware=function(e,i,s){this.middlewareStack.use((0,o.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var l=e.concat(this.middlewareStack),n={logger:i.logger,clientName:"S3Client",commandName:"GetBucketPolicyCommand",inputFilterSensitiveLog:t.GetBucketPolicyRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketPolicyOutput.filterSensitiveLog},u=i.requestHandler;return l.resolve(function(e){return u.handle(e.request,s||{})},n)},l.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetBucketPolicyCommand)(e,t)},l.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetBucketPolicyCommand)(e,t)},l}(s.Command);exports.GetBucketPolicyCommand=l;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"opAN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketPolicyStatusCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),u=require("@aws-sdk/smithy-client"),o=function(u){function o(e){var t=u.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,u),o.prototype.resolveMiddleware=function(e,i,u){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var o=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"S3Client",commandName:"GetBucketPolicyStatusCommand",inputFilterSensitiveLog:t.GetBucketPolicyStatusRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketPolicyStatusOutput.filterSensitiveLog},n=i.requestHandler;return o.resolve(function(e){return n.handle(e.request,u||{})},l)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetBucketPolicyStatusCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetBucketPolicyStatusCommand)(e,t)},o}(u.Command);exports.GetBucketPolicyStatusCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"GE7t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketReplicationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"S3Client",commandName:"GetBucketReplicationCommand",inputFilterSensitiveLog:t.GetBucketReplicationRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketReplicationOutput.filterSensitiveLog},u=i.requestHandler;return s.resolve(function(e){return u.handle(e.request,o||{})},l)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetBucketReplicationCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetBucketReplicationCommand)(e,t)},s}(o.Command);exports.GetBucketReplicationCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"vPTw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketRequestPaymentCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),u=function(n){function u(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(u,n),u.prototype.resolveMiddleware=function(e,r,n){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var u=e.concat(this.middlewareStack),a={logger:r.logger,clientName:"S3Client",commandName:"GetBucketRequestPaymentCommand",inputFilterSensitiveLog:t.GetBucketRequestPaymentRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketRequestPaymentOutput.filterSensitiveLog},o=r.requestHandler;return u.resolve(function(e){return o.handle(e.request,n||{})},a)},u.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlGetBucketRequestPaymentCommand)(e,t)},u.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlGetBucketRequestPaymentCommand)(e,t)},u}(n.Command);exports.GetBucketRequestPaymentCommand=u;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"dT3U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketTaggingCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/smithy-client"),u=function(s){function u(e){var t=s.call(this)||this;return t.input=e,t}return(0,e.__extends)(u,s),u.prototype.resolveMiddleware=function(e,i,s){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var u=e.concat(this.middlewareStack),a={logger:i.logger,clientName:"S3Client",commandName:"GetBucketTaggingCommand",inputFilterSensitiveLog:t.GetBucketTaggingRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketTaggingOutput.filterSensitiveLog},o=i.requestHandler;return u.resolve(function(e){return o.handle(e.request,s||{})},a)},u.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetBucketTaggingCommand)(e,t)},u.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetBucketTaggingCommand)(e,t)},u}(s.Command);exports.GetBucketTaggingCommand=u;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"mfnN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketVersioningCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/smithy-client"),o=function(s){function o(e){var t=s.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,s),o.prototype.resolveMiddleware=function(e,i,s){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var o=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"GetBucketVersioningCommand",inputFilterSensitiveLog:t.GetBucketVersioningRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketVersioningOutput.filterSensitiveLog},l=i.requestHandler;return o.resolve(function(e){return l.handle(e.request,s||{})},u)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetBucketVersioningCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetBucketVersioningCommand)(e,t)},o}(s.Command);exports.GetBucketVersioningCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"GUAi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetBucketWebsiteCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),u=function(n){function u(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(u,n),u.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var u=e.concat(this.middlewareStack),o={logger:i.logger,clientName:"S3Client",commandName:"GetBucketWebsiteCommand",inputFilterSensitiveLog:t.GetBucketWebsiteRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetBucketWebsiteOutput.filterSensitiveLog},l=i.requestHandler;return u.resolve(function(e){return l.handle(e.request,n||{})},o)},u.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetBucketWebsiteCommand)(e,t)},u.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetBucketWebsiteCommand)(e,t)},u}(n.Command);exports.GetBucketWebsiteCommand=u;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"nyGV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetObjectAclCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),l=require("@aws-sdk/smithy-client"),n=function(l){function n(e){var t=l.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,l),n.prototype.resolveMiddleware=function(e,r,l){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var n=e.concat(this.middlewareStack),o={logger:r.logger,clientName:"S3Client",commandName:"GetObjectAclCommand",inputFilterSensitiveLog:t.GetObjectAclRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetObjectAclOutput.filterSensitiveLog},d=r.requestHandler;return n.resolve(function(e){return d.handle(e.request,l||{})},o)},n.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlGetObjectAclCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlGetObjectAclCommand)(e,t)},n}(l.Command);exports.GetObjectAclCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"VZpu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetObjectCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/middleware-ssec"),d=require("@aws-sdk/smithy-client"),o=function(d){function o(e){var t=d.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,d),o.prototype.resolveMiddleware=function(e,r,d){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,n.getSsecPlugin)(r)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var o=e.concat(this.middlewareStack),l={logger:r.logger,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:t.GetObjectRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetObjectOutput.filterSensitiveLog},a=r.requestHandler;return o.resolve(function(e){return a.handle(e.request,d||{})},l)},o.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlGetObjectCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlGetObjectCommand)(e,t)},o}(d.Command);exports.GetObjectCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-ssec":"bGA5","@aws-sdk/smithy-client":"pooH"}],"vTT5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetObjectLegalHoldCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),l=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,l.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var s=e.concat(this.middlewareStack),n={logger:r.logger,clientName:"S3Client",commandName:"GetObjectLegalHoldCommand",inputFilterSensitiveLog:t.GetObjectLegalHoldRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetObjectLegalHoldOutput.filterSensitiveLog},d=r.requestHandler;return s.resolve(function(e){return d.handle(e.request,o||{})},n)},s.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlGetObjectLegalHoldCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlGetObjectLegalHoldCommand)(e,t)},s}(o.Command);exports.GetObjectLegalHoldCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"Q0GN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetObjectLockConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),o=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),s=function(n){function s(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,n),s.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,o.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"GetObjectLockConfigurationCommand",inputFilterSensitiveLog:t.GetObjectLockConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetObjectLockConfigurationOutput.filterSensitiveLog},a=i.requestHandler;return s.resolve(function(e){return a.handle(e.request,n||{})},u)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetObjectLockConfigurationCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetObjectLockConfigurationCommand)(e,t)},s}(n.Command);exports.GetObjectLockConfigurationCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"pG5h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetObjectRetentionCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"S3Client",commandName:"GetObjectRetentionCommand",inputFilterSensitiveLog:t.GetObjectRetentionRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetObjectRetentionOutput.filterSensitiveLog},d=i.requestHandler;return s.resolve(function(e){return d.handle(e.request,o||{})},l)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetObjectRetentionCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetObjectRetentionCommand)(e,t)},s}(o.Command);exports.GetObjectRetentionCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"OiwI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetObjectTaggingCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/smithy-client"),a=function(s){function a(e){var t=s.call(this)||this;return t.input=e,t}return(0,e.__extends)(a,s),a.prototype.resolveMiddleware=function(e,i,s){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var a=e.concat(this.middlewareStack),o={logger:i.logger,clientName:"S3Client",commandName:"GetObjectTaggingCommand",inputFilterSensitiveLog:t.GetObjectTaggingRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetObjectTaggingOutput.filterSensitiveLog},l=i.requestHandler;return a.resolve(function(e){return l.handle(e.request,s||{})},o)},a.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetObjectTaggingCommand)(e,t)},a.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetObjectTaggingCommand)(e,t)},a}(s.Command);exports.GetObjectTaggingCommand=a;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"Q1gF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetObjectTorrentCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,n.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var s=e.concat(this.middlewareStack),l={logger:r.logger,clientName:"S3Client",commandName:"GetObjectTorrentCommand",inputFilterSensitiveLog:t.GetObjectTorrentRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetObjectTorrentOutput.filterSensitiveLog},d=r.requestHandler;return s.resolve(function(e){return d.handle(e.request,o||{})},l)},s.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlGetObjectTorrentCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlGetObjectTorrentCommand)(e,t)},s}(o.Command);exports.GetObjectTorrentCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"flCg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetPublicAccessBlockCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),l=require("@aws-sdk/smithy-client"),o=function(l){function o(e){var t=l.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,l),o.prototype.resolveMiddleware=function(e,i,l){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var o=e.concat(this.middlewareStack),c={logger:i.logger,clientName:"S3Client",commandName:"GetPublicAccessBlockCommand",inputFilterSensitiveLog:t.GetPublicAccessBlockRequest.filterSensitiveLog,outputFilterSensitiveLog:t.GetPublicAccessBlockOutput.filterSensitiveLog},n=i.requestHandler;return o.resolve(function(e){return n.handle(e.request,l||{})},c)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlGetPublicAccessBlockCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlGetPublicAccessBlockCommand)(e,t)},o}(l.Command);exports.GetPublicAccessBlockCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"S297":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HeadBucketCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),d=function(n){function d(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(d,n),d.prototype.resolveMiddleware=function(e,r,n){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var d=e.concat(this.middlewareStack),o={logger:r.logger,clientName:"S3Client",commandName:"HeadBucketCommand",inputFilterSensitiveLog:t.HeadBucketRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},u=r.requestHandler;return d.resolve(function(e){return u.handle(e.request,n||{})},o)},d.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlHeadBucketCommand)(e,t)},d.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlHeadBucketCommand)(e,t)},d}(n.Command);exports.HeadBucketCommand=d;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"l20Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HeadObjectCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),d=require("@aws-sdk/middleware-ssec"),a=require("@aws-sdk/smithy-client"),n=function(a){function n(e){var t=a.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,a),n.prototype.resolveMiddleware=function(e,r,a){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,d.getSsecPlugin)(r)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var n=e.concat(this.middlewareStack),o={logger:r.logger,clientName:"S3Client",commandName:"HeadObjectCommand",inputFilterSensitiveLog:t.HeadObjectRequest.filterSensitiveLog,outputFilterSensitiveLog:t.HeadObjectOutput.filterSensitiveLog},l=r.requestHandler;return n.resolve(function(e){return l.handle(e.request,a||{})},o)},n.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlHeadObjectCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlHeadObjectCommand)(e,t)},n}(a.Command);exports.HeadObjectCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-ssec":"bGA5","@aws-sdk/smithy-client":"pooH"}],"aFB5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListBucketAnalyticsConfigurationsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var o=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"ListBucketAnalyticsConfigurationsCommand",inputFilterSensitiveLog:t.ListBucketAnalyticsConfigurationsRequest.filterSensitiveLog,outputFilterSensitiveLog:t.ListBucketAnalyticsConfigurationsOutput.filterSensitiveLog},a=i.requestHandler;return o.resolve(function(e){return a.handle(e.request,n||{})},u)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlListBucketAnalyticsConfigurationsCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlListBucketAnalyticsConfigurationsCommand)(e,t)},o}(n.Command);exports.ListBucketAnalyticsConfigurationsCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"BmFg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListBucketIntelligentTieringConfigurationsCommand=void 0;var e=require("tslib"),i=require("../models/models_0"),t=require("../protocols/Aws_restXml"),n=require("@aws-sdk/middleware-bucket-endpoint"),r=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/smithy-client"),o=function(s){function o(e){var i=s.call(this)||this;return i.input=e,i}return(0,e.__extends)(o,s),o.prototype.resolveMiddleware=function(e,t,s){this.middlewareStack.use((0,r.getSerdePlugin)(t,this.serialize,this.deserialize)),this.middlewareStack.use((0,n.getBucketEndpointPlugin)(t));var o=e.concat(this.middlewareStack),l={logger:t.logger,clientName:"S3Client",commandName:"ListBucketIntelligentTieringConfigurationsCommand",inputFilterSensitiveLog:i.ListBucketIntelligentTieringConfigurationsRequest.filterSensitiveLog,outputFilterSensitiveLog:i.ListBucketIntelligentTieringConfigurationsOutput.filterSensitiveLog},u=t.requestHandler;return o.resolve(function(e){return u.handle(e.request,s||{})},l)},o.prototype.serialize=function(e,i){return(0,t.serializeAws_restXmlListBucketIntelligentTieringConfigurationsCommand)(e,i)},o.prototype.deserialize=function(e,i){return(0,t.deserializeAws_restXmlListBucketIntelligentTieringConfigurationsCommand)(e,i)},o}(s.Command);exports.ListBucketIntelligentTieringConfigurationsCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"JDox":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListBucketInventoryConfigurationsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"ListBucketInventoryConfigurationsCommand",inputFilterSensitiveLog:t.ListBucketInventoryConfigurationsRequest.filterSensitiveLog,outputFilterSensitiveLog:t.ListBucketInventoryConfigurationsOutput.filterSensitiveLog},a=i.requestHandler;return s.resolve(function(e){return a.handle(e.request,o||{})},u)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlListBucketInventoryConfigurationsCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlListBucketInventoryConfigurationsCommand)(e,t)},s}(o.Command);exports.ListBucketInventoryConfigurationsCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"KaMc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListBucketMetricsConfigurationsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var o=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"ListBucketMetricsConfigurationsCommand",inputFilterSensitiveLog:t.ListBucketMetricsConfigurationsRequest.filterSensitiveLog,outputFilterSensitiveLog:t.ListBucketMetricsConfigurationsOutput.filterSensitiveLog},a=i.requestHandler;return o.resolve(function(e){return a.handle(e.request,n||{})},u)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlListBucketMetricsConfigurationsCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlListBucketMetricsConfigurationsCommand)(e,t)},o}(n.Command);exports.ListBucketMetricsConfigurationsCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"q2Fx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListBucketsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/smithy-client"),n=function(s){function n(e){var t=s.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,s),n.prototype.resolveMiddleware=function(e,r,s){this.middlewareStack.use((0,i.getSerdePlugin)(r,this.serialize,this.deserialize));var n=e.concat(this.middlewareStack),o={logger:r.logger,clientName:"S3Client",commandName:"ListBucketsCommand",inputFilterSensitiveLog:function(e){return e},outputFilterSensitiveLog:t.ListBucketsOutput.filterSensitiveLog},u=r.requestHandler;return n.resolve(function(e){return u.handle(e.request,s||{})},o)},n.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlListBucketsCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlListBucketsCommand)(e,t)},n}(s.Command);exports.ListBucketsCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"wLpp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListMultipartUploadsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),l=require("@aws-sdk/smithy-client"),a=function(l){function a(e){var t=l.call(this)||this;return t.input=e,t}return(0,e.__extends)(a,l),a.prototype.resolveMiddleware=function(e,i,l){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var a=e.concat(this.middlewareStack),o={logger:i.logger,clientName:"S3Client",commandName:"ListMultipartUploadsCommand",inputFilterSensitiveLog:t.ListMultipartUploadsRequest.filterSensitiveLog,outputFilterSensitiveLog:t.ListMultipartUploadsOutput.filterSensitiveLog},n=i.requestHandler;return a.resolve(function(e){return n.handle(e.request,l||{})},o)},a.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlListMultipartUploadsCommand)(e,t)},a.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlListMultipartUploadsCommand)(e,t)},a}(l.Command);exports.ListMultipartUploadsCommand=a;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"XSA5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListObjectVersionsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var o=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"S3Client",commandName:"ListObjectVersionsCommand",inputFilterSensitiveLog:t.ListObjectVersionsRequest.filterSensitiveLog,outputFilterSensitiveLog:t.ListObjectVersionsOutput.filterSensitiveLog},d=i.requestHandler;return o.resolve(function(e){return d.handle(e.request,n||{})},l)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlListObjectVersionsCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlListObjectVersionsCommand)(e,t)},o}(n.Command);exports.ListObjectVersionsCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"Yvjg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListObjectsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var o=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"S3Client",commandName:"ListObjectsCommand",inputFilterSensitiveLog:t.ListObjectsRequest.filterSensitiveLog,outputFilterSensitiveLog:t.ListObjectsOutput.filterSensitiveLog},d=i.requestHandler;return o.resolve(function(e){return d.handle(e.request,n||{})},l)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlListObjectsCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlListObjectsCommand)(e,t)},o}(n.Command);exports.ListObjectsCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"XzHX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListObjectsV2Command=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var o=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"S3Client",commandName:"ListObjectsV2Command",inputFilterSensitiveLog:t.ListObjectsV2Request.filterSensitiveLog,outputFilterSensitiveLog:t.ListObjectsV2Output.filterSensitiveLog},d=i.requestHandler;return o.resolve(function(e){return d.handle(e.request,n||{})},l)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlListObjectsV2Command)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlListObjectsV2Command)(e,t)},o}(n.Command);exports.ListObjectsV2Command=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"sMwO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListPartsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),a=function(n){function a(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(a,n),a.prototype.resolveMiddleware=function(e,r,n){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var a=e.concat(this.middlewareStack),o={logger:r.logger,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:t.ListPartsRequest.filterSensitiveLog,outputFilterSensitiveLog:t.ListPartsOutput.filterSensitiveLog},l=r.requestHandler;return a.resolve(function(e){return l.handle(e.request,n||{})},o)},a.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlListPartsCommand)(e,t)},a.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlListPartsCommand)(e,t)},a}(n.Command);exports.ListPartsCommand=a;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"mPTX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketAccelerateConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),u=function(o){function u(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(u,o),u.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,n.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var u=e.concat(this.middlewareStack),s={logger:r.logger,clientName:"S3Client",commandName:"PutBucketAccelerateConfigurationCommand",inputFilterSensitiveLog:t.PutBucketAccelerateConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},a=r.requestHandler;return u.resolve(function(e){return a.handle(e.request,o||{})},s)},u.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlPutBucketAccelerateConfigurationCommand)(e,t)},u.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlPutBucketAccelerateConfigurationCommand)(e,t)},u}(o.Command);exports.PutBucketAccelerateConfigurationCommand=u;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"ND3d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketAclCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),u=require("@aws-sdk/smithy-client"),n=function(u){function n(e){var t=u.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,u),n.prototype.resolveMiddleware=function(e,r,u){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var n=e.concat(this.middlewareStack),l={logger:r.logger,clientName:"S3Client",commandName:"PutBucketAclCommand",inputFilterSensitiveLog:t.PutBucketAclRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=r.requestHandler;return n.resolve(function(e){return o.handle(e.request,u||{})},l)},n.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlPutBucketAclCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlPutBucketAclCommand)(e,t)},n}(u.Command);exports.PutBucketAclCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"HsP1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketAnalyticsConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"PutBucketAnalyticsConfigurationCommand",inputFilterSensitiveLog:t.PutBucketAnalyticsConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},a=i.requestHandler;return s.resolve(function(e){return a.handle(e.request,o||{})},u)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutBucketAnalyticsConfigurationCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutBucketAnalyticsConfigurationCommand)(e,t)},s}(o.Command);exports.PutBucketAnalyticsConfigurationCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"vj0X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketCorsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-apply-body-checksum"),s=require("@aws-sdk/middleware-bucket-endpoint"),u=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),n=function(o){function n(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,o),n.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,u.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,s.getBucketEndpointPlugin)(r)),this.middlewareStack.use((0,i.getApplyMd5BodyChecksumPlugin)(r));var n=e.concat(this.middlewareStack),d={logger:r.logger,clientName:"S3Client",commandName:"PutBucketCorsCommand",inputFilterSensitiveLog:t.PutBucketCorsRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},l=r.requestHandler;return n.resolve(function(e){return l.handle(e.request,o||{})},d)},n.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlPutBucketCorsCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlPutBucketCorsCommand)(e,t)},n}(o.Command);exports.PutBucketCorsCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-apply-body-checksum":"i3Xp","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"q9oD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketEncryptionCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,n.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var s=e.concat(this.middlewareStack),u={logger:r.logger,clientName:"S3Client",commandName:"PutBucketEncryptionCommand",inputFilterSensitiveLog:t.PutBucketEncryptionRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},d=r.requestHandler;return s.resolve(function(e){return d.handle(e.request,o||{})},u)},s.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlPutBucketEncryptionCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlPutBucketEncryptionCommand)(e,t)},s}(o.Command);exports.PutBucketEncryptionCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"QJhn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketIntelligentTieringConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),u=function(o){function u(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(u,o),u.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var u=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"S3Client",commandName:"PutBucketIntelligentTieringConfigurationCommand",inputFilterSensitiveLog:t.PutBucketIntelligentTieringConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},s=i.requestHandler;return u.resolve(function(e){return s.handle(e.request,o||{})},l)},u.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutBucketIntelligentTieringConfigurationCommand)(e,t)},u.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutBucketIntelligentTieringConfigurationCommand)(e,t)},u}(o.Command);exports.PutBucketIntelligentTieringConfigurationCommand=u;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"U8fc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketInventoryConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),u=function(o){function u(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(u,o),u.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,n.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var u=e.concat(this.middlewareStack),s={logger:r.logger,clientName:"S3Client",commandName:"PutBucketInventoryConfigurationCommand",inputFilterSensitiveLog:t.PutBucketInventoryConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},a=r.requestHandler;return u.resolve(function(e){return a.handle(e.request,o||{})},s)},u.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlPutBucketInventoryConfigurationCommand)(e,t)},u.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlPutBucketInventoryConfigurationCommand)(e,t)},u}(o.Command);exports.PutBucketInventoryConfigurationCommand=u;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"kROF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketLifecycleConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-apply-body-checksum"),n=require("@aws-sdk/middleware-bucket-endpoint"),u=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,u.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,n.getBucketEndpointPlugin)(i)),this.middlewareStack.use((0,r.getApplyMd5BodyChecksumPlugin)(i));var s=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"S3Client",commandName:"PutBucketLifecycleConfigurationCommand",inputFilterSensitiveLog:t.PutBucketLifecycleConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},a=i.requestHandler;return s.resolve(function(e){return a.handle(e.request,o||{})},l)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutBucketLifecycleConfigurationCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutBucketLifecycleConfigurationCommand)(e,t)},s}(o.Command);exports.PutBucketLifecycleConfigurationCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-apply-body-checksum":"i3Xp","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"TOJW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketLoggingCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"PutBucketLoggingCommand",inputFilterSensitiveLog:t.PutBucketLoggingRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},d=i.requestHandler;return s.resolve(function(e){return d.handle(e.request,o||{})},u)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutBucketLoggingCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutBucketLoggingCommand)(e,t)},s}(o.Command);exports.PutBucketLoggingCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"MSxh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketMetricsConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"PutBucketMetricsConfigurationCommand",inputFilterSensitiveLog:t.PutBucketMetricsConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},a=i.requestHandler;return s.resolve(function(e){return a.handle(e.request,o||{})},u)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutBucketMetricsConfigurationCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutBucketMetricsConfigurationCommand)(e,t)},s}(o.Command);exports.PutBucketMetricsConfigurationCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"AcbJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketNotificationConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),o=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),u=function(n){function u(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(u,n),u.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,o.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var u=e.concat(this.middlewareStack),s={logger:i.logger,clientName:"S3Client",commandName:"PutBucketNotificationConfigurationCommand",inputFilterSensitiveLog:t.PutBucketNotificationConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},a=i.requestHandler;return u.resolve(function(e){return a.handle(e.request,n||{})},s)},u.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutBucketNotificationConfigurationCommand)(e,t)},u.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutBucketNotificationConfigurationCommand)(e,t)},u}(n.Command);exports.PutBucketNotificationConfigurationCommand=u;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"QJ69":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketOwnershipControlsCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),o=function(n){function o(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,n),o.prototype.resolveMiddleware=function(e,r,n){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var o=e.concat(this.middlewareStack),u={logger:r.logger,clientName:"S3Client",commandName:"PutBucketOwnershipControlsCommand",inputFilterSensitiveLog:t.PutBucketOwnershipControlsRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},l=r.requestHandler;return o.resolve(function(e){return l.handle(e.request,n||{})},u)},o.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlPutBucketOwnershipControlsCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlPutBucketOwnershipControlsCommand)(e,t)},o}(n.Command);exports.PutBucketOwnershipControlsCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"HV49":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketPolicyCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-apply-body-checksum"),s=require("@aws-sdk/middleware-bucket-endpoint"),u=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),l=function(o){function l(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(l,o),l.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,u.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,s.getBucketEndpointPlugin)(i)),this.middlewareStack.use((0,r.getApplyMd5BodyChecksumPlugin)(i));var l=e.concat(this.middlewareStack),n={logger:i.logger,clientName:"S3Client",commandName:"PutBucketPolicyCommand",inputFilterSensitiveLog:t.PutBucketPolicyRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},d=i.requestHandler;return l.resolve(function(e){return d.handle(e.request,o||{})},n)},l.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutBucketPolicyCommand)(e,t)},l.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutBucketPolicyCommand)(e,t)},l}(o.Command);exports.PutBucketPolicyCommand=l;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-apply-body-checksum":"i3Xp","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"k17v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketReplicationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-apply-body-checksum"),n=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),u=require("@aws-sdk/smithy-client"),o=function(u){function o(e){var t=u.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,u),o.prototype.resolveMiddleware=function(e,i,u){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,n.getBucketEndpointPlugin)(i)),this.middlewareStack.use((0,r.getApplyMd5BodyChecksumPlugin)(i));var o=e.concat(this.middlewareStack),l={logger:i.logger,clientName:"S3Client",commandName:"PutBucketReplicationCommand",inputFilterSensitiveLog:t.PutBucketReplicationRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},a=i.requestHandler;return o.resolve(function(e){return a.handle(e.request,u||{})},l)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutBucketReplicationCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutBucketReplicationCommand)(e,t)},o}(u.Command);exports.PutBucketReplicationCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-apply-body-checksum":"i3Xp","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"o3vG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketRequestPaymentCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),u=require("@aws-sdk/smithy-client"),n=function(u){function n(e){var t=u.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,u),n.prototype.resolveMiddleware=function(e,r,u){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var n=e.concat(this.middlewareStack),o={logger:r.logger,clientName:"S3Client",commandName:"PutBucketRequestPaymentCommand",inputFilterSensitiveLog:t.PutBucketRequestPaymentRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},a=r.requestHandler;return n.resolve(function(e){return a.handle(e.request,u||{})},o)},n.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlPutBucketRequestPaymentCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlPutBucketRequestPaymentCommand)(e,t)},n}(u.Command);exports.PutBucketRequestPaymentCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"EtIT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketTaggingCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-apply-body-checksum"),n=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),u=require("@aws-sdk/smithy-client"),a=function(u){function a(e){var t=u.call(this)||this;return t.input=e,t}return(0,e.__extends)(a,u),a.prototype.resolveMiddleware=function(e,i,u){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,n.getBucketEndpointPlugin)(i)),this.middlewareStack.use((0,r.getApplyMd5BodyChecksumPlugin)(i));var a=e.concat(this.middlewareStack),d={logger:i.logger,clientName:"S3Client",commandName:"PutBucketTaggingCommand",inputFilterSensitiveLog:t.PutBucketTaggingRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=i.requestHandler;return a.resolve(function(e){return o.handle(e.request,u||{})},d)},a.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutBucketTaggingCommand)(e,t)},a.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutBucketTaggingCommand)(e,t)},a}(u.Command);exports.PutBucketTaggingCommand=a;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-apply-body-checksum":"i3Xp","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"hyXu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketVersioningCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/smithy-client"),o=function(s){function o(e){var t=s.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,s),o.prototype.resolveMiddleware=function(e,i,s){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var o=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"PutBucketVersioningCommand",inputFilterSensitiveLog:t.PutBucketVersioningRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},d=i.requestHandler;return o.resolve(function(e){return d.handle(e.request,s||{})},u)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutBucketVersioningCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutBucketVersioningCommand)(e,t)},o}(s.Command);exports.PutBucketVersioningCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"acUA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutBucketWebsiteCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),u=require("@aws-sdk/smithy-client"),n=function(u){function n(e){var t=u.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,u),n.prototype.resolveMiddleware=function(e,i,u){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var n=e.concat(this.middlewareStack),o={logger:i.logger,clientName:"S3Client",commandName:"PutBucketWebsiteCommand",inputFilterSensitiveLog:t.PutBucketWebsiteRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},d=i.requestHandler;return n.resolve(function(e){return d.handle(e.request,u||{})},o)},n.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutBucketWebsiteCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutBucketWebsiteCommand)(e,t)},n}(u.Command);exports.PutBucketWebsiteCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"g3ZK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutObjectAclCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),l=require("@aws-sdk/smithy-client"),n=function(l){function n(e){var t=l.call(this)||this;return t.input=e,t}return(0,e.__extends)(n,l),n.prototype.resolveMiddleware=function(e,r,l){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var n=e.concat(this.middlewareStack),u={logger:r.logger,clientName:"S3Client",commandName:"PutObjectAclCommand",inputFilterSensitiveLog:t.PutObjectAclRequest.filterSensitiveLog,outputFilterSensitiveLog:t.PutObjectAclOutput.filterSensitiveLog},o=r.requestHandler;return n.resolve(function(e){return o.handle(e.request,l||{})},u)},n.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlPutObjectAclCommand)(e,t)},n.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlPutObjectAclCommand)(e,t)},n}(l.Command);exports.PutObjectAclCommand=n;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"hHVK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutObjectCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/middleware-ssec"),u=require("@aws-sdk/smithy-client"),d=function(u){function d(e){var t=u.call(this)||this;return t.input=e,t}return(0,e.__extends)(d,u),d.prototype.resolveMiddleware=function(e,r,u){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,n.getSsecPlugin)(r)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var d=e.concat(this.middlewareStack),o={logger:r.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:t.PutObjectRequest.filterSensitiveLog,outputFilterSensitiveLog:t.PutObjectOutput.filterSensitiveLog},l=r.requestHandler;return d.resolve(function(e){return l.handle(e.request,u||{})},o)},d.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlPutObjectCommand)(e,t)},d.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlPutObjectCommand)(e,t)},d}(u.Command);exports.PutObjectCommand=d;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-ssec":"bGA5","@aws-sdk/smithy-client":"pooH"}],"HdfH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutObjectLegalHoldCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),l=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,l.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var s=e.concat(this.middlewareStack),n={logger:r.logger,clientName:"S3Client",commandName:"PutObjectLegalHoldCommand",inputFilterSensitiveLog:t.PutObjectLegalHoldRequest.filterSensitiveLog,outputFilterSensitiveLog:t.PutObjectLegalHoldOutput.filterSensitiveLog},d=r.requestHandler;return s.resolve(function(e){return d.handle(e.request,o||{})},n)},s.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlPutObjectLegalHoldCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlPutObjectLegalHoldCommand)(e,t)},s}(o.Command);exports.PutObjectLegalHoldCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"iiCZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutObjectLockConfigurationCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),o=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),u=function(n){function u(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(u,n),u.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,o.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var u=e.concat(this.middlewareStack),s={logger:i.logger,clientName:"S3Client",commandName:"PutObjectLockConfigurationCommand",inputFilterSensitiveLog:t.PutObjectLockConfigurationRequest.filterSensitiveLog,outputFilterSensitiveLog:t.PutObjectLockConfigurationOutput.filterSensitiveLog},a=i.requestHandler;return u.resolve(function(e){return a.handle(e.request,n||{})},s)},u.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutObjectLockConfigurationCommand)(e,t)},u.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutObjectLockConfigurationCommand)(e,t)},u}(n.Command);exports.PutObjectLockConfigurationCommand=u;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"cK98":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutObjectRetentionCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),o=require("@aws-sdk/smithy-client"),s=function(o){function s(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(s,o),s.prototype.resolveMiddleware=function(e,i,o){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var s=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"PutObjectRetentionCommand",inputFilterSensitiveLog:t.PutObjectRetentionRequest.filterSensitiveLog,outputFilterSensitiveLog:t.PutObjectRetentionOutput.filterSensitiveLog},l=i.requestHandler;return s.resolve(function(e){return l.handle(e.request,o||{})},u)},s.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutObjectRetentionCommand)(e,t)},s.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutObjectRetentionCommand)(e,t)},s}(o.Command);exports.PutObjectRetentionCommand=s;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"aQUx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutObjectTaggingCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/smithy-client"),u=function(s){function u(e){var t=s.call(this)||this;return t.input=e,t}return(0,e.__extends)(u,s),u.prototype.resolveMiddleware=function(e,i,s){this.middlewareStack.use((0,n.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var u=e.concat(this.middlewareStack),a={logger:i.logger,clientName:"S3Client",commandName:"PutObjectTaggingCommand",inputFilterSensitiveLog:t.PutObjectTaggingRequest.filterSensitiveLog,outputFilterSensitiveLog:t.PutObjectTaggingOutput.filterSensitiveLog},o=i.requestHandler;return u.resolve(function(e){return o.handle(e.request,s||{})},a)},u.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutObjectTaggingCommand)(e,t)},u.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutObjectTaggingCommand)(e,t)},u}(s.Command);exports.PutObjectTaggingCommand=u;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"rKuy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PutPublicAccessBlockCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),i=require("../protocols/Aws_restXml"),r=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),l=require("@aws-sdk/smithy-client"),o=function(l){function o(e){var t=l.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,l),o.prototype.resolveMiddleware=function(e,i,l){this.middlewareStack.use((0,s.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,r.getBucketEndpointPlugin)(i));var o=e.concat(this.middlewareStack),u={logger:i.logger,clientName:"S3Client",commandName:"PutPublicAccessBlockCommand",inputFilterSensitiveLog:t.PutPublicAccessBlockRequest.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},n=i.requestHandler;return o.resolve(function(e){return n.handle(e.request,l||{})},u)},o.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlPutPublicAccessBlockCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlPutPublicAccessBlockCommand)(e,t)},o}(l.Command);exports.PutPublicAccessBlockCommand=o;
},{"tslib":"CvJj","../models/models_0":"Iby9","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"bWh6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UploadPartCopyRequest=exports.UploadPartCopyOutput=exports.CopyPartResult=exports.UploadPartRequest=exports.UploadPartOutput=exports.SelectObjectContentRequest=exports.ScanRange=exports.RequestProgress=exports.SelectObjectContentOutput=exports.SelectObjectContentEventStream=exports.StatsEvent=exports.Stats=exports.RecordsEvent=exports.ProgressEvent=exports.Progress=exports.EndEvent=exports.ContinuationEvent=exports.RestoreObjectRequest=exports.RestoreRequest=exports.RestoreRequestType=exports.SelectParameters=exports.OutputSerialization=exports.JSONOutput=exports.CSVOutput=exports.QuoteFields=exports.InputSerialization=exports.ParquetInput=exports.JSONInput=exports.JSONType=exports.CSVInput=exports.FileHeaderInfo=exports.OutputLocation=exports.S3Location=exports.MetadataEntry=void 0;var t,e,n,o,s,r,i,u,p,S,a,c,f,x,g,_,l,E,v,d,R,L,O,C,I,y,N,P,q,T,K,U,m,b,j=require("tslib"),V=require("./models_0"),M=require("@aws-sdk/smithy-client");exports.MetadataEntry=t,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(t||(exports.MetadataEntry=t={})),exports.S3Location=e,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)((0,j.__assign)({},t),t.Encryption&&{Encryption:V.Encryption.filterSensitiveLog(t.Encryption)})}}(e||(exports.S3Location=e={})),exports.OutputLocation=n,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)((0,j.__assign)({},t),t.S3&&{S3:e.filterSensitiveLog(t.S3)})}}(n||(exports.OutputLocation=n={})),exports.FileHeaderInfo=o,function(t){t.IGNORE="IGNORE",t.NONE="NONE",t.USE="USE"}(o||(exports.FileHeaderInfo=o={})),exports.CSVInput=s,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(s||(exports.CSVInput=s={})),exports.JSONType=r,function(t){t.DOCUMENT="DOCUMENT",t.LINES="LINES"}(r||(exports.JSONType=r={})),exports.JSONInput=i,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(i||(exports.JSONInput=i={})),exports.ParquetInput=u,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(u||(exports.ParquetInput=u={})),exports.InputSerialization=p,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(p||(exports.InputSerialization=p={})),exports.QuoteFields=S,function(t){t.ALWAYS="ALWAYS",t.ASNEEDED="ASNEEDED"}(S||(exports.QuoteFields=S={})),exports.CSVOutput=a,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(a||(exports.CSVOutput=a={})),exports.JSONOutput=c,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(c||(exports.JSONOutput=c={})),exports.OutputSerialization=f,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(f||(exports.OutputSerialization=f={})),exports.SelectParameters=x,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(x||(exports.SelectParameters=x={})),exports.RestoreRequestType=g,function(t){t.SELECT="SELECT"}(g||(exports.RestoreRequestType=g={})),exports.RestoreRequest=_,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)((0,j.__assign)({},t),t.OutputLocation&&{OutputLocation:n.filterSensitiveLog(t.OutputLocation)})}}(_||(exports.RestoreRequest=_={})),exports.RestoreObjectRequest=l,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)((0,j.__assign)({},t),t.RestoreRequest&&{RestoreRequest:_.filterSensitiveLog(t.RestoreRequest)})}}(l||(exports.RestoreObjectRequest=l={})),exports.ContinuationEvent=E,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(E||(exports.ContinuationEvent=E={})),exports.EndEvent=v,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(v||(exports.EndEvent=v={})),exports.Progress=d,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(d||(exports.Progress=d={})),exports.ProgressEvent=R,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(R||(exports.ProgressEvent=R={})),exports.RecordsEvent=L,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(L||(exports.RecordsEvent=L={})),exports.Stats=O,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(O||(exports.Stats=O={})),exports.StatsEvent=C,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(C||(exports.StatsEvent=C={})),exports.SelectObjectContentEventStream=I,function(t){t.visit=function(t,e){return void 0!==t.Records?e.Records(t.Records):void 0!==t.Stats?e.Stats(t.Stats):void 0!==t.Progress?e.Progress(t.Progress):void 0!==t.Cont?e.Cont(t.Cont):void 0!==t.End?e.End(t.End):e._(t.$unknown[0],t.$unknown[1])},t.filterSensitiveLog=function(t){var e;return void 0!==t.Records?{Records:L.filterSensitiveLog(t.Records)}:void 0!==t.Stats?{Stats:C.filterSensitiveLog(t.Stats)}:void 0!==t.Progress?{Progress:R.filterSensitiveLog(t.Progress)}:void 0!==t.Cont?{Cont:E.filterSensitiveLog(t.Cont)}:void 0!==t.End?{End:v.filterSensitiveLog(t.End)}:void 0!==t.$unknown?((e={})[t.$unknown[0]]="UNKNOWN",e):void 0}}(I||(exports.SelectObjectContentEventStream=I={})),exports.SelectObjectContentOutput=y,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)((0,j.__assign)({},t),t.Payload&&{Payload:"STREAMING_CONTENT"})}}(y||(exports.SelectObjectContentOutput=y={})),exports.RequestProgress=N,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(N||(exports.RequestProgress=N={})),exports.ScanRange=P,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(P||(exports.ScanRange=P={})),exports.SelectObjectContentRequest=q,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)((0,j.__assign)({},t),t.SSECustomerKey&&{SSECustomerKey:M.SENSITIVE_STRING})}}(q||(exports.SelectObjectContentRequest=q={})),exports.UploadPartOutput=T,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)((0,j.__assign)({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:M.SENSITIVE_STRING})}}(T||(exports.UploadPartOutput=T={})),exports.UploadPartRequest=K,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)((0,j.__assign)({},t),t.SSECustomerKey&&{SSECustomerKey:M.SENSITIVE_STRING})}}(K||(exports.UploadPartRequest=K={})),exports.CopyPartResult=U,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)({},t)}}(U||(exports.CopyPartResult=U={})),exports.UploadPartCopyOutput=m,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)((0,j.__assign)({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:M.SENSITIVE_STRING})}}(m||(exports.UploadPartCopyOutput=m={})),exports.UploadPartCopyRequest=b,function(t){t.filterSensitiveLog=function(t){return(0,j.__assign)((0,j.__assign)((0,j.__assign)({},t),t.SSECustomerKey&&{SSECustomerKey:M.SENSITIVE_STRING}),t.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:M.SENSITIVE_STRING})}}(b||(exports.UploadPartCopyRequest=b={}));
},{"tslib":"CvJj","./models_0":"Iby9","@aws-sdk/smithy-client":"pooH"}],"MjE0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RestoreObjectCommand=void 0;var e=require("tslib"),t=require("../models/models_0"),r=require("../models/models_1"),i=require("../protocols/Aws_restXml"),s=require("@aws-sdk/middleware-bucket-endpoint"),o=require("@aws-sdk/middleware-serde"),n=require("@aws-sdk/smithy-client"),l=function(n){function l(e){var t=n.call(this)||this;return t.input=e,t}return(0,e.__extends)(l,n),l.prototype.resolveMiddleware=function(e,i,n){this.middlewareStack.use((0,o.getSerdePlugin)(i,this.serialize,this.deserialize)),this.middlewareStack.use((0,s.getBucketEndpointPlugin)(i));var l=e.concat(this.middlewareStack),d={logger:i.logger,clientName:"S3Client",commandName:"RestoreObjectCommand",inputFilterSensitiveLog:r.RestoreObjectRequest.filterSensitiveLog,outputFilterSensitiveLog:t.RestoreObjectOutput.filterSensitiveLog},u=i.requestHandler;return l.resolve(function(e){return u.handle(e.request,n||{})},d)},l.prototype.serialize=function(e,t){return(0,i.serializeAws_restXmlRestoreObjectCommand)(e,t)},l.prototype.deserialize=function(e,t){return(0,i.deserializeAws_restXmlRestoreObjectCommand)(e,t)},l}(n.Command);exports.RestoreObjectCommand=l;
},{"tslib":"CvJj","../models/models_0":"Iby9","../models/models_1":"bWh6","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/smithy-client":"pooH"}],"IjBI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SelectObjectContentCommand=void 0;var e=require("tslib"),t=require("../models/models_1"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),n=require("@aws-sdk/middleware-serde"),s=require("@aws-sdk/middleware-ssec"),o=require("@aws-sdk/smithy-client"),l=function(o){function l(e){var t=o.call(this)||this;return t.input=e,t}return(0,e.__extends)(l,o),l.prototype.resolveMiddleware=function(e,r,o){this.middlewareStack.use((0,n.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,s.getSsecPlugin)(r)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var l=e.concat(this.middlewareStack),d={logger:r.logger,clientName:"S3Client",commandName:"SelectObjectContentCommand",inputFilterSensitiveLog:t.SelectObjectContentRequest.filterSensitiveLog,outputFilterSensitiveLog:t.SelectObjectContentOutput.filterSensitiveLog},a=r.requestHandler;return l.resolve(function(e){return a.handle(e.request,o||{})},d)},l.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlSelectObjectContentCommand)(e,t)},l.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlSelectObjectContentCommand)(e,t)},l}(o.Command);exports.SelectObjectContentCommand=l;
},{"tslib":"CvJj","../models/models_1":"bWh6","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-ssec":"bGA5","@aws-sdk/smithy-client":"pooH"}],"LXZY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UploadPartCommand=void 0;var e=require("tslib"),t=require("../models/models_1"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-serde"),a=require("@aws-sdk/middleware-ssec"),d=require("@aws-sdk/smithy-client"),o=function(d){function o(e){var t=d.call(this)||this;return t.input=e,t}return(0,e.__extends)(o,d),o.prototype.resolveMiddleware=function(e,r,d){this.middlewareStack.use((0,s.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,a.getSsecPlugin)(r)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var o=e.concat(this.middlewareStack),l={logger:r.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:t.UploadPartRequest.filterSensitiveLog,outputFilterSensitiveLog:t.UploadPartOutput.filterSensitiveLog},n=r.requestHandler;return o.resolve(function(e){return n.handle(e.request,d||{})},l)},o.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlUploadPartCommand)(e,t)},o.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlUploadPartCommand)(e,t)},o}(d.Command);exports.UploadPartCommand=o;
},{"tslib":"CvJj","../models/models_1":"bWh6","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-ssec":"bGA5","@aws-sdk/smithy-client":"pooH"}],"JL4Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UploadPartCopyCommand=void 0;var e=require("tslib"),t=require("../models/models_1"),r=require("../protocols/Aws_restXml"),i=require("@aws-sdk/middleware-bucket-endpoint"),s=require("@aws-sdk/middleware-sdk-s3"),o=require("@aws-sdk/middleware-serde"),a=require("@aws-sdk/middleware-ssec"),d=require("@aws-sdk/smithy-client"),l=function(d){function l(e){var t=d.call(this)||this;return t.input=e,t}return(0,e.__extends)(l,d),l.prototype.resolveMiddleware=function(e,r,d){this.middlewareStack.use((0,o.getSerdePlugin)(r,this.serialize,this.deserialize)),this.middlewareStack.use((0,s.getThrow200ExceptionsPlugin)(r)),this.middlewareStack.use((0,a.getSsecPlugin)(r)),this.middlewareStack.use((0,i.getBucketEndpointPlugin)(r));var l=e.concat(this.middlewareStack),n={logger:r.logger,clientName:"S3Client",commandName:"UploadPartCopyCommand",inputFilterSensitiveLog:t.UploadPartCopyRequest.filterSensitiveLog,outputFilterSensitiveLog:t.UploadPartCopyOutput.filterSensitiveLog},u=r.requestHandler;return l.resolve(function(e){return u.handle(e.request,d||{})},n)},l.prototype.serialize=function(e,t){return(0,r.serializeAws_restXmlUploadPartCopyCommand)(e,t)},l.prototype.deserialize=function(e,t){return(0,r.deserializeAws_restXmlUploadPartCopyCommand)(e,t)},l}(d.Command);exports.UploadPartCopyCommand=l;
},{"tslib":"CvJj","../models/models_1":"bWh6","../protocols/Aws_restXml":"EuSE","@aws-sdk/middleware-bucket-endpoint":"H53D","@aws-sdk/middleware-sdk-s3":"omdv","@aws-sdk/middleware-serde":"sz9p","@aws-sdk/middleware-ssec":"bGA5","@aws-sdk/smithy-client":"pooH"}],"ibQH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.S3=void 0;var t=require("tslib"),e=require("./S3Client"),o=require("./commands/AbortMultipartUploadCommand"),n=require("./commands/CompleteMultipartUploadCommand"),i=require("./commands/CopyObjectCommand"),r=require("./commands/CreateBucketCommand"),f=require("./commands/CreateMultipartUploadCommand"),s=require("./commands/DeleteBucketAnalyticsConfigurationCommand"),c=require("./commands/DeleteBucketCommand"),p=require("./commands/DeleteBucketCorsCommand"),u=require("./commands/DeleteBucketEncryptionCommand"),d=require("./commands/DeleteBucketIntelligentTieringConfigurationCommand"),a=require("./commands/DeleteBucketInventoryConfigurationCommand"),m=require("./commands/DeleteBucketLifecycleCommand"),y=require("./commands/DeleteBucketMetricsConfigurationCommand"),h=require("./commands/DeleteBucketOwnershipControlsCommand"),l=require("./commands/DeleteBucketPolicyCommand"),g=require("./commands/DeleteBucketReplicationCommand"),C=require("./commands/DeleteBucketTaggingCommand"),w=require("./commands/DeleteBucketWebsiteCommand"),b=require("./commands/DeleteObjectCommand"),E=require("./commands/DeleteObjectTaggingCommand"),k=require("./commands/DeleteObjectsCommand"),B=require("./commands/DeletePublicAccessBlockCommand"),j=require("./commands/GetBucketAccelerateConfigurationCommand"),v=require("./commands/GetBucketAclCommand"),q=require("./commands/GetBucketAnalyticsConfigurationCommand"),x=require("./commands/GetBucketCorsCommand"),P=require("./commands/GetBucketEncryptionCommand"),O=require("./commands/GetBucketIntelligentTieringConfigurationCommand"),G=require("./commands/GetBucketInventoryConfigurationCommand"),L=require("./commands/GetBucketLifecycleConfigurationCommand"),A=require("./commands/GetBucketLocationCommand"),D=require("./commands/GetBucketLoggingCommand"),T=require("./commands/GetBucketMetricsConfigurationCommand"),M=require("./commands/GetBucketNotificationConfigurationCommand"),I=require("./commands/GetBucketOwnershipControlsCommand"),R=require("./commands/GetBucketPolicyCommand"),U=require("./commands/GetBucketPolicyStatusCommand"),V=require("./commands/GetBucketReplicationCommand"),H=require("./commands/GetBucketRequestPaymentCommand"),S=require("./commands/GetBucketTaggingCommand"),W=require("./commands/GetBucketVersioningCommand"),N=require("./commands/GetBucketWebsiteCommand"),_=require("./commands/GetObjectAclCommand"),z=require("./commands/GetObjectCommand"),F=require("./commands/GetObjectLegalHoldCommand"),J=require("./commands/GetObjectLockConfigurationCommand"),K=require("./commands/GetObjectRetentionCommand"),Q=require("./commands/GetObjectTaggingCommand"),X=require("./commands/GetObjectTorrentCommand"),Y=require("./commands/GetPublicAccessBlockCommand"),Z=require("./commands/HeadBucketCommand"),$=require("./commands/HeadObjectCommand"),tt=require("./commands/ListBucketAnalyticsConfigurationsCommand"),et=require("./commands/ListBucketIntelligentTieringConfigurationsCommand"),ot=require("./commands/ListBucketInventoryConfigurationsCommand"),nt=require("./commands/ListBucketMetricsConfigurationsCommand"),it=require("./commands/ListBucketsCommand"),rt=require("./commands/ListMultipartUploadsCommand"),ft=require("./commands/ListObjectVersionsCommand"),st=require("./commands/ListObjectsCommand"),ct=require("./commands/ListObjectsV2Command"),pt=require("./commands/ListPartsCommand"),ut=require("./commands/PutBucketAccelerateConfigurationCommand"),dt=require("./commands/PutBucketAclCommand"),at=require("./commands/PutBucketAnalyticsConfigurationCommand"),mt=require("./commands/PutBucketCorsCommand"),yt=require("./commands/PutBucketEncryptionCommand"),ht=require("./commands/PutBucketIntelligentTieringConfigurationCommand"),lt=require("./commands/PutBucketInventoryConfigurationCommand"),gt=require("./commands/PutBucketLifecycleConfigurationCommand"),Ct=require("./commands/PutBucketLoggingCommand"),wt=require("./commands/PutBucketMetricsConfigurationCommand"),bt=require("./commands/PutBucketNotificationConfigurationCommand"),Et=require("./commands/PutBucketOwnershipControlsCommand"),kt=require("./commands/PutBucketPolicyCommand"),Bt=require("./commands/PutBucketReplicationCommand"),jt=require("./commands/PutBucketRequestPaymentCommand"),vt=require("./commands/PutBucketTaggingCommand"),qt=require("./commands/PutBucketVersioningCommand"),xt=require("./commands/PutBucketWebsiteCommand"),Pt=require("./commands/PutObjectAclCommand"),Ot=require("./commands/PutObjectCommand"),Gt=require("./commands/PutObjectLegalHoldCommand"),Lt=require("./commands/PutObjectLockConfigurationCommand"),At=require("./commands/PutObjectRetentionCommand"),Dt=require("./commands/PutObjectTaggingCommand"),Tt=require("./commands/PutPublicAccessBlockCommand"),Mt=require("./commands/RestoreObjectCommand"),It=require("./commands/SelectObjectContentCommand"),Rt=require("./commands/UploadPartCommand"),Ut=require("./commands/UploadPartCopyCommand"),Vt=function(e){function Vt(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(Vt,e),Vt.prototype.abortMultipartUpload=function(t,e,n){var i=new o.AbortMultipartUploadCommand(t);if("function"==typeof e)this.send(i,e);else{if("function"!=typeof n)return this.send(i,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(i,e||{},n)}},Vt.prototype.completeMultipartUpload=function(t,e,o){var i=new n.CompleteMultipartUploadCommand(t);if("function"==typeof e)this.send(i,e);else{if("function"!=typeof o)return this.send(i,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(i,e||{},o)}},Vt.prototype.copyObject=function(t,e,o){var n=new i.CopyObjectCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.createBucket=function(t,e,o){var n=new r.CreateBucketCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.createMultipartUpload=function(t,e,o){var n=new f.CreateMultipartUploadCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteBucket=function(t,e,o){var n=new c.DeleteBucketCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteBucketAnalyticsConfiguration=function(t,e,o){var n=new s.DeleteBucketAnalyticsConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteBucketCors=function(t,e,o){var n=new p.DeleteBucketCorsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteBucketEncryption=function(t,e,o){var n=new u.DeleteBucketEncryptionCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteBucketIntelligentTieringConfiguration=function(t,e,o){var n=new d.DeleteBucketIntelligentTieringConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteBucketInventoryConfiguration=function(t,e,o){var n=new a.DeleteBucketInventoryConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteBucketLifecycle=function(t,e,o){var n=new m.DeleteBucketLifecycleCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteBucketMetricsConfiguration=function(t,e,o){var n=new y.DeleteBucketMetricsConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteBucketOwnershipControls=function(t,e,o){var n=new h.DeleteBucketOwnershipControlsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteBucketPolicy=function(t,e,o){var n=new l.DeleteBucketPolicyCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteBucketReplication=function(t,e,o){var n=new g.DeleteBucketReplicationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteBucketTagging=function(t,e,o){var n=new C.DeleteBucketTaggingCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteBucketWebsite=function(t,e,o){var n=new w.DeleteBucketWebsiteCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteObject=function(t,e,o){var n=new b.DeleteObjectCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteObjects=function(t,e,o){var n=new k.DeleteObjectsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deleteObjectTagging=function(t,e,o){var n=new E.DeleteObjectTaggingCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.deletePublicAccessBlock=function(t,e,o){var n=new B.DeletePublicAccessBlockCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketAccelerateConfiguration=function(t,e,o){var n=new j.GetBucketAccelerateConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketAcl=function(t,e,o){var n=new v.GetBucketAclCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketAnalyticsConfiguration=function(t,e,o){var n=new q.GetBucketAnalyticsConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketCors=function(t,e,o){var n=new x.GetBucketCorsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketEncryption=function(t,e,o){var n=new P.GetBucketEncryptionCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketIntelligentTieringConfiguration=function(t,e,o){var n=new O.GetBucketIntelligentTieringConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketInventoryConfiguration=function(t,e,o){var n=new G.GetBucketInventoryConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketLifecycleConfiguration=function(t,e,o){var n=new L.GetBucketLifecycleConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketLocation=function(t,e,o){var n=new A.GetBucketLocationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketLogging=function(t,e,o){var n=new D.GetBucketLoggingCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketMetricsConfiguration=function(t,e,o){var n=new T.GetBucketMetricsConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketNotificationConfiguration=function(t,e,o){var n=new M.GetBucketNotificationConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketOwnershipControls=function(t,e,o){var n=new I.GetBucketOwnershipControlsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketPolicy=function(t,e,o){var n=new R.GetBucketPolicyCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketPolicyStatus=function(t,e,o){var n=new U.GetBucketPolicyStatusCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketReplication=function(t,e,o){var n=new V.GetBucketReplicationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketRequestPayment=function(t,e,o){var n=new H.GetBucketRequestPaymentCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketTagging=function(t,e,o){var n=new S.GetBucketTaggingCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketVersioning=function(t,e,o){var n=new W.GetBucketVersioningCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getBucketWebsite=function(t,e,o){var n=new N.GetBucketWebsiteCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getObject=function(t,e,o){var n=new z.GetObjectCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getObjectAcl=function(t,e,o){var n=new _.GetObjectAclCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getObjectLegalHold=function(t,e,o){var n=new F.GetObjectLegalHoldCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getObjectLockConfiguration=function(t,e,o){var n=new J.GetObjectLockConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getObjectRetention=function(t,e,o){var n=new K.GetObjectRetentionCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getObjectTagging=function(t,e,o){var n=new Q.GetObjectTaggingCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getObjectTorrent=function(t,e,o){var n=new X.GetObjectTorrentCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.getPublicAccessBlock=function(t,e,o){var n=new Y.GetPublicAccessBlockCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.headBucket=function(t,e,o){var n=new Z.HeadBucketCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.headObject=function(t,e,o){var n=new $.HeadObjectCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.listBucketAnalyticsConfigurations=function(t,e,o){var n=new tt.ListBucketAnalyticsConfigurationsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.listBucketIntelligentTieringConfigurations=function(t,e,o){var n=new et.ListBucketIntelligentTieringConfigurationsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.listBucketInventoryConfigurations=function(t,e,o){var n=new ot.ListBucketInventoryConfigurationsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.listBucketMetricsConfigurations=function(t,e,o){var n=new nt.ListBucketMetricsConfigurationsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.listBuckets=function(t,e,o){var n=new it.ListBucketsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.listMultipartUploads=function(t,e,o){var n=new rt.ListMultipartUploadsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.listObjects=function(t,e,o){var n=new st.ListObjectsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.listObjectsV2=function(t,e,o){var n=new ct.ListObjectsV2Command(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.listObjectVersions=function(t,e,o){var n=new ft.ListObjectVersionsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.listParts=function(t,e,o){var n=new pt.ListPartsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketAccelerateConfiguration=function(t,e,o){var n=new ut.PutBucketAccelerateConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketAcl=function(t,e,o){var n=new dt.PutBucketAclCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketAnalyticsConfiguration=function(t,e,o){var n=new at.PutBucketAnalyticsConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketCors=function(t,e,o){var n=new mt.PutBucketCorsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketEncryption=function(t,e,o){var n=new yt.PutBucketEncryptionCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketIntelligentTieringConfiguration=function(t,e,o){var n=new ht.PutBucketIntelligentTieringConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketInventoryConfiguration=function(t,e,o){var n=new lt.PutBucketInventoryConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketLifecycleConfiguration=function(t,e,o){var n=new gt.PutBucketLifecycleConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketLogging=function(t,e,o){var n=new Ct.PutBucketLoggingCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketMetricsConfiguration=function(t,e,o){var n=new wt.PutBucketMetricsConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketNotificationConfiguration=function(t,e,o){var n=new bt.PutBucketNotificationConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketOwnershipControls=function(t,e,o){var n=new Et.PutBucketOwnershipControlsCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketPolicy=function(t,e,o){var n=new kt.PutBucketPolicyCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketReplication=function(t,e,o){var n=new Bt.PutBucketReplicationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketRequestPayment=function(t,e,o){var n=new jt.PutBucketRequestPaymentCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketTagging=function(t,e,o){var n=new vt.PutBucketTaggingCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketVersioning=function(t,e,o){var n=new qt.PutBucketVersioningCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putBucketWebsite=function(t,e,o){var n=new xt.PutBucketWebsiteCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putObject=function(t,e,o){var n=new Ot.PutObjectCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putObjectAcl=function(t,e,o){var n=new Pt.PutObjectAclCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putObjectLegalHold=function(t,e,o){var n=new Gt.PutObjectLegalHoldCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putObjectLockConfiguration=function(t,e,o){var n=new Lt.PutObjectLockConfigurationCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putObjectRetention=function(t,e,o){var n=new At.PutObjectRetentionCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putObjectTagging=function(t,e,o){var n=new Dt.PutObjectTaggingCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.putPublicAccessBlock=function(t,e,o){var n=new Tt.PutPublicAccessBlockCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.restoreObject=function(t,e,o){var n=new Mt.RestoreObjectCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.selectObjectContent=function(t,e,o){var n=new It.SelectObjectContentCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.uploadPart=function(t,e,o){var n=new Rt.UploadPartCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt.prototype.uploadPartCopy=function(t,e,o){var n=new Ut.UploadPartCopyCommand(t);if("function"==typeof e)this.send(n,e);else{if("function"!=typeof o)return this.send(n,e);if("object"!=typeof e)throw new Error("Expect http options but get "+typeof e);this.send(n,e||{},o)}},Vt}(e.S3Client);exports.S3=Vt;
},{"tslib":"CvJj","./S3Client":"ZPdf","./commands/AbortMultipartUploadCommand":"Hy2z","./commands/CompleteMultipartUploadCommand":"OFHN","./commands/CopyObjectCommand":"yJo6","./commands/CreateBucketCommand":"Ogt0","./commands/CreateMultipartUploadCommand":"Injc","./commands/DeleteBucketAnalyticsConfigurationCommand":"CiOf","./commands/DeleteBucketCommand":"zaAx","./commands/DeleteBucketCorsCommand":"mdKh","./commands/DeleteBucketEncryptionCommand":"NlJJ","./commands/DeleteBucketIntelligentTieringConfigurationCommand":"afGu","./commands/DeleteBucketInventoryConfigurationCommand":"ig9r","./commands/DeleteBucketLifecycleCommand":"hTc0","./commands/DeleteBucketMetricsConfigurationCommand":"ZhDm","./commands/DeleteBucketOwnershipControlsCommand":"ksCC","./commands/DeleteBucketPolicyCommand":"r2Yi","./commands/DeleteBucketReplicationCommand":"abjC","./commands/DeleteBucketTaggingCommand":"C2JC","./commands/DeleteBucketWebsiteCommand":"rzB9","./commands/DeleteObjectCommand":"R794","./commands/DeleteObjectTaggingCommand":"GXH0","./commands/DeleteObjectsCommand":"dRrd","./commands/DeletePublicAccessBlockCommand":"JSiD","./commands/GetBucketAccelerateConfigurationCommand":"HGGq","./commands/GetBucketAclCommand":"igt1","./commands/GetBucketAnalyticsConfigurationCommand":"rte0","./commands/GetBucketCorsCommand":"chCO","./commands/GetBucketEncryptionCommand":"v8xS","./commands/GetBucketIntelligentTieringConfigurationCommand":"CPj3","./commands/GetBucketInventoryConfigurationCommand":"D4Fc","./commands/GetBucketLifecycleConfigurationCommand":"DHIu","./commands/GetBucketLocationCommand":"mLhC","./commands/GetBucketLoggingCommand":"o5wZ","./commands/GetBucketMetricsConfigurationCommand":"LriA","./commands/GetBucketNotificationConfigurationCommand":"QCUB","./commands/GetBucketOwnershipControlsCommand":"sqiA","./commands/GetBucketPolicyCommand":"Xcbw","./commands/GetBucketPolicyStatusCommand":"opAN","./commands/GetBucketReplicationCommand":"GE7t","./commands/GetBucketRequestPaymentCommand":"vPTw","./commands/GetBucketTaggingCommand":"dT3U","./commands/GetBucketVersioningCommand":"mfnN","./commands/GetBucketWebsiteCommand":"GUAi","./commands/GetObjectAclCommand":"nyGV","./commands/GetObjectCommand":"VZpu","./commands/GetObjectLegalHoldCommand":"vTT5","./commands/GetObjectLockConfigurationCommand":"Q0GN","./commands/GetObjectRetentionCommand":"pG5h","./commands/GetObjectTaggingCommand":"OiwI","./commands/GetObjectTorrentCommand":"Q1gF","./commands/GetPublicAccessBlockCommand":"flCg","./commands/HeadBucketCommand":"S297","./commands/HeadObjectCommand":"l20Q","./commands/ListBucketAnalyticsConfigurationsCommand":"aFB5","./commands/ListBucketIntelligentTieringConfigurationsCommand":"BmFg","./commands/ListBucketInventoryConfigurationsCommand":"JDox","./commands/ListBucketMetricsConfigurationsCommand":"KaMc","./commands/ListBucketsCommand":"q2Fx","./commands/ListMultipartUploadsCommand":"wLpp","./commands/ListObjectVersionsCommand":"XSA5","./commands/ListObjectsCommand":"Yvjg","./commands/ListObjectsV2Command":"XzHX","./commands/ListPartsCommand":"sMwO","./commands/PutBucketAccelerateConfigurationCommand":"mPTX","./commands/PutBucketAclCommand":"ND3d","./commands/PutBucketAnalyticsConfigurationCommand":"HsP1","./commands/PutBucketCorsCommand":"vj0X","./commands/PutBucketEncryptionCommand":"q9oD","./commands/PutBucketIntelligentTieringConfigurationCommand":"QJhn","./commands/PutBucketInventoryConfigurationCommand":"U8fc","./commands/PutBucketLifecycleConfigurationCommand":"kROF","./commands/PutBucketLoggingCommand":"TOJW","./commands/PutBucketMetricsConfigurationCommand":"MSxh","./commands/PutBucketNotificationConfigurationCommand":"AcbJ","./commands/PutBucketOwnershipControlsCommand":"QJ69","./commands/PutBucketPolicyCommand":"HV49","./commands/PutBucketReplicationCommand":"k17v","./commands/PutBucketRequestPaymentCommand":"o3vG","./commands/PutBucketTaggingCommand":"EtIT","./commands/PutBucketVersioningCommand":"hyXu","./commands/PutBucketWebsiteCommand":"acUA","./commands/PutObjectAclCommand":"g3ZK","./commands/PutObjectCommand":"hHVK","./commands/PutObjectLegalHoldCommand":"HdfH","./commands/PutObjectLockConfigurationCommand":"iiCZ","./commands/PutObjectRetentionCommand":"cK98","./commands/PutObjectTaggingCommand":"aQUx","./commands/PutPublicAccessBlockCommand":"rKuy","./commands/RestoreObjectCommand":"MjE0","./commands/SelectObjectContentCommand":"IjBI","./commands/UploadPartCommand":"LXZY","./commands/UploadPartCopyCommand":"JL4Y"}],"oZKj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sleep=void 0;var e=function(e){return new Promise(function(t){return setTimeout(t,1e3*e)})};exports.sleep=e;
},{}],"GWFR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WaiterState=exports.waiterServiceDefaults=void 0;var e,t={minDelay:2,maxDelay:120};exports.waiterServiceDefaults=t,exports.WaiterState=e,function(e){e.ABORTED="ABORTED",e.FAILURE="FAILURE",e.SUCCESS="SUCCESS",e.RETRY="RETRY",e.TIMEOUT="TIMEOUT"}(e||(exports.WaiterState=e={}));
},{}],"MZRJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.runPolling=void 0;var e=require("tslib"),t=require("./utils/sleep"),r=require("./waiter"),a=function(e,t,r,a){if(a>r)return t;var i=e*Math.pow(2,a-1);return n(e,i)},n=function(e,t){return e+Math.random()*(t-e)},i=function(n,i,o){var s=n.minDelay,u=n.maxDelay,l=n.maxWaitTime,c=n.abortController,v=n.client;return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n,d,f,p,b,g,h;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,o(v,i)];case 1:if((n=e.sent().state)!==r.WaiterState.RETRY)return[2,{state:n}];d=1,f=Date.now()+1e3*l,p=Math.log(u/s)/Math.log(2)+1,e.label=2;case 2:return(null===(h=null==c?void 0:c.signal)||void 0===h?void 0:h.aborted)?[2,{state:r.WaiterState.ABORTED}]:(b=a(s,u,p,d),Date.now()+1e3*b>f?[2,{state:r.WaiterState.TIMEOUT}]:[4,(0,t.sleep)(b)]);case 3:return e.sent(),[4,o(v,i)];case 4:return(g=e.sent().state)!==r.WaiterState.RETRY?[2,{state:g}]:(d+=1,[3,2]);case 5:return[2]}})})};exports.runPolling=i;
},{"tslib":"G5GG","./utils/sleep":"oZKj","./waiter":"GWFR"}],"aKuV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateWaiterOptions=void 0;var a=function(a){if(a.maxWaitTime<1)throw new Error("WaiterConfiguration.maxWaitTime must be greater than 0");if(a.minDelay<1)throw new Error("WaiterConfiguration.minDelay must be greater than 0");if(a.maxDelay<1)throw new Error("WaiterConfiguration.maxDelay must be greater than 0");if(a.maxWaitTime<=a.minDelay)throw new Error("WaiterConfiguration.maxWaitTime ["+a.maxWaitTime+"] must be greater than WaiterConfiguration.minDelay ["+a.minDelay+"] for this waiter");if(a.maxDelay<a.minDelay)throw new Error("WaiterConfiguration.maxDelay ["+a.maxDelay+"] must be greater than WaiterConfiguration.minDelay ["+a.minDelay+"] for this waiter")};exports.validateWaiterOptions=a;
},{}],"qnMH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./sleep");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./validate");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});
},{"./sleep":"oZKj","./validate":"aKuV"}],"yS5L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWaiter=void 0;var r=require("tslib"),e=require("./poller"),t=require("./utils"),i=require("./waiter"),n=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,function(){return(0,r.__generator)(this,function(r){return[2,new Promise(function(r){e.onabort=function(){return r({state:i.WaiterState.ABORTED})}})]})})},o=function(o,a,u){return(0,r.__awaiter)(void 0,void 0,void 0,function(){var s,l;return(0,r.__generator)(this,function(c){return s=(0,r.__assign)((0,r.__assign)({},i.waiterServiceDefaults),o),(0,t.validateWaiterOptions)(s),l=[(0,e.runPolling)(s,a,u)],o.abortController&&l.push(n(o.abortController.signal)),[2,Promise.race(l)]})})};exports.createWaiter=o;
},{"tslib":"G5GG","./poller":"MZRJ","./utils":"qnMH","./waiter":"GWFR"}],"e9CD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./createWaiter");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./waiter");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});
},{"./createWaiter":"yS5L","./waiter":"GWFR"}],"GxR0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.waitForBucketExists=void 0;var e=require("tslib"),t=require("../commands/HeadBucketCommand"),r=require("@aws-sdk/util-waiter"),a=function(a,i){return(0,e.__awaiter)(void 0,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,a.send(new t.HeadBucketCommand(i))];case 1:return e.sent(),[2,{state:r.WaiterState.SUCCESS}];case 2:return e.sent(),[3,3];case 3:return[2,{state:r.WaiterState.RETRY}]}})})},i=function(t,i){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(s){return n={minDelay:5,maxDelay:120},[2,(0,r.createWaiter)((0,e.__assign)((0,e.__assign)({},n),t),i,a)]})})};exports.waitForBucketExists=i;
},{"tslib":"CvJj","../commands/HeadBucketCommand":"S297","@aws-sdk/util-waiter":"e9CD"}],"DZJH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.waitForObjectExists=void 0;var e=require("tslib"),t=require("../commands/HeadObjectCommand"),r=require("@aws-sdk/util-waiter"),a=function(a,i){return(0,e.__awaiter)(void 0,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,a.send(new t.HeadObjectCommand(i))];case 1:return e.sent(),[2,{state:r.WaiterState.SUCCESS}];case 2:return e.sent(),[3,3];case 3:return[2,{state:r.WaiterState.RETRY}]}})})},i=function(t,i){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(s){return n={minDelay:5,maxDelay:120},[2,(0,r.createWaiter)((0,e.__assign)((0,e.__assign)({},n),t),i,a)]})})};exports.waitForObjectExists=i;
},{"tslib":"CvJj","../commands/HeadObjectCommand":"l20Q","@aws-sdk/util-waiter":"e9CD"}],"sHaI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.paginateListObjectsV2=s;var e=require("tslib"),t=require("../S3"),n=require("../S3Client"),r=require("../commands/ListObjectsV2Command"),a=function(t,n){for(var a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];return(0,e.__awaiter)(void 0,void 0,void 0,function(){return(0,e.__generator)(this,function(i){switch(i.label){case 0:return[4,t.send.apply(t,(0,e.__spread)([new r.ListObjectsV2Command(n)],a))];case 1:return[2,i.sent()]}})})},i=function(t,n){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];return(0,e.__awaiter)(void 0,void 0,void 0,function(){return(0,e.__generator)(this,function(a){switch(a.label){case 0:return[4,t.listObjectsV2.apply(t,(0,e.__spread)([n],r))];case 1:return[2,a.sent()]}})})};function s(r,s){for(var o=[],c=2;c<arguments.length;c++)o[c-2]=arguments[c];return(0,e.__asyncGenerator)(this,arguments,function(){var c,u,_;return(0,e.__generator)(this,function(l){switch(l.label){case 0:c=r.startingToken||void 0,u=!0,l.label=1;case 1:return u?(s.ContinuationToken=c,s.MaxKeys=r.pageSize,r.client instanceof t.S3?[4,(0,e.__await)(i.apply(void 0,(0,e.__spread)([r.client,s],o)))]:[3,3]):[3,9];case 2:return _=l.sent(),[3,6];case 3:return r.client instanceof n.S3Client?[4,(0,e.__await)(a.apply(void 0,(0,e.__spread)([r.client,s],o)))]:[3,5];case 4:return _=l.sent(),[3,6];case 5:throw new Error("Invalid client, expected S3 | S3Client");case 6:return[4,(0,e.__await)(_)];case 7:return[4,l.sent()];case 8:return l.sent(),c=_.NextContinuationToken,u=!!c,[3,1];case 9:return[4,(0,e.__await)(void 0)];case 10:return[2,l.sent()]}})})}
},{"tslib":"CvJj","../S3":"ibQH","../S3Client":"ZPdf","../commands/ListObjectsV2Command":"XzHX"}],"CTmJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.paginateListParts=s;var e=require("tslib"),r=require("../S3"),t=require("../S3Client"),n=require("../commands/ListPartsCommand"),a=function(r,t){for(var a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];return(0,e.__awaiter)(void 0,void 0,void 0,function(){return(0,e.__generator)(this,function(i){switch(i.label){case 0:return[4,r.send.apply(r,(0,e.__spread)([new n.ListPartsCommand(t)],a))];case 1:return[2,i.sent()]}})})},i=function(r,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];return(0,e.__awaiter)(void 0,void 0,void 0,function(){return(0,e.__generator)(this,function(a){switch(a.label){case 0:return[4,r.listParts.apply(r,(0,e.__spread)([t],n))];case 1:return[2,a.sent()]}})})};function s(n,s){for(var c=[],o=2;o<arguments.length;o++)c[o-2]=arguments[o];return(0,e.__asyncGenerator)(this,arguments,function(){var o,u,_;return(0,e.__generator)(this,function(l){switch(l.label){case 0:o=n.startingToken||void 0,u=!0,l.label=1;case 1:return u?(s.PartNumberMarker=o,s.MaxParts=n.pageSize,n.client instanceof r.S3?[4,(0,e.__await)(i.apply(void 0,(0,e.__spread)([n.client,s],c)))]:[3,3]):[3,9];case 2:return _=l.sent(),[3,6];case 3:return n.client instanceof t.S3Client?[4,(0,e.__await)(a.apply(void 0,(0,e.__spread)([n.client,s],c)))]:[3,5];case 4:return _=l.sent(),[3,6];case 5:throw new Error("Invalid client, expected S3 | S3Client");case 6:return[4,(0,e.__await)(_)];case 7:return[4,l.sent()];case 8:return l.sent(),o=_.NextPartNumberMarker,u=!!o,[3,1];case 9:return[4,(0,e.__await)(void 0)];case 10:return[2,l.sent()]}})})}
},{"tslib":"CvJj","../S3":"ibQH","../S3Client":"ZPdf","../commands/ListPartsCommand":"sMwO"}],"QQBO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./models_0");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./models_1");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});
},{"./models_0":"Iby9","./models_1":"bWh6"}],"aKF0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./S3Client");Object.keys(e).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})});var t=require("./S3");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var r=require("./commands/AbortMultipartUploadCommand");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var n=require("./commands/CompleteMultipartUploadCommand");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var o=require("./commands/CopyObjectCommand");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var u=require("./commands/CreateBucketCommand");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var c=require("./commands/CreateMultipartUploadCommand");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}})});var a=require("./commands/DeleteBucketCommand");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}})});var i=require("./commands/DeleteBucketAnalyticsConfigurationCommand");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})});var f=require("./commands/DeleteBucketCorsCommand");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}})});var d=require("./commands/DeleteBucketEncryptionCommand");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}})});var m=require("./commands/DeleteBucketIntelligentTieringConfigurationCommand");Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return m[e]}})});var s=require("./commands/DeleteBucketInventoryConfigurationCommand");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}})});var l=require("./commands/DeleteBucketLifecycleCommand");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}})});var b=require("./commands/DeleteBucketMetricsConfigurationCommand");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}})});var O=require("./commands/DeleteBucketOwnershipControlsCommand");Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return O[e]}})});var p=require("./commands/DeleteBucketPolicyCommand");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}})});var j=require("./commands/DeleteBucketReplicationCommand");Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return j[e]}})});var y=require("./commands/DeleteBucketTaggingCommand");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return y[e]}})});var _=require("./commands/DeleteBucketWebsiteCommand");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _[e]}})});var g=require("./commands/DeleteObjectCommand");Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return g[e]}})});var k=require("./commands/DeleteObjectsCommand");Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return k[e]}})});var P=require("./commands/DeleteObjectTaggingCommand");Object.keys(P).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return P[e]}})});var C=require("./commands/DeletePublicAccessBlockCommand");Object.keys(C).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return C[e]}})});var M=require("./commands/GetBucketAccelerateConfigurationCommand");Object.keys(M).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return M[e]}})});var v=require("./commands/GetBucketAclCommand");Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return v[e]}})});var E=require("./commands/GetBucketAnalyticsConfigurationCommand");Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return E[e]}})});var x=require("./commands/GetBucketCorsCommand");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return x[e]}})});var h=require("./commands/GetBucketEncryptionCommand");Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return h[e]}})});var q=require("./commands/GetBucketIntelligentTieringConfigurationCommand");Object.keys(q).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return q[e]}})});var B=require("./commands/GetBucketInventoryConfigurationCommand");Object.keys(B).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return B[e]}})});var G=require("./commands/GetBucketLifecycleConfigurationCommand");Object.keys(G).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return G[e]}})});var L=require("./commands/GetBucketLocationCommand");Object.keys(L).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return L[e]}})});var D=require("./commands/GetBucketLoggingCommand");Object.keys(D).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return D[e]}})});var A=require("./commands/GetBucketMetricsConfigurationCommand");Object.keys(A).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return A[e]}})});var T=require("./commands/GetBucketNotificationConfigurationCommand");Object.keys(T).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return T[e]}})});var I=require("./commands/GetBucketOwnershipControlsCommand");Object.keys(I).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return I[e]}})});var R=require("./commands/GetBucketPolicyCommand");Object.keys(R).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return R[e]}})});var w=require("./commands/GetBucketPolicyStatusCommand");Object.keys(w).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return w[e]}})});var U=require("./commands/GetBucketReplicationCommand");Object.keys(U).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return U[e]}})});var V=require("./commands/GetBucketRequestPaymentCommand");Object.keys(V).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return V[e]}})});var H=require("./commands/GetBucketTaggingCommand");Object.keys(H).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return H[e]}})});var S=require("./commands/GetBucketVersioningCommand");Object.keys(S).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return S[e]}})});var W=require("./commands/GetBucketWebsiteCommand");Object.keys(W).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return W[e]}})});var F=require("./commands/GetObjectCommand");Object.keys(F).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return F[e]}})});var N=require("./commands/GetObjectAclCommand");Object.keys(N).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return N[e]}})});var z=require("./commands/GetObjectLegalHoldCommand");Object.keys(z).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return z[e]}})});var J=require("./commands/GetObjectLockConfigurationCommand");Object.keys(J).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return J[e]}})});var K=require("./commands/GetObjectRetentionCommand");Object.keys(K).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return K[e]}})});var Q=require("./commands/GetObjectTaggingCommand");Object.keys(Q).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Q[e]}})});var X=require("./commands/GetObjectTorrentCommand");Object.keys(X).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return X[e]}})});var Y=require("./commands/GetPublicAccessBlockCommand");Object.keys(Y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Y[e]}})});var Z=require("./commands/HeadBucketCommand");Object.keys(Z).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Z[e]}})});var $=require("./waiters/waitForBucketExists");Object.keys($).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $[e]}})});var ee=require("./commands/HeadObjectCommand");Object.keys(ee).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ee[e]}})});var te=require("./waiters/waitForObjectExists");Object.keys(te).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return te[e]}})});var re=require("./commands/ListBucketAnalyticsConfigurationsCommand");Object.keys(re).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return re[e]}})});var ne=require("./commands/ListBucketIntelligentTieringConfigurationsCommand");Object.keys(ne).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ne[e]}})});var oe=require("./commands/ListBucketInventoryConfigurationsCommand");Object.keys(oe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return oe[e]}})});var ue=require("./commands/ListBucketMetricsConfigurationsCommand");Object.keys(ue).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ue[e]}})});var ce=require("./commands/ListBucketsCommand");Object.keys(ce).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ce[e]}})});var ae=require("./commands/ListMultipartUploadsCommand");Object.keys(ae).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ae[e]}})});var ie=require("./commands/ListObjectsCommand");Object.keys(ie).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ie[e]}})});var fe=require("./commands/ListObjectsV2Command");Object.keys(fe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fe[e]}})});var de=require("./pagination/ListObjectsV2Paginator");Object.keys(de).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return de[e]}})});var me=require("./commands/ListObjectVersionsCommand");Object.keys(me).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return me[e]}})});var se=require("./commands/ListPartsCommand");Object.keys(se).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return se[e]}})});var le=require("./pagination/ListPartsPaginator");Object.keys(le).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return le[e]}})});var be=require("./commands/PutBucketAccelerateConfigurationCommand");Object.keys(be).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return be[e]}})});var Oe=require("./commands/PutBucketAclCommand");Object.keys(Oe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Oe[e]}})});var pe=require("./commands/PutBucketAnalyticsConfigurationCommand");Object.keys(pe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pe[e]}})});var je=require("./commands/PutBucketCorsCommand");Object.keys(je).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return je[e]}})});var ye=require("./commands/PutBucketEncryptionCommand");Object.keys(ye).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ye[e]}})});var _e=require("./commands/PutBucketIntelligentTieringConfigurationCommand");Object.keys(_e).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _e[e]}})});var ge=require("./commands/PutBucketInventoryConfigurationCommand");Object.keys(ge).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ge[e]}})});var ke=require("./commands/PutBucketLifecycleConfigurationCommand");Object.keys(ke).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ke[e]}})});var Pe=require("./commands/PutBucketLoggingCommand");Object.keys(Pe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Pe[e]}})});var Ce=require("./commands/PutBucketMetricsConfigurationCommand");Object.keys(Ce).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ce[e]}})});var Me=require("./commands/PutBucketNotificationConfigurationCommand");Object.keys(Me).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Me[e]}})});var ve=require("./commands/PutBucketOwnershipControlsCommand");Object.keys(ve).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ve[e]}})});var Ee=require("./commands/PutBucketPolicyCommand");Object.keys(Ee).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ee[e]}})});var xe=require("./commands/PutBucketReplicationCommand");Object.keys(xe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xe[e]}})});var he=require("./commands/PutBucketRequestPaymentCommand");Object.keys(he).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return he[e]}})});var qe=require("./commands/PutBucketTaggingCommand");Object.keys(qe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qe[e]}})});var Be=require("./commands/PutBucketVersioningCommand");Object.keys(Be).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Be[e]}})});var Ge=require("./commands/PutBucketWebsiteCommand");Object.keys(Ge).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ge[e]}})});var Le=require("./commands/PutObjectCommand");Object.keys(Le).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Le[e]}})});var De=require("./commands/PutObjectAclCommand");Object.keys(De).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return De[e]}})});var Ae=require("./commands/PutObjectLegalHoldCommand");Object.keys(Ae).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ae[e]}})});var Te=require("./commands/PutObjectLockConfigurationCommand");Object.keys(Te).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Te[e]}})});var Ie=require("./commands/PutObjectRetentionCommand");Object.keys(Ie).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ie[e]}})});var Re=require("./commands/PutObjectTaggingCommand");Object.keys(Re).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Re[e]}})});var we=require("./commands/PutPublicAccessBlockCommand");Object.keys(we).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return we[e]}})});var Ue=require("./commands/RestoreObjectCommand");Object.keys(Ue).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ue[e]}})});var Ve=require("./commands/SelectObjectContentCommand");Object.keys(Ve).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ve[e]}})});var He=require("./commands/UploadPartCommand");Object.keys(He).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return He[e]}})});var Se=require("./commands/UploadPartCopyCommand");Object.keys(Se).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Se[e]}})});var We=require("./pagination/Interfaces");Object.keys(We).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return We[e]}})});var Fe=require("./models/index");Object.keys(Fe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Fe[e]}})});
},{"./S3Client":"ZPdf","./S3":"ibQH","./commands/AbortMultipartUploadCommand":"Hy2z","./commands/CompleteMultipartUploadCommand":"OFHN","./commands/CopyObjectCommand":"yJo6","./commands/CreateBucketCommand":"Ogt0","./commands/CreateMultipartUploadCommand":"Injc","./commands/DeleteBucketCommand":"zaAx","./commands/DeleteBucketAnalyticsConfigurationCommand":"CiOf","./commands/DeleteBucketCorsCommand":"mdKh","./commands/DeleteBucketEncryptionCommand":"NlJJ","./commands/DeleteBucketIntelligentTieringConfigurationCommand":"afGu","./commands/DeleteBucketInventoryConfigurationCommand":"ig9r","./commands/DeleteBucketLifecycleCommand":"hTc0","./commands/DeleteBucketMetricsConfigurationCommand":"ZhDm","./commands/DeleteBucketOwnershipControlsCommand":"ksCC","./commands/DeleteBucketPolicyCommand":"r2Yi","./commands/DeleteBucketReplicationCommand":"abjC","./commands/DeleteBucketTaggingCommand":"C2JC","./commands/DeleteBucketWebsiteCommand":"rzB9","./commands/DeleteObjectCommand":"R794","./commands/DeleteObjectsCommand":"dRrd","./commands/DeleteObjectTaggingCommand":"GXH0","./commands/DeletePublicAccessBlockCommand":"JSiD","./commands/GetBucketAccelerateConfigurationCommand":"HGGq","./commands/GetBucketAclCommand":"igt1","./commands/GetBucketAnalyticsConfigurationCommand":"rte0","./commands/GetBucketCorsCommand":"chCO","./commands/GetBucketEncryptionCommand":"v8xS","./commands/GetBucketIntelligentTieringConfigurationCommand":"CPj3","./commands/GetBucketInventoryConfigurationCommand":"D4Fc","./commands/GetBucketLifecycleConfigurationCommand":"DHIu","./commands/GetBucketLocationCommand":"mLhC","./commands/GetBucketLoggingCommand":"o5wZ","./commands/GetBucketMetricsConfigurationCommand":"LriA","./commands/GetBucketNotificationConfigurationCommand":"QCUB","./commands/GetBucketOwnershipControlsCommand":"sqiA","./commands/GetBucketPolicyCommand":"Xcbw","./commands/GetBucketPolicyStatusCommand":"opAN","./commands/GetBucketReplicationCommand":"GE7t","./commands/GetBucketRequestPaymentCommand":"vPTw","./commands/GetBucketTaggingCommand":"dT3U","./commands/GetBucketVersioningCommand":"mfnN","./commands/GetBucketWebsiteCommand":"GUAi","./commands/GetObjectCommand":"VZpu","./commands/GetObjectAclCommand":"nyGV","./commands/GetObjectLegalHoldCommand":"vTT5","./commands/GetObjectLockConfigurationCommand":"Q0GN","./commands/GetObjectRetentionCommand":"pG5h","./commands/GetObjectTaggingCommand":"OiwI","./commands/GetObjectTorrentCommand":"Q1gF","./commands/GetPublicAccessBlockCommand":"flCg","./commands/HeadBucketCommand":"S297","./waiters/waitForBucketExists":"GxR0","./commands/HeadObjectCommand":"l20Q","./waiters/waitForObjectExists":"DZJH","./commands/ListBucketAnalyticsConfigurationsCommand":"aFB5","./commands/ListBucketIntelligentTieringConfigurationsCommand":"BmFg","./commands/ListBucketInventoryConfigurationsCommand":"JDox","./commands/ListBucketMetricsConfigurationsCommand":"KaMc","./commands/ListBucketsCommand":"q2Fx","./commands/ListMultipartUploadsCommand":"wLpp","./commands/ListObjectsCommand":"Yvjg","./commands/ListObjectsV2Command":"XzHX","./pagination/ListObjectsV2Paginator":"sHaI","./commands/ListObjectVersionsCommand":"XSA5","./commands/ListPartsCommand":"sMwO","./pagination/ListPartsPaginator":"CTmJ","./commands/PutBucketAccelerateConfigurationCommand":"mPTX","./commands/PutBucketAclCommand":"ND3d","./commands/PutBucketAnalyticsConfigurationCommand":"HsP1","./commands/PutBucketCorsCommand":"vj0X","./commands/PutBucketEncryptionCommand":"q9oD","./commands/PutBucketIntelligentTieringConfigurationCommand":"QJhn","./commands/PutBucketInventoryConfigurationCommand":"U8fc","./commands/PutBucketLifecycleConfigurationCommand":"kROF","./commands/PutBucketLoggingCommand":"TOJW","./commands/PutBucketMetricsConfigurationCommand":"MSxh","./commands/PutBucketNotificationConfigurationCommand":"AcbJ","./commands/PutBucketOwnershipControlsCommand":"QJ69","./commands/PutBucketPolicyCommand":"HV49","./commands/PutBucketReplicationCommand":"k17v","./commands/PutBucketRequestPaymentCommand":"o3vG","./commands/PutBucketTaggingCommand":"EtIT","./commands/PutBucketVersioningCommand":"hyXu","./commands/PutBucketWebsiteCommand":"acUA","./commands/PutObjectCommand":"hHVK","./commands/PutObjectAclCommand":"g3ZK","./commands/PutObjectLegalHoldCommand":"HdfH","./commands/PutObjectLockConfigurationCommand":"iiCZ","./commands/PutObjectRetentionCommand":"cK98","./commands/PutObjectTaggingCommand":"aQUx","./commands/PutPublicAccessBlockCommand":"rKuy","./commands/RestoreObjectCommand":"MjE0","./commands/SelectObjectContentCommand":"IjBI","./commands/UploadPartCommand":"LXZY","./commands/UploadPartCopyCommand":"JL4Y","./pagination/Interfaces":"YyWV","./models/index":"QQBO"}],"QjDn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProviderError=void 0;var r=require("tslib"),e=function(e){function t(r,t){void 0===t&&(t=!0);var i=e.call(this,r)||this;return i.tryNextLink=t,i}return(0,r.__extends)(t,e),t.from=function(r,e){return void 0===e&&(e=!0),Object.defineProperty(r,"tryNextLink",{value:e,configurable:!1,enumerable:!1,writable:!1}),r},t}(Error);exports.ProviderError=e;
},{"tslib":"G5GG"}],"OHa5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chain=t;var r=require("tslib"),e=require("./ProviderError");function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(){var n,o,i=Promise.reject(new e.ProviderError("No providers in chain")),u=function(r){i=i.catch(function(e){if(null==e?void 0:e.tryNextLink)return r();throw e})};try{for(var a=(0,r.__values)(t),c=a.next();!c.done;c=a.next()){u(c.value)}}catch(l){n={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i}}
},{"tslib":"G5GG","./ProviderError":"QjDn"}],"wiyl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromStatic=void 0;var e=function(e){return function(){return Promise.resolve(e)}};exports.fromStatic=e;
},{}],"G8rB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.memoize=void 0;var e=require("tslib"),r=function(r,t,i){var n,o;if(void 0===t)return function(){return o||(n=r(),o=!0),n};var u=!1;return function(){return(0,e.__awaiter)(void 0,void 0,void 0,function(){var s;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return o||(n=r(),o=!0),u?[2,n]:[4,n];case 1:return s=e.sent(),i&&!i(s)?(u=!0,[2,s]):t(s)?[2,n=r()]:[2,s]}})})}};exports.memoize=r;
},{"tslib":"G5GG"}],"mv13":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./chain");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./fromStatic");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./memoize");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var o=require("./ProviderError");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});
},{"./chain":"OHa5","./fromStatic":"wiyl","./memoize":"G8rB","./ProviderError":"QjDn"}],"iGTM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveLogins=r;var e=require("tslib");function r(r){return Promise.all(Object.keys(r).reduce(function(e,t){var n=r[t];return"string"==typeof n?e.push([t,n]):e.push(n().then(function(e){return[t,e]})),e},[])).then(function(r){return r.reduce(function(r,t){var n=(0,e.__read)(t,2),u=n[0],o=n[1];return r[u]=o,r},{})})}
},{"tslib":"G5GG"}],"XVLH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromCognitoIdentity=t;var e=require("tslib"),n=require("@aws-sdk/client-cognito-identity"),o=require("@aws-sdk/property-provider"),r=require("./resolveLogins");function t(o){var t=this;return function(){return(0,e.__awaiter)(t,void 0,void 0,function(){var t,a,c,u,l,y,v,p,m,f,g,w,I;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return f=(m=o.client).send,g=n.GetCredentialsForIdentityCommand.bind,I={CustomRoleArn:o.customRoleArn,IdentityId:o.identityId},o.logins?[4,(0,r.resolveLogins)(o.logins)]:[3,2];case 1:return w=e.sent(),[3,3];case 2:w=void 0,e.label=3;case 3:return[4,f.apply(m,[new(g.apply(n.GetCredentialsForIdentityCommand,[void 0,(I.Logins=w,I)]))])];case 4:return t=e.sent().Credentials,a=void 0===t?s():t,c=a.AccessKeyId,u=void 0===c?i():c,l=a.Expiration,y=a.SecretKey,v=void 0===y?d():y,p=a.SessionToken,[2,{identityId:o.identityId,accessKeyId:u,secretAccessKey:v,sessionToken:p,expiration:l}]}})})}}function i(){throw new o.ProviderError("Response from Amazon Cognito contained no access key ID")}function s(){throw new o.ProviderError("Response from Amazon Cognito contained no credentials")}function d(){throw new o.ProviderError("Response from Amazon Cognito contained no secret key")}
},{"tslib":"G5GG","@aws-sdk/client-cognito-identity":"crYF","@aws-sdk/property-provider":"mv13","./resolveLogins":"iGTM"}],"XQUs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IndexedDbStorage=void 0;var e="IdentityIds",t=function(){function t(e){void 0===e&&(e="aws:cognito-identity-ids"),this.dbName=e}return t.prototype.getItem=function(e){return this.withObjectStore("readonly",function(t){var r=t.get(e);return new Promise(function(e){r.onerror=function(){return e(null)},r.onsuccess=function(){return e(r.result?r.result.value:null)}})}).catch(function(){return null})},t.prototype.removeItem=function(e){return this.withObjectStore("readwrite",function(t){var r=t.delete(e);return new Promise(function(e,t){r.onerror=function(){return t(r.error)},r.onsuccess=function(){return e()}})})},t.prototype.setItem=function(e,t){return this.withObjectStore("readwrite",function(r){var n=r.put({id:e,value:t});return new Promise(function(e,t){n.onerror=function(){return t(n.error)},n.onsuccess=function(){return e()}})})},t.prototype.getDb=function(){var t=self.indexedDB.open(this.dbName,1);return new Promise(function(r,n){t.onsuccess=function(){r(t.result)},t.onerror=function(){n(t.error)},t.onblocked=function(){n(new Error("Unable to access DB"))},t.onupgradeneeded=function(){var r=t.result;r.onerror=function(){n(new Error("Failed to create object store"))},r.createObjectStore(e,{keyPath:"id"})}})},t.prototype.withObjectStore=function(t,r){return this.getDb().then(function(n){var o=n.transaction(e,t);return o.oncomplete=function(){return n.close()},new Promise(function(t,n){o.onerror=function(){return n(o.error)},t(r(o.objectStore(e)))}).catch(function(e){throw n.close(),e})})},t}();exports.IndexedDbStorage=t;
},{}],"Kw7Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.InMemoryStorage=void 0;var t=function(){function t(t){void 0===t&&(t={}),this.store=t}return t.prototype.getItem=function(t){return t in this.store?this.store[t]:null},t.prototype.removeItem=function(t){delete this.store[t]},t.prototype.setItem=function(t,e){this.store[t]=e},t}();exports.InMemoryStorage=t;
},{}],"p3LH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.localStorage=t;var e=require("./IndexedDbStorage"),o=require("./InMemoryStorage"),r=new o.InMemoryStorage;function t(){return"object"==typeof self&&self.indexedDB?new e.IndexedDbStorage:"object"==typeof window&&window.localStorage?window.localStorage:r}
},{"./IndexedDbStorage":"XQUs","./InMemoryStorage":"Kw7Q"}],"KJgB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromCognitoIdentityPool=c;var e=require("tslib"),t=require("@aws-sdk/client-cognito-identity"),o=require("@aws-sdk/property-provider"),n=require("./fromCognitoIdentity"),r=require("./localStorage"),i=require("./resolveLogins");function c(o){var c=this,d=o.accountId,a=o.cache,u=void 0===a?(0,r.localStorage)():a,l=o.client,v=o.customRoleArn,I=o.identityPoolId,f=o.logins,g=o.userIdentifier,m=void 0===g?f&&0!==Object.keys(f).length?void 0:"ANONYMOUS":g,y=m?"aws:cognito-identity-credentials:"+I+":"+m:void 0,h=function(){return(0,e.__awaiter)(c,void 0,void 0,function(){var o,r,c,a,g,m,p,w,_;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return(r=y)?[4,u.getItem(y)]:[3,2];case 1:r=e.sent(),e.label=2;case 2:return(o=r)?[3,7]:(m=(g=l).send,p=t.GetIdCommand.bind,_={AccountId:d,IdentityPoolId:I},f?[4,(0,i.resolveLogins)(f)]:[3,4]);case 3:return w=e.sent(),[3,5];case 4:w=void 0,e.label=5;case 5:return[4,m.apply(g,[new(p.apply(t.GetIdCommand,[void 0,(_.Logins=w,_)]))])];case 6:c=e.sent().IdentityId,a=void 0===c?s():c,o=a,y&&Promise.resolve(u.setItem(y,o)).catch(function(){}),e.label=7;case 7:return[2,(h=(0,n.fromCognitoIdentity)({client:l,customRoleArn:v,logins:f,identityId:o}))()]}})})};return function(){return h().catch(function(t){return(0,e.__awaiter)(c,void 0,void 0,function(){return(0,e.__generator)(this,function(e){throw y&&Promise.resolve(u.removeItem(y)).catch(function(){}),t})})})}}function s(){throw new o.ProviderError("Response from Amazon Cognito contained no identity ID")}
},{"tslib":"G5GG","@aws-sdk/client-cognito-identity":"crYF","@aws-sdk/property-provider":"mv13","./fromCognitoIdentity":"XVLH","./localStorage":"p3LH","./resolveLogins":"iGTM"}],"DAbC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./CognitoProviderParameters");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./fromCognitoIdentity");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./fromCognitoIdentityPool");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var o=require("./Logins");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var n=require("./Storage");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});
},{"./CognitoProviderParameters":"YyWV","./fromCognitoIdentity":"XVLH","./fromCognitoIdentityPool":"KJgB","./Logins":"YyWV","./Storage":"YyWV"}],"g5IB":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"sNrv":[function(require,module,exports) {
var process = require("process");
var r=require("process");function t(r,t){for(var e=0,n=r.length-1;n>=0;n--){var o=r[n];"."===o?r.splice(n,1):".."===o?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function e(r){"string"!=typeof r&&(r+="");var t,e=0,n=-1,o=!0;for(t=r.length-1;t>=0;--t)if(47===r.charCodeAt(t)){if(!o){e=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":r.slice(e,n)}function n(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}exports.resolve=function(){for(var e="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var i=s>=0?arguments[s]:r.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,o="/"===i.charAt(0))}return(o?"/":"")+(e=t(n(e.split("/"),function(r){return!!r}),!o).join("/"))||"."},exports.normalize=function(r){var e=exports.isAbsolute(r),s="/"===o(r,-1);return(r=t(n(r.split("/"),function(r){return!!r}),!e).join("/"))||e||(r="."),r&&s&&(r+="/"),(e?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(n(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),o=e(t.split("/")),s=Math.min(n.length,o.length),i=s,u=0;u<s;u++)if(n[u]!==o[u]){i=u;break}var f=[];for(u=i;u<n.length;u++)f.push("..");return(f=f.concat(o.slice(i))).join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){if("string"!=typeof r&&(r+=""),0===r.length)return".";for(var t=r.charCodeAt(0),e=47===t,n=-1,o=!0,s=r.length-1;s>=1;--s)if(47===(t=r.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return-1===n?e?"/":".":e&&1===n?"/":r.slice(0,n)},exports.basename=function(r,t){var n=e(r);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},exports.extname=function(r){"string"!=typeof r&&(r+="");for(var t=-1,e=0,n=-1,o=!0,s=0,i=r.length-1;i>=0;--i){var u=r.charCodeAt(i);if(47!==u)-1===n&&(o=!1,n=i+1),46===u?-1===t?t=i:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){e=i+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===e+1?"":r.slice(t,n)};var o="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return t<0&&(t=r.length+t),r.substr(t,e)};
},{"process":"g5IB"}],"KVVd":[function(require,module,exports) {

},{}],"rC56":[function(require,module,exports) {
module.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/bdoc":["bdoc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/font-woff":[],"application/font-woff2":[],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/prs.cww":["cww"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":[],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":[],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":[],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":[],"application/x-msdownload":["com","bat"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["wmf","emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":[],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":[],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp3":[],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/wav":["wav"],"audio/wave":[],"audio/webm":["weba"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":[],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":[],"audio/x-wav":[],"audio/xm":["xm"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/g3fax":["g3"],"image/gif":["gif"],"image/ief":["ief"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/ktx":["ktx"],"image/png":["png"],"image/prs.btif":["btif"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/tiff":["tiff","tif"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":[],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/webp":["webp"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":[],"image/x-pcx":["pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/rfc822":["eml","mime"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.vtu":["vtu"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["x3db","x3dbz"],"model/x3d+vrml":["x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/hjson":["hjson"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/prs.lines.tag":["dsc"],"text/richtext":["rtx"],"text/rtf":[],"text/sgml":["sgml","sgm"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/vtt":["vtt"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":[],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"text/xml":[],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]};
},{}],"hVj4":[function(require,module,exports) {
var t=require("path"),e=require("fs");function s(){this.types=Object.create(null),this.extensions=Object.create(null)}s.prototype.define=function(t){for(var e in t){for(var s=t[e],n=0;n<s.length;n++)this.types[s[n]]=e;this.extensions[e]||(this.extensions[e]=s[0])}},s.prototype.load=function(t){this._loading=t;var s={};e.readFileSync(t,"ascii").split(/[\r\n]+/).forEach(function(t){var e=t.replace(/\s*#.*|^\s*|\s*$/g,"").split(/\s+/);s[e.shift()]=e}),this.define(s),this._loading=null},s.prototype.lookup=function(t,e){var s=t.replace(/^.*[\.\/\\]/,"").toLowerCase();return this.types[s]||e||this.default_type},s.prototype.extension=function(t){var e=t.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();return this.extensions[e]};var n=new s;n.define(require("./types.json")),n.default_type=n.lookup("bin"),n.Mime=s,n.charsets={lookup:function(t,e){return/^text\/|^application\/(javascript|json)/.test(t)?"UTF-8":e}},module.exports=n;
},{"path":"sNrv","fs":"KVVd","./types.json":"rC56"}],"Y8u2":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):(e=e||self).Sweetalert2=n()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t,e,n){return(l=s()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var a=new(Function.bind.apply(t,o));return n&&r(a,n.prototype),a}).apply(null,arguments)}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}(t,e);if(o){var a=Object.getOwnPropertyDescriptor(o,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}var d=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},p=function(t){return Object.keys(t).map(function(e){return t[e]})},m=function(t){return Array.prototype.slice.call(t)},f=function(e){console.warn("".concat("SweetAlert2:"," ").concat("object"===t(e)?e.join(" "):e))},w=function(t){console.error("".concat("SweetAlert2:"," ").concat(t))},h=[],g=function(t,e){var n;n='"'.concat(t,'" is deprecated and will be removed in the next major release. Please use "').concat(e,'" instead.'),-1===h.indexOf(n)&&(h.push(n),f(n))},b=function(t){return"function"==typeof t?t():t},y=function(t){return t&&"function"==typeof t.toPromise},v=function(t){return y(t)?t.toPromise():Promise.resolve(t)},k=function(t){return t&&Promise.resolve(t)===t},x=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),C=function(e){return e instanceof Element||function(e){return"object"===t(e)&&e.jquery}(e)},A=function(t){var e={};for(var n in t)e[t[n]]="swal2-"+t[n];return e},B=A(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","toast-column","show","hide","close","title","header","content","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),P=A(["success","warning","info","question","error"]),E=function(){return document.body.querySelector(".".concat(B.container))},S=function(t){var e=E();return e?e.querySelector(t):null},O=function(t){return S(".".concat(t))},T=function(){return O(B.popup)},L=function(){return O(B.icon)},j=function(){return O(B.title)},z=function(){return O(B.content)},D=function(){return O(B["html-container"])},q=function(){return O(B.image)},M=function(){return O(B["progress-steps"])},I=function(){return O(B["validation-message"])},H=function(){return S(".".concat(B.actions," .").concat(B.confirm))},V=function(){return S(".".concat(B.actions," .").concat(B.deny))},N=function(){return S(".".concat(B.loader))},R=function(){return S(".".concat(B.actions," .").concat(B.cancel))},U=function(){return O(B.actions)},_=function(){return O(B.header)},Y=function(){return O(B.footer)},F=function(){return O(B["timer-progress-bar"])},Z=function(){return O(B.close)},$=function(){var t=m(T().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort(function(t,e){return(t=parseInt(t.getAttribute("tabindex")))>(e=parseInt(e.getAttribute("tabindex")))?1:t<e?-1:0}),e=m(T().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(function(t){return"-1"!==t.getAttribute("tabindex")});return function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(t.concat(e)).filter(function(t){return pt(t)})},W=function(){return!K()&&!document.body.classList.contains(B["no-backdrop"])},K=function(){return document.body.classList.contains(B["toast-shown"])},X={previousBodyPadding:null},Q=function(t,e){if(t.textContent="",e){var n=(new DOMParser).parseFromString(e,"text/html");m(n.querySelector("head").childNodes).forEach(function(e){t.appendChild(e)}),m(n.querySelector("body").childNodes).forEach(function(e){t.appendChild(e)})}},J=function(t,e){if(!e)return!1;for(var n=e.split(/\s+/),o=0;o<n.length;o++)if(!t.classList.contains(n[o]))return!1;return!0},G=function(e,n,o){if(function(t,e){m(t.classList).forEach(function(n){-1===p(B).indexOf(n)&&-1===p(P).indexOf(n)&&-1===p(e.showClass).indexOf(n)&&t.classList.remove(n)})}(e,n),n.customClass&&n.customClass[o]){if("string"!=typeof n.customClass[o]&&!n.customClass[o].forEach)return f("Invalid type of customClass.".concat(o,'! Expected string or iterable object, got "').concat(t(n.customClass[o]),'"'));at(e,n.customClass[o])}};function tt(t,e){if(!e)return null;switch(e){case"select":case"textarea":case"file":return rt(t,B[e]);case"checkbox":return t.querySelector(".".concat(B.checkbox," input"));case"radio":return t.querySelector(".".concat(B.radio," input:checked"))||t.querySelector(".".concat(B.radio," input:first-child"));case"range":return t.querySelector(".".concat(B.range," input"));default:return rt(t,B.input)}}var et,nt=function(t){if(t.focus(),"file"!==t.type){var e=t.value;t.value="",t.value=e}},ot=function(t,e,n){t&&e&&("string"==typeof e&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(function(e){t.forEach?t.forEach(function(t){n?t.classList.add(e):t.classList.remove(e)}):n?t.classList.add(e):t.classList.remove(e)}))},at=function(t,e){ot(t,e,!0)},it=function(t,e){ot(t,e,!1)},rt=function(t,e){for(var n=0;n<t.childNodes.length;n++)if(J(t.childNodes[n],e))return t.childNodes[n]},st=function(t,e,n){n==="".concat(parseInt(n))&&(n=parseInt(n)),n||0===parseInt(n)?t.style[e]="number"==typeof n?"".concat(n,"px"):n:t.style.removeProperty(e)},lt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";t.style.display=e},ct=function(t){t.style.display="none"},ut=function(t,e,n,o){var a=t.querySelector(e);a&&(a.style[n]=o)},dt=function(t,e,n){e?lt(t,n):ct(t)},pt=function(t){return!(!t||!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))},mt=function(){return!pt(H())&&!pt(V())&&!pt(R())},ft=function(t){return!!(t.scrollHeight>t.clientHeight)},wt=function(t){var e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),o=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||o>0},ht=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=F();pt(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(function(){n.style.transition="width ".concat(t/1e3,"s linear"),n.style.width="0%"},10))},gt=function(){return"undefined"==typeof window||"undefined"==typeof document},bt='\n <div aria-labelledby="'.concat(B.title,'" aria-describedby="').concat(B.content,'" class="').concat(B.popup,'" tabindex="-1">\n   <div class="').concat(B.header,'">\n     <ul class="').concat(B["progress-steps"],'"></ul>\n     <div class="').concat(B.icon,'"></div>\n     <img class="').concat(B.image,'" />\n     <h2 class="').concat(B.title,'" id="').concat(B.title,'"></h2>\n     <button type="button" class="').concat(B.close,'"></button>\n   </div>\n   <div class="').concat(B.content,'">\n     <div id="').concat(B.content,'" class="').concat(B["html-container"],'"></div>\n     <input class="').concat(B.input,'" />\n     <input type="file" class="').concat(B.file,'" />\n     <div class="').concat(B.range,'">\n       <input type="range" />\n       <output></output>\n     </div>\n     <select class="').concat(B.select,'"></select>\n     <div class="').concat(B.radio,'"></div>\n     <label for="').concat(B.checkbox,'" class="').concat(B.checkbox,'">\n       <input type="checkbox" />\n       <span class="').concat(B.label,'"></span>\n     </label>\n     <textarea class="').concat(B.textarea,'"></textarea>\n     <div class="').concat(B["validation-message"],'" id="').concat(B["validation-message"],'"></div>\n   </div>\n   <div class="').concat(B.actions,'">\n     <div class="').concat(B.loader,'"></div>\n     <button type="button" class="').concat(B.confirm,'"></button>\n     <button type="button" class="').concat(B.deny,'"></button>\n     <button type="button" class="').concat(B.cancel,'"></button>\n   </div>\n   <div class="').concat(B.footer,'"></div>\n   <div class="').concat(B["timer-progress-bar-container"],'">\n     <div class="').concat(B["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),yt=function(t){_n.isVisible()&&et!==t.target.value&&_n.resetValidationMessage(),et=t.target.value},vt=function(t){var e,n=!!(e=E())&&(e.parentNode.removeChild(e),it([document.documentElement,document.body],[B["no-backdrop"],B["toast-shown"],B["has-column"]]),!0);if(gt())w("SweetAlert2 requires document to initialize");else{var o=document.createElement("div");o.className=B.container,n&&at(o,B["no-transition"]),Q(o,bt);var a,i,r,s,l,c,u,d,p,m="string"==typeof(a=t.target)?document.querySelector(a):a;m.appendChild(o),function(t){var e=T();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")}(t),function(t){"rtl"===window.getComputedStyle(t).direction&&at(E(),B.rtl)}(m),i=z(),r=rt(i,B.input),s=rt(i,B.file),l=i.querySelector(".".concat(B.range," input")),c=i.querySelector(".".concat(B.range," output")),u=rt(i,B.select),d=i.querySelector(".".concat(B.checkbox," input")),p=rt(i,B.textarea),r.oninput=yt,s.onchange=yt,u.onchange=yt,d.onchange=yt,p.oninput=yt,l.oninput=function(t){yt(t),c.value=l.value},l.onchange=function(t){yt(t),l.nextSibling.value=l.value}}},kt=function(e,n){e instanceof HTMLElement?n.appendChild(e):"object"===t(e)?xt(e,n):e&&Q(n,e)},xt=function(t,e){t.jquery?Ct(e,t):Q(e,t.toString())},Ct=function(t,e){if(t.textContent="",0 in e)for(var n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},At=function(){if(gt())return!1;var t=document.createElement("div"),e={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&void 0!==t.style[n])return e[n];return!1}(),Bt=function(t,e){var n=U(),o=N(),a=H(),i=V(),r=R();e.showConfirmButton||e.showDenyButton||e.showCancelButton||ct(n),G(n,e,"actions"),Pt(a,"confirm",e),Pt(i,"deny",e),Pt(r,"cancel",e),function(t,e,n,o){if(!o.buttonsStyling)return it([t,e,n],B.styled);at([t,e,n],B.styled),o.confirmButtonColor&&(t.style.backgroundColor=o.confirmButtonColor);o.denyButtonColor&&(e.style.backgroundColor=o.denyButtonColor);o.cancelButtonColor&&(n.style.backgroundColor=o.cancelButtonColor)}(a,i,r,e),e.reverseButtons&&(n.insertBefore(r,o),n.insertBefore(i,o),n.insertBefore(a,o)),Q(o,e.loaderHtml),G(o,e,"loader")};function Pt(t,e,n){dt(t,n["show".concat(d(e),"Button")],"inline-block"),Q(t,n["".concat(e,"ButtonText")]),t.setAttribute("aria-label",n["".concat(e,"ButtonAriaLabel")]),t.className=B[e],G(t,n,"".concat(e,"Button")),at(t,n["".concat(e,"ButtonClass")])}var Et=function(t,e){var n=E();if(n){!function(t,e){"string"==typeof e?t.style.background=e:e||at([document.documentElement,document.body],B["no-backdrop"])}(n,e.backdrop),!e.backdrop&&e.allowOutsideClick&&f('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),function(t,e){e in B?at(t,B[e]):(f('The "position" parameter is not valid, defaulting to "center"'),at(t,B.center))}(n,e.position),function(t,e){if(e&&"string"==typeof e){var n="grow-".concat(e);n in B&&at(t,B[n])}}(n,e.grow),G(n,e,"container");var o=document.body.getAttribute("data-swal2-queue-step");o&&(n.setAttribute("data-queue-step",o),document.body.removeAttribute("data-swal2-queue-step"))}},St={promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap},Ot=["input","file","range","select","radio","checkbox","textarea"],Tt=function(t){if(!Mt[t.input])return w('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(t.input,'"'));var e=qt(t.input),n=Mt[t.input](e,t);lt(n),setTimeout(function(){nt(n)})},Lt=function(t,e){var n=tt(z(),t);if(n)for(var o in function(t){for(var e=0;e<t.attributes.length;e++){var n=t.attributes[e].name;-1===["type","value","style"].indexOf(n)&&t.removeAttribute(n)}}(n),e)"range"===t&&"placeholder"===o||n.setAttribute(o,e[o])},jt=function(t){var e=qt(t.input);t.customClass&&at(e,t.customClass.input)},zt=function(t,e){t.placeholder&&!e.inputPlaceholder||(t.placeholder=e.inputPlaceholder)},Dt=function(t,e,n){if(n.inputLabel){t.id=B.input;var o=document.createElement("label"),a=B["input-label"];o.setAttribute("for",t.id),o.className=a,at(o,n.customClass.inputLabel),o.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",o)}},qt=function(t){var e=B[t]?B[t]:B.input;return rt(z(),e)},Mt={};Mt.text=Mt.email=Mt.password=Mt.number=Mt.tel=Mt.url=function(e,n){return"string"==typeof n.inputValue||"number"==typeof n.inputValue?e.value=n.inputValue:k(n.inputValue)||f('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(t(n.inputValue),'"')),Dt(e,e,n),zt(e,n),e.type=n.input,e},Mt.file=function(t,e){return Dt(t,t,e),zt(t,e),t},Mt.range=function(t,e){var n=t.querySelector("input"),o=t.querySelector("output");return n.value=e.inputValue,n.type=e.input,o.value=e.inputValue,Dt(n,t,e),t},Mt.select=function(t,e){if(t.textContent="",e.inputPlaceholder){var n=document.createElement("option");Q(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return Dt(t,t,e),t},Mt.radio=function(t){return t.textContent="",t},Mt.checkbox=function(t,e){var n=tt(z(),"checkbox");n.value=1,n.id=B.checkbox,n.checked=Boolean(e.inputValue);var o=t.querySelector("span");return Q(o,e.inputPlaceholder),t},Mt.textarea=function(t,e){t.value=e.inputValue,zt(t,e),Dt(t,t,e);var n=function(t){return parseInt(window.getComputedStyle(t).paddingLeft)+parseInt(window.getComputedStyle(t).paddingRight)};if("MutationObserver"in window){var o=parseInt(window.getComputedStyle(T()).width);new MutationObserver(function(){var e=t.offsetWidth+n(T())+n(z());T().style.width=e>o?"".concat(e,"px"):null}).observe(t,{attributes:!0,attributeFilter:["style"]})}return t};var It=function(t,e){var n=D();G(n,e,"htmlContainer"),e.html?(kt(e.html,n),lt(n,"block")):e.text?(n.textContent=e.text,lt(n,"block")):ct(n),function(t,e){var n=z(),o=St.innerParams.get(t),a=!o||e.input!==o.input;Ot.forEach(function(t){var o=B[t],i=rt(n,o);Lt(t,e.inputAttributes),i.className=o,a&&ct(i)}),e.input&&(a&&Tt(e),jt(e))}(t,e),G(z(),e,"content")},Ht=function(t,e){for(var n in P)e.icon!==n&&it(t,P[n]);at(t,P[e.icon]),Rt(t,e),Vt(),G(t,e,"icon")},Vt=function(){for(var t=T(),e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),o=0;o<n.length;o++)n[o].style.backgroundColor=e},Nt=function(t,e){if(t.textContent="",e.iconHtml)Q(t,Ut(e.iconHtml));else if("success"===e.icon)Q(t,'\n      <div class="swal2-success-circular-line-left"></div>\n      <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n      <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n      <div class="swal2-success-circular-line-right"></div>\n    ');else if("error"===e.icon)Q(t,'\n      <span class="swal2-x-mark">\n        <span class="swal2-x-mark-line-left"></span>\n        <span class="swal2-x-mark-line-right"></span>\n      </span>\n    ');else{Q(t,Ut({question:"?",warning:"!",info:"i"}[e.icon]))}},Rt=function(t,e){if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(var n=0,o=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];n<o.length;n++){ut(t,o[n],"backgroundColor",e.iconColor)}ut(t,".swal2-success-ring","borderColor",e.iconColor)}},Ut=function(t){return'<div class="'.concat(B["icon-content"],'">').concat(t,"</div>")},_t=[],Yt=function(){return E()&&E().getAttribute("data-queue-step")},Ft=function(t,e){var n=M();if(!e.progressSteps||0===e.progressSteps.length)return ct(n);lt(n),n.textContent="";var o=parseInt(void 0===e.currentProgressStep?Yt():e.currentProgressStep);o>=e.progressSteps.length&&f("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),e.progressSteps.forEach(function(t,a){var i=function(t){var e=document.createElement("li");return at(e,B["progress-step"]),Q(e,t),e}(t);if(n.appendChild(i),a===o&&at(i,B["active-progress-step"]),a!==e.progressSteps.length-1){var r=function(t){var e=document.createElement("li");return at(e,B["progress-step-line"]),t.progressStepsDistance&&(e.style.width=t.progressStepsDistance),e}(e);n.appendChild(r)}})},Zt=function(t,e){var n=_();G(n,e,"header"),Ft(0,e),function(t,e){var n=St.innerParams.get(t),o=L();n&&e.icon===n.icon?(Nt(o,e),Ht(o,e)):e.icon||e.iconHtml?e.icon&&-1===Object.keys(P).indexOf(e.icon)?(w('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(e.icon,'"')),ct(o)):(lt(o),Nt(o,e),Ht(o,e),at(o,e.showClass.icon)):ct(o)}(t,e),function(t,e){var n=q();if(!e.imageUrl)return ct(n);lt(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt),st(n,"width",e.imageWidth),st(n,"height",e.imageHeight),n.className=B.image,G(n,e,"image")}(0,e),function(t,e){var n=j();dt(n,e.title||e.titleText),e.title&&kt(e.title,n),e.titleText&&(n.innerText=e.titleText),G(n,e,"title")}(0,e),function(t,e){var n=Z();Q(n,e.closeButtonHtml),G(n,e,"closeButton"),dt(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel)}(0,e)},$t=function(t,e){t.className="".concat(B.popup," ").concat(pt(t)?e.showClass.popup:""),e.toast?(at([document.documentElement,document.body],B["toast-shown"]),at(t,B.toast)):at(t,B.modal),G(t,e,"popup"),"string"==typeof e.customClass&&at(t,e.customClass),e.icon&&at(t,B["icon-".concat(e.icon)])},Wt=function(t,e){!function(t,e){var n=E(),o=T();e.toast?(st(n,"width",e.width),o.style.width="100%"):st(o,"width",e.width),st(o,"padding",e.padding),e.background&&(o.style.background=e.background),$t(o,e)}(0,e),Et(0,e),Zt(t,e),It(t,e),Bt(0,e),function(t,e){var n=Y();dt(n,e.footer),e.footer&&kt(e.footer,n),G(n,e,"footer")}(0,e),"function"==typeof e.didRender?e.didRender(T()):"function"==typeof e.onRender&&e.onRender(T())},Kt=function(){return H()&&H().click()};var Xt=function(t){var e=T();e||_n.fire(),e=T();var n=U(),o=N();!t&&pt(H())&&(t=H()),lt(n),t&&(ct(t),o.setAttribute("data-button-to-replace",t.className)),o.parentNode.insertBefore(o,t),at([e,n],B.loading),lt(o),e.setAttribute("data-loading",!0),e.setAttribute("aria-busy",!0),e.focus()},Qt={},Jt=function(){return new Promise(function(t){var e=window.scrollX,n=window.scrollY;Qt.restoreFocusTimeout=setTimeout(function(){Qt.previousActiveElement&&Qt.previousActiveElement.focus?(Qt.previousActiveElement.focus(),Qt.previousActiveElement=null):document.body&&document.body.focus(),t()},100),void 0!==e&&void 0!==n&&window.scrollTo(e,n)})},Gt=function(){if(Qt.timeout)return function(){var t=F(),e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";var n=parseInt(window.getComputedStyle(t).width),o=parseInt(e/n*100);t.style.removeProperty("transition"),t.style.width="".concat(o,"%")}(),Qt.timeout.stop()},te=function(){if(Qt.timeout){var t=Qt.timeout.start();return ht(t),t}},ee=!1,ne={};var oe=function(t){for(var e=t.target;e&&e!==document;e=e.parentNode)for(var n in ne){var o=e.getAttribute(n);if(o)return void ne[n].fire({template:o})}},ae={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,onBeforeOpen:void 0,onOpen:void 0,willOpen:void 0,didOpen:void 0,onRender:void 0,didRender:void 0,onClose:void 0,onAfterClose:void 0,willClose:void 0,didClose:void 0,onDestroy:void 0,didDestroy:void 0,scrollbarPadding:!0},ie=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","onAfterClose","onClose","onDestroy","progressSteps","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],re={animation:'showClass" and "hideClass',onBeforeOpen:"willOpen",onOpen:"didOpen",onRender:"didRender",onClose:"willClose",onAfterClose:"didClose",onDestroy:"didDestroy"},se=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","heightAuto","keydownListenerCapture"],le=function(t){return Object.prototype.hasOwnProperty.call(ae,t)},ce=function(t){return re[t]},ue=function(t){le(t)||f('Unknown parameter "'.concat(t,'"'))},de=function(t){-1!==se.indexOf(t)&&f('The parameter "'.concat(t,'" is incompatible with toasts'))},pe=function(t){ce(t)&&g(t,ce(t))},me=function(t){for(var e in t)ue(e),t.toast&&de(e),pe(e)},fe=Object.freeze({isValidParameter:le,isUpdatableParameter:function(t){return-1!==ie.indexOf(t)},isDeprecatedParameter:ce,argsToParams:function(e){var n={};return"object"!==t(e[0])||C(e[0])?["title","html","icon"].forEach(function(o,a){var i=e[a];"string"==typeof i||C(i)?n[o]=i:void 0!==i&&w("Unexpected type of ".concat(o,'! Expected "string" or "Element", got ').concat(t(i)))}):a(n,e[0]),n},isVisible:function(){return pt(T())},clickConfirm:Kt,clickDeny:function(){return V()&&V().click()},clickCancel:function(){return R()&&R().click()},getContainer:E,getPopup:T,getTitle:j,getContent:z,getHtmlContainer:D,getImage:q,getIcon:L,getInputLabel:function(){return O(B["input-label"])},getCloseButton:Z,getActions:U,getConfirmButton:H,getDenyButton:V,getCancelButton:R,getLoader:N,getHeader:_,getFooter:Y,getTimerProgressBar:F,getFocusableElements:$,getValidationMessage:I,isLoading:function(){return T().hasAttribute("data-loading")},fire:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return l(this,e)},mixin:function(t){return function(n){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(m,n);var l,d,p=(l=m,d=s(),function(){var t,e=i(l);if(d){var n=i(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return c(this,t)});function m(){return e(this,m),p.apply(this,arguments)}return o(m,[{key:"_main",value:function(e,n){return u(i(m.prototype),"_main",this).call(this,e,a({},t,n))}}]),m}(this)},queue:function(t){var e=this;_t=t;var n=function(t,e){_t=[],t(e)},o=[];return new Promise(function(t){!function a(i,r){i<_t.length?(document.body.setAttribute("data-swal2-queue-step",i),e.fire(_t[i]).then(function(e){void 0!==e.value?(o.push(e.value),a(i+1,r)):n(t,{dismiss:e.dismiss})})):n(t,{value:o})}(0)})},getQueueStep:Yt,insertQueueStep:function(t,e){return e&&e<_t.length?_t.splice(e,0,t):_t.push(t)},deleteQueueStep:function(t){void 0!==_t[t]&&_t.splice(t,1)},showLoading:Xt,enableLoading:Xt,getTimerLeft:function(){return Qt.timeout&&Qt.timeout.getTimerLeft()},stopTimer:Gt,resumeTimer:te,toggleTimer:function(){var t=Qt.timeout;return t&&(t.running?Gt():te())},increaseTimer:function(t){if(Qt.timeout){var e=Qt.timeout.increase(t);return ht(e,!0),e}},isTimerRunning:function(){return Qt.timeout&&Qt.timeout.isRunning()},bindClickHandler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template";ne[t]=this,ee||(document.body.addEventListener("click",oe),ee=!0)}});function we(){if(St.innerParams.get(this)){var t=St.domCache.get(this);ct(t.loader);var e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?lt(e[0],"inline-block"):mt()&&ct(t.actions),it([t.popup,t.actions],B.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}}var he=function(){null===X.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(X.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(X.previousBodyPadding+function(){var t=document.createElement("div");t.className=B["scrollbar-measure"],document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e}(),"px"))},ge=function(){null!==X.previousBodyPadding&&(document.body.style.paddingRight="".concat(X.previousBodyPadding,"px"),X.previousBodyPadding=null)},be=function(){if(!navigator.userAgent.match(/(CriOS|FxiOS|EdgiOS|YaBrowser|UCBrowser)/i)){T().scrollHeight>window.innerHeight-44&&(E().style.paddingBottom="".concat(44,"px"))}},ye=function(){var t,e=E();e.ontouchstart=function(e){t=ve(e)},e.ontouchmove=function(e){t&&(e.preventDefault(),e.stopPropagation())}},ve=function(t){var e=t.target,n=E();return!ke(t)&&!xe(t)&&(e===n||!(ft(n)||"INPUT"===e.tagName||ft(z())&&z().contains(e)))},ke=function(t){return t.touches&&t.touches.length&&"stylus"===t.touches[0].touchType},xe=function(t){return t.touches&&t.touches.length>1},Ce=function(){if(J(document.body,B.iosfix)){var t=parseInt(document.body.style.top,10);it(document.body,B.iosfix),document.body.style.top="",document.body.scrollTop=-1*t}},Ae=function(){return!!window.MSInputMethodContext&&!!document.documentMode},Be=function(){var t=E(),e=T();t.style.removeProperty("align-items"),e.offsetTop<0&&(t.style.alignItems="flex-start")},Pe=function(){"undefined"!=typeof window&&Ae()&&window.removeEventListener("resize",Be)},Ee=function(){m(document.body.children).forEach(function(t){t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},Se={swalPromiseResolve:new WeakMap};function Oe(t,e,n,o){n?qe(t,o):(Jt().then(function(){return qe(t,o)}),Qt.keydownTarget.removeEventListener("keydown",Qt.keydownHandler,{capture:Qt.keydownListenerCapture}),Qt.keydownHandlerAdded=!1),e.parentNode&&!document.body.getAttribute("data-swal2-queue-step")&&e.parentNode.removeChild(e),W()&&(ge(),Ce(),Pe(),Ee()),it([document.documentElement,document.body],[B.shown,B["height-auto"],B["no-backdrop"],B["toast-shown"],B["toast-column"]])}function Te(t){var e=T();if(e){t=Le(t);var n=St.innerParams.get(this);if(n&&!J(e,n.hideClass.popup)){var o=Se.swalPromiseResolve.get(this);it(e,n.showClass.popup),at(e,n.hideClass.popup);var a=E();it(a,n.showClass.backdrop),at(a,n.hideClass.backdrop),je(this,e,n),o(t)}}}var Le=function(t){return void 0===t?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:a({isConfirmed:!1,isDenied:!1,isDismissed:!1},t)},je=function(t,e,n){var o=E(),a=At&&wt(e),i=n.onClose,r=n.onAfterClose,s=n.willClose,l=n.didClose;ze(e,s,i),a?De(t,e,o,l||r):Oe(t,o,K(),l||r)},ze=function(t,e,n){null!==e&&"function"==typeof e?e(t):null!==n&&"function"==typeof n&&n(t)},De=function(t,e,n,o){Qt.swalCloseEventFinishedCallback=Oe.bind(null,t,n,K(),o),e.addEventListener(At,function(t){t.target===e&&(Qt.swalCloseEventFinishedCallback(),delete Qt.swalCloseEventFinishedCallback)})},qe=function(t,e){setTimeout(function(){"function"==typeof e&&e(),t._destroy()})};function Me(t,e,n){var o=St.domCache.get(t);e.forEach(function(t){o[t].disabled=n})}function Ie(t,e){if(!t)return!1;if("radio"===t.type)for(var n=t.parentNode.parentNode.querySelectorAll("input"),o=0;o<n.length;o++)n[o].disabled=e;else t.disabled=e}var He=function(){function t(n,o){e(this,t),this.callback=n,this.remaining=o,this.running=!1,this.start()}return o(t,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date-this.started),this.remaining}},{key:"increase",value:function(t){var e=this.running;return e&&this.stop(),this.remaining+=t,e&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}]),t}(),Ve={email:function(t,e){return/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address")},url:function(t,e){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")}};function Ne(t){!function(t){t.inputValidator||Object.keys(Ve).forEach(function(e){t.input===e&&(t.inputValidator=Ve[e])})}(t),t.showLoaderOnConfirm&&!t.preConfirm&&f("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),t.animation=b(t.animation),function(t){(!t.target||"string"==typeof t.target&&!document.querySelector(t.target)||"string"!=typeof t.target&&!t.target.appendChild)&&(f('Target parameter is not valid, defaulting to "body"'),t.target="body")}(t),"string"==typeof t.title&&(t.title=t.title.split("\n").join("<br />")),vt(t)}var Re=["swal-title","swal-html","swal-footer"],Ue=function(e){var n={};return m(e.querySelectorAll("swal-param")).forEach(function(e){Ke(e,["name","value"]);var o=e.getAttribute("name"),a=e.getAttribute("value");"boolean"==typeof ae[o]&&"false"===a&&(a=!1),"object"===t(ae[o])&&(a=JSON.parse(a)),n[o]=a}),n},_e=function(t){var e={};return m(t.querySelectorAll("swal-button")).forEach(function(t){Ke(t,["type","color","aria-label"]);var n=t.getAttribute("type");e["".concat(n,"ButtonText")]=t.innerHTML,e["show".concat(d(n),"Button")]=!0,t.hasAttribute("color")&&(e["".concat(n,"ButtonColor")]=t.getAttribute("color")),t.hasAttribute("aria-label")&&(e["".concat(n,"ButtonAriaLabel")]=t.getAttribute("aria-label"))}),e},Ye=function(t){var e={},n=t.querySelector("swal-image");return n&&(Ke(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt"))),e},Fe=function(t){var e={},n=t.querySelector("swal-icon");return n&&(Ke(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},Ze=function(t){var e={},n=t.querySelector("swal-input");n&&(Ke(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));var o=t.querySelectorAll("swal-input-option");return o.length&&(e.inputOptions={},m(o).forEach(function(t){Ke(t,["value"]);var n=t.getAttribute("value"),o=t.innerHTML;e.inputOptions[n]=o})),e},$e=function(t,e){var n={};for(var o in e){var a=e[o],i=t.querySelector(a);i&&(Ke(i,[]),n[a.replace(/^swal-/,"")]=i.innerHTML)}return n},We=function(t){var e=Re.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);m(t.querySelectorAll("*")).forEach(function(n){if(n.parentNode===t){var o=n.tagName.toLowerCase();-1===e.indexOf(o)&&f("Unrecognized element <".concat(o,">"))}})},Ke=function(t,e){m(t.attributes).forEach(function(n){-1===e.indexOf(n.name)&&f(['Unrecognized attribute "'.concat(n.name,'" on <').concat(t.tagName.toLowerCase(),">."),"".concat(e.length?"Allowed attributes are: ".concat(e.join(", ")):"To set the value, use HTML within the element.")])})},Xe=function(t){var e=E(),n=T();"function"==typeof t.willOpen?t.willOpen(n):"function"==typeof t.onBeforeOpen&&t.onBeforeOpen(n);var o=window.getComputedStyle(document.body).overflowY;en(e,n,t),setTimeout(function(){Ge(e,n)},10),W()&&(tn(e,t.scrollbarPadding,o),m(document.body.children).forEach(function(t){t===E()||function(t,e){if("function"==typeof t.contains)return t.contains(e)}(t,E())||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden","true"))})),K()||Qt.previousActiveElement||(Qt.previousActiveElement=document.activeElement),Qe(n,t),it(e,B["no-transition"])},Qe=function(t,e){"function"==typeof e.didOpen?setTimeout(function(){return e.didOpen(t)}):"function"==typeof e.onOpen&&setTimeout(function(){return e.onOpen(t)})},Je=function t(e){var n=T();if(e.target===n){var o=E();n.removeEventListener(At,t),o.style.overflowY="auto"}},Ge=function(t,e){At&&wt(e)?(t.style.overflowY="hidden",e.addEventListener(At,Je)):t.style.overflowY="auto"},tn=function(t,e,n){!function(){if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!J(document.body,B.iosfix)){var t=document.body.scrollTop;document.body.style.top="".concat(-1*t,"px"),at(document.body,B.iosfix),ye(),be()}}(),"undefined"!=typeof window&&Ae()&&(Be(),window.addEventListener("resize",Be)),e&&"hidden"!==n&&he(),setTimeout(function(){t.scrollTop=0})},en=function(t,e,n){at(t,n.showClass.backdrop),e.style.setProperty("opacity","0","important"),lt(e),setTimeout(function(){at(e,n.showClass.popup),e.style.removeProperty("opacity")},10),at([document.documentElement,document.body],B.shown),n.heightAuto&&n.backdrop&&!n.toast&&at([document.documentElement,document.body],B["height-auto"])},nn=function(t){return t.checked?1:0},on=function(t){return t.checked?t.value:null},an=function(t){return t.files.length?null!==t.getAttribute("multiple")?t.files:t.files[0]:null},rn=function(e,n){var o=z(),a=function(t){return ln[n.input](o,cn(t),n)};y(n.inputOptions)||k(n.inputOptions)?(Xt(H()),v(n.inputOptions).then(function(t){e.hideLoading(),a(t)})):"object"===t(n.inputOptions)?a(n.inputOptions):w("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(t(n.inputOptions)))},sn=function(t,e){var n=t.getInput();ct(n),v(e.inputValue).then(function(o){n.value="number"===e.input?parseFloat(o)||0:"".concat(o),lt(n),n.focus(),t.hideLoading()}).catch(function(e){w("Error in inputValue promise: ".concat(e)),n.value="",lt(n),n.focus(),t.hideLoading()})},ln={select:function(t,e,n){var o=rt(t,B.select),a=function(t,e,o){var a=document.createElement("option");a.value=o,Q(a,e),a.selected=un(o,n.inputValue),t.appendChild(a)};e.forEach(function(t){var e=t[0],n=t[1];if(Array.isArray(n)){var i=document.createElement("optgroup");i.label=e,i.disabled=!1,o.appendChild(i),n.forEach(function(t){return a(i,t[1],t[0])})}else a(o,n,e)}),o.focus()},radio:function(t,e,n){var o=rt(t,B.radio);e.forEach(function(t){var e=t[0],a=t[1],i=document.createElement("input"),r=document.createElement("label");i.type="radio",i.name=B.radio,i.value=e,un(e,n.inputValue)&&(i.checked=!0);var s=document.createElement("span");Q(s,a),s.className=B.label,r.appendChild(i),r.appendChild(s),o.appendChild(r)});var a=o.querySelectorAll("input");a.length&&a[0].focus()}},cn=function e(n){var o=[];return"undefined"!=typeof Map&&n instanceof Map?n.forEach(function(n,a){var i=n;"object"===t(i)&&(i=e(i)),o.push([a,i])}):Object.keys(n).forEach(function(a){var i=n[a];"object"===t(i)&&(i=e(i)),o.push([a,i])}),o},un=function(t,e){return e&&e.toString()===t.toString()},dn=function(t,e,n){var o=function(t,e){var n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return nn(n);case"radio":return on(n);case"file":return an(n);default:return e.inputAutoTrim?n.value.trim():n.value}}(t,e);e.inputValidator?pn(t,e,o):t.getInput().checkValidity()?"deny"===n?mn(t,e,o):wn(t,e,o):(t.enableButtons(),t.showValidationMessage(e.validationMessage))},pn=function(t,e,n){t.disableInput(),Promise.resolve().then(function(){return v(e.inputValidator(n,e.validationMessage))}).then(function(o){t.enableButtons(),t.enableInput(),o?t.showValidationMessage(o):wn(t,e,n)})},mn=function(t,e,n){(e.showLoaderOnDeny&&Xt(V()),e.preDeny)?Promise.resolve().then(function(){return v(e.preDeny(n,e.validationMessage))}).then(function(e){!1===e?t.hideLoading():t.closePopup({isDenied:!0,value:void 0===e?n:e})}):t.closePopup({isDenied:!0,value:n})},fn=function(t,e){t.closePopup({isConfirmed:!0,value:e})},wn=function(t,e,n){(e.showLoaderOnConfirm&&Xt(),e.preConfirm)?(t.resetValidationMessage(),Promise.resolve().then(function(){return v(e.preConfirm(n,e.validationMessage))}).then(function(e){pt(I())||!1===e?t.hideLoading():fn(t,void 0===e?n:e)})):fn(t,n)},hn=function(t,e,n){var o=$();if(o.length)return(e+=n)===o.length?e=0:-1===e&&(e=o.length-1),o[e].focus();T().focus()},gn=["ArrowRight","ArrowDown","Right","Down"],bn=["ArrowLeft","ArrowUp","Left","Up"],yn=["Escape","Esc"],vn=function(t,e,n){var o=St.innerParams.get(t);o.stopKeydownPropagation&&e.stopPropagation(),"Enter"===e.key?kn(t,e,o):"Tab"===e.key?xn(e,o):-1!==[].concat(gn,bn).indexOf(e.key)?Cn(e.key):-1!==yn.indexOf(e.key)&&An(e,o,n)},kn=function(t,e,n){if(!e.isComposing&&e.target&&t.getInput()&&e.target.outerHTML===t.getInput().outerHTML){if(-1!==["textarea","file"].indexOf(n.input))return;Kt(),e.preventDefault()}},xn=function(t,e){for(var n=t.target,o=$(),a=-1,i=0;i<o.length;i++)if(n===o[i]){a=i;break}t.shiftKey?hn(0,a,-1):hn(0,a,1),t.stopPropagation(),t.preventDefault()},Cn=function(t){if(-1!==[H(),V(),R()].indexOf(document.activeElement)){var e=-1!==gn.indexOf(t)?"nextElementSibling":"previousElementSibling",n=document.activeElement[e];n&&n.focus()}},An=function(t,e,n){b(e.allowEscapeKey)&&(t.preventDefault(),n(x.esc))},Bn=function(t,e,n){e.popup.onclick=function(){var e=St.innerParams.get(t);e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton||e.timer||e.input||n(x.close)}},Pn=!1,En=function(t){t.popup.onmousedown=function(){t.container.onmouseup=function(e){t.container.onmouseup=void 0,e.target===t.container&&(Pn=!0)}}},Sn=function(t){t.container.onmousedown=function(){t.popup.onmouseup=function(e){t.popup.onmouseup=void 0,(e.target===t.popup||t.popup.contains(e.target))&&(Pn=!0)}}},On=function(t,e,n){e.container.onclick=function(o){var a=St.innerParams.get(t);Pn?Pn=!1:o.target===e.container&&b(a.allowOutsideClick)&&n(x.backdrop)}};var Tn=function(t,e){var n=function(t){var e="string"==typeof t.template?document.querySelector(t.template):t.template;if(!e)return{};var n=e.content||e;return We(n),a(Ue(n),_e(n),Ye(n),Fe(n),Ze(n),$e(n,Re))}(t),o=a({},ae.showClass,e.showClass,n.showClass,t.showClass),i=a({},ae.hideClass,e.hideClass,n.hideClass,t.hideClass),r=a({},ae,e,n,t);return r.showClass=o,r.hideClass=i,!1===t.animation&&(r.showClass={popup:"swal2-noanimation",backdrop:"swal2-noanimation"},r.hideClass={}),r},Ln=function(t,e,n){return new Promise(function(o){var a=function(e){t.closePopup({isDismissed:!0,dismiss:e})};Se.swalPromiseResolve.set(t,o),e.confirmButton.onclick=function(){return function(t,e){t.disableButtons(),e.input?dn(t,e,"confirm"):wn(t,e,!0)}(t,n)},e.denyButton.onclick=function(){return function(t,e){t.disableButtons(),e.returnInputValueOnDeny?dn(t,e,"deny"):mn(t,e,!1)}(t,n)},e.cancelButton.onclick=function(){return function(t,e){t.disableButtons(),e(x.cancel)}(t,a)},e.closeButton.onclick=function(){return a(x.close)},function(t,e,n){St.innerParams.get(t).toast?Bn(t,e,n):(En(e),Sn(e),On(t,e,n))}(t,e,a),function(t,e,n,o){e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1),n.toast||(e.keydownHandler=function(e){return vn(t,e,o)},e.keydownTarget=n.keydownListenerCapture?window:T(),e.keydownListenerCapture=n.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)}(t,Qt,n,a),n.toast&&(n.input||n.footer||n.showCloseButton)?at(document.body,B["toast-column"]):it(document.body,B["toast-column"]),function(t,e){"select"===e.input||"radio"===e.input?rn(t,e):-1!==["text","email","number","tel","textarea"].indexOf(e.input)&&(y(e.inputValue)||k(e.inputValue))&&sn(t,e)}(t,n),Xe(n),zn(Qt,n,a),Dn(e,n),setTimeout(function(){e.container.scrollTop=0})})},jn=function(t){var e={popup:T(),container:E(),content:z(),actions:U(),confirmButton:H(),denyButton:V(),cancelButton:R(),loader:N(),closeButton:Z(),validationMessage:I(),progressSteps:M()};return St.domCache.set(t,e),e},zn=function(t,e,n){var o=F();ct(o),e.timer&&(t.timeout=new He(function(){n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(lt(o),setTimeout(function(){t.timeout&&t.timeout.running&&ht(e.timer)})))},Dn=function(t,e){if(!e.toast)return b(e.allowEnterKey)?void(qn(t,e)||hn(0,-1,1)):Mn()},qn=function(t,e){return e.focusDeny&&pt(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&pt(t.cancelButton)?(t.cancelButton.focus(),!0):!(!e.focusConfirm||!pt(t.confirmButton))&&(t.confirmButton.focus(),!0)},Mn=function(){document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};var In,Hn=function(t){"function"==typeof t.didDestroy?t.didDestroy():"function"==typeof t.onDestroy&&t.onDestroy()},Vn=function(t){delete t.params,delete Qt.keydownHandler,delete Qt.keydownTarget,Nn(St),Nn(Se)},Nn=function(t){for(var e in t)t[e]=new WeakMap},Rn=Object.freeze({hideLoading:we,disableLoading:we,getInput:function(t){var e=St.innerParams.get(t||this),n=St.domCache.get(t||this);return n?tt(n.content,e.input):null},close:Te,closePopup:Te,closeModal:Te,closeToast:Te,enableButtons:function(){Me(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function(){Me(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function(){return Ie(this.getInput(),!1)},disableInput:function(){return Ie(this.getInput(),!0)},showValidationMessage:function(t){var e=St.domCache.get(this),n=St.innerParams.get(this);Q(e.validationMessage,t),e.validationMessage.className=B["validation-message"],n.customClass&&n.customClass.validationMessage&&at(e.validationMessage,n.customClass.validationMessage),lt(e.validationMessage);var o=this.getInput();o&&(o.setAttribute("aria-invalid",!0),o.setAttribute("aria-describedBy",B["validation-message"]),nt(o),at(o,B.inputerror))},resetValidationMessage:function(){var t=St.domCache.get(this);t.validationMessage&&ct(t.validationMessage);var e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedBy"),it(e,B.inputerror))},getProgressSteps:function(){return St.domCache.get(this).progressSteps},_main:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};me(a({},e,t)),Qt.currentInstance&&Qt.currentInstance._destroy(),Qt.currentInstance=this;var n=Tn(t,e);Ne(n),Object.freeze(n),Qt.timeout&&(Qt.timeout.stop(),delete Qt.timeout),clearTimeout(Qt.restoreFocusTimeout);var o=jn(this);return Wt(this,n),St.innerParams.set(this,n),Ln(this,o,n)},update:function(t){var e=T(),n=St.innerParams.get(this);if(!e||J(e,n.hideClass.popup))return f("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");var o={};Object.keys(t).forEach(function(e){_n.isUpdatableParameter(e)?o[e]=t[e]:f('Invalid parameter to update: "'.concat(e,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))});var i=a({},n,o);Wt(this,i),St.innerParams.set(this,i),Object.defineProperties(this,{params:{value:a({},this.params,t),writable:!1,enumerable:!0}})},_destroy:function(){var t=St.domCache.get(this),e=St.innerParams.get(this);e&&(t.popup&&Qt.swalCloseEventFinishedCallback&&(Qt.swalCloseEventFinishedCallback(),delete Qt.swalCloseEventFinishedCallback),Qt.deferDisposalTimer&&(clearTimeout(Qt.deferDisposalTimer),delete Qt.deferDisposalTimer),Hn(e),Vn(this))}}),Un=function(){function t(){if(e(this,t),"undefined"!=typeof window){"undefined"==typeof Promise&&w("This package requires a Promise library, please include a shim to enable it in this browser (See: https://github.com/sweetalert2/sweetalert2/wiki/Migration-from-SweetAlert-to-SweetAlert2#1-ie-support)"),In=this;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var i=Object.freeze(this.constructor.argsToParams(o));Object.defineProperties(this,{params:{value:i,writable:!1,enumerable:!0,configurable:!0}});var r=this._main(this.params);St.promise.set(this,r)}}return o(t,[{key:"then",value:function(t){return St.promise.get(this).then(t)}},{key:"finally",value:function(t){return St.promise.get(this).finally(t)}}]),t}();a(Un.prototype,Rn),a(Un,fe),Object.keys(Rn).forEach(function(t){Un[t]=function(){var e;if(In)return(e=In)[t].apply(e,arguments)}}),Un.DismissReason=x,Un.version="10.15.5";var _n=Un;return _n.default=_n,_n}),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch(t){n.innerText=e}}(document,'.swal2-popup.swal2-toast{flex-direction:row;align-items:center;width:auto;padding:.625em;overflow-y:hidden;background:#fff;box-shadow:0 0 .625em #d9d9d9}.swal2-popup.swal2-toast .swal2-header{flex-direction:row;padding:0}.swal2-popup.swal2-toast .swal2-title{flex-grow:1;justify-content:flex-start;margin:0 .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{position:static;width:.8em;height:.8em;line-height:.8}.swal2-popup.swal2-toast .swal2-content{justify-content:flex-start;padding:0;font-size:1em}.swal2-popup.swal2-toast .swal2-icon{width:2em;min-width:2em;height:2em;margin:0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{font-size:.25em}}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{flex-basis:auto!important;width:auto;height:auto;margin:0 .3125em;padding:0}.swal2-popup.swal2-toast .swal2-styled{margin:.125em .3125em;padding:.3125em .625em;font-size:1em}.swal2-popup.swal2-toast .swal2-styled:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(100,150,200,.5)}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:flex;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;flex-direction:row;align-items:center;justify-content:center;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-top{align-items:flex-start}.swal2-container.swal2-top-left,.swal2-container.swal2-top-start{align-items:flex-start;justify-content:flex-start}.swal2-container.swal2-top-end,.swal2-container.swal2-top-right{align-items:flex-start;justify-content:flex-end}.swal2-container.swal2-center{align-items:center}.swal2-container.swal2-center-left,.swal2-container.swal2-center-start{align-items:center;justify-content:flex-start}.swal2-container.swal2-center-end,.swal2-container.swal2-center-right{align-items:center;justify-content:flex-end}.swal2-container.swal2-bottom{align-items:flex-end}.swal2-container.swal2-bottom-left,.swal2-container.swal2-bottom-start{align-items:flex-end;justify-content:flex-start}.swal2-container.swal2-bottom-end,.swal2-container.swal2-bottom-right{align-items:flex-end;justify-content:flex-end}.swal2-container.swal2-bottom-end>:first-child,.swal2-container.swal2-bottom-left>:first-child,.swal2-container.swal2-bottom-right>:first-child,.swal2-container.swal2-bottom-start>:first-child,.swal2-container.swal2-bottom>:first-child{margin-top:auto}.swal2-container.swal2-grow-fullscreen>.swal2-modal{display:flex!important;flex:1;align-self:stretch;justify-content:center}.swal2-container.swal2-grow-row>.swal2-modal{display:flex!important;flex:1;align-content:center;justify-content:center}.swal2-container.swal2-grow-column{flex:1;flex-direction:column}.swal2-container.swal2-grow-column.swal2-bottom,.swal2-container.swal2-grow-column.swal2-center,.swal2-container.swal2-grow-column.swal2-top{align-items:center}.swal2-container.swal2-grow-column.swal2-bottom-left,.swal2-container.swal2-grow-column.swal2-bottom-start,.swal2-container.swal2-grow-column.swal2-center-left,.swal2-container.swal2-grow-column.swal2-center-start,.swal2-container.swal2-grow-column.swal2-top-left,.swal2-container.swal2-grow-column.swal2-top-start{align-items:flex-start}.swal2-container.swal2-grow-column.swal2-bottom-end,.swal2-container.swal2-grow-column.swal2-bottom-right,.swal2-container.swal2-grow-column.swal2-center-end,.swal2-container.swal2-grow-column.swal2-center-right,.swal2-container.swal2-grow-column.swal2-top-end,.swal2-container.swal2-grow-column.swal2-top-right{align-items:flex-end}.swal2-container.swal2-grow-column>.swal2-modal{display:flex!important;flex:1;align-content:center;justify-content:center}.swal2-container.swal2-no-transition{transition:none!important}.swal2-container:not(.swal2-top):not(.swal2-top-start):not(.swal2-top-end):not(.swal2-top-left):not(.swal2-top-right):not(.swal2-center-start):not(.swal2-center-end):not(.swal2-center-left):not(.swal2-center-right):not(.swal2-bottom):not(.swal2-bottom-start):not(.swal2-bottom-end):not(.swal2-bottom-left):not(.swal2-bottom-right):not(.swal2-grow-fullscreen)>.swal2-modal{margin:auto}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-container .swal2-modal{margin:0!important}}.swal2-popup{display:none;position:relative;box-sizing:border-box;flex-direction:column;justify-content:center;width:32em;max-width:100%;padding:1.25em;border:none;border-radius:5px;background:#fff;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-header{display:flex;flex-direction:column;align-items:center;padding:0 1.8em}.swal2-title{position:relative;max-width:100%;margin:0 0 .4em;padding:0;color:#595959;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:100%;margin:1.25em auto 0;padding:0 1.6em}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;box-shadow:none;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#2778c4;color:#fff;font-size:1.0625em}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#d14529;color:#fff;font-size:1.0625em}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#757575;color:#fff;font-size:1.0625em}.swal2-styled:focus{outline:0;box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1.25em 0 0;padding:1em 0 0;border-top:1px solid #eee;color:#545454;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;height:.25em;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:1.25em auto}.swal2-close{position:absolute;z-index:2;top:0;right:0;align-items:center;justify-content:center;width:1.2em;height:1.2em;padding:0;overflow:hidden;transition:color .1s ease-out;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-size:2.5em;line-height:1.2;cursor:pointer}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-content{z-index:1;justify-content:center;margin:0;padding:0 1.6em;color:#545454;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em auto}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:100%;transition:border-color .3s,box-shadow .3s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06);color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em auto;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-input[type=number]{max-width:10em}.swal2-file{background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto}.swal2-validation-message{display:none;align-items:center;justify-content:center;margin:0 -2.7em;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:1.25em auto 1.875em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:0 0 1.25em;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{right:auto;left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@supports (-ms-accelerator:true){.swal2-range input{width:100%!important}.swal2-range output{display:none}}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-range input{width:100%!important}.swal2-range output{display:none}}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{top:auto;right:auto;bottom:auto;left:auto;max-width:calc(100% - .625em * 2);background-color:transparent!important}body.swal2-no-backdrop .swal2-container>.swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}body.swal2-no-backdrop .swal2-container.swal2-top{top:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-top-left,body.swal2-no-backdrop .swal2-container.swal2-top-start{top:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-top-end,body.swal2-no-backdrop .swal2-container.swal2-top-right{top:0;right:0}body.swal2-no-backdrop .swal2-container.swal2-center{top:50%;left:50%;transform:translate(-50%,-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-left,body.swal2-no-backdrop .swal2-container.swal2-center-start{top:50%;left:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-end,body.swal2-no-backdrop .swal2-container.swal2-center-right{top:50%;right:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom{bottom:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom-left,body.swal2-no-backdrop .swal2-container.swal2-bottom-start{bottom:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-bottom-end,body.swal2-no-backdrop .swal2-container.swal2-bottom-right{right:0;bottom:0}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{background-color:transparent}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}body.swal2-toast-column .swal2-toast{flex-direction:column;align-items:stretch}body.swal2-toast-column .swal2-toast .swal2-actions{flex:1;align-self:stretch;height:2.2em;margin-top:.3125em}body.swal2-toast-column .swal2-toast .swal2-loading{justify-content:center}body.swal2-toast-column .swal2-toast .swal2-input{height:2em;margin:.3125em auto;font-size:1em}body.swal2-toast-column .swal2-toast .swal2-validation-message{font-size:1em}');
},{}],"FN0E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RecordingToggle=void 0;var e=c(require("micromodal")),o=c(require("wavesurfer.js")),t=c(require("wavesurfer.js/src/plugin/microphone")),i=require("@aws-sdk/client-cognito-identity"),r=require("@aws-sdk/client-s3"),n=require("@aws-sdk/credential-provider-cognito-identity"),a=c(require("mime")),s=require("uuid"),l=c(require("sweetalert2")),d=require("howler");function c(e){return e&&e.__esModule?e:{default:e}}const u="us-east-1",g="hear-before-nyc";let m,h,p,b;const v=(e,o,t,i)=>{o.disabled=!0,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(console.log("getUserMedia supported."),navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{m=r;let n=[];const s=new MediaRecorder(r);e.onclick=(()=>{console.log("clicked"),e.classList.contains("clicked")?(console.log("stop recording"),s.stop(),e.classList.remove("clicked"),i.microphone.stop(),e.innerText="Record Again",e.classList.remove("clicked"),o.disabled=!1):(console.log("begin recording"),s.start(),e.classList.add("clicked"),e.innerText="Stop Recording",o.disabled=!0,i.microphone.start())}),s.ondataavailable=(e=>{n.push(e.data)}),s.onstop=(()=>{b=a.default.extension(s.mimeType),p=new Blob(n),n=[],t.disabled=!1;const e=new FileReader;e.readAsDataURL(p),e.onloadend=(()=>{h=e.result,i.load(h),document.querySelector("#modal-1 > div > div > footer > textarea").style.display="block"})})}).catch(e=>{console.log(`The following getUserMedia error occurred: ${e}`)})):alert("You may need to update to the latest version of your browser!")};class f{constructor(e){this.audioNodes=e}onAdd(d){const c=this,f=document.querySelector("#modal-1 > div > div > footer > button:nth-child(1)"),y=document.querySelector("#modal-1 > div > div > footer > button:nth-child(2)"),w=document.querySelector("#file-input"),_=document.querySelector("#modal-1 > div > div > footer > button:nth-child(3)"),k=document.querySelector("#modal-1 > div > div > footer > textarea");let q,x="",C="";_.onclick=(()=>{console.log("clicked"),console.log({lat:x,lng:C,comments:k.value}),L(p,`${(0,s.v4)()}.${b}`,{lat:x.toString(),lng:C.toString(),comments:k.value}),q.empty(),_.disabled=!0,y.disabled=!0});const R=l.default.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3}),S=new r.S3Client({region:u,credentials:(0,n.fromCognitoIdentityPool)({client:new i.CognitoIdentityClient({region:u}),identityPoolId:"us-east-1:e0492f61-36b6-4f08-822d-b122d0947a16"})}),L=async(e,o,t)=>{const i={Bucket:g,Key:`uploads/${o}`,Body:e,Metadata:t};try{await S.send(new r.PutObjectCommand(i)),console.log("success"),R.fire({icon:"success",title:"File Uploaded!"})}catch(n){console.log("There was an error uploading file: ",n.message)}};return w.onchange=(e=>{if(w.files.length>0){p=w.files[0],b=a.default.extension(p.type);const e=new FileReader;e.readAsDataURL(p),e.onloadend=(()=>{h=e.result,q.load(h),y.disabled=!1,_.disabled=!1,document.querySelector("#modal-1 > div > div > footer > textarea").style.display="block"})}}),this._btn=document.createElement("button"),this._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-rec",this._btn.type="button",this._btn["aria-label"]="Toggle Recording",this._btn.onclick=(()=>{c._btn.classList.contains("recording")?e.default.close("modal-1"):(c._btn.classList.toggle("recording"),this.audioNodes.forEach(e=>e.mute(!0)),navigator.geolocation.getCurrentPosition(e=>{console.log("recording got position"),x=e.coords.latitude,C=e.coords.longitude}),e.default.show("modal-1",{onClose:()=>{c._btn.classList.toggle("recording"),q.destroy(),m.getTracks().forEach(e=>{e.stop()}),_.disabled=!0,this.audioNodes.forEach(e=>e.mute(!1))}}),q=o.default.create({container:"#waveform",waveColor:"#bd6868",progressColor:"#8f4c4c",barWidth:3,barRadius:3,barGap:3,interact:!1,cursorWidth:0,plugins:[t.default.create()]}),y.onclick=(()=>{console.log("playing"),q.play()}),v(f,y,_,q))}),this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl-group mapboxgl-ctrl",this._container.appendChild(this._btn),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}}exports.RecordingToggle=f;
},{"micromodal":"NH1O","wavesurfer.js":"EQRj","wavesurfer.js/src/plugin/microphone":"ewKB","@aws-sdk/client-cognito-identity":"crYF","@aws-sdk/client-s3":"aKF0","@aws-sdk/credential-provider-cognito-identity":"DAbC","mime":"hVj4","uuid":"gV9a","sweetalert2":"Y8u2","howler":"UTMB"}],"Focm":[function(require,module,exports) {
"use strict";var e=l(require("mapbox-gl")),o=require("@turf/helpers"),t=l(require("@turf/distance")),r=require("howler"),n=l(require("micromodal")),a=require("./recording");function l(e){return e&&e.__esModule?e:{default:e}}n.default.init(),r.Howl.prototype.changeSrc=function(e){this.unload(),this._src=e,this.load()};const i=10,s=[];let c;window.audioNodes=s;for(let b=0;b<10;b++){const e=new r.Howl({src:["https://hear-before-nyc.s3.amazonaws.com/sounds/1sSilent.mp3"],autoplay:!0,loop:!1,volume:0});s.push(e)}const d=(0,o.point)([-73.9563,40.75617]);let p=1e-5;const u=e=>1-(1-e**2)**.5,m=(e,o)=>u((Math.min(e,o)-o)/-o),y=[],g=700;for(let b=-.1;b<.1;b+=.002)y.push(Math.abs(b));e.default.accessToken="pk.eyJ1IjoiaW1hbmRlbCIsImEiOiJjankxdjU4ODMwYTViM21teGFpenpsbmd1In0.IN9K9rp8-I5pTbYTmwRJ4Q";const f=new e.default.Map({container:"map",style:"mapbox://styles/imandel/ckltxkila2vov17lkz1b5kjym",center:[-73.946382,40.724478],zoom:12}),h=new e.default.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,compact:!0}),k=e=>{const r=f.queryRenderedFeatures({layers:["audio-samples"]});return r.sort((r,n)=>{return(0,t.default)((0,o.point)([r.properties.lng,r.properties.lat]),e)-(0,t.default)((0,o.point)([n.properties.lng,n.properties.lat]),e)}),r},w=e=>{const n=k(e).slice(0,10);let a=null,l=null;s.forEach((i,c)=>{const d=`https://hear-before-nyc.s3.amazonaws.com/${n[c].properties.filename}`,p=(0,t.default)(e,(0,o.point)([n[c].properties.lng,n[c].properties.lat]));i._src!==d&&(i=new r.Howl({src:[d],autoplay:!0,loop:!1,volume:m(p,.07),onend(){setTimeout(()=>{i.play()},2e3)}}),(null===a||p<l)&&(l=p,a=i),s[c]=i),i.volume(m(p,.07))})};h.on("geolocate",e=>{const{latitude:t,longitude:r}=e.coords;c=(0,o.point)([r,t]),w(c)}),f.addControl(h),f.addControl(new a.RecordingToggle(s),"top-right"),f.on("load",()=>{h._geolocateButton.onclick=(()=>{s.forEach(e=>e.play())}),f.addSource("pointSource",{type:"geojson",data:d}),f.addLayer({id:"testPoint",type:"circle",source:"pointSource",paint:{"circle-radius":7,"circle-opacity":1,"circle-color":"#333"}})}),document.addEventListener("keydown",e=>{let t=!1;if(65==e.keyCode?(d.geometry.coordinates[0]-=p,t=!0):68==e.keyCode?(d.geometry.coordinates[0]+=p,t=!0):87==e.keyCode?(d.geometry.coordinates[1]+=p,t=!0):83==e.keyCode?(d.geometry.coordinates[1]-=p,t=!0):189==e.keyCode?(p-=5e-5,console.log(p)):187==e.keyCode&&(p+=5e-5,console.log(p)),t){const e=d.geometry.coordinates[1],t=d.geometry.coordinates[0],r=(0,o.point)([t,e]);f.getSource("pointSource").setData(d),w(r)}});
},{"mapbox-gl":"Kb8R","@turf/helpers":"NWI1","@turf/distance":"YJsm","howler":"UTMB","micromodal":"NH1O","./recording":"FN0E"}]},{},["Focm"], null)
//# sourceMappingURL=/hear-before.796d0ab6.js.map